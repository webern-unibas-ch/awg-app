<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>awg-app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/Readthedocs.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">awg-app documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>ConversionService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/services/conversion-service/conversion.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>The Conversion service.</p>
<p>It handles the conversion of the HTTP response data (JSON)
from the given (SALSAH) API into a form that can be
displayed via HTML.</p>
<p>Provided in: <code>root</code>.</p>

            </p>

            <p class="comment">
                <h3>Extends</h3>
            </p>
            <p class="comment">
                        <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
            </p>


            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#filteredOut">filteredOut</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#http">http</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#http">http</a>
                            </li>
                            <li>
                                <a href="#httpGetUrl">httpGetUrl</a>
                            </li>
                            <li>
                                <a href="#serviceName">serviceName</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_addHtmlValues">_addHtmlValues</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_adjustBiblioLink">_adjustBiblioLink</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertDateValue">_convertDateValue</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertGeoValues">_convertGeoValues</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertGUISpecificProps">_convertGUISpecificProps</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertHlistValues">_convertHlistValues</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertLinkValue">_convertLinkValue</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertRichtextValue">_convertRichtextValue</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertSelectionValues">_convertSelectionValues</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_convertStandoffToHTML">_convertStandoffToHTML</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_distinctSubjects">_distinctSubjects</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_getAdditionalInfoFromApi">_getAdditionalInfoFromApi</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_getNodeIdFromAttributes">_getNodeIdFromAttributes</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_groupByRestype">_groupByRestype</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_prepareAccessibleResource">_prepareAccessibleResource</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_prepareResourceDetailImage">_prepareResourceDetailImage</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_prepareResourceDetailIncomingLinks">_prepareResourceDetailIncomingLinks</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_prepareResourceDetailProperties">_prepareResourceDetailProperties</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_prepareRestrictedResource">_prepareRestrictedResource</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_replaceParagraphTags">_replaceParagraphTags</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_replaceSalsahLink">_replaceSalsahLink</a>
                            </li>
                            <li>
                                <a href="#convertFullTextSearchResults">convertFullTextSearchResults</a>
                            </li>
                            <li>
                                <a href="#convertObjectProperties">convertObjectProperties</a>
                            </li>
                            <li>
                                <a href="#convertResourceData">convertResourceData</a>
                            </li>
                            <li>
                                <a href="#prepareFullTextSearchResultText">prepareFullTextSearchResultText</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_handleRequestError">_handleRequestError</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_httpGet">_httpGet</a>
                            </li>
                            <li>
                                <a href="#getApiResponse">getApiResponse</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(http: <a href="https://angular.io/api/common/http/HttpClient" target="_blank">HttpClient</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="71" class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:71</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Constructor of the ConversionService.</p>
<p>It declares a public <a href="HttpClient">HttpClient</a> instance
with a super reference to base class (ApiService)
and a private <a href="../injectables/StorageService.html">StorageService</a> instance.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>http</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/common/http/HttpClient" target="_blank" >HttpClient</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <code><p>Instance of the HttpClient.</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_addHtmlValues"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _addHtmlValues
                        </b>
                        <a href="#_addHtmlValues"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_addHtmlValues(prop: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, url?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="484"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:484</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _addHtmlValues.</p>
<p>It adds an &#39;toHtml&#39; property to the props array
of an accessible resource to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>prop</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given property.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>url</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>A given optional url.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_adjustBiblioLink"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _adjustBiblioLink
                        </b>
                        <a href="#_adjustBiblioLink"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_adjustBiblioLink(str: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="817"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:817</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _adjustBiblioLink.</p>
<p>It finds internal links in the online-access property
of a bibliography link and adjusts the values
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>str</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given link string.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <b>Example :</b>
                        <div>
                            <pre class="line-numbers"><code class="language-html">str = &amp;#39;(PDF) &lt;a href=&quot;http://www.example.com/myPdf.pdf&amp;#39;&quot;&gt;http://www.example.com/myPdf.pdf&amp;#39;&lt;/a&gt;</code></pre>
                        </div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The adjusted bibliography link.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertDateValue"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertDateValue
                        </b>
                        <a href="#_convertDateValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertDateValue(dateObj: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="545"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:545</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertDateValue.</p>
<p>It converts date values of an accessible resource
to be displayed via HTML.</p>
<p>Conversion goes from Julian Day Number (JDN)
to Gregorian Calendar.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>dateObj</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given date object.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted date string.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertGeoValues"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertGeoValues
                        </b>
                        <a href="#_convertGeoValues"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertGeoValues(values: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="561"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:561</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertGeoValues.</p>
<p>It converts geonames values of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>values</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given property values.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>string[]</code>

                    </div>
                    <div class="io-description">
                        <p>The converted geo names array.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertGUISpecificProps"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertGUISpecificProps
                        </b>
                        <a href="#_convertGUISpecificProps"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertGUISpecificProps(props: <a href="../classes/PropertyJson.html">PropertyJson[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="465"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:465</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertGUISpecificProps.</p>
<p>It converts properties of an accessible resource
to be displayed via HTML.</p>
<p>In fact, it adds an &#39;toHtml&#39; property to the props array.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>props</td>
                                    <td>
                                                <code><a href="../classes/PropertyJson.html" target="_self" >PropertyJson[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given properties.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted resource data.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertHlistValues"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertHlistValues
                        </b>
                        <a href="#_convertHlistValues"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertHlistValues(values: string[], attributes: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="606"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:606</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertHlistValues.</p>
<p>It converts hierarchy list values of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>values</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given property values.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>attributes</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given HTML attributes.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>string[]</code>

                    </div>
                    <div class="io-description">
                        <p>The converted hlist array.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertLinkValue"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertLinkValue
                        </b>
                        <a href="#_convertLinkValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertLinkValue(prop: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="651"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:651</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertLinkValue.</p>
<p>It converts a link value of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>prop</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given property value.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>index</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given index position.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted link value.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertRichtextValue"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertRichtextValue
                        </b>
                        <a href="#_convertRichtextValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertRichtextValue(str: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, attr: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="674"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:674</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertRichtextValue.</p>
<p>It converts a rich text value of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>str</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given utf8 string of a rich text property.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>attr</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given standoff attributes of a richtext property.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted rich text value.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertSelectionValues"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertSelectionValues
                        </b>
                        <a href="#_convertSelectionValues"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertSelectionValues(values: string[], attributes: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="695"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:695</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertSelectionValues.</p>
<p>It converts selection values of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>values</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given property values.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>attributes</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given HTML attributes.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>string[]</code>

                    </div>
                    <div class="io-description">
                        <p>The converted selection array.</p>
<p>TODO: check if it is possible to unify with hlist conversion?</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_convertStandoffToHTML"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _convertStandoffToHTML
                        </b>
                        <a href="#_convertStandoffToHTML"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_convertStandoffToHTML(str: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, attr: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="747"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:747</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _convertStandoffToHTML.</p>
<p>It converts linear SALSAH standoff
(utf8 string with standoff attributes)
to html using plugin &#39;htmlConverter&#39;.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>str</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given utf8 string of a rich text property.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>attr</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given standoff attributes of a richtext property.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted standoff.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_distinctSubjects"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _distinctSubjects
                        </b>
                        <a href="#_distinctSubjects"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_distinctSubjects(subjects: <a href="../classes/SubjectItemJson.html">SubjectItemJson[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="931"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:931</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _distinctSubjects.</p>
<p>It removes duplicates from an array (SubjectItemJson[]).
It checks for every array position (reduce) if the obj_id
of the entry at the current position (y) is already
in the array (findIndex). If that is not the case it
pushes y into x which is initialized as empty array [].</p>
<p>See also <a href="https://gist.github.com/telekosmos/3b62a31a5c43f40849bb#gistcomment-2137855">https://gist.github.com/telekosmos/3b62a31a5c43f40849bb#gistcomment-2137855</a>.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>subjects</td>
                                    <td>
                                                <code><a href="../classes/SubjectItemJson.html" target="_self" >SubjectItemJson[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given subject with possible duplicates.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/SubjectItemJson.html" target="_self" >SubjectItemJson[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>The distinct subjects.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_getAdditionalInfoFromApi"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _getAdditionalInfoFromApi
                        </b>
                        <a href="#_getAdditionalInfoFromApi"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_getAdditionalInfoFromApi(responseJsonType: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="769"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:769</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _getAdditionalInfoFromApi.</p>
<p>It makes additional calls to the given (SALSAH) API
to get additional resource infos in case of geoames,
hlists, selections or image values.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>responseJsonType</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given json type of the API response.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given id of a resource.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>The observable of the HTTP response.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_getNodeIdFromAttributes"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _getNodeIdFromAttributes
                        </b>
                        <a href="#_getNodeIdFromAttributes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_getNodeIdFromAttributes(attributes: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="798"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:798</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _getNodeIdFromAttributes.</p>
<p>It gets a node id from the prop.attributes
of a selections or hlists value.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>attributes</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given prop.attributes.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>id The node id.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_groupByRestype"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _groupByRestype
                        </b>
                        <a href="#_groupByRestype"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_groupByRestype(incomingLinks: ResourceDetailIncomingLink[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="952"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:952</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _groupByRestype.</p>
<p>It groups an array of incoming links
by their resource type.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>incomingLinks</td>
                                    <td>
                                            <code>ResourceDetailIncomingLink[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given incoming links.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>ResourceDetailGroupedIncomingLinks[]</code>

                    </div>
                    <div class="io-description">
                        <p>The grouped incoming links.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_prepareAccessibleResource"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _prepareAccessibleResource
                        </b>
                        <a href="#_prepareAccessibleResource"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_prepareAccessibleResource(resourceData: <a href="../interfaces/IResourceDataResponse.html">IResourceDataResponse</a>, resourceId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="317"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:317</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _prepareAccessibleResource.</p>
<p>It prepares header and content of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>resourceData</td>
                                    <td>
                                                <code><a href="../interfaces/IResourceDataResponse.html" target="_self" >IResourceDataResponse</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given resource data.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>resourceId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given id of the current resource.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/ResourceDetail.html" target="_self" >ResourceDetail</a></code>

                    </div>
                    <div class="io-description">
                        <p>The resource detail object.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_prepareResourceDetailImage"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _prepareResourceDetailImage
                        </b>
                        <a href="#_prepareResourceDetailImage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_prepareResourceDetailImage(resourceContextData: <a href="../classes/ResourceContextResponseJson.html">ResourceContextResponseJson</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="346"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:346</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _prepareResourceDetailImage.</p>
<p>It prepares the images content of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>resourceContextData</td>
                                    <td>
                                                <code><a href="../classes/ResourceContextResponseJson.html" target="_self" >ResourceContextResponseJson</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given resource context data.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>NgxGalleryImage[]</code>

                    </div>
                    <div class="io-description">
                        <p>The image array of the resource detail.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_prepareResourceDetailIncomingLinks"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _prepareResourceDetailIncomingLinks
                        </b>
                        <a href="#_prepareResourceDetailIncomingLinks"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_prepareResourceDetailIncomingLinks(incomingArray: <a href="../classes/IncomingItemJson.html">IncomingItemJson[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="407"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:407</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _prepareResourceDetailIncomingLinks.</p>
<p>It prepares and groups the incoming links content
of an accessible resource to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>incomingArray</td>
                                    <td>
                                                <code><a href="../classes/IncomingItemJson.html" target="_self" >IncomingItemJson[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given IncomingItemJson.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>ResourceDetailGroupedIncomingLinks[]</code>

                    </div>
                    <div class="io-description">
                        <p>The grouped incoming links array of the resource detail.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_prepareResourceDetailProperties"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _prepareResourceDetailProperties
                        </b>
                        <a href="#_prepareResourceDetailProperties"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_prepareResourceDetailProperties(props: <a href="../classes/PropertyJson.html">PropertyJson[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="433"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:433</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _prepareResourceDetailProperties.</p>
<p>It prepares the properties content of an accessible resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>props</td>
                                    <td>
                                                <code><a href="../classes/PropertyJson.html" target="_self" >PropertyJson[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given properties.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>ResourceDetailProperty[]</code>

                    </div>
                    <div class="io-description">
                        <p>The properties array of the resource detail.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_prepareRestrictedResource"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _prepareRestrictedResource
                        </b>
                        <a href="#_prepareRestrictedResource"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_prepareRestrictedResource(resourceData: <a href="../interfaces/IResourceDataResponse.html">IResourceDataResponse</a>, resourceId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="299"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:299</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _prepareRestrictedResource.</p>
<p>It prepares header and content of a restricted resource
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>resourceData</td>
                                    <td>
                                                <code><a href="../interfaces/IResourceDataResponse.html" target="_self" >IResourceDataResponse</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given resource data.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>resourceId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given id of the current resource.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/ResourceDetail.html" target="_self" >ResourceDetail</a></code>

                    </div>
                    <div class="io-description">
                        <p>The resource detail object.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_replaceParagraphTags"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _replaceParagraphTags
                        </b>
                        <a href="#_replaceParagraphTags"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_replaceParagraphTags(str: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="905"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:905</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _replaceParagraphTags.</p>
<p>It removes paragraph tags in richtext values
and replaces line breaks instead for multiple lines.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>str</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given richtext value.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The adjusted richtext value.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_replaceSalsahLink"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _replaceSalsahLink
                        </b>
                        <a href="#_replaceSalsahLink"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_replaceSalsahLink(str: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="862"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:862</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _replaceSalsahLink.</p>
<p>It finds internal salsah links in richtext values
and replaces them with Angular click-directives.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>str</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given richtext value.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The adjusted richtext value.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="convertFullTextSearchResults"></a>
                    <span class="name">
                        <b>
                            convertFullTextSearchResults
                        </b>
                        <a href="#convertFullTextSearchResults"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>convertFullTextSearchResults(searchResults: <a href="../classes/SearchResponseJson.html">SearchResponseJson</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="96"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:96</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: convertFullTextSearchResults.</p>
<p>It converts the results of a full text search
to be displayed via HTML.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>searchResults</td>
                                    <td>
                                                <code><a href="../classes/SearchResponseJson.html" target="_self" >SearchResponseJson</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given results of a search request.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/SearchResponseJson.html" target="_self" >SearchResponseJson</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted full text search results.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="convertObjectProperties"></a>
                    <span class="name">
                        <b>
                            convertObjectProperties
                        </b>
                        <a href="#convertObjectProperties"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>convertObjectProperties(resourceFullResponseData: <a href="../classes/ResourceFullResponseJson.html">ResourceFullResponseJson</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="179"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:179</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: convertObjectProperties.</p>
<p>It converts object properties of a resource request
to be displayed in the bibliography detail view.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>resourceFullResponseData</td>
                                    <td>
                                                <code><a href="../classes/ResourceFullResponseJson.html" target="_self" >ResourceFullResponseJson</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given resource data.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/BibEntry.html" target="_self" >BibEntry</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted resource object.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="convertResourceData"></a>
                    <span class="name">
                        <b>
                            convertResourceData
                        </b>
                        <a href="#convertResourceData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>convertResourceData(resourceData: <a href="../interfaces/IResourceDataResponse.html">IResourceDataResponse</a>, resourceId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="280"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:280</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: convertResourceData.</p>
<p>It converts a resource response from the given (SALSAH) Api
to a resource detail object. It checks if the resource data
is accessible and delegates it to the respective
resource detail creation methods.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>resourceData</td>
                                    <td>
                                                <code><a href="../interfaces/IResourceDataResponse.html" target="_self" >IResourceDataResponse</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given resource data.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>resourceId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given id of the current resource.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/ResourceDetail.html" target="_self" >ResourceDetail</a></code>

                    </div>
                    <div class="io-description">
                        <p>The converted resource detail object.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="prepareFullTextSearchResultText"></a>
                    <span class="name">
                        <b>
                            prepareFullTextSearchResultText
                        </b>
                        <a href="#prepareFullTextSearchResultText"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>prepareFullTextSearchResultText(searchResponseWithQuery: <a href="../classes/SearchResponseWithQuery.html">SearchResponseWithQuery</a>, searchUrl: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="145"
                            class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:145</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: prepareFullTextSearchResultText.</p>
<p>It prepares the fulltext search result text
to be displayed in the search info.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>searchResponseWithQuery</td>
                                    <td>
                                                <code><a href="../classes/SearchResponseWithQuery.html" target="_self" >SearchResponseWithQuery</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given results and query of a search request.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>searchUrl</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given url of a search request.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The text to be displayed.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_handleRequestError"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _handleRequestError
                        </b>
                        <a href="#_handleRequestError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_handleRequestError(error: <a href="https://angular.io/api/common/http/HttpErrorResponse" target="_blank">HttpErrorResponse</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../injectables/ApiService.html#source" target="_self" >ApiService:125</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _handleRequestError.</p>
<p>It handles request errors in case of server error.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>error</td>
                                    <td>
                                                <code><a href="https://angular.io/api/common/http/HttpErrorResponse" target="_blank" >HttpErrorResponse</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given error.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../injectables/ApiService.html" target="_self" >Observable&lt;ApiServiceError&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>The observable of the api service error.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_httpGet"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            _httpGet
                        </b>
                        <a href="#_httpGet"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_httpGet(queryPath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, queryHttpParams: <a href="https://angular.io/api/common/http/HttpParams" target="_blank">HttpParams</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../injectables/ApiService.html#source" target="_self" >ApiService:85</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _httpGet.</p>
<p>Performs an HTTP GET request to the given (Salsah) API.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>queryPath</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given path of the query.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>queryHttpParams</td>
                                    <td>
                                                <code><a href="https://angular.io/api/common/http/HttpParams" target="_blank" >HttpParams</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given HTTP params for the query.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../injectables/ApiService.html" target="_self" >Observable&lt;ApiServiceResult | ApiServiceError&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>The observable of the api service result or error.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getApiResponse"></a>
                    <span class="name">
                        <b>
                            getApiResponse
                        </b>
                        <a href="#getApiResponse"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getApiResponse(responseJsonType: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, queryPath: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, queryHttpParams?: <a href="https://angular.io/api/common/http/HttpParams" target="_blank">HttpParams</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Inherited from         <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
</div>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <div class="io-line">Defined in         <code><a href="../injectables/ApiService.html#source" target="_self" >ApiService:60</a></code>
</div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: getApiResponse.</p>
<p>It returns an HTTP GET request response from the given (Salsah) API.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>responseJsonType</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given expected response JSON type of the query.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>queryPath</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given path of the query.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>queryHttpParams</td>
                                    <td>
                                                <code><a href="https://angular.io/api/common/http/HttpParams" target="_blank" >HttpParams</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>The given optional HTTP params for the query.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>The observable of the API request.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="filteredOut"></a>
                        <span class="name">
                            <b>
                            filteredOut</b>
                            <a href="#filteredOut"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="71" class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:71</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Public variable: filteredOut.</p>
<p>It keeps the number of filtered duplicates of a search response list.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="http"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            http</b>
                            <a href="#http"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://angular.io/api/common/http/HttpClient" target="_blank" >HttpClient</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="82" class="link-to-prism">src/app/core/services/conversion-service/conversion.service.ts:82</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description">Instance of the HttpClient.</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="http"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            http</b>
                            <a href="#http"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://angular.io/api/common/http/HttpClient" target="_blank" >HttpClient</a></code>

                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../injectables/ApiService.html#source" target="_self" >ApiService:45</a></code>
</div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description">Instance of the HttpClient.</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="httpGetUrl"></a>
                        <span class="name">
                            <b>
                            httpGetUrl</b>
                            <a href="#httpGetUrl"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&#x27;&#x27;</code>
                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../injectables/ApiService.html#source" target="_self" >ApiService:35</a></code>
</div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Public variable: httpGetUrl.</p>
<p>It keeps the url of the HTTP GET request.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="serviceName"></a>
                        <span class="name">
                            <b>
                            serviceName</b>
                            <a href="#serviceName"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&#x27;ApiService&#x27;</code>
                        </td>
                    </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Inherited from         <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
</div>
                                </td>
                            </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in         <code><a href="../injectables/ApiService.html#source" target="_self" >ApiService:28</a></code>
</div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>Public variable: serviceName.</p>
<p>It keeps the name of the service.</p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { HttpClient } from &#x27;@angular/common/http&#x27;;

import { Observable } from &#x27;rxjs&#x27;;

import { NgxGalleryImage } from &#x27;@kolkov/ngx-gallery&#x27;;

import { ApiService } from &#x27;@awg-core/services/api-service&#x27;;

import { GeoNames } from &#x27;@awg-core/core-models&#x27;;
import {
    ContextJson,
    GeoDataItemJson,
    GeoDataJson,
    HlistItemJson,
    HlistJson,
    IncomingItemJson,
    PropertyJson,
    ResourceContextResponseJson,
    ResourceFullResponseJson,
    SearchResponseJson,
    SelectionItemJson,
    SelectionJson,
    SubjectItemJson,
} from &#x27;@awg-shared/api-objects&#x27;;
import {
    IResourceDataResponse,
    ResourceDetail,
    ResourceDetailContent,
    ResourceDetailGroupedIncomingLinks,
    ResourceDetailHeader,
    ResourceDetailImage,
    ResourceDetailIncomingLink,
    ResourceDetailProperty,
    SearchResponseWithQuery,
} from &#x27;@awg-views/data-view/models&#x27;;
import { BibEntry } from &#x27;@awg-views/data-view/data-outlets/bibliography/bibliography-entry.model&#x27;;

/**
 * Declared variable: htmlConverter.
 *
 * It provides access to the embedded htmlConverter plugin (see &#x60;/src/plugins/htmlConverter&#x60;).
 */
declare let htmlConverter: any;

/**
 * Declared variable: dateConverter.
 *
 * It provides access to the embedded dateConverter plugin (see &#x60;/src/plugins/dateConverter&#x60;).
 */
declare let dateConverter: any;

/**
 * The Conversion service.
 *
 * It handles the conversion of the HTTP response data (JSON)
 * from the given (SALSAH) API into a form that can be
 * displayed via HTML.
 *
 * Provided in: &#x60;root&#x60;.
 */
@Injectable({
    providedIn: &#x27;root&#x27;,
})
export class ConversionService extends ApiService {
    /**
     * Public variable: filteredOut.
     *
     * It keeps the number of filtered duplicates of a search response list.
     */
    filteredOut: number;

    /**
     * Constructor of the ConversionService.
     *
     * It declares a public {@link HttpClient} instance
     * with a super reference to base class (ApiService)
     * and a private {@link StorageService} instance.
     *
     * @param {HttpClient} http Instance of the HttpClient.
     */
    constructor(public http: HttpClient) {
        super(http);
    }

    /**
     * Public method: convertFullTextSearchResults.
     *
     * It converts the results of a full text search
     * to be displayed via HTML.
     *
     * @param {SearchResponseJson} searchResults The given results of a search request.
     *
     * @returns {SearchResponseJson} The converted full text search results.
     */
    convertFullTextSearchResults(searchResults: SearchResponseJson): SearchResponseJson {
        if (!searchResults.subjects) {
            return searchResults;
        }

        // TODO: refactor with reduce??
        searchResults.subjects.forEach(subject &#x3D;&gt; {
            // Clean value labels
            subject.valuelabel[0] &#x3D; subject.valuelabel[0].replace(&#x27; (Richtext)&#x27;, &#x27;&#x27;);
            subject.obj_id &#x3D; subject.obj_id.replace(&#x27;_-_local&#x27;, &#x27;&#x27;);

            // &#x3D;&gt;Chronologie: salsah standoff needs to be converted before displaying
            // Valuetype_id 14 &#x3D; valuelabel &#x27;Ereignis&#x27;
            if (subject.valuetype_id[0] &#x3D;&#x3D;&#x3D; &#x27;14&#x27; &amp;&amp; subject.value[0]) {
                let htmlstr &#x3D; &#x27;&#x27;;
                const utf8str: string &#x3D; subject.value[0].utf8str;
                const textattr: string &#x3D; subject.value[0].textattr;

                // Check if there is standoff, otherwise leave res.value[0] alone
                // Because when retrieved from cache the standoff is already converted
                if (utf8str &amp;&amp; textattr) {
                    htmlstr &#x3D; this._convertStandoffToHTML(utf8str, textattr);

                    // Replace salsah links
                    htmlstr &#x3D; this._replaceSalsahLink(htmlstr);

                    // Strip &amp; replace &lt;p&gt;-tags for displaying
                    htmlstr &#x3D; this._replaceParagraphTags(htmlstr);

                    subject.value[0] &#x3D; htmlstr;
                }
            }
        });
        // Remove duplicates from response
        searchResults.subjects &#x3D; this._distinctSubjects(searchResults.subjects);
        return searchResults;
    }

    /**
     * Public method: prepareFullTextSearchResultText.
     *
     * It prepares the fulltext search result text
     * to be displayed in the search info.
     *
     * @param {SearchResponseWithQuery} searchResponseWithQuery The given results and query of a search request.
     * @param {string} searchUrl The given url of a search request.
     *
     * @returns {string} The text to be displayed.
     */
    prepareFullTextSearchResultText(searchResponseWithQuery: SearchResponseWithQuery, searchUrl: string): string {
        let resText: string;

        const searchResults &#x3D; { ...searchResponseWithQuery.data };
        const searchValue &#x3D; searchResponseWithQuery.query;

        if (searchResults.subjects) {
            const length &#x3D; searchResults.subjects.length;
            const resString: string &#x3D; length &#x3D;&#x3D;&#x3D; 1 ? &#x27;Resultat&#x27; : &#x27;Resultate&#x27;;
            // ResText &#x3D; &#x60;${length}/${searchData.nhits} &#x60;;
            resText &#x3D; &#x60;${searchResults.nhits} &#x60;;
            resText +&#x3D; &#x60;${resString} fr &quot;${searchValue}&quot;&#x60;;

            if (this.filteredOut &gt; 0) {
                const duplString: string &#x3D; this.filteredOut &#x3D;&#x3D;&#x3D; 1 ? &#x27;Duplikat&#x27; : &#x27;Duplikate&#x27;;
                resText +&#x3D; &#x60; (${this.filteredOut} ${duplString} entfernt)&#x60;;
            }
        } else {
            resText &#x3D; &#x60;Die Abfrage ${searchUrl} ist leider fehlgeschlagen. Wiederholen Sie die Abfrage zu einem spteren Zeitpunkt oder berprfen sie die Suchbegriffe.&#x60;;
        }

        return resText;
    }

    /**
     * Public method: convertObjectProperties.
     *
     * It converts object properties of a resource request
     * to be displayed in the bibliography detail view.
     *
     * @param {ResourceFullResponseJson} resourceFullResponseData The given resource data.
     *
     * @returns {BibEntry} The converted resource object.
     */
    convertObjectProperties(resourceFullResponseData: ResourceFullResponseJson): BibEntry {
        const convObj &#x3D; {};
        // Add lastmod state
        convObj[&#x27;lastmod&#x27;] &#x3D; resourceFullResponseData.resinfo.lastmod;

        Object.keys(resourceFullResponseData.props).forEach((key: string) &#x3D;&gt; {
            const prop &#x3D; resourceFullResponseData.props[key];
            let propValue &#x3D; []; // Empty text value array

            // Check if values property is defined
            if (prop.hasOwnProperty(&#x27;values&#x27;) &amp;&amp; prop.values !&#x3D;&#x3D; undefined) {
                // Check for gui-elements
                switch (prop.valuetype_id) {
                    case &#x27;4&#x27;:
                        // DATE: salsah object needs to be converted (using plugin &quot;dateConverter&quot;)
                        if (prop.values[0] !&#x3D;&#x3D; &#x27;&#x27;) {
                            propValue[0] &#x3D; this._convertDateValue(prop.values[0]);
                        }
                        break; // END date

                    case &#x27;7&#x27;:
                        // SELECTION PULLDOWN: selection nodes have to be read seperately
                        // TODO
                        if (prop.values !&#x3D;&#x3D; []) {
                            propValue &#x3D; this._convertSelectionValues(prop.values, prop.attributes);
                        }
                        break; // END selection

                    case &#x27;14&#x27;:
                        // RICHTEXT: salsah standoff needs to be converted

                        // Check for multiple &amp;&amp; not empty values
                        if (prop.values.length &gt; 0 &amp;&amp; prop.values[0].utf8str !&#x3D;&#x3D; &#x27;&#x27;) {
                            // Clean value labels
                            prop.label &#x3D; prop.label.replace(&#x27; (Richtext)&#x27;, &#x27;&#x27;);

                            for (let i &#x3D; 0; i &lt; prop.values.length; i++) {
                                // Init

                                let htmlstr &#x3D; &#x27;&#x27;;

                                // Convert linear salsah standoff to html (using plugin &quot;htmlConverter&quot;)
                                htmlstr &#x3D; this._convertStandoffToHTML(prop.values[i].utf8str, prop.values[i].textattr);

                                // Replace salsah links &amp; &lt;p&gt;-tags
                                htmlstr &#x3D; this._replaceSalsahLink(htmlstr);
                                htmlstr &#x3D; htmlstr.replace(&#x27;&lt;p&gt;&#x27;, &#x27;&#x27;).replace(&#x27;&lt;/p&gt;&#x27;, &#x27;&#x27;);

                                // Trim string
                                propValue[i] &#x3D; htmlstr.trim();

                                // Replace bibliography links
                                if (prop.label &#x3D;&#x3D;&#x3D; &#x27;Online-Zugang&#x27;) {
                                    propValue[i] &#x3D; this._adjustBiblioLink(propValue[i]);
                                }
                            }
                        }
                        break; // END richtext

                    default:
                        // &#x27;1&#x27;&#x3D;&gt; TEXT: properties come as they are
                        if (prop.values[0] !&#x3D;&#x3D; &#x27;&#x27;) {
                            for (let i &#x3D; 0; i &lt; prop.values.length; i++) {
                                propValue[i] &#x3D; prop.values[i].trim();
                            }
                        }
                } // END switch
                if (propValue.length &gt; 1) {
                    convObj[prop.label] &#x3D; propValue; // &#x3D;&gt; array
                } else if (propValue.length &#x3D;&#x3D;&#x3D; 1) {
                    convObj[prop.label] &#x3D; propValue[0]; // &#x3D;&gt; string
                }
            } // END if value

            // Extract publication year from publication date
            /*
             TODO#add:
             let splitDate;
             if (splitDate &#x3D; convObj[&#x27;Publikationsdatum&#x27;]) {
             let s &#x3D; splitDate.split(&#x27; &#x27;);
             convObj[&#x27;Jahr&#x27;] &#x3D; s[s.length-1];
             }
             */
        }); // END forEach PROPS

        return convObj;
    } // END convertObjectProperties (func)

    /**
     * Public method: convertResourceData.
     *
     * It converts a resource response from the given (SALSAH) Api
     * to a resource detail object. It checks if the resource data
     * is accessible and delegates it to the respective
     * resource detail creation methods.
     *
     * @param {IResourceDataResponse} resourceData The given resource data.
     * @param {string} resourceId The given id of the current resource.
     *
     * @returns {ResourceDetail} The converted resource detail object.
     */
    convertResourceData(resourceData: IResourceDataResponse, resourceId: string): ResourceDetail {
        if (resourceData[0].access &#x3D;&#x3D;&#x3D; &#x27;OK&#x27;) {
            return this._prepareAccessibleResource(resourceData, resourceId);
        } else {
            return this._prepareRestrictedResource(resourceData, resourceId);
        }
    }

    /**
     * Private method: _prepareRestrictedResource.
     *
     * It prepares header and content of a restricted resource
     * to be displayed via HTML.
     *
     * @param {IResourceDataResponse} resourceData The given resource data.
     * @param {string} resourceId The given id of the current resource.
     *
     * @returns {ResourceDetail} The resource detail object.
     */
    private _prepareRestrictedResource(resourceData: IResourceDataResponse, resourceId: string): ResourceDetail {
        const header: ResourceDetailHeader &#x3D; new ResourceDetailHeader(resourceData[0], resourceId);
        const content &#x3D; undefined;

        return new ResourceDetail(header, content);
    }

    /**
     * Private method: _prepareAccessibleResource.
     *
     * It prepares header and content of an accessible resource
     * to be displayed via HTML.
     *
     * @param {IResourceDataResponse} resourceData The given resource data.
     * @param {string} resourceId The given id of the current resource.
     *
     * @returns {ResourceDetail} The resource detail object.
     */
    private _prepareAccessibleResource(resourceData: IResourceDataResponse, resourceId: string): ResourceDetail {
        const resourceFullResponseData &#x3D; resourceData[0];
        const resourceContextData &#x3D; resourceData[1];

        // Convert properties to be displayed via HTML
        resourceFullResponseData.props &#x3D; this._convertGUISpecificProps(resourceFullResponseData.props);

        // Prepare parts of resourceDetail
        const header: ResourceDetailHeader &#x3D; new ResourceDetailHeader(resourceFullResponseData, resourceId);
        const props: ResourceDetailProperty[] &#x3D; this._prepareResourceDetailProperties(resourceFullResponseData.props);
        const images: NgxGalleryImage[] &#x3D; this._prepareResourceDetailImage(resourceContextData);
        const incoming: ResourceDetailGroupedIncomingLinks[] &#x3D; this._prepareResourceDetailIncomingLinks(
            resourceFullResponseData.incoming
        );
        const content &#x3D; new ResourceDetailContent(props, images, incoming);

        return new ResourceDetail(header, content);
    }

    /**
     * Private method: _prepareResourceDetailImage.
     *
     * It prepares the images content of an accessible resource
     * to be displayed via HTML.
     *
     * @param {ResourceContextResponseJson} resourceContextData The given resource context data.
     *
     * @returns {NgxGalleryImage[]} The image array of the resource detail.
     */
    private _prepareResourceDetailImage(resourceContextData: ResourceContextResponseJson): NgxGalleryImage[] {
        // Id of image context for api + &quot;/resources/{{:id}}_-_local?reqtype&#x3D;context&quot;
        // Result is an array of NgxGalleryImage
        const images: NgxGalleryImage[] &#x3D; [];

        if (!resourceContextData.resource_context.res_id) {
            // console.log(&#x27;ConversionService# _prepareResourceDetailImage: got no resource_context id\&#x27;s from context response: &#x27;, contextData);
            return;
        } else {
            const context: ContextJson &#x3D; { ...resourceContextData.resource_context };

            // IMAGE OBJECT (context &#x3D;&#x3D; 2)
            // IMAGE OBJECT (context &#x3D;&#x3D; 2)
            if (context.context &#x3D;&#x3D;&#x3D; 2 &amp;&amp; context.resclass_name &#x3D;&#x3D;&#x3D; &#x27;image&#x27;) {
                if (
                    context.res_id.length &#x3D;&#x3D;&#x3D; context.firstprop.length ||
                    context.res_id.length &#x3D;&#x3D;&#x3D; context.locations.length
                ) {
                    for (let i &#x3D; 0; i &lt; context.res_id.length; i++) {
                        // Build new ResourceDetailImage-Object from context and index
                        const image &#x3D; new ResourceDetailImage(context, i);

                        const gImage &#x3D; new NgxGalleryImage({
                            small: image.reductSize,
                            medium: image.reductSize,
                            big: image.fullSize,
                            description: image.origname,
                            label: image.label,
                            url: image.fullSize,
                        });

                        images.push(gImage);
                    }
                    return images;
                } else {
                    console.warn(
                        &#x27;ConversionService - Array length for context objects is not consistent with firstprops length!&#x27;,
                        context
                    );
                    return;
                }
                // STANDARD OBJECT (context &#x3D;&#x3D; 0 || 1)
            } else if (context.context &lt; 2) {
                console.warn(&#x27;ConversionService - got no image context&#x27;, context);
                return;
            }
        }

        return images;
    }

    /**
     * Private method: _prepareResourceDetailIncomingLinks.
     *
     * It prepares and groups the incoming links content
     * of an accessible resource to be displayed via HTML.
     *
     * @param {IncomingItemJson[]} incomingArray The given IncomingItemJson.
     *
     * @returns {ResourceDetailGroupedIncomingLinks[]} The grouped incoming links array of the resource detail.
     */
    private _prepareResourceDetailIncomingLinks(
        incomingArray: IncomingItemJson[]
    ): ResourceDetailGroupedIncomingLinks[] {
        if (!incomingArray) {
            return;
        }

        // Map incoming array items into new array (immutable)
        const incomingLinks: ResourceDetailIncomingLink[] &#x3D; incomingArray.map(
            incoming &#x3D;&gt; new ResourceDetailIncomingLink({ ...incoming })
        );

        // Return links grouped by restype
        return this._groupByRestype(incomingLinks);
    }

    /**
     * Private method: _prepareResourceDetailProperties.
     *
     * It prepares the properties content of an accessible resource
     * to be displayed via HTML.
     *
     * @param {PropertyJson[]} props The given properties.
     *
     * @returns {ResourceDetailProperty[]} The properties array of the resource detail.
     */
    private _prepareResourceDetailProperties(props: PropertyJson[]): ResourceDetailProperty[] {
        if (!props) {
            return;
        }

        // Helper method to clean value labels
        const replaceLabel &#x3D; (str: string): string &#x3D;&gt; str.replace(&#x27; (Richtext)&#x27;, &#x27;&#x27;);

        // Map default values into ResourceDetailProperties array
        return Object.entries(props).map(
            prop &#x3D;&gt;
                new ResourceDetailProperty(
                    prop[1].pid,
                    prop[1].guielement,
                    (prop[1].label &#x3D; replaceLabel(prop[1].label)),
                    prop[1].toHtml
                )
        );
    }

    /**
     * Private method: _convertGUISpecificProps.
     *
     * It converts properties of an accessible resource
     * to be displayed via HTML.
     *
     * In fact, it adds an &#x27;toHtml&#x27; property to the props array.
     *
     * @param {PropertyJson[]} props The given properties.
     *
     * @returns {*} The converted resource data.
     */
    private _convertGUISpecificProps(props: PropertyJson[]): any {
        // Loop through all properties and add toHtml values
        Object.keys(props).forEach((key: string) &#x3D;&gt; {
            props[key] &#x3D; this._addHtmlValues(props[key]);
        });
        return props;
    }

    /**
     * Private method: _addHtmlValues.
     *
     * It adds an &#x27;toHtml&#x27; property to the props array
     * of an accessible resource to be displayed via HTML.
     *
     * @param {*} prop The given property.
     * @param {string} [url] A given optional url.
     *
     * @returns {string[]} The converted property.
     */
    private _addHtmlValues(prop: any, url?: string): [string] {
        prop.toHtml &#x3D; [];

        if (prop.values) {
            switch (prop.valuetype_id) {
                case &#x27;4&#x27;: // DATE: salsah object needs to be converted (using plugin &quot;dateConverter&quot;)
                    for (let i &#x3D; 0; i &lt; prop.values.length; i++) {
                        prop.toHtml[i] &#x3D; this._convertDateValue(prop.values[i]);
                    }
                    break; // END date

                case &#x27;6&#x27;: // LINKVALUE (searchbox): links to another salsah object need to be converted
                    for (let i &#x3D; 0; i &lt; prop.values.length; i++) {
                        prop.toHtml[i] &#x3D; this._convertLinkValue(prop, i);
                    }
                    break; // END linkvalue

                case &#x27;7&#x27;: // SELECTION (pulldown): selection nodes have to be called separately
                    prop.toHtml &#x3D; this._convertSelectionValues(prop.values, prop.attributes);
                    break; // END selection

                case &#x27;12&#x27;: // HLIST: hlist nodes have to be called separately
                    prop.toHtml &#x3D; this._convertHlistValues(prop.values, prop.attributes);
                    break; // END hlist

                case &#x27;14&#x27;: // RICHTEXT: salsah standoff needs to be converted
                    for (let i &#x3D; 0; i &lt; prop.values.length; i++) {
                        // Convert richtext standoff
                        prop.toHtml[i] &#x3D; this._convertRichtextValue(prop.values[i].utf8str, prop.values[i].textattr);
                    }
                    break; // END richtext

                case &#x27;15&#x27;: // GeoNAMES: GeoName nodes have to be called separately
                    prop.toHtml &#x3D; this._convertGeoValues(prop.values);
                    break; // END geonames

                // &#x27;1&#x27; &#x3D;&gt; TEXT: properties come as they are
                default:
                    for (let i &#x3D; 0; i &lt; prop.values.length; i++) {
                        prop.toHtml[i] &#x3D; prop.values[i];
                    }
            } // END switch
        } else {
            // console.log(&#x27;empty prop.values for&#x27;, prop.guielement.toUpperCase(), &#x27;in property &quot;&#x27;, prop.label, &#x27;&quot; :::: &#x27;);
        }
        return prop;
    }

    /**
     * Private method: _convertDateValue.
     *
     * It converts date values of an accessible resource
     * to be displayed via HTML.
     *
     * Conversion goes from Julian Day Number (JDN)
     * to Gregorian Calendar.
     *
     * @param {*} dateObj The given date object.
     *
     * @returns {string} The converted date string.
     */
    private _convertDateValue(dateObj: any): string {
        let date &#x3D; dateConverter(dateObj);
        date &#x3D; date.replace(&#x27; (G)&#x27;, &#x27;&#x27;);
        return date;
    }

    /**
     * Private method: _convertGeoValues.
     *
     * It converts geonames values of an accessible resource
     * to be displayed via HTML.
     *
     * @param {string[]} values The given property values.
     *
     * @returns {string[]} The converted geo names array.
     */
    private _convertGeoValues(values: string[]): string[] {
        // Values give reference id to api + &quot;/geonames/{{:id}}?reqtype&#x3D;node&quot;
        // Result is an array nodelist (properties: id, label, name) with nodes from 0 to n

        const output &#x3D; [];

        // Identify geonames gui-id from values
        // E.g. [&quot;4136&quot;] or [&quot;4136&quot;, &quot;4132&quot;]
        values.forEach((valueId, index) &#x3D;&gt; {
            // Get geonames data
            this._getAdditionalInfoFromApi(GeoDataJson, valueId).subscribe((geoNamesData: GeoDataJson) &#x3D;&gt; {
                // Check for existing nodelist in geonames response
                // Else return empty prop if necessary
                if (!geoNamesData.nodelist) {
                    console.warn(
                        &#x27;ConversionService# _convertGeoValues: got no nodelist from geonames response: &#x27;,
                        geoNamesData
                    );
                    return (output[index] &#x3D; &#x27;&#x27;);
                }
                // Snapshot of nodelist array
                const geoDataArray: GeoDataItemJson[] &#x3D; [...geoNamesData.nodelist];

                // Build new GeoNames-Object from geoData array
                const geo: GeoNames &#x3D; new GeoNames(geoDataArray);

                // Construct and return html value
                output[index] &#x3D; geo.html;
                return output;
            });
        });
        return output;
    }

    /**
     * Private method: _convertHlistValues.
     *
     * It converts hierarchy list values of an accessible resource
     * to be displayed via HTML.
     *
     * @param {string[]} values The given property values.
     * @param {string} attributes The given HTML attributes.
     *
     * @returns {string[]} The converted hlist array.
     */
    private _convertHlistValues(values: string[], attributes: string): string[] {
        // Prop.values give reference id to
        // Api + /hlists/{{:id}}
        // Result is an array hlist (properties: id, label, name, level) with nodes from 0 to n

        const output &#x3D; [];

        // Identify id of hlist from prop.attributes
        // E.g. &quot;hlist&#x3D;17&quot;
        const nodeId: string &#x3D; this._getNodeIdFromAttributes(attributes);

        // Get hlist data
        this._getAdditionalInfoFromApi(HlistJson, nodeId).subscribe(
            (hlistData: HlistJson) &#x3D;&gt; {
                // Check for existing hlist in response
                // Esle return empty prop if necessary
                if (!hlistData.hlist) {
                    console.warn(&#x27;ConversionService# convertHListValue: got no hlist from response: &#x27;, hlistData);
                    return output;
                }
                // Snapshot of hlist array
                const hlistArray: HlistItemJson[] &#x3D; [...hlistData.hlist];
                // Localize id in hlist array and identify the label
                values.forEach((valueId, index) &#x3D;&gt; {
                    const filteredHlist: HlistItemJson[] &#x3D; hlistArray.filter(hlistItem &#x3D;&gt; hlistItem.id &#x3D;&#x3D;&#x3D; valueId);
                    output[index] &#x3D; filteredHlist[0].label;
                });
                return output;
            },
            err &#x3D;&gt; console.error(err)
        );
        return output;
    }

    /**
     * Private method: _convertLinkValue.
     *
     * It converts a link value of an accessible resource
     * to be displayed via HTML.
     *
     * @param {*} prop The given property value.
     * @param {number} index The given index position.
     *
     * @returns {string} The converted link value.
     */
    private _convertLinkValue(prop: any, index: number): string {
        // Add &lt;a&gt;-tag with click-directive; linktext is stored in &quot;$&amp;&quot;
        const firstValue &#x3D; prop.value_firstprops[index];
        const replaceValue &#x3D;
            &#x27;&lt;a (click)&#x3D;&quot;ref.navigateToResource(\&#x27;&#x27; +
            prop.values[index] +
            &#x27;\&#x27;)&quot;&gt;$&amp; (&#x27; +
            prop.value_restype[index] +
            &#x27;)&lt;/a&gt;&#x27;;
        return firstValue.replace(firstValue, replaceValue);
    }

    /**
     * Private method: _convertRichtextValue.
     *
     * It converts a rich text value of an accessible resource
     * to be displayed via HTML.
     *
     * @param {string} str The given utf8 string of a rich text property.
     * @param {string} attr The given standoff attributes of a richtext property.
     *
     * @returns {string} The converted rich text value.
     */
    private _convertRichtextValue(str: string, attr: string): string {
        // Convert salsah standoff to html (using plugin &quot;htmlConverter&quot;)
        const rtValue: string &#x3D; this._convertStandoffToHTML(str, attr);

        // Replace salsah links
        return this._replaceSalsahLink(rtValue);
    }

    /**
     * Private method: _convertSelectionValues.
     *
     * It converts selection values of an accessible resource
     * to be displayed via HTML.
     *
     * @param {string[]} values The given property values.
     * @param {string} attributes The given HTML attributes.
     *
     * @returns {string[]} The converted selection array.
     *
     * TODO: check if it is possible to unify with hlist conversion?
     */
    private _convertSelectionValues(values: string[], attributes: string): string[] {
        // Values give reference id to api + &quot;/selections/{{:id}}&quot;
        // Result is an array of selection labels

        const output &#x3D; [];

        // Identify id of selection-list from attributes
        // E.g. &quot;selection&#x3D;66&quot;
        const nodeId: string &#x3D; this._getNodeIdFromAttributes(attributes);

        // Get selection-list data
        this._getAdditionalInfoFromApi(SelectionJson, nodeId).subscribe(
            (selectionData: SelectionJson) &#x3D;&gt; {
                // Check for existing selection in response
                // Else return empty prop if necessary
                if (!selectionData.selection) {
                    console.warn(
                        &#x27;ConversionService# _convertSelectionValues: got no selection from response: &#x27;,
                        selectionData
                    );
                    return output;
                }
                // Snapshot of selection array
                const selectionArray: SelectionItemJson[] &#x3D; [...selectionData.selection];
                // Localize id in selection-list array and identify the label
                values.forEach((valueId, index) &#x3D;&gt; {
                    const filteredSelection: SelectionItemJson[] &#x3D; selectionArray.filter(
                        selectionItem &#x3D;&gt; selectionItem.id &#x3D;&#x3D;&#x3D; valueId
                    );
                    output[index] &#x3D; filteredSelection[0].label;
                });
                return output;
            },
            err &#x3D;&gt; console.error(err)
        );
        return output;
    }

    /**
     * Private method: _convertStandoffToHTML.
     *
     * It converts linear SALSAH standoff
     * (utf8 string with standoff attributes)
     * to html using plugin &#x27;htmlConverter&#x27;.
     *
     * @param {string} str The given utf8 string of a rich text property.
     * @param {string} attr The given standoff attributes of a richtext property.
     *
     * @returns {string} The converted standoff.
     *
     * @todo check if it is possible to unify with hlist conversion?
     */
    private _convertStandoffToHTML(str: string, attr: string): string {
        if (!str) {
            return;
        }
        if (!attr) {
            return str;
        }
        return htmlConverter(JSON.parse(attr), str);
    }

    /**
     * Private method: _getAdditionalInfoFromApi.
     *
     * It makes additional calls to the given (SALSAH) API
     * to get additional resource infos in case of geoames,
     * hlists, selections or image values.
     *
     * @param {*} responseJsonType The given json type of the API response.
     * @param {string} id The given id of a resource.
     *
     * @returns {Observable&lt;any&gt;} The observable of the HTTP response.
     */
    private _getAdditionalInfoFromApi(responseJsonType: any, id: string): Observable&lt;any&gt; {
        let queryPath: string;
        switch (responseJsonType) {
            case GeoDataJson:
                queryPath &#x3D; &#x27;geonames/&#x27; + id + &#x27;?reqtype&#x3D;node&#x27;;
                break;
            case HlistJson:
                queryPath &#x3D; &#x27;hlists/&#x27; + id;
                break;
            case ResourceContextResponseJson:
                queryPath &#x3D; &#x27;resources/&#x27; + id + &#x27;_-_local?reqtype&#x3D;context&#x27;;
                break;
            case SelectionJson:
                queryPath &#x3D; &#x27;selections/&#x27; + id;
                break;
        }
        return this.getApiResponse(responseJsonType, queryPath);
    }

    /**
     * Private method: _getNodeIdFromAttributes.
     *
     * It gets a node id from the prop.attributes
     * of a selections or hlists value.
     *
     * @param {string} attributes The given prop.attributes.
     *
     * @returns {string} id The node id.
     */
    private _getNodeIdFromAttributes(attributes: string): string {
        // Identify node id from prop.attributes
        // E.g. &quot;hlist&#x3D;17&quot; or &quot;selection&#x3D;77&quot;
        return attributes.split(&#x27;&#x3D;&#x27;)[1].toString();
    }

    /**
     * Private method: _adjustBiblioLink.
     *
     * It finds internal links in the online-access property
     * of a bibliography link and adjusts the values
     * to be displayed via HTML.
     *
     * @param {string} str The given link string.
     * @example
     * str &#x3D; &#x27;(PDF) http://www.example.com/myPdf.pdf&#x27;
     *
     * @returns {string} The adjusted bibliography link.
     */
    private _adjustBiblioLink(str: string): string {
        if (!str) {
            return;
        }

        let outStr: string;
        let linkRegArr: RegExpExecArray;

        // Check for double spaces
        str &#x3D; str.replace(&#x27;  &#x27;, &#x27; &#x27;);

        // Split &quot;str&quot; behind closing parentheses
        const splitArr: string[] &#x3D; str.split(&#x27;) &#x27;);

        // Get label of link from 1st part of splitArr (without opening parentheses)
        const labelStr: string &#x3D; splitArr[0].replace(&#x27;(&#x27;, &#x27;&#x27;);

        // Regexp for links
        const regExLink &#x3D; /&lt;a (.*?)&gt;(.*?)&lt;\/a&gt;/i;

        // Check for link in 2nd part of splitArr
        if (regExLink.exec(splitArr[1])) {
            // ... link with &lt;a&gt; tag
            linkRegArr &#x3D; regExLink.exec(splitArr[1]);
            outStr &#x3D; &#x27;&lt;a &#x27; + linkRegArr[1] + &#x27;&gt;&#x27; + labelStr + &#x27;&lt;/a&gt;&#x27;;
        } else if (labelStr !&#x3D;&#x3D; &#x27;DOI&#x27;) {
            // ... &lt;a&gt; tag is missing, add it
            outStr &#x3D; &#x27;&lt;a href&#x3D;&quot;&#x27; + splitArr[1] + &#x27;&quot;&gt;&#x27; + labelStr + &#x27;&lt;/a&gt;&#x27;;
        } else {
            // No links, pure string
            outStr &#x3D; labelStr + &#x27;: &#x27; + splitArr[1];
        }
        return outStr;
    }

    /**
     * Private method: _replaceSalsahLink.
     *
     * It finds internal salsah links in richtext values
     * and replaces them with Angular click-directives.
     *
     * @param {string} str The given richtext value.
     *
     * @returns {string} The adjusted richtext value.
     */
    private _replaceSalsahLink(str: string): string {
        if (!str) {
            return;
        }
        const regNum &#x3D; /\d{3,}/; // Regexp for object id (3 or more DIGITS)
        const regLink &#x3D; new RegExp(
            &#x27;&lt;a href&#x3D;&quot;((http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?salsah\\.org\\/api\\/resources\\/\\d{3,})&quot; class&#x3D;&quot;salsah-link&quot;&gt;(.*?)&lt;/a&gt;&#x27;,
            &#x27;i&#x27;
        ); // Regexp for salsah links
        let regArr: RegExpExecArray;

        // Check for salsah links in str
        while (regLink.exec(str)) {
            // I.e.: as long as regLink is detected in str do...
            regArr &#x3D; regLink.exec(str);

            // Identify resource id
            const resId &#x3D; regNum.exec(regArr[1])[0];

            // Replace href attribute with click-directive
            // Linktext is stored in last regexp-result regArr[regArr.length-1]
            const replaceValue &#x3D;
                &#x27;&lt;a (click)&#x3D;&quot;ref.navigateToResource(\&#x27;&#x27; +
                resId +
                &#x27;\&#x27;); $event.stopPropagation()&quot;&gt;&#x27; +
                regArr[regArr.length - 1] +
                &#x27;&lt;/a&gt;&#x27;;
            str &#x3D; str.replace(regArr[0], replaceValue);
        } // END while

        return str;
    }

    /**
     * Private method: _replaceParagraphTags.
     *
     * It removes paragraph tags in richtext values
     * and replaces line breaks instead for multiple lines.
     *
     * @param {string} str The given richtext value.
     *
     * @returns {string} The adjusted richtext value.
     */
    private _replaceParagraphTags(str: string): string {
        if (!str) {
            return;
        }
        str &#x3D; str
            .replace(/&lt;\/p&gt;&lt;p&gt;/g, &#x27;&lt;br /&gt;&#x27;)
            .replace(/&lt;p&gt;|&lt;\/p&gt;/g, &#x27;&#x27;)
            .replace(str, &#x27;$&amp;&#x27;);
        return str;
    }

    /**
     * Private method: _distinctSubjects.
     *
     * It removes duplicates from an array (SubjectItemJson[]).
     * It checks for every array position (reduce) if the obj_id
     * of the entry at the current position (y) is already
     * in the array (findIndex). If that is not the case it
     * pushes y into x which is initialized as empty array [].
     *
     * See also {@link https://gist.github.com/telekosmos/3b62a31a5c43f40849bb#gistcomment-2137855}.
     *
     * @param {SubjectItemJson[]} subjects The given subject with possible duplicates.
     *
     * @returns {SubjectItemJson[]} The distinct subjects.
     */
    private _distinctSubjects(subjects: SubjectItemJson[]): SubjectItemJson[] {
        if (!subjects) {
            return;
        }
        this.filteredOut &#x3D; 0;
        return subjects.reduce(
            (x, y) &#x3D;&gt; (x.findIndex(e &#x3D;&gt; e.obj_id &#x3D;&#x3D;&#x3D; y.obj_id) &lt; 0 ? [...x, y] : ((this.filteredOut +&#x3D; 1), x)),
            []
        );
    }

    /**
     * Private method: _groupByRestype.
     *
     * It groups an array of incoming links
     * by their resource type.
     *
     * @param {ResourceDetailIncomingLink[]} incomingLinks The given incoming links.
     *
     * @returns {ResourceDetailGroupedIncomingLinks} The grouped incoming links.
     */
    private _groupByRestype(incomingLinks: ResourceDetailIncomingLink[]): ResourceDetailGroupedIncomingLinks[] {
        if (!incomingLinks) {
            return;
        }

        // Find out and alphabetically sort all the unique restype labels
        const restypeLabels &#x3D; new Set(incomingLinks.map(incomingLink &#x3D;&gt; incomingLink.restype.label).sort());

        // Produce a list of restypes with its incoming links
        return Array.from(restypeLabels).map(label &#x3D;&gt; ({
            restypeLabel: label,
            links: incomingLinks.filter(incomingLink &#x3D;&gt; incomingLink.restype.label &#x3D;&#x3D;&#x3D; label),
        }));
    }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ConversionService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
