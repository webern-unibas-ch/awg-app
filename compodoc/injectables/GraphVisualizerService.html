<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>awg-app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
        <link rel="stylesheet" href="../styles/Readthedocs.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">awg-app documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li>Injectables</li>
  <li >GraphVisualizerService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>The GraphVisualizer service.</p>
<p>It handles the query requests of the graph visualizer.</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_store" >_store</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_abbreviate" >_abbreviate</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_createStore" >_createStore</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_executeQuery" >_executeQuery</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_extractNamespacesFromString" >_extractNamespacesFromString</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_extractQNamesFromSPARQLWhereClause" >_extractQNamesFromSPARQLWhereClause</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_getNamespaces" >_getNamespaces</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_loadTriplesInStore" >_loadTriplesInStore</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_mapKeys" >_mapKeys</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_prepareSelectResponse" >_prepareSelectResponse</a>
                            </li>
                            <li>
                                <a href="#abbreviateTriples" >abbreviateTriples</a>
                            </li>
                            <li>
                                <a href="#checkNamespacesInQuery" >checkNamespacesInQuery</a>
                            </li>
                            <li>
                                <a href="#doQuery" >doQuery</a>
                            </li>
                            <li>
                                <a href="#getQuerytype" >getQuerytype</a>
                            </li>
                            <li>
                                <a href="#limitTriples" >limitTriples</a>
                            </li>
                            <li>
                                <a href="#parseTripleString" >parseTripleString</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(prefixPipe: <a href="../classes/Prefix.html" target="_self">PrefixPipe</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:42</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Constructor of the GraphVisualizerService.</p>
<p>It declares a private instance of the <a href="../pipes/PrefixPipe.html">PrefixPipe</a>.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>prefixPipe</td>
                                                  
                                                        <td>
                                                                        <code><a href="../classes/Prefix.html" target="_self" >PrefixPipe</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Instance of the PrefixPipe.</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_abbreviate"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_abbreviate</b></span>
                        <a href="#_abbreviate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_abbreviate(iri: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, namespaces: <a href="../interfaces/Namespace.html" target="_self">Namespace</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="317"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:317</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _abbreviate.</p>
<p>It abbreviates the namespaces of a given iri.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>iri</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given iri string.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>namespaces</td>
                                    <td>
                                                <code><a href="../interfaces/Namespace.html" target="_self" >Namespace</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given namespaces.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The abbreviated or original iri string.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_createStore"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_createStore</b></span>
                        <a href="#_createStore"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_createStore()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="339"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:339</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _createStore.</p>
<p>It creates an instance of the triple store.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise of the triple store instance.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_executeQuery"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_executeQuery</b></span>
                        <a href="#_executeQuery"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_executeQuery(store: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, query: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="360"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:360</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _executeQuery.</p>
<p>It executes a given query against a given triple store.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>store</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given triplestore.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>query</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given query string.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;RDFStoreConstructResponse | RDFStoreSelectResponse&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise of the rdfstore construct or select response.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_extractNamespacesFromString"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_extractNamespacesFromString</b></span>
                        <a href="#_extractNamespacesFromString"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_extractNamespacesFromString(type: <a href="../interfaces/Namespace.html" target="_self">NamespaceType</a>, str: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="383"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:383</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _extractNamespacesFromString.</p>
<p>It extracts the namespaces (qname: <baseURI>) of a given type (SPARQL, TURTLE)
from a given string.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>
                                    <td>
                                                <code><a href="../interfaces/Namespace.html" target="_self" >NamespaceType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given namespace type.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>str</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given string.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        <p>A promise of the namespaces.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_extractQNamesFromSPARQLWhereClause"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_extractQNamesFromSPARQLWhereClause</b></span>
                        <a href="#_extractQNamesFromSPARQLWhereClause"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_extractQNamesFromSPARQLWhereClause(query: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="439"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:439</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _extractQNamesFromSPARQLWhereClause.</p>
<p>It identifies the qNames that are used in the WHERE clause of a SPARQL query.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>query</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given query string.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>string[]</code>

                    </div>
                    <div class="io-description">
                        <p>A string array of the used qNames.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_getNamespaces"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_getNamespaces</b></span>
                        <a href="#_getNamespaces"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_getNamespaces(triples: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="482"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:482</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _getNamespaces.</p>
<p>It extracts the namespaces from a given triple string.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>triples</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given triple string.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Namespace.html" target="_self" >Promise&lt;Namespace&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>A promise of the namespaces.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_loadTriplesInStore"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_loadTriplesInStore</b></span>
                        <a href="#_loadTriplesInStore"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_loadTriplesInStore(store: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, triples: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, mimeType?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="509"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:509</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _loadTriplesInStore.</p>
<p>It loads the given triple string into the given triplestore.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>store</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given triplestore.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>triples</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given triple string.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>mimeType</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>The optional given mimetype.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;number&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise of the size of the triples loaded into the store.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_mapKeys"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_mapKeys</b></span>
                        <a href="#_mapKeys"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_mapKeys(obj: literal type, newKeys: literal type)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="535"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:535</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _mapKeys.</p>
<p>It maps the keys of a given key-value paired object to given newKeys.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>obj</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>newKeys</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        <p>: string} An object with the new keys.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_prepareSelectResponse"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>_prepareSelectResponse</b></span>
                        <a href="#_prepareSelectResponse"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_prepareSelectResponse(selectResponse: <a href="../interfaces/RDFStoreSelectResponse.html" target="_self">RDFStoreSelectResponse</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="552"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:552</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private method: _prepareSelectResponse.</p>
<p>It prepares the data of the select response.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>selectResponse</td>
                                    <td>
                                                <code><a href="../interfaces/RDFStoreSelectResponse.html" target="_self" >RDFStoreSelectResponse</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given selectResponse.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        <p>: number; data: QueryResult | string } An object with a status code, and the data as QueryResult or string.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="abbreviateTriples"></a>
                    <span class="name">
                        <span ><b>abbreviateTriples</b></span>
                        <a href="#abbreviateTriples"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>abbreviateTriples(storeTriples: RDFStoreConstructResponseTriple[], namespaces: <a href="../interfaces/Namespace.html" target="_self">Namespace</a>, mimeType?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="112"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:112</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: abbreviateTriples.</p>
<p>It abbreviates the given triples according to the given namespaces.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeTriples</td>
                                    <td>
                                            <code>RDFStoreConstructResponseTriple[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given triples from the rdf construct response.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>namespaces</td>
                                    <td>
                                                <code><a href="../interfaces/Namespace.html" target="_self" >Namespace</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given namespaces.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>mimeType</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>The given optional mimeType.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Triple.html" target="_self" >Triple[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>The array of abbreviated triples.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkNamespacesInQuery"></a>
                    <span class="name">
                        <span ><b>checkNamespacesInQuery</b></span>
                        <a href="#checkNamespacesInQuery"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>checkNamespacesInQuery(queryStr: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, turtleStr: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="152"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:152</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: checkNamespacesInQuery.</p>
<p>It checks the existing namespaces and qNames in a SPARQL query
and appends missing prefix declarations, if possible, from the Turtle string.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>queryStr</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given SPARQL query string.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>turtleStr</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given Turtle string.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The query with appended namespaces.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="doQuery"></a>
                    <span class="name">
                        <span ><b>doQuery</b></span>
                        <a href="#doQuery"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>doQuery(queryType: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, query: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ttlString: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, mimeType?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="217"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:217</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: doQuery.</p>
<p>It performs a query against the rdfstore.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>queryType</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given query type.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>query</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given query.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>ttlString</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given turtle string.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>mimeType</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>The optional given mimetype.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/QueryResult.html" target="_self" >Promise&lt;string | QueryResult | []&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>A promise of the query result triples.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getQuerytype"></a>
                    <span class="name">
                        <span ><b>getQuerytype</b></span>
                        <a href="#getQuerytype"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getQuerytype(query: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="264"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:264</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: getQuerytype.</p>
<p>It gets the query type from a given query.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>query</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given query.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>The query type.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="limitTriples"></a>
                    <span class="name">
                        <span ><b>limitTriples</b></span>
                        <a href="#limitTriples"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>limitTriples(triples: <a href="../interfaces/Triple.html" target="_self">Triple[]</a>, limit: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="90"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:90</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: limitTriples.</p>
<p>It limits a given array of triples by a given limit.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>triples</td>
                                    <td>
                                                <code><a href="../interfaces/Triple.html" target="_self" >Triple[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given triples array.</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>limit</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given limit.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Triple.html" target="_self" >Triple[]</a></code>

                    </div>
                    <div class="io-description">
                        <p>The array of limited triples.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseTripleString"></a>
                    <span class="name">
                        <span ><b>parseTripleString</b></span>
                        <a href="#parseTripleString"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>parseTripleString(triples: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="62"
                            class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:62</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Public method: parseTripleString.</p>
<p>It parses the triples from a given triple string.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>triples</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>The given triple string.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;literal type | &gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A promise of the parsed triples.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_store"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_store</b></span>
                        <a href="#_store"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/views/edition-view/edition-outlets/edition-complex/edition-detail/edition-graph/graph-visualizer/services/graph-visualizer.service.ts:42</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Private variable: _store.</p>
<p>It keeps the rdfstore instance.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;

import * as N3 from &#x27;n3&#x27;;

import {
    Namespace,
    NamespaceType,
    PrefixForm,
    QueryTypeIndex,
    QueryResult,
    RDFStoreConstructResponse,
    RDFStoreConstructResponseTriple,
    RDFStoreSelectResponse,
    Triple,
} from &#x27;../models&#x27;;
import { PrefixPipe } from &#x27;../prefix-pipe&#x27;;

/**
 * Declared variable: rdfstore.
 *
 * It provides access to the rdfstore library.
 */
declare let rdfstore: any;

/**
 * The GraphVisualizer service.
 *
 * It handles the query requests of the graph visualizer.
 */
@Injectable()
export class GraphVisualizerService {
    /**
     * Private variable: _store.
     *
     * It keeps the rdfstore instance.
     */
    private _store: any;

    /**
     * Constructor of the GraphVisualizerService.
     *
     * It declares a private instance of the {@link PrefixPipe}.
     *
     * @param {PrefixPipe} prefixPipe Instance of the PrefixPipe.
     */
    constructor(private prefixPipe: PrefixPipe) {}

    /**
     * Public method: parseTripleString.
     *
     * It parses the triples from a given triple string.
     *
     * @param {string} triples The given triple string.
     *
     * @returns {Promise&lt;{triples; namespaces}&gt;} A promise of the parsed triples.
     */
    parseTripleString(triples: string): Promise&lt;{ triples; namespaces } | unknown&gt; {
        const parser &#x3D; new N3.Parser();
        const jsonTriples &#x3D; [];

        return new Promise((resolve, reject) &#x3D;&gt; {
            parser.parse(triples, (err, triple, namespaceValues) &#x3D;&gt; {
                if (triple) {
                    jsonTriples.push(triple);
                } else {
                    resolve({ triples: jsonTriples, namespaces: namespaceValues });
                }
                if (err) {
                    reject(err);
                }
            });
        });
    }

    /**
     * Public method: limitTriples.
     *
     * It limits a given array of triples by a given limit.
     *
     * @param {Triple[]} triples The given triples array.
     * @param {number} limit The given limit.
     *
     * @returns {Triple[]} The array of limited triples.
     */
    limitTriples(triples: Triple[], limit: number): Triple[] {
        if (!triples) {
            return [];
        }
        if (triples.length &gt; limit) {
            return triples.slice(0, limit);
        } else {
            return triples;
        }
    }

    /**
     * Public method: abbreviateTriples.
     *
     * It abbreviates the given triples according to the given namespaces.
     *
     * @param {RDFStoreConstructResponseTriple[]} storeTriples The given triples from the rdf construct response.
     * @param {string} namespaces The given namespaces.
     * @param {string} [mimeType] The given optional mimeType.
     *
     * @returns {Triple[]} The array of abbreviated triples.
     */
    abbreviateTriples(
        storeTriples: RDFStoreConstructResponseTriple[],
        namespaces: Namespace,
        mimeType?: string
    ): Triple[] {
        if (!mimeType) {
            mimeType &#x3D; &#x27;text/turtle&#x27;;
        }
        return storeTriples.map((storeTriple: RDFStoreConstructResponseTriple) &#x3D;&gt; {
            let s: string &#x3D; storeTriple.subject.nominalValue;
            let p: string &#x3D; storeTriple.predicate.nominalValue;
            let o: string &#x3D; storeTriple.object.nominalValue;

            // Abbreviate turtle format
            if (mimeType &#x3D;&#x3D;&#x3D; &#x27;text/turtle&#x27;) {
                if (this._abbreviate(s, namespaces) !&#x3D; null) {
                    s &#x3D; this._abbreviate(s, namespaces);
                }
                if (this._abbreviate(p, namespaces) !&#x3D; null) {
                    p &#x3D; this._abbreviate(p, namespaces);
                }
                if (this._abbreviate(o, namespaces) !&#x3D; null) {
                    o &#x3D; this._abbreviate(o, namespaces);
                }
            }
            return { subject: s, predicate: p, object: o };
        });
    }

    /**
     * Public method: checkNamespacesInQuery.
     *
     * It checks the existing namespaces and qNames in a SPARQL query
     * and appends missing prefix declarations, if possible, from the Turtle string.
     *
     * @param {string} queryStr The given SPARQL query string.
     * @param {string} turtleStr The given Turtle string.
     *
     * @returns {string} The query with appended namespaces.
     */
    checkNamespacesInQuery(queryStr: string, turtleStr: string): string {
        if (!queryStr || !turtleStr) {
            return undefined;
        }
        // Get namespaces from Turtle triples
        const turtleNamespaces: Namespace &#x3D; this._extractNamespacesFromString(NamespaceType.TURTLE, turtleStr);
        // Get namespaces from SPARQL query
        const sparqlNamespaces: Namespace &#x3D; this._extractNamespacesFromString(NamespaceType.SPARQL, queryStr);
        // Get qNames used in the SPARQL query WHERE clause
        const qNames: string[] &#x3D; this._extractQNamesFromSPARQLWhereClause(queryStr);

        // Get keys of namespace objects
        const turtleNamespaceKeys &#x3D; Object.keys(turtleNamespaces);
        const sparqlNamespaceKeys &#x3D; Object.keys(sparqlNamespaces);
        let missingNamespacesStr &#x3D; &#x27;&#x27;;

        // Loop over namespaces from Turtle prefix clause
        turtleNamespaceKeys.forEach(key &#x3D;&gt; {
            // If namespace is missing in SPARQL header, add them from Turtle
            if (sparqlNamespaceKeys.indexOf(key) &#x3D;&#x3D;&#x3D; -1) {
                missingNamespacesStr +&#x3D; &#x60;PREFIX ${key} ${turtleNamespaces[key]}\n&#x60;;
            }
        });

        // Loop over existing qNames from SPARQL query
        if (qNames.length &gt; 0) {
            qNames.forEach(qName &#x3D;&gt; {
                // If prefix is not in the list...
                if (sparqlNamespaceKeys.indexOf(qName) &#x3D;&#x3D;&#x3D; -1) {
                    // TODO: Warnings should go into error messages
                    console.warn(
                        &#x60;Prefix &#x27;${qName}&#x27; not declared in SPARQL and/or Turtle header. Searching in default namespaces...&#x60;
                    );

                    const defaultNamespace &#x3D; this.prefixPipe.transform(qName, PrefixForm.LONG);
                    if (defaultNamespace !&#x3D;&#x3D; qName) {
                        const missingPrefix &#x3D; &#x60;PREFIX ${qName} &lt;${defaultNamespace}&gt;\n&#x60;;
                        missingNamespacesStr +&#x3D; missingPrefix;
                        console.warn(&#x60;Added &#x27;${missingPrefix}&#x27; to SPARQL prefixes from list of default namespaces.&#x60;);
                    } else {
                        console.warn(&#x60;&#x27;${qName}&#x27; is unknown. Please provide a declaration.&#x60;);
                    }
                }
            });
        }

        if (missingNamespacesStr !&#x3D;&#x3D; &#x27;&#x27;) {
            queryStr &#x3D; missingNamespacesStr + queryStr;
        }

        return queryStr;
    }

    /**
     * Public method: doQuery.
     *
     * It performs a query against the rdfstore.
     *
     * @param {string} queryType The given query type.
     * @param {string} query The given query.
     * @param {string} ttlString The given turtle string.
     * @param {string} [mimeType] The optional given mimetype.
     *
     * @returns {Promise&lt;Triple[]&gt;} A promise of the query result triples.
     */
    doQuery(
        queryType: string,
        query: string,
        ttlString: string,
        mimeType?: string
    ): Promise&lt;string | QueryResult | Triple[]&gt; {
        if (!mimeType) {
            mimeType &#x3D; &#x27;text/turtle&#x27;;
        }

        return this._createStore()
            .then(store &#x3D;&gt; {
                this._store &#x3D; store;

                return this._loadTriplesInStore(store, ttlString, mimeType);
            })
            .then((_storeSize: number) &#x3D;&gt; this._executeQuery(this._store, query))
            .then((res: RDFStoreConstructResponse | RDFStoreSelectResponse) &#x3D;&gt; {
                // Reformat data if select query
                if (queryType &#x3D;&#x3D;&#x3D; &#x27;select&#x27;) {
                    const response &#x3D; res as RDFStoreSelectResponse;
                    const selectResponse &#x3D; this._prepareSelectResponse(response);
                    return selectResponse.data;
                }

                // Reformat data if construct query
                if (queryType &#x3D;&#x3D;&#x3D; &#x27;construct&#x27;) {
                    const response &#x3D; res as RDFStoreConstructResponse;
                    // Get namespaces
                    return this._getNamespaces(ttlString).then((namespaces: Namespace) &#x3D;&gt;
                        // Process triples
                        this.abbreviateTriples(response.triples, namespaces, mimeType)
                    );
                }
                return undefined;
            });
    }

    /**
     * Public method: getQuerytype.
     *
     * It gets the query type from a given query.
     *
     * @param {string} query The given query.
     *
     * @returns {string} The query type.
     */
    getQuerytype(query: string): string {
        let keyWords: QueryTypeIndex[] &#x3D; [
            { queryType: &#x27;select&#x27;, index: -1 },
            { queryType: &#x27;construct&#x27;, index: -1 },
            { queryType: &#x27;ask&#x27;, index: -1 },
            { queryType: &#x27;count&#x27;, index: -1 },
            { queryType: &#x27;describe&#x27;, index: -1 },
            { queryType: &#x27;insert&#x27;, index: -1 },
            { queryType: &#x27;delete&#x27;, index: -1 },
        ];

        // Get indexes and set a variable if at least one matches + store lowest index
        let match &#x3D; false; // Set to true if some keyword match is found
        let low &#x3D; Infinity;

        keyWords &#x3D; keyWords.map(item &#x3D;&gt; {
            item.index &#x3D; query.toLowerCase().indexOf(item.queryType);
            if (item.index !&#x3D;&#x3D; -1) {
                match &#x3D; true;
                if (item.index &lt; low) {
                    low &#x3D; item.index;
                }
            }
            return item;
        });

        // If none of the keywords match, return null
        if (!match) {
            return null;
        }

        // If more keywords exist in one query, take the one with the lowest index (first in string)
        const lowest: QueryTypeIndex &#x3D; keyWords.find(item &#x3D;&gt; item.index &#x3D;&#x3D;&#x3D; low);

        let type: string &#x3D; lowest.queryType;

        if (type &#x3D;&#x3D;&#x3D; &#x27;insert&#x27; || type &#x3D;&#x3D;&#x3D; &#x27;delete&#x27;) {
            type &#x3D; &#x27;update&#x27;;
        }

        return type;
    }

    /**
     * Private method: _abbreviate.
     *
     * It abbreviates the namespaces of a given iri.
     *
     * @param {string} iri The given iri string.
     * @param {Namespace} namespaces The given namespaces.
     *
     * @returns {string} The abbreviated or original iri string.
     */
    private _abbreviate(iri: string, namespaces: Namespace): string {
        let newVal: string &#x3D; iri;
        // If IRI has &#x27;http&#x27; or &#x27;https in its name, continue
        if (iri.indexOf(&#x27;http&#x27;) !&#x3D;&#x3D; -1) {
            // Loop over namespaces
            Object.entries(namespaces).forEach(([key, value]) &#x3D;&gt; {
                // If the IRI has the prefixed namespace in its name, return it
                if (iri.indexOf(value) !&#x3D;&#x3D; -1) {
                    newVal &#x3D; iri.replace(value, key + &#x27;:&#x27;);
                }
            });
        }
        return newVal;
    }

    /**
     * Private method: _createStore.
     *
     * It creates an instance of the triple store.
     *
     * @returns {Promise&lt;any&gt;} A promise of the triple store instance.
     */
    private _createStore(): Promise&lt;any&gt; {
        return new Promise((resolve, reject) &#x3D;&gt; {
            rdfstore.create((err, store) &#x3D;&gt; {
                if (err) {
                    reject(err);
                }
                resolve(store);
            });
        });
    }

    /**
     * Private method: _executeQuery.
     *
     * It executes a given query against a given triple store.
     *
     * @param {any} store The given triplestore.
     * @param {string} query The given query string.
     *
     * @returns {Promise&lt;RDFStoreConstructResponse | RDFStoreSelectResponse&gt;} A promise of the rdfstore construct or select response.
     */
    private _executeQuery(store: any, query: string): Promise&lt;RDFStoreConstructResponse | RDFStoreSelectResponse&gt; {
        return new Promise((resolve, reject) &#x3D;&gt; {
            store.execute(query, (err, res: RDFStoreConstructResponse | RDFStoreSelectResponse) &#x3D;&gt; {
                if (err) {
                    console.error(&#x27;_executeQuery# got ERROR&#x27;, err);
                    reject(err);
                }
                resolve(res);
            });
        });
    }

    /**
     * Private method: _extractNamespacesFromString.
     *
     * It extracts the namespaces (qname: &lt;baseURI&gt;) of a given type (SPARQL, TURTLE)
     * from a given string.
     *
     * @param {string} str The given string.
     * @param {NamespaceType} type The given namespace type.
     *
     * @returns {Promise&lt;Namespace&gt;} A promise of the namespaces.
     */
    private _extractNamespacesFromString(type: NamespaceType, str: string) {
        // Replace all whitespace characters with a single space and split by space
        // Remove empty values
        const arr &#x3D; str
            .toLowerCase()
            .replace(/\s/g, &#x27; &#x27;)
            .split(&#x27; &#x27;)
            .filter(el &#x3D;&gt; el !&#x3D;&#x3D; &#x27;&#x27;);

        let prefixStr;

        switch (type) {
            case NamespaceType.TURTLE:
                prefixStr &#x3D; &#x27;@prefix&#x27;.toLowerCase();
                break;
            case NamespaceType.SPARQL:
                prefixStr &#x3D; &#x27;PREFIX&#x27;.toLowerCase();
                break;
            default:
                // This branch should not be reached
                const exhaustiveCheck: never &#x3D; type;
                throw new Error(&#x60;The type must be TURTLE or SPARQL, but was: ${exhaustiveCheck}.&#x60;);
        }

        // Get index of all occurrences of prefix string
        const prefixIndexArray &#x3D; arr.reduce((a, e, i) &#x3D;&gt; {
            if (e &#x3D;&#x3D;&#x3D; prefixStr) {
                a.push(i);
            }
            return a;
        }, []);

        // Create object of qNames and namespaceNames
        const obj &#x3D; {};
        prefixIndexArray.forEach(prefixIndex &#x3D;&gt; {
            const qName &#x3D; arr[prefixIndex + 1];
            let namespaceName &#x3D; arr[prefixIndex + 2];
            // Remove final dot if there is no space between namespace and dot
            if (namespaceName.at(-1) &#x3D;&#x3D;&#x3D; &#x27;.&#x27;) {
                namespaceName &#x3D; namespaceName.slice(0, -1);
            }
            obj[qName] &#x3D; namespaceName;
        });

        return obj;
    }

    /**
     * Private method: _extractQNamesFromSPARQLWhereClause.
     *
     * It identifies the qNames that are used in the WHERE clause of a SPARQL query.
     *
     * @param {string} query The given query string.
     *
     * @returns {string[]} A string array of the used qNames.
     */
    private _extractQNamesFromSPARQLWhereClause(query: string): string[] {
        let m;
        let queryStr &#x3D; query.toLowerCase();
        let start &#x3D; 0;
        const qNames: string[] &#x3D; [];
        const regex &#x3D; /\b[a-zA-Z]{2,15}:/g;
        const where &#x3D; &#x27;WHERE {&#x27;.toLowerCase();

        // Find WHERE clause
        if (queryStr.includes(where)) {
            start &#x3D; queryStr.indexOf(where) + where.length;
        }

        // Remove everything before WHERE clause from query string
        queryStr &#x3D; queryStr.slice(start);

        // Find prefixes in query
        // eslint-disable-next-line no-cond-assign
        while ((m &#x3D; regex.exec(queryStr)) !&#x3D;&#x3D; null) {
            // This is necessary to avoid infinite loops with zero-width matches
            if (m.index &#x3D;&#x3D;&#x3D; regex.lastIndex) {
                regex.lastIndex++;
            }

            // The result can be accessed through the &#x60;m&#x60;-variable.
            m.forEach(match &#x3D;&gt; {
                if (qNames.indexOf(match) &#x3D;&#x3D;&#x3D; -1) {
                    qNames.push(match);
                }
            });
        }
        return qNames;
    }

    /**
     * Private method: _getNamespaces.
     *
     * It extracts the namespaces from a given triple string.
     *
     * @param {string} triples The given triple string.
     *
     * @returns {Promise&lt;Namespace&gt;} A promise of the namespaces.
     */
    private _getNamespaces(triples: string): Promise&lt;Namespace&gt; {
        // Parse triples
        const parser &#x3D; new N3.Parser();

        return new Promise((resolve, reject) &#x3D;&gt; {
            parser.parse(triples, (err, triple, prefixes) &#x3D;&gt; {
                if (!triple) {
                    resolve(prefixes);
                }
                if (err) {
                    reject(err);
                }
            });
        });
    }

    /**
     * Private method: _loadTriplesInStore.
     *
     * It loads the given triple string into the given triplestore.
     *
     * @param {any} store The given triplestore.
     * @param {string} triples The given triple string.
     * @param {string} [mimeType] The optional given mimetype.
     *
     * @returns {Promise&lt;number&gt;} A promise of the size of the triples loaded into the store.
     */
    private _loadTriplesInStore(store: any, triples: string, mimeType?: string): Promise&lt;number&gt; {
        if (!mimeType) {
            mimeType &#x3D; &#x27;text/turtle&#x27;;
        }

        return new Promise((resolve, reject) &#x3D;&gt; {
            store.load(mimeType, triples, (err, size) &#x3D;&gt; {
                if (err) {
                    console.error(&#x27;_loadTriplesInStore# got error&#x27;, err);
                    reject(err);
                }
                resolve(size);
            });
        });
    }

    /**
     * Private method: _mapKeys.
     *
     * It maps the keys of a given key-value paired object to given newKeys.
     *
     * @param {[key:string]: string} obj The given obj.
     * @param {[key:string]: string} newKeys The given new keys.
     *
     * @returns {[key:string]: string} An object with the new keys.
     */
    private _mapKeys(obj: { [key: string]: string }, newKeys: { [key: string]: string }): { [key: string]: string } {
        const keyValues &#x3D; Object.keys(obj).map(key &#x3D;&gt; {
            const newKey &#x3D; newKeys[key] || key;
            return { [newKey]: obj[key] };
        });
        return Object.assign({}, ...keyValues);
    }

    /**
     * Private method: _prepareSelectResponse.
     *
     * It prepares the data of the select response.
     *
     * @param {RDFStoreSelectResponse} selectResponse The given selectResponse.
     *
     * @returns  {status: number; data: QueryResult | string } An object with a status code, and the data as QueryResult or string.
     */
    private _prepareSelectResponse(selectResponse: RDFStoreSelectResponse): {
        status: number;
        data: QueryResult | string;
    } {
        if (!selectResponse) {
            return { status: 404, data: undefined };
        }

        // Check that it didn&#x27;t return null results
        if (selectResponse[0] &#x3D;&#x3D; null) {
            return { status: 400, data: &#x27;Query returned no results&#x27; };
        }

        // Get variable keys
        const varKeys &#x3D; Object.keys(selectResponse[0]);

        // Get object array
        const b &#x3D; selectResponse;

        // Rename keys according to below mapping table
        const map &#x3D; {
            token: &#x27;type&#x27;,
            type: &#x27;datatype&#x27;,
            lang: &#x27;xml:lang&#x27;,
        };

        // Loop over data to rename the keys
        for (const i in b) {
            if (b.hasOwnProperty(i)) {
                for (const key in varKeys) {
                    if (varKeys.hasOwnProperty(key)) {
                        // Map keys
                        b[i][varKeys[key]] &#x3D; this._mapKeys(b[i][varKeys[key]], map);

                        // Add label with short prefix
                        b[i][varKeys[key]][&#x27;label&#x27;] &#x3D; &#x27;&#x27;;
                        if (b[i][varKeys[key]][&#x27;value&#x27;]) {
                            b[i][varKeys[key]][&#x27;label&#x27;] &#x3D; this.prefixPipe.transform(
                                b[i][varKeys[key]][&#x27;value&#x27;],
                                PrefixForm.SHORT
                            );

                            // Transform integer values to numbers
                            const xmlsInteger &#x3D; &#x27;http://www.w3.org/2001/XMLSchema#integer&#x27;;
                            const xmlsNonNegativeInteger &#x3D; &#x27;http://www.w3.org/2001/XMLSchema#nonNegativeInteger&#x27;;
                            const type &#x3D; b[i][varKeys[key]][&#x27;type&#x27;];
                            const datatype &#x3D; b[i][varKeys[key]][&#x27;datatype&#x27;] || &#x27;&#x27;;
                            if (
                                type &#x3D;&#x3D;&#x3D; &#x27;literal&#x27; &amp;&amp;
                                (datatype &#x3D;&#x3D;&#x3D; xmlsInteger || datatype &#x3D;&#x3D;&#x3D; xmlsNonNegativeInteger)
                            ) {
                                b[i][varKeys[key]][&#x27;label&#x27;] &#x3D; +b[i][varKeys[key]][&#x27;value&#x27;];
                            }
                        }
                    }
                }
            }
        }

        // Re-format data
        const reformatted: QueryResult &#x3D; { head: { vars: varKeys }, body: { bindings: b } };

        return { status: 200, data: reformatted };
    }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'GraphVisualizerService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
