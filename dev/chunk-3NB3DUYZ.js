import{a as S}from"./chunk-WDKHFZWG.js";import{B as ut,D as ft,J as _,Ra as vt,a as D,b as He,i as le,j as Ve,ka as mt,l as t,na as ht,o as ze,oa as gt,p as We,ra as Le,t as $e}from"./chunk-4DUUYM7V.js";var yt={production:!0,GA_SEND_PAGE_VIEW:!0};var ce=class{isNotEmptyArray(e){return e&&Array.isArray(e)?e.length!==0:!1}isNotEmptyObject(e){return e&&!Array.isArray(e)?Object.keys(e).length!==0:!1}isSketchId(e){return e?.includes("_Sk")||e?.includes("SkRT")||!1}};ce=t([_({providedIn:"root"})],ce);var Ye=class{constructor(e,o,n,s){this.query=e,this.nRows=o,this.startAt=n,this.viewType=s}},qe=class{};var Ke=class{constructor(e,o){this.jsonRaw=JSON.parse(JSON.stringify(e)),this.jsonConverted=JSON.parse(JSON.stringify(o)),this.detail=o}};var de=class{constructor(e,o,n){this.props=e,this.images=o,this.incoming=n}};var ee,Qe=(ee=class{constructor(e){this.doc=e,this._analyticsId=S.ANALYTICS_ID,this._analyticsEndpoint=S.ANALYTICS_ENDPOINT,this._isInitialized=!1,this._sendPageView=yt.GA_SEND_PAGE_VIEW}initializeAnalytics(){!this._analyticsEndpoint||!this._analyticsId||(this._sendPageView===!1?console.info("Running non-production analytics replacement now"):this._prependAnalyticsScript(),this._isInitialized=!0)}trackPageView(e){!e||this._isInitialized!==!0||gtag("config",this._analyticsId,{page_path:e,send_page_view:this._sendPageView})}_prependAnalyticsScript(){let e=this.doc.createElement("script");e.async=!0,e.src=this._analyticsEndpoint+"?id="+this._analyticsId,this.doc.head.prepend(e)}},ee.ctorParameters=()=>[{type:void 0,decorators:[{type:ft,args:[mt]}]}],ee);Qe=t([_({providedIn:"root"})],Qe);var Pe=class{constructor(e,o){this.headers=new ht().set("Accept","application/json"),this.params=o,this.url=S.API_ENDPOINT+e}};var xe=class{constructor(){this.status=0,this.statusText="",this.url="",this.errorInfo=""}};var h=function(){function i(){}return i}();var g;(function(i){i[i.DISABLE=0]="DISABLE",i[i.ENABLE=1]="ENABLE",i[i.LOGGING=2]="LOGGING"})(g||(g={}));var z;(function(i){i[i.CASE_STRICT=1]="CASE_STRICT",i[i.CASE_INSENSITIVE=2]="CASE_INSENSITIVE"})(z||(z={}));var P;(function(i){i[i.ALLOW_NULL=1]="ALLOW_NULL",i[i.ALLOW_OBJECT_NULL=2]="ALLOW_OBJECT_NULL",i[i.DISALLOW_NULL=3]="DISALLOW_NULL"})(P||(P={}));var v;(function(i){i[i.MAP_NULLABLE=0]="MAP_NULLABLE",i[i.IGNORE_NULLABLE=1]="IGNORE_NULLABLE",i[i.PASS_NULLABLE=2]="PASS_NULLABLE"})(v||(v={}));var b=function(){function i(){}return i.MAPPING_PROPERTY="__jsonconvert__mapping__",i.MAPPER_PROPERTY="__jsonconvert__mapper__",i.CLASS_IDENTIFIER="__jsonconvert__class_identifier__",i}();var _t=function(){function i(){this.classPropertyName="",this.jsonPropertyName="",this.expectedJsonType=void 0,this.convertingMode=v.MAP_NULLABLE,this.customConverter=null}return i}();var ue=function(){function i(e,o,n,s){this._operationMode=g.ENABLE,this._valueCheckingMode=P.ALLOW_OBJECT_NULL,this._mapUndefinedToNull=!1,this._ignorePrimitiveChecks=!1,this._propertyMatchingRule=z.CASE_STRICT,this._propertyConvertingMode=void 0,this._useDiscriminator=!1,this._discriminatorPropertyName="$type",this._classes=new Map,e!==void 0&&e in g&&(this.operationMode=e),o!==void 0&&o in P&&(this.valueCheckingMode=o),n!==void 0&&(this.ignorePrimitiveChecks=n),s!==void 0&&(this.propertyMatchingRule=s)}return Object.defineProperty(i.prototype,"operationMode",{get:function(){return this._operationMode},set:function(e){e in g&&(this._operationMode=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"valueCheckingMode",{get:function(){return this._valueCheckingMode},set:function(e){e in P&&(this._valueCheckingMode=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mapUndefinedToNull",{get:function(){return this._mapUndefinedToNull},set:function(e){this._mapUndefinedToNull=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignorePrimitiveChecks",{get:function(){return this._ignorePrimitiveChecks},set:function(e){this._ignorePrimitiveChecks=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"propertyMatchingRule",{get:function(){return this._propertyMatchingRule},set:function(e){e in z&&(this._propertyMatchingRule=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"propertyConvertingMode",{get:function(){return this._propertyConvertingMode},set:function(e){this._propertyConvertingMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ignoreRequiredCheck",{get:function(){return this.propertyConvertingMode===v.IGNORE_NULLABLE},set:function(e){this.propertyConvertingMode=e?v.IGNORE_NULLABLE:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"useDiscriminator",{get:function(){return this._useDiscriminator},set:function(e){this._useDiscriminator=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"discriminatorPropertyName",{get:function(){return this._discriminatorPropertyName},set:function(e){this._discriminatorPropertyName=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"classes",{get:function(){return this._classes},enumerable:!1,configurable:!0}),i.prototype.registerClasses=function(){for(var e=this,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];o.forEach(function(s){var a=s.prototype[b.CLASS_IDENTIFIER]||s.name;a&&e.classes.set(a,s)})},i.prototype.unregisterClasses=function(){for(var e=this,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];o.forEach(function(s){var a=s.prototype[b.CLASS_IDENTIFIER]||s.name;e.classes.delete(a)})},i.prototype.unregisterAllClasses=function(){this.classes.clear()},i.prototype.serialize=function(e,o){if(this.operationMode===g.DISABLE)return e;if(e instanceof Array)return this.serializeArray(e,o);if(typeof e=="object")return this.serializeObject(e,o);throw new Error(`Fatal error in JsonConvert. Passed parameter data in JsonConvert.serialize() is not in valid format (object or array).
`)},i.prototype.serializeObject=function(e,o){if(this.operationMode===g.DISABLE)return e;if(e=this.mapUndefinedToNull&&e===void 0?null:e,e===void 0)throw new Error(`Fatal error in JsonConvert. Passed parameter instance in JsonConvert.serializeObject() is undefined. This is not a valid JSON format.
`);if(e===null){if(this.valueCheckingMode===P.DISALLOW_NULL)throw new Error(`Fatal error in JsonConvert. Passed parameter instance in JsonConvert.serializeObject() is null. You have specified to disallow null values.
`);return e}else if(typeof e!="object"||e instanceof Array)throw new Error(`Fatal error in JsonConvert. Passed parameter instance in JsonConvert.serializeObject() is not of type object.
`);this.operationMode===g.LOGGING&&(console.log("----------"),console.log("Receiving JavaScript instance:"),console.log(e));var n={},s;o?s=new o:s=e;for(var a=0,p=Object.keys(s);a<p.length;a++){var c=p[a];try{this.serializeObject_loopProperty(e,s,c,n)}catch(f){throw this.operationMode===g.LOGGING&&(console.log("Failed to serialize property:"),console.log(f),console.log("----------")),f}}return this.operationMode===g.LOGGING&&(console.log("Returning JSON object:"),console.log(n),console.log("----------")),n},i.prototype.serializeArray=function(e,o){if(this.operationMode===g.DISABLE)return e;if(e=this.mapUndefinedToNull&&e===void 0?null:e,e===void 0)throw new Error(`Fatal error in JsonConvert. Passed parameter instanceArray in JsonConvert.serializeArray() is undefined. This is not a valid JSON format.
`);if(e===null){if(this.valueCheckingMode===P.DISALLOW_NULL)throw new Error(`Fatal error in JsonConvert. Passed parameter instanceArray in JsonConvert.serializeArray() is null. You have specified to disallow null values.
`);return e}else if(typeof e!="object"||!(e instanceof Array))throw new Error(`Fatal error in JsonConvert. Passed parameter instanceArray in JsonConvert.serializeArray() is not of type array.
`);this.operationMode===g.LOGGING&&(console.log("----------"),console.log("Receiving JavaScript array:"),console.log(e));for(var n=[],s=0,a=e;s<a.length;s++){var p=a[s];n.push(this.serializeObject(p,o))}return this.operationMode===g.LOGGING&&(console.log("Returning JSON array:"),console.log(n),console.log("----------")),n},i.prototype.deserialize=function(e,o){if(o===void 0&&(o=null),this.operationMode===g.DISABLE)return e;if(e instanceof Array)return this.deserializeArray(e,o);if(typeof e=="object")return this.deserializeObject(e,o);throw new Error(`Fatal error in JsonConvert. Passed parameter json in JsonConvert.deserialize() is not in valid JSON format (object or array).
`)},i.prototype.deserializeObject=function(e,o){if(o===void 0&&(o=null),this.operationMode===g.DISABLE)return e;var n=this.getRealClassReference(e,o);if(e=this.mapUndefinedToNull&&e===void 0?null:e,e===void 0)throw new Error(`Fatal error in JsonConvert. Passed parameter jsonObject in JsonConvert.deserializeObject() is undefined. This is not a valid JSON format.
`);if(e===null){if(this.valueCheckingMode===P.DISALLOW_NULL)throw new Error(`Fatal error in JsonConvert. Passed parameter jsonObject in JsonConvert.deserializeObject() is null. You have specified to disallow null values.
`);return e}else if(typeof e!="object"||e instanceof Array)throw new Error(`Fatal error in JsonConvert. Passed parameter jsonObject in JsonConvert.deserializeObject() is not of type object.
`);this.operationMode===g.LOGGING&&(console.log("----------"),console.log("Receiving JSON object:"),console.log(e));for(var s=new n,a=0,p=Object.keys(s);a<p.length;a++){var c=p[a];try{this.deserializeObject_loopProperty(s,c,e)}catch(f){throw this.operationMode===g.LOGGING&&(console.log("Failed to deserialize property:"),console.log(f),console.log("----------")),f}}return this.operationMode===g.LOGGING&&(console.log("Returning CLASS instance:"),console.log(s),console.log("----------")),s},i.prototype.deserializeArray=function(e,o){if(o===void 0&&(o=null),this.operationMode===g.DISABLE)return e;if(e=this.mapUndefinedToNull&&e===void 0?null:e,e===void 0)throw new Error(`Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.deserializeObject() is undefined. This is not a valid JSON format.
`);if(e===null){if(this.valueCheckingMode===P.DISALLOW_NULL)throw new Error(`Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.deserializeObject() is null. You have specified to disallow null values.
`);return e}else if(typeof e!="object"||!(e instanceof Array))throw new Error(`Fatal error in JsonConvert. Passed parameter jsonArray in JsonConvert.deserializeArray() is not of type array.
`);this.operationMode===g.LOGGING&&(console.log("----------"),console.log("Receiving JSON array:"),console.log(e));for(var n=[],s=0,a=e;s<a.length;s++){var p=a[s];n.push(this.deserializeObject(p,o))}return this.operationMode===g.LOGGING&&(console.log("Returning array of CLASS instances:"),console.log(n),console.log("----------")),n},i.prototype.getRealClassReference=function(e,o){var n;if(this.useDiscriminator)if(e.hasOwnProperty(this.discriminatorPropertyName)){var s=(n=e[this.discriminatorPropertyName])!==null&&n!==void 0?n:"",a=this.classes.get(s);if(a!=null)return a;throw new Error('Fatal error in JsonConvert. Discriminator value "'+s+'" could not be found in the registered classes. Make sure you register the class using the method JsonConvert.registerClasses('+s+`)
`)}else throw new Error('Fatal error in JsonConvert. Discriminator property "'+this.discriminatorPropertyName+`" is missing in JSON object.
`);else{if(o===null)throw new Error(`Fatal error in JsonConvert. Passed parameter classReference in JsonConvert.deserialize() is null. This is only allowed if discriminator feature is enabled.
`);return o}},i.prototype.serializeObject_loopProperty=function(e,o,n,s){var a=this,p,c,f=this.getClassPropertyMappingOptions(o,n);if(f!==null){var L=f.jsonPropertyName,u=f.expectedJsonType,G=(p=this.propertyConvertingMode)!==null&&p!==void 0?p:f.convertingMode,B=f.customConverter,j=e[n];if(j=this.mapUndefinedToNull&&j===void 0?null:j,j==null){if(G===v.IGNORE_NULLABLE)return;if(G===v.PASS_NULLABLE){s[L]=j;return}}try{s[L]=B!==null?B.serialize(j):this.convertProperty(u,j,G,!0);var bt=(c=e?.constructor)===null||c===void 0?void 0:c.name;this._useDiscriminator&&s instanceof Object&&this.classes.forEach(function(Fe,Jt){Fe.name===bt&&(s[a._discriminatorPropertyName]=Jt)})}catch(Fe){throw new Error('Fatal error in JsonConvert. Failed to map the JavaScript instance of class "'+o[b.CLASS_IDENTIFIER]+`" to JSON because of a type error.

	Class property: 
		`+n+`

	Class property value: 
		`+j+`

	Expected type: 
		`+this.getExpectedType(u)+`

	Runtime type: 
		`+this.getTrueType(j)+`

	JSON property: 
		`+L+`

`+Fe.message+`
`)}}},i.prototype.deserializeObject_loopProperty=function(e,o,n){var s,a=this.getClassPropertyMappingOptions(e,o);if(a!==null){var p=a.jsonPropertyName,c=a.expectedJsonType,f=(s=this.propertyConvertingMode)!==null&&s!==void 0?s:a.convertingMode,L=a.customConverter,u=void 0;try{u=this.getObjectValue(n,p)}catch{}if(u=this.mapUndefinedToNull&&u===void 0?null:u,u==null){if(f===v.IGNORE_NULLABLE)return;if(f===v.PASS_NULLABLE){e[o]=u;return}}try{var G=u instanceof Object?u[this.discriminatorPropertyName]:null;this._useDiscriminator&&this.classes.has(G)&&(c=this.classes.get(G)),e[o]=L!==null?L.deserialize(u):this.convertProperty(c,u,f)}catch(B){throw new Error('Fatal error in JsonConvert. Failed to map the JSON object to the class "'+e[b.CLASS_IDENTIFIER]+`" because of a type error.

	Class property: 
		`+o+`

	Expected type: 
		`+this.getExpectedType(c)+`

	JSON property: 
		`+p+`

	JSON type: 
		`+this.getJsonType(u)+`

	JSON value: 
		`+JSON.stringify(u)+`

`+B.message+`
`)}}},i.prototype.getClassPropertyMappingOptions=function(e,o){var n=e[b.MAPPING_PROPERTY];if(typeof n>"u")return null;for(var s=Object.getPrototypeOf(e);s!=null;){var a=s[b.CLASS_IDENTIFIER];if(a){var p=a+"."+o;if(typeof n[p]<"u")return n[p]}s=Object.getPrototypeOf(s)}return null},i.prototype.convertProperty=function(e,o,n,s){if(e===void 0||e===h||e===null||e===Object)return o;if(o=this.mapUndefinedToNull&&o===void 0?null:o,o==null){if(n===v.IGNORE_NULLABLE)return;if(n===v.PASS_NULLABLE)return o}var a="1";e instanceof Array&&(a="2");var p="1or2";if(o instanceof Array?p="2":o instanceof Object||(p="1"),a==="1"&&p==="2")throw new Error("	Reason: Expected a non-array type, but given value is an array.");if(a==="2"&&p==="1"){if(o===null&&this.valueCheckingMode!==P.DISALLOW_NULL)return null;throw o===null?new Error("	Reason: Expected an array, but given value is null."):new Error("	Reason: Expected an array, but given value is a primitive type.")}if(a==="2"&&(p==="2"||p==="1or2")){if(o.length===0||Object.keys(o).length===0)return[];if(e.length===0)return o;var c=e.slice(0),f=[];if(p==="2"){for(var L=c.length<o.length,u=0;u<o.length;u++)L&&u>=c.length&&(c[u]=c[u-1]),f[u]=this.convertProperty(c[u],o[u],this.propertyConvertingMode||v.MAP_NULLABLE,s);return f}else{var L=c.length<Object.keys(o).length,u=0;for(var G in o)L&&u>=c.length&&(c[u]=c[u-1]),f[G]=this.convertProperty(c[u],o[G],this.propertyConvertingMode||v.MAP_NULLABLE,s),u++;return f}}else if(a==="1"&&(p==="1"||p==="1or2"))if((e instanceof Object&&[String,Number,Boolean].includes(e)===!1||typeof e=="string")&&o instanceof Object){if(typeof e=="string"){var B=this.classes.get(e);if(!B)throw new Error('	Reason: Given expected type "'+e+'" not registered with JsonConvert.registerClasses().');e=B}return e.prototype.hasOwnProperty(b.CLASS_IDENTIFIER)?s?this.serializeObject(o,e):this.deserializeObject(o,e):o}else{if(o===null)if(e===String||e===Number||e===Boolean){if(this.valueCheckingMode===P.ALLOW_NULL)return null;throw new Error("	Reason: Given value null does not match the expected primitive type.")}else{if(this.valueCheckingMode!==P.DISALLOW_NULL)return null;throw new Error("	Reason: Given value null does not match the expected object type.")}if(e===String&&typeof o=="string"||e===Number&&typeof o=="number"||e===Boolean&&typeof o=="boolean")return o;if(this.ignorePrimitiveChecks&&["string","number","boolean"].includes(typeof o))return o;throw new Error("	Reason: Given value type does not match the expected primitive type.")}throw new Error("	Reason: Mapping failed because of an unknown error.")},i.prototype.getObjectValue=function(e,o){if(this.propertyMatchingRule===z.CASE_INSENSITIVE){var n=Object.keys(e).reduce(function(s,a){return s[a.toLowerCase()]=a,s},{});o=n[o.toLowerCase()]}if(!(o in e))throw new Error;return e[o]},i.prototype.getExpectedType=function(e){var o="";if(e instanceof Array){o="[";for(var n=0;n<e.length;n++)n>0&&(o+=","),o+=this.getExpectedType(e[n]);return o+="]",o}else return e===h||e===null||e===Object?"any":e===String||e===Boolean||e===Number?new e().constructor.name.toLowerCase():typeof e=="function"?new e().constructor.name:typeof e=="string"?e:e===void 0?"undefined":"?????"},i.prototype.getJsonType=function(e){if(e===null)return"null";var o="";if(e instanceof Array){o="[";for(var n=0;n<e.length;n++)n>0&&(o+=","),o+=this.getJsonType(e[n]);return o+="]",o}else return typeof e},i.prototype.getTrueType=function(e){return typeof e},i}();var Ze=new Map;function l(i){return function(e){var o;if(Ze.has(i))throw new Error(`Fatal error in JsonConvert. You must use unique class identifiers in the @JsonObject() decorator.

	Class identifier: 
		`+i+`

This class identifier has been already used for class "`+((o=Ze.get(i))===null||o===void 0?void 0:o.name)+`".

`);Ze.set(i,e),e.prototype[b.CLASS_IDENTIFIER]=i.length>0?i:e.name;var n=e.prototype[b.MAPPING_PROPERTY];if(n)for(var s=Object.keys(n).filter(function(f){return f.indexOf(b.CLASS_IDENTIFIER+".")===0}),a=0,p=s;a<p.length;a++){var c=p[a];n[c.replace(b.CLASS_IDENTIFIER,e.prototype[b.CLASS_IDENTIFIER])]=n[c],delete n[c]}}}function r(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return function(o,n){var s=n,a=h,p=v.MAP_NULLABLE;switch(i.length){case 1:if(i[0]===void 0)throw new Error(`Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as first parameter in the @JsonProperty decorator.

	Class property: 
		`+n+`

Leave the decorator parameters empty if you do not wish to pass the first parameter.

`);s=i[0];break;case 2:if(i[0]===void 0)throw new Error(`Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as first parameter in the @JsonProperty decorator.

	Class property: 
		`+n+`

Leave the decorator parameters empty if you do not wish to pass the first parameter.

`);if(i[1]===void 0)throw new Error(`Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as second parameter in the @JsonProperty decorator.

	Class property: 
		`+n+`

Use "Any" to allow any type. You can import this class from "json2typescript".

`);s=i[0],a=i[1];break;case 3:if(i[0]===void 0)throw new Error(`Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as first parameter in the @JsonProperty decorator.

	Class property: 
		`+n+`

Leave the decorator parameters empty if you do not wish to pass the first parameter.

`);if(i[1]===void 0)throw new Error(`Fatal error in JsonConvert. It is not allowed to explicitly pass "undefined" as second parameter in the @JsonProperty decorator.

	Class property: 
		`+n+`

Use "Any" to allow any type. You can import this class from "json2typescript".

`);s=i[0],a=i[1],i[2]===!0?p=v.IGNORE_NULLABLE:i[2]===v.IGNORE_NULLABLE||i[2]===v.PASS_NULLABLE||i[2]===v.MAP_NULLABLE?p=i[2]:p=v.MAP_NULLABLE;break;default:break}typeof o[b.MAPPING_PROPERTY]>"u"&&(o[b.MAPPING_PROPERTY]=[]);var c=new _t;if(c.classPropertyName=n,c.jsonPropertyName=s,c.convertingMode=p,typeof a<"u"&&a!==null&&typeof a[b.MAPPER_PROPERTY]<"u"?c.customConverter=new a:c.expectedJsonType=a,typeof o[b.MAPPING_PROPERTY][b.CLASS_IDENTIFIER+"."+n]>"u")o[b.MAPPING_PROPERTY][b.CLASS_IDENTIFIER+"."+n]=c;else throw new Error(`Fatal error in JsonConvert. It is not allowed to add multiple decorators for the same property.

	Class property: 
		`+n+`

`)}}var Oe=class Oe{constructor(){this.status=0,this.statusText="",this.url=""}getBody(e){return Oe._jsonConvert.deserialize(this.body,e)}};Oe._jsonConvert=new ue(g.ENABLE,P.ALLOW_NULL);var Ae=Oe;var te,fe=(te=class{constructor(e){this.http=e,this.serviceName="ApiService",this.httpGetUrl=""}getApiResponse(e,o,n){return n||(n=new gt),this._httpGet(o,n).pipe(We(s=>s.getBody(e)),$e(s=>ze(()=>s)))}_httpGet(e,o){let n=new Pe(e,o);return this.http.get(n.url,{observe:"response",params:n.params,headers:n.headers}).pipe(ut(s=>{this.httpGetUrl=s.url}),We(s=>{let a=new Ae;return a.status=s.status,a.statusText=s.statusText,a.body=s.body,a.url=s.url,a}),$e(s=>this._handleRequestError(s)))}_handleRequestError(e){let o=new xe;return o.status=e.status?e.status:o.status,o.statusText=e.statusText?e.statusText:o.statusText,o.errorInfo=e.message?e.message:o.errorInfo,o.url=e.url?e.url:o.url,ze(()=>o)}},te.ctorParameters=()=>[{type:Le}],te);fe=t([_({providedIn:"root"})],fe);var me=class{constructor(e){this.longLabel=e[0].label;for(let a=1;a<e.length;a++){let p=e[a];this.longLabel+=", "+p.label,a===e.length-1&&(this.gnid=p.name.replace("gnid:",""),this.shortLabel=p.label,this.latitude=p.lat,this.longitude=p.lng,this.wiki=p.wikipedia)}let o='<img src="assets/img/logos/geonames.png" height="25" width="25" alt="'+this.shortLabel+'" />',n='<a href="https://www.geonames.org/'+this.gnid+'" title="'+this.longLabel+'">'+o+"</a>",s="";if(this.wiki){let a='<img src="assets/img/logos/wiki.svg" height="25" width="25" alt="'+this.wiki+'" />';s='<a href="https://'+this.wiki+'" title="'+this.wiki+'">'+a+"</a>"}this.html=this.shortLabel+" "+n+s}};var Xe;(function(i){i.page="page",i.structure="structure",i.contact="contact"})(Xe||(Xe={}));var O=class{constructor(){this.email=void 0,this.givenName=void 0,this.familyName=void 0,this.lang=void 0,this.password=void 0,this.status=void 0,this.token=void 0,this.user_id=void 0}};t([r("email",String,!0)],O.prototype,"email",void 0);t([r("firstname",String,!0)],O.prototype,"givenName",void 0);t([r("lastname",String,!0)],O.prototype,"familyName",void 0);t([r("lang",String,!0)],O.prototype,"lang",void 0);t([r("password",String,!0)],O.prototype,"password",void 0);t([r("status",Boolean,!0)],O.prototype,"status",void 0);t([r("token",String,!0)],O.prototype,"token",void 0);t([r("user_id",String,!0)],O.prototype,"user_id",void 0);O=t([l("UserDataJson")],O);var d=class{constructor(){this.status=void 0,this.userdata=void 0}};t([r("status",Number)],d.prototype,"status",void 0);t([r("userdata",O)],d.prototype,"userdata",void 0);d=t([l("BasicResponseJson")],d);var J=class{constructor(){this.duration=void 0,this.format_name=void 0,this.fps=void 0,this.nx=void 0,this.ny=void 0,this.origname=void 0,this.path=void 0,this.protocol=void 0}};t([r("duration",h)],J.prototype,"duration",void 0);t([r("format_name",String)],J.prototype,"format_name",void 0);t([r("fps",h)],J.prototype,"fps",void 0);t([r("nx",h)],J.prototype,"nx",void 0);t([r("ny",h)],J.prototype,"ny",void 0);t([r("origname",String)],J.prototype,"origname",void 0);t([r("path",String)],J.prototype,"path",void 0);t([r("protocol",String)],J.prototype,"protocol",void 0);J=t([l("LocationItemJson")],J);var I=class{constructor(){this.basepath=void 0,this.belongsToInstitution=void 0,this.dataNamedGraph=void 0,this.description=void 0,this.hasSelfJoinEnabled=!1,this.id=void 0,this.keywords=void 0,this.logo=void 0,this.longname=void 0,this.ontologyNamedGraph=void 0,this.rights=void 0,this.shortname=void 0}};t([r("basepath",String,!0)],I.prototype,"basepath",void 0);t([r("belongsToInstitution",null)],I.prototype,"belongsToInstitution",void 0);t([r("dataNamedGraph",String)],I.prototype,"dataNamedGraph",void 0);t([r("description",String,!0)],I.prototype,"description",void 0);t([r("hasSelfJoinEnabled",Boolean)],I.prototype,"hasSelfJoinEnabled",void 0);t([r("id",String)],I.prototype,"id",void 0);t([r("keywords",String,!0)],I.prototype,"keywords",void 0);t([r("logo",String,!0)],I.prototype,"logo",void 0);t([r("longname",String)],I.prototype,"longname",void 0);t([r("ontologyNamedGraph",String)],I.prototype,"ontologyNamedGraph",void 0);t([r("rights",Number,!0)],I.prototype,"rights",void 0);t([r("shortname",String)],I.prototype,"shortname",void 0);I=t([l("ProjectItemJson")],I);var E=class{constructor(){this.id=void 0,this.label=void 0,this.name=void 0}};t([r("id",String)],E.prototype,"id",void 0);t([r("label",String)],E.prototype,"label",void 0);t([r("name",String)],E.prototype,"name",void 0);E=t([l("NodeItemJson")],E);var W=class extends E{constructor(){super(...arguments),this.lat=void 0,this.lng=void 0,this.wikipedia=void 0}};t([r("lat",String,!0)],W.prototype,"lat",void 0);t([r("lng",String,!0)],W.prototype,"lng",void 0);t([r("wikipedia",String,!0)],W.prototype,"wikipedia",void 0);W=t([l("GeoDataItemJson")],W);var $=class extends d{constructor(){super(...arguments),this.nodelist=void 0}};t([r("nodelist",[W])],$.prototype,"nodelist",void 0);$=t([l("GeoDataJson")],$);var he=class extends E{constructor(){super(...arguments),this.level=void 0}};t([r("level",String)],he.prototype,"level",void 0);he=t([l("HlistItemJson")],he);var Y=class extends d{constructor(){super(...arguments),this.hlist=void 0}};t([r("hlist",[he])],Y.prototype,"hlist",void 0);Y=t([l("HlistJson")],Y);var oe=class extends E{constructor(){super(...arguments),this.label_ok=void 0,this.order=void 0}};t([r("label_ok",Boolean)],oe.prototype,"label_ok",void 0);t([r("order",String)],oe.prototype,"order",void 0);oe=t([l("SelectionItemJson")],oe);var q=class extends d{constructor(){super(...arguments),this.selection=void 0}};t([r("selection",[oe])],q.prototype,"selection",void 0);q=t([l("SelectionJson")],q);var Ee=class extends d{constructor(){super(...arguments),this.project_info=void 0}};t([r("project_info",I)],Ee.prototype,"project_info",void 0);Ee=t([l("ProjectJson")],Ee);var Ce=class extends d{constructor(){super(...arguments),this.projects=void 0}};t([r("projects",[I])],Ce.prototype,"projects",void 0);Ce=t([l("ProjectListJson")],Ce);var C=class{constructor(){this.comment=void 0,this.id=void 0,this.lastmod=void 0,this.lastmod_utc=void 0,this.person_id=void 0,this.textval=void 0,this.value=void 0}};t([r("comment",String)],C.prototype,"comment",void 0);t([r("id",String)],C.prototype,"id",void 0);t([r("lastmod",String,!0)],C.prototype,"lastmod",void 0);t([r("lastmod_utc",String,!0)],C.prototype,"lastmod_utc",void 0);t([r("person_id",String,!0)],C.prototype,"person_id",void 0);t([r("textval",String)],C.prototype,"textval",void 0);t([r("value",h)],C.prototype,"value",void 0);C=t([l("PropvalJson")],C);var R=class{constructor(){this.attributes=void 0,this.guielement=void 0,this.is_annotation=void 0,this.label=void 0,this.pid=void 0,this.values=void 0,this.valuetype=void 0,this.valuetype_id=void 0}};t([r("attributes",String)],R.prototype,"attributes",void 0);t([r("guielement",String)],R.prototype,"guielement",void 0);t([r("is_annotation",String)],R.prototype,"is_annotation",void 0);t([r("label",String)],R.prototype,"label",void 0);t([r("pid",String)],R.prototype,"pid",void 0);t([r("values",[C],!0)],R.prototype,"values",void 0);t([r("valuetype",String)],R.prototype,"valuetype",void 0);t([r("valuetype_id",String)],R.prototype,"valuetype_id",void 0);R=t([l("PropJson")],R);var T=class{constructor(){this.hasComment=void 0,this.hasColor=void 0,this.iconsrc=void 0,this.res_id=void 0,this.isRegionOf=void 0,this.hasGeometry=void 0}};t([r("https://www.knora.org/ontology/knora-base#hasComment",R)],T.prototype,"hasComment",void 0);t([r("https://www.knora.org/ontology/knora-base#hasColor",R)],T.prototype,"hasColor",void 0);t([r("iconsrc",String)],T.prototype,"iconsrc",void 0);t([r("res_id",String)],T.prototype,"res_id",void 0);t([r("https://www.knora.org/ontology/knora-base#isRegionOf",R)],T.prototype,"isRegionOf",void 0);t([r("https://www.knora.org/ontology/knora-base#hasGeometry",R)],T.prototype,"hasGeometry",void 0);T=t([l("RegionJson")],T);var m=class{constructor(){this.firstproperty=void 0,this.handle_id=void 0,this.lastmod=void 0,this.lastmod_utc=void 0,this.locations=void 0,this.locdata=void 0,this.person_id=void 0,this.preview=void 0,this.project_id=void 0,this.regions=void 0,this.resclass_has_location=void 0,this.resclass_name=void 0,this.restype_description=void 0,this.restype_iconsrc=void 0,this.restype_id=void 0,this.restype_label=void 0,this.restype_name=void 0,this.value_of=void 0}};t([r("firstproperty",String,!0)],m.prototype,"firstproperty",void 0);t([r("handle_id",String,!0)],m.prototype,"handle_id",void 0);t([r("lastmod",String)],m.prototype,"lastmod",void 0);t([r("lastmod_utc",String)],m.prototype,"lastmod_utc",void 0);t([r("locations",[J])],m.prototype,"locations",void 0);t([r("locdata",J)],m.prototype,"locdata",void 0);t([r("person_id",String)],m.prototype,"person_id",void 0);t([r("preview",J)],m.prototype,"preview",void 0);t([r("project_id",String)],m.prototype,"project_id",void 0);t([r("regions",[T],!0)],m.prototype,"regions",void 0);t([r("resclass_has_location",Boolean)],m.prototype,"resclass_has_location",void 0);t([r("resclass_name",String)],m.prototype,"resclass_name",void 0);t([r("restype_description",String)],m.prototype,"restype_description",void 0);t([r("restype_iconsrc",String)],m.prototype,"restype_iconsrc",void 0);t([r("restype_id",String)],m.prototype,"restype_id",void 0);t([r("restype_label",String)],m.prototype,"restype_label",void 0);t([r("restype_name",String)],m.prototype,"restype_name",void 0);t([r("value_of",Number)],m.prototype,"value_of",void 0);m=t([l("ResinfoJson")],m);var x=class{constructor(){this.canonical_res_id=void 0,this.context=void 0,this.firstprop=void 0,this.locations=void 0,this.parent_res_id=void 0,this.parent_resinfo=void 0,this.preview=void 0,this.region=void 0,this.res_id=void 0,this.resclass_name=void 0,this.resinfo=void 0}};t([r("canonical_res_id",String)],x.prototype,"canonical_res_id",void 0);t([r("context",Number)],x.prototype,"context",void 0);t([r("firstprop",[String],!0)],x.prototype,"firstprop",void 0);t([r("locations",[[J]],!0)],x.prototype,"locations",void 0);t([r("parent_res_id",String,!0)],x.prototype,"parent_res_id",void 0);t([r("parent_resinfo",m,!0)],x.prototype,"parent_resinfo",void 0);t([r("preview",[J],!0)],x.prototype,"preview",void 0);t([r("region",[String],!0)],x.prototype,"region",void 0);t([r("res_id",[String],!0)],x.prototype,"res_id",void 0);t([r("resclass_name",String,!0)],x.prototype,"resclass_name",void 0);t([r("resinfo",m,!0)],x.prototype,"resinfo",void 0);x=t([l("ContextJson")],x);var ge=class{constructor(){this.id=void 0,this.pid=void 0}};t([r("id",String)],ge.prototype,"id",void 0);t([r("pid",String)],ge.prototype,"pid",void 0);ge=t([l("ExtResIdJson")],ge);var F=class{constructor(){this.ext_res_id=void 0,this.resinfo=void 0,this.value=void 0}};t([r("ext_res_id",ge)],F.prototype,"ext_res_id",void 0);t([r("resinfo",m)],F.prototype,"resinfo",void 0);t([r("value",String)],F.prototype,"value",void 0);F=t([l("IncomingItemJson")],F);var re=class{constructor(){this.utf8str=void 0,this.textattr=void 0,this.resource_reference=void 0}};t([r("utf8str",String)],re.prototype,"utf8str",void 0);t([r("textattr",String)],re.prototype,"textattr",void 0);t([r("resource_reference",[String])],re.prototype,"resource_reference",void 0);re=t([l("PropertyJsonValue")],re);var y=class{constructor(){this.attributes=void 0,this.comments=null,this.guielement=void 0,this.guiorder=void 0,this.is_annotation=void 0,this.label=void 0,this.locations=void 0,this.occurrence=void 0,this.pid=void 0,this.regular_property=void 0,this.value_firstprops=void 0,this.value_iconsrcs=void 0,this.value_ids=void 0,this.value_restype=void 0,this.value_rights=void 0,this.values=void 0,this.valuetype_id=void 0,this.toHtml=void 0}getValuesAsPropertyJsonValues(){try{return new ue().deserializeArray(this.values,re)}catch{return[]}}};t([r("attributes",String,!0)],y.prototype,"attributes",void 0);t([r("comments",[h],!0)],y.prototype,"comments",void 0);t([r("guielement",String,!0)],y.prototype,"guielement",void 0);t([r("guiorder",Number,!0)],y.prototype,"guiorder",void 0);t([r("is_annotation",h)],y.prototype,"is_annotation",void 0);t([r("label",String,!0)],y.prototype,"label",void 0);t([r("locations",[J],!0)],y.prototype,"locations",void 0);t([r("occurrence",String,!0)],y.prototype,"occurrence",void 0);t([r("pid",String,!0)],y.prototype,"pid",void 0);t([r("regular_property",Number,!0)],y.prototype,"regular_property",void 0);t([r("value_firstprops",[String],!0)],y.prototype,"value_firstprops",void 0);t([r("value_iconsrcs",[String],!0)],y.prototype,"value_iconsrcs",void 0);t([r("value_ids",[String],!0)],y.prototype,"value_ids",void 0);t([r("value_restype",[String],!0)],y.prototype,"value_restype",void 0);t([r("value_rights",[h],!0)],y.prototype,"value_rights",void 0);t([r("values",h,!0)],y.prototype,"values",void 0);t([r("valuetype_id",String)],y.prototype,"valuetype_id",void 0);t([r("toHtml",[String],!0)],y.prototype,"toHtml",void 0);y=t([l("PropertyJson")],y);var w=class{constructor(){this.id=void 0,this.name=void 0,this.valuetype_id=void 0,this.attributes=void 0,this.vocabulary_id=void 0,this.guielement_id=void 0,this.is_annotation=void 0,this.person_id=void 0,this.shortname=void 0,this.longname=void 0,this.label=void 0}};t([r("id",String)],w.prototype,"id",void 0);t([r("name",String)],w.prototype,"name",void 0);t([r("valuetype_id",String)],w.prototype,"valuetype_id",void 0);t([r("attributes",String,!0)],w.prototype,"attributes",void 0);t([r("vocabulary_id",String)],w.prototype,"vocabulary_id",void 0);t([r("guielement_id",String)],w.prototype,"guielement_id",void 0);t([r("is_annotation",h)],w.prototype,"is_annotation",void 0);t([r("person_id",String,!0)],w.prototype,"person_id",void 0);t([r("shortname",String)],w.prototype,"shortname",void 0);t([r("longname",String)],w.prototype,"longname",void 0);t([r("label",String)],w.prototype,"label",void 0);w=t([l("PropertyDefinitionJson")],w);var Ne=class extends d{constructor(){super(...arguments),this.properties=void 0}};t([r("properties",[w])],Ne.prototype,"properties",void 0);Ne=t([l("PropertyTypesInResourceClassResponseJson")],Ne);var ne=class{constructor(){this.id=void 0,this.label=void 0}};t([r("id",String)],ne.prototype,"id",void 0);t([r("label",String)],ne.prototype,"label",void 0);ne=t([l("PropItemForResTypeJson")],ne);var H=class{constructor(){this.id=void 0,this.label=void 0,this.properties=void 0}};t([r("id",String)],H.prototype,"id",void 0);t([r("label",String)],H.prototype,"label",void 0);t([r("properties",[ne])],H.prototype,"properties",void 0);H=t([l("ResTypeItemJson")],H);var ie=class extends d{constructor(){super(...arguments),this.resource_context=void 0}};t([r("resource_context",x)],ie.prototype,"resource_context",void 0);ie=t([l("ResourceContextResponseJson")],ie);var M=class{constructor(){this.iconsrc=void 0,this.res_id=void 0,this.restype_label=void 0,this.restype_name=void 0,this.rights=void 0}};t([r("iconsrc",String)],M.prototype,"iconsrc",void 0);t([r("res_id",String)],M.prototype,"res_id",void 0);t([r("restype_label",String)],M.prototype,"restype_label",void 0);t([r("restype_name",String)],M.prototype,"restype_name",void 0);t([r("rights",h)],M.prototype,"rights",void 0);M=t([l("ResdataJson")],M);var V=class extends d{constructor(){super(...arguments),this.access=void 0,this.incoming=void 0,this.props=void 0,this.resdata=void 0,this.resinfo=void 0}};t([r("access",String)],V.prototype,"access",void 0);t([r("incoming",[F],!0)],V.prototype,"incoming",void 0);t([r("props",[y],!0)],V.prototype,"props",void 0);t([r("resdata",M,!0)],V.prototype,"resdata",void 0);t([r("resinfo",m,!0)],V.prototype,"resinfo",void 0);V=t([l("ResourceFullResponseJson")],V);var ve=class extends d{constructor(){super(...arguments),this.resource_info=void 0,this.rights=void 0}};t([r("resource_info",m)],ve.prototype,"resource_info",void 0);t([r("rights",Number)],ve.prototype,"rights",void 0);ve=t([l("ResourceInfoResponseJson")],ve);var K=class{constructor(){this.id=void 0,this.rights=void 0,this.value=void 0}};t([r("id",String)],K.prototype,"id",void 0);t([r("rights",Number)],K.prototype,"rights",void 0);t([r("value",[String])],K.prototype,"value",void 0);K=t([l("ResourceLabelSearchItemJson")],K);var je=class extends d{constructor(){super(...arguments),this.resources=void 0}};t([r("resources",[K])],je.prototype,"resources",void 0);je=t([l("ResourceLabelSearchResponseJson")],je);var Te=class extends d{constructor(){super(...arguments),this.properties=void 0}};t([r("properties",[R])],Te.prototype,"properties",void 0);Te=t([l("ResourcePropertiesResponseJson")],Te);var Ge=class extends d{constructor(){super(...arguments),this.rights=void 0}};t([r("rights",Number)],Ge.prototype,"rights",void 0);Ge=t([l("ResourceRightsResponseJson")],Ge);var k=class{constructor(){this.description=void 0,this.iconsrc=void 0,this.label=void 0,this.name=void 0,this.properties=void 0}};t([r("description",String)],k.prototype,"description",void 0);t([r("iconsrc",String)],k.prototype,"iconsrc",void 0);t([r("label",String)],k.prototype,"label",void 0);t([r("name",String)],k.prototype,"name",void 0);t([r("properties",[w])],k.prototype,"properties",void 0);k=t([l("RestypeJson")],k);var De=class extends d{constructor(){super(...arguments),this.restype_info=void 0}};t([r("restype_info",k)],De.prototype,"restype_info",void 0);De=t([l("ResourceTypeResponseJson")],De);var Me=class extends d{constructor(){super(...arguments),this.resourcetypes=void 0}};t([r("resourcetypes",[H])],Me.prototype,"resourcetypes",void 0);Me=t([l("ResourceTypesInVocabularyResponseJson")],Me);var N=class{constructor(){this.active=void 0,this.description=void 0,this.id=void 0,this.longname=void 0,this.project_id=void 0,this.shortname=void 0,this.uri=void 0}};t([r("active",Boolean)],N.prototype,"active",void 0);t([r("description",String)],N.prototype,"description",void 0);t([r("id",String)],N.prototype,"id",void 0);t([r("longname",String)],N.prototype,"longname",void 0);t([r("project_id",String)],N.prototype,"project_id",void 0);t([r("shortname",String)],N.prototype,"shortname",void 0);t([r("uri",String)],N.prototype,"uri",void 0);N=t([l("VocabularyItemJson")],N);var ke=class extends d{constructor(){super(...arguments),this.vocabularies=void 0}};t([r("vocabularies",[N])],ke.prototype,"vocabularies",void 0);ke=t([l("VocabularyResponseJson")],ke);var Q=class{constructor(){this.current=void 0,this.show_nrows=void 0,this.start_at=void 0}};t([r("current",Boolean)],Q.prototype,"current",void 0);t([r("show_nrows",Number)],Q.prototype,"show_nrows",void 0);t([r("start_at",Number)],Q.prototype,"start_at",void 0);Q=t([l("PagingItemJson")],Q);var A=class{constructor(){this.iconlabel=void 0,this.iconsrc=void 0,this.icontitle=void 0,this.obj_id=void 0,this.preview_nx=void 0,this.preview_ny=void 0,this.preview_path=void 0,this.rights=void 0,this.value=void 0,this.valuelabel=void 0,this.valuetype_id=void 0}};t([r("iconlabel",String)],A.prototype,"iconlabel",void 0);t([r("iconsrc",String)],A.prototype,"iconsrc",void 0);t([r("icontitle",String)],A.prototype,"icontitle",void 0);t([r("obj_id",String)],A.prototype,"obj_id",void 0);t([r("preview_nx",Number,!0)],A.prototype,"preview_nx",void 0);t([r("preview_ny",Number,!0)],A.prototype,"preview_ny",void 0);t([r("preview_path",String)],A.prototype,"preview_path",void 0);t([r("rights",Number,!0)],A.prototype,"rights",void 0);t([r("value",[h])],A.prototype,"value",void 0);t([r("valuelabel",[String])],A.prototype,"valuelabel",void 0);t([r("valuetype_id",[String])],A.prototype,"valuetype_id",void 0);A=t([l("SubjectItemJson")],A);var se=class{constructor(){this.nx=void 0,this.ny=void 0}};t([r("nx",Number)],se.prototype,"nx",void 0);t([r("ny",Number)],se.prototype,"ny",void 0);se=t([l("ThumbMaxJson")],se);var U=class extends d{constructor(){super(...arguments),this.nhits=void 0,this.paging=void 0,this.subjects=void 0,this.thumb_max=void 0}};t([r("nhits",h)],U.prototype,"nhits",void 0);t([r("paging",[Q])],U.prototype,"paging",void 0);t([r("subjects",[A])],U.prototype,"subjects",void 0);t([r("thumb_max",se)],U.prototype,"thumb_max",void 0);U=t([l("SearchResponseJson")],U);var ye=class extends d{constructor(){super(...arguments),this.message=void 0,this.sid=void 0}};t([r("message",String)],ye.prototype,"message",void 0);t([r("sid",String)],ye.prototype,"sid",void 0);ye=t([l("SessionJson")],ye);var et,X,_e=(X=class extends fe{constructor(e,o){super(e),this.http=e,this.utils=o}static replaceParagraphTags(e){return e?e.replace(/<\/p><p>/g,'<br class="mb-2" />').replace(/<p>|<\/p>/g,""):void 0}convertFullTextSearchResults(e){if(!e.subjects)return e;let o=e.subjects.map(s=>(s=this._cleanSubjectValueLabels(D({},s)),s=this._cleanSubjectValues(D({},s)),s)),n=this._distinctSubjects(o);return He(D({},e),{subjects:n})}convertObjectProperties(e){let o={};return o.lastmod=e.resinfo.lastmod,Object.keys(e.props).forEach(n=>{let s=e.props[n],a=[];if(s.hasOwnProperty("values")&&s.values!==void 0){switch(s.valuetype_id){case"4":s.values[0]!==""&&(a[0]=this._convertDateValue(s.values[0]));break;case"7":this.utils.isNotEmptyArray(s.values)&&(a=this._convertSelectionValues(s.values,s.attributes));break;case"14":if(s.values.length>0&&s.values[0].utf8str!==""){s.label=s.label.replace(" (Richtext)","");for(let p=0;p<s.values.length;p++){let c="";c=this._convertRichtextValue(s.values[p].utf8str,s.values[p].textattr),a[p]=c.trim(),s.label==="Online-Zugang"&&(a[p]=this._adjustBiblioLink(a[p]))}}break;default:if(s.values[0]!=="")for(let p=0;p<s.values.length;p++)a[p]=s.values[p].trim()}a.length>1?o[s.label]=a:a.length===1&&(o[s.label]=a[0])}}),o}convertResourceData(e,o){return e?.[0]?.access?e[0].access==="OK"?this._prepareAccessibleResource(e,o):this._prepareRestrictedResource(e,o):new Z(void 0,void 0)}prepareFullTextSearchResultText(e,o){let{subjects:n,nhits:s=0}=D({},e?.data);if(n){let a=n.length,c=`${a} / ${s} ${a===1?"Ergebnis":"Ergebnisse"}`;if(this.filteredOut>0){let f=this.filteredOut===1?"Duplikat":"Duplikate";c+=` (${this.filteredOut} ${f} entfernt)`}return c}else return`Die Abfrage ${o} ist leider fehlgeschlagen. Wiederholen Sie die Abfrage zu einem sp\xE4teren Zeitpunkt oder \xFCberpr\xFCfen sie die Suchbegriffe.`}_prepareRestrictedResource(e,o){let n=new ae(e[0],o),s=void 0;return new Z(n,s)}_prepareAccessibleResource(e,o){let n=e[0],s=e[1];n.props=this._convertGUISpecificProps(n.props);let a=new ae(n,o),p=this._prepareResourceDetailProperties(n.props),c=this._prepareResourceDetailImage(s),f=this._prepareResourceDetailIncomingLinks(n.incoming),L=new de(p,c,f);return new Z(a,L)}_prepareResourceDetailImage(e){let o=[];if(e.resource_context.res_id){let n=D({},e.resource_context);if(n.context===2&&n.resclass_name==="image")if(n.res_id.length===n.firstprop.length||n.res_id.length===n.locations.length){for(let s=0;s<n.res_id.length;s++){let a=new Se(n,s),p=new vt({small:a.reductSize,medium:a.reductSize,big:a.fullSize,description:a.origname,label:a.label,url:a.fullSize});o.push(p)}return o}else{console.warn("ConversionService - Array length for context objects is not consistent with firstprops length!",n);return}else if(n.context<2){console.warn("ConversionService - got no image context",n);return}}else return;return o}_prepareResourceDetailIncomingLinks(e){if(!e)return;let o=e.map(n=>new be(D({},n)));return this._groupByRestype(o)}_prepareResourceDetailProperties(e){if(!e)return;let o=n=>n.replace(" (Richtext)","");return Object.entries(e).map(n=>(n[1].label=o(n[1].label),new Je(n[1].pid,n[1].guielement,n[1].label,n[1].toHtml)))}_convertGUISpecificProps(e){return Object.keys(e).forEach(o=>{e[o]=this._addHtmlValues(e[o])}),e}_addHtmlValues(e,o){if(e.toHtml=[],e.values)switch(e.valuetype_id){case"4":for(let n=0;n<e.values.length;n++)e.toHtml[n]=this._convertDateValue(e.values[n]);break;case"6":for(let n=0;n<e.values.length;n++)e.toHtml[n]=this._convertLinkValue(e.values[n],e.value_firstprops[n],e.value_restype[n]);break;case"7":e.toHtml=this._convertSelectionValues(e.values,e.attributes);break;case"12":e.toHtml=this._convertHlistValues(e.values,e.attributes);break;case"14":for(let n=0;n<e.values.length;n++)e.toHtml[n]=this._convertRichtextValue(e.values[n].utf8str,e.values[n].textattr);break;case"15":e.toHtml=this._convertGeoValues(e.values);break;default:for(let n=0;n<e.values.length;n++)e.toHtml[n]=e.values[n]}return e}_cleanSubjectValueLabels(e){let{valuelabel:o,obj_id:n}=e,s=o?.[0],a=s?[s.replace(" (Richtext)","")]:o,p=n?n?.replace("_-_local",""):"";return He(D({},e),{valuelabel:a,obj_id:p})}_cleanSubjectValues(e){let o=D({},e),{valuetype_id:n,value:s}=o,a=s?.[0];if(n?.[0]==="14"&&a){let{utf8str:p,textattr:c}=a;if(p&&c){let f=this._convertRichtextValue(p,c);o.value[0]=f}}return o}_convertDateValue(e){return dateConverter(e).replace(" (G)","")}_convertGeoValues(e){let o=[];return e.forEach((n,s)=>{this._getAdditionalInfoFromApi($,n).subscribe({next:a=>{if(!a.nodelist)return console.warn("ConversionService# _convertGeoValues: got no nodelist from geonames response: ",a),o[s]="",o;let p=[...a.nodelist],c=new me(p);return o[s]=c.html,o},error:a=>console.error(a)})}),o}_convertHlistValues(e,o){let n=[],s=this._getNodeIdFromAttributes(o);return this._getAdditionalInfoFromApi(Y,s).subscribe({next:a=>{if(!a.hlist)return console.warn("ConversionService# convertHListValue: got no hlist from response: ",a),n;let p=[...a.hlist];return e.forEach((c,f)=>{let L=p.filter(u=>u.id===c);n[f]=L[0].label}),n},error:a=>console.error(a)}),n}_convertLinkValue(e,o,n){return`<a (click)="ref.navigateToResource('${e}')">${o} (${n})</a>`}_convertRichtextValue(e,o){let n=this._convertStandoffToHTML(e,o),s=this._replaceSalsahLink(n);return et.replaceParagraphTags(s)}_convertSelectionValues(e,o){let n=[],s=this._getNodeIdFromAttributes(o);return this._getAdditionalInfoFromApi(q,s).subscribe({next:a=>{if(!a.selection)return console.warn("ConversionService# _convertSelectionValues: got no selection from response: ",a),n;let p=[...a.selection];return e.forEach((c,f)=>{let L=p.filter(u=>u.id===c);n[f]=L[0].label}),n},error:a=>console.error(a)}),n}_convertStandoffToHTML(e,o){if(e)return o?htmlConverter(JSON.parse(o),e):e}_distinctSubjects(e){if(!e)return;let o=e.reduce((s,a)=>(s[a.obj_id]=a,s),{}),n=Object.values(o);return this.filteredOut=e.length-n.length,n}_getAdditionalInfoFromApi(e,o){let n;switch(e){case $:n="geonames/"+o+"?reqtype=node";break;case Y:n="hlists/"+o;break;case ie:n="resources/"+o+"_-_local?reqtype=context";break;case q:n="selections/"+o;break}return this.getApiResponse(e,n)}_getNodeIdFromAttributes(e){return e?.split("=")[1]?.toString()}_adjustBiblioLink(e){if(!e)return;let o,n;e=e.replace("  "," ");let s=e.split(") "),a=s[0].replace("(",""),p=/<a\\s+(?:[^>]*?\\s+)?(href=(["'])(.*?)\\2)>(.*?)<\/a>/i;return p.exec(s[1])?(n=p.exec(s[1]),o="<a "+n[1]+">"+a+"</a>"):a!=="DOI"?o='<a href="'+s[1]+'">'+a+"</a>":o=a+": "+s[1],o}_replaceSalsahLink(e){if(!e)return;let o=/<a\s+(?:[^>]*?\s+)?href=(["'])((?:https?:\/\/(?:www\.)?)?salsah\.org\/api\/resources\/([1-9]\d{0,12}))\1 class=(["'])salsah-link\4>(.*?)<\/a>/i,n;for(;n=o.exec(e);){let s=n[3],a=n.at(-1),p=`<a (click)="ref.navigateToResource('${s}'); $event.stopPropagation()">${a}</a>`;e=e.replace(n[0],p)}return e}_groupByRestype(e){if(!e)return;let o=new Set(e.map(n=>n.restype.label).sort());return Array.from(o).map(n=>({restypeLabel:n,links:e.filter(s=>s.restype.label===n)}))}},et=X,X.ctorParameters=()=>[{type:Le},{type:ce}],X);_e=et=t([_({providedIn:"root"})],_e);var tt={angular:{id:"angularlogo",src:"assets/img/logos/angular.svg",alt:"Logo Angular",href:"https://angular.io"},awg:{id:"awglogo",src:"assets/img/logos/awg.png",alt:"Logo AWG",href:"https://www.anton-webern.ch/"},bootstrap:{id:"bootstraplogo",src:"assets/img/logos/ng-bootstrap.svg",alt:"Logo ng-Bootstrap",href:"https://ng-bootstrap.github.io/"},github:{id:"githublogo",src:"assets/img/logos/github.svg",alt:"Logo GitHub",href:"https://github.com/webern-unibas-ch/awg-app"},sagw:{id:"sagwlogo",src:"assets/img/logos/sagw.jpg",alt:"Logo SAGW",href:"https://sagw.ch/sagw/"},snf:{id:"snflogo",src:"assets/img/logos/snf.svg",alt:"Logo SNF",href:"https://www.snf.ch"},sparql:{id:"sparqllogo",src:"assets/img/logos/sparql.svg",alt:"Logo SPARQL",href:"https://www.w3.org/TR/sparql11-query/"},unibas:{id:"unibaslogo",src:"assets/img/logos/uni.svg",alt:"Logo Uni Basel",href:"https://www.unibas.ch"}};var It={yearStart:2015,yearCurrent:new Date().getFullYear(),awgAppUrl:S.AWG_APP_URL,awgAppDevUrl:S.AWG_APP_URL+"/dev/",awgProjectUrl:S.AWG_PROJECT_URL,awgProjectName:S.AWG_PROJECT_NAME,compodocUrl:S.AWG_APP_COMPODOC_URL,daschUrl:S.DASCH_URL,dhlabUrl:S.DHLAB_URL,githubUrl:S.AWG_APP_GITHUB_URL,salsahUrl:S.SALSAH_URL,version:S.AWG_APP_VERSION,versionReleaseDate:S.AWG_APP_VERSION_RELEASE_DATE},Rt={authors:[{name:"Stefan M\xFCnnich",homepage:S.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"29. Januar 2016"},wt={address:{institution:"Musikwissenschaftliches Seminar der Universit\xE4t Basel",street:"Petersgraben 27/29",postalCode:"CH-4051",city:"Basel",country:"Schweiz"},phone:{label:"Telefon:",number:"+41 (0)61 207 28 21"},email:{label:"E-Mail:",mailto:"mailto:info-awg@unibas.ch",safeString:"info-awg [at] unibas [dot] ch"}},Ue={page:It,structure:Rt,contact:wt};var ot=class{getMetaDataSection(e){return Ue[e]}getMetaData(){return Ue}getLogos(){return tt}};ot=t([_({providedIn:"root"})],ot);var rt=class{constructor(){this._bufferSize=1,this._searchResponseWithQuerySubject=new Ve(this._bufferSize),this._searchResponseWithQueryStream$=this._searchResponseWithQuerySubject.asObservable(),this._resourceIdSubject=new Ve(this._bufferSize),this._resourceIdStream$=this._resourceIdSubject.asObservable()}getSearchResponseWithQuery(){return this._searchResponseWithQueryStream$}getResourceId(){return this._resourceIdStream$}updateSearchResponseWithQuery(e){this._searchResponseWithQuerySubject.next(e)}updateResourceId(e){this._resourceIdSubject.next(e)}clearSearchResponseWithQuery(){this._searchResponseWithQuerySubject.next(new Ie(new U,""))}clearResourceId(){this._resourceIdSubject.next("")}};rt=t([_({providedIn:"root"})],rt);var Re;(function(i){i.localStorage="localStorage",i.sessionStorage="sessionStorage"})(Re||(Re={}));var we=class{setStorageKey(e,o,n){if(!e||!o||!n)return;let s=window[e];if(this._storageIsSupported(s))s.setItem(o,n);else return}getStorageKey(e,o){if(!e||!o)return null;let n=window[e];return this._storageHasKey(n,o)?n.getItem(o):null}removeStorageKey(e,o){if(!e||!o)return;let n=window[e];if(this._storageHasKey(n,o))n.removeItem(o);else return}_storageHasKey(e,o){return this._storageIsSupported(e)?!!e.getItem(o):!1}_storageIsSupported(e){return typeof e<"u"&&e!==null&&this._storageIsAvailable(e)}_storageIsAvailable(e){try{let o=new Date().toDateString();e.setItem(o,o);let n=e.getItem(o)===o;return e.removeItem(o),n}catch{return!1}}};we=t([_({providedIn:"root"})],we);var Be;(function(i){i.SET="set",i.GET="get",i.REMOVE="remove"})(Be||(Be={}));var St=class{constructor(e,o){this.type=e,this.value=o}},nt=class extends we{constructor(){super(...arguments),this.GND_KEY="gnd",this.DNB_REG=/href="(https?:\/\/d-nb.info\/gnd\/([\w\-]{8,11}))"/i,this.CURRENT_LOCATION={getOrigin:e=>e.origin}}exposeGnd(e){if(e?.type)switch(e.type){case Be.SET:{this._setGndToSessionStorage(e.value);break}case Be.REMOVE:{this._removeGndFromSessionStorage();break}default:console.warn("Got an uncatched GND event",e)}}_setGndToSessionStorage(e){if(this._valueHasGnd(e)){let o=this.linkRegArr.pop().toString();this.setStorageKey(Re.sessionStorage,this.GND_KEY,o),this._exposeGndMessageToParent(o)}}_removeGndFromSessionStorage(){this.removeStorageKey(Re.sessionStorage,this.GND_KEY),this._exposeGndMessageToParent(null)}_exposeGndMessageToParent(e){let o=S.INSERI_URL,n=S.LOCALHOST_URL,s=[o,n];for(let a of s)this.CURRENT_LOCATION.getOrigin(window.parent.location)===a&&window.parent.window.postMessage({gnd:e},a)}_valueHasGnd(e){return this.DNB_REG.test(e)?this.linkRegArr=this.DNB_REG.exec(e):this.linkRegArr=null,!!this.linkRegArr}};nt=t([_({providedIn:"root"})],nt);var it=class{constructor(){this._cachedResponses=new Map}get(e){return this._cachedResponses?.has(e.urlWithParams)?this._cachedResponses.get(e.urlWithParams):null}put(e,o){this._cachedResponses.set(e.urlWithParams,o.clone())}};it=t([_({providedIn:"root"})],it);var st=class{constructor(){this._isLoadingSubject=new le(!1),this._isLoadingStream$=this._isLoadingSubject.asObservable()}getLoadingStatus(){return this._isLoadingStream$}updateLoadingStatus(e){this._isLoadingSubject.next(e)}};st=t([_({providedIn:"root"})],st);var at=class{constructor(e,o){this.id=e.obj_id,this.title=e.value[0],this.subtitle=e.icontitle,this.arrayIndex=o,this.displayIndex=this.arrayIndex+1}};var pt=class{};var pe=class{constructor(e,o){this.query=e,this.nhits=o}};var lt=class{constructor(){this._searchInfoDataSubject=new le(new pe("---","---")),this._searchInfoDataStream$=this._searchInfoDataSubject.asObservable(),this._searchInfoTitleSubject=new le(""),this._searchInfoTitleStream$=this._searchInfoTitleSubject.asObservable()}getSearchInfoData(){return this._searchInfoDataStream$}getSearchInfoTitle(){return this._searchInfoTitleStream$}updateSearchInfoData(e){this._searchInfoDataSubject.next(e)}updateSearchInfoTitle(e){this._searchInfoTitleSubject.next(e)}clearSearchInfoData(){this._searchInfoDataSubject.next(new pe("---","---"))}clearSearchInfoTitle(){this._searchInfoTitleSubject.next("")}};lt=t([_({providedIn:"root"})],lt);var ae=class{constructor(e,o){this.objID="---",this.icon="---",this.type="---",this.lastmod="---",this.title="---";let n=e.resinfo,s=e.props;if(typeof n<"u"){let a=e.resdata.res_id;if(a!==o){console.error(`ERROR: ResourceDetailHeader => currentId ${o} not matching data.resdata.res_id ${a}`);return}switch(this.objID=a,this.icon=n.restype_iconsrc,this.type=n.restype_label,this.lastmod=n.lastmod,n.restype_id){case"28":{let p=s["webern-onto:event"].toHtml[0];p=_e.replaceParagraphTags(p),this.title=p;break}case"29":{this.title=s["dc:title"].toHtml[0]+"<br/>"+s["dc:date"].toHtml[0];break}case"125":{this.title=s["dc:title"].toHtml[0]+"<br/>"+s["dc:date"].toHtml[0];break}case"36":{this.title="[M "+s["webern-onto:mnr"].toHtml[0]+"] "+s["dc:title"].toHtml[0];break}case"43":{this.title=s["dc:title"].toHtml[0];break}case"45":{let p=s["salsah:lastname"].toHtml[0],c=s["salsah:firstname"].toHtml[0];this.title=c+" "+p;break}case"126":{this.title=s["webern-onto:bibl_title_short"].toHtml[0];break}default:this.title=n.restype_description}}else this.objID=o,this.icon="https://www.salsah.org/app/icons/16x16/delete.png";e.access==="NO_ACCESS"&&(this.type="restricted",this.title="Kein Zugriff auf dieses Objekt m\xF6glich")}};var Se=class{constructor(e,o){let n=e.locations[o],s=n[3]?n[3]:n[0];this.resId=e.res_id[o],this.guielement=e.resclass_name,this.label=e.firstprop[o],this.origname=s.origname,this.reductSize=s.path,this.fullSize=n[n.length-1].path}};var be=class{constructor(e){this.id=e.ext_res_id.id,this.value=e.value,this.restype={id:e.resinfo.restype_id,label:e.resinfo.restype_label,icon:e.resinfo.restype_iconsrc}}};var Je=class{constructor(e,o,n,s){this.pid=e,this.guielement=o,this.label=n,this.values=s}};var Z=class{constructor(e,o){this.header=e,this.content=o}};var ct=class{constructor(e,o,n){this.value=e||"",this.title=o||"",this.label=n||""}};var Ie=class{constructor(e,o){this.data=e,this.query=o}};var dt=class{constructor(e,o,n,s,a,p){this.id=e||"",this.label=o||"",this.typeName=n||"",this.typeValue=s||"",this.options=a||"",this.description=p||""}};export{tt as a,Xe as b,yt as c,Qe as d,fe as e,ce as f,Ne as g,ie as h,V as i,Me as j,U as k,Ke as l,ct as m,Ye as n,qe as o,Ie as p,dt as q,_e as r,ot as s,rt as t,Be as u,St as v,nt as w,it as x,st as y,at as z,pt as A,pe as B,lt as C};
