function dateConverter(D){const ne=1721425.5,N=["So","Mo","Di","Mi","Do","Fr","Sa"],a={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function x(c,h){return c-h*Math.floor(c/h)}function e(c){return(c=parseInt(c))%4==0&&!(c%100==0&&c%400!=0)}function r(c,h,f){return ne-1+365*(c-1)+Math.floor((c-1)/4)+-Math.floor((c-1)/100)+Math.floor((c-1)/400)+Math.floor((367*h-362)/12+(h<=2?0:e(c)?-1:-2)+f)}function o(c,h){c=parseInt(c);const f={};let O;switch(h){case"GREGORIAN":case"gregorian":O=function n(c){let h,f,O,T,P,Q,I,k,G,J,X,U,K,ie;return h=Math.floor(c-.5)+.5,f=h-ne,O=Math.floor(f/146097),T=x(f,146097),P=Math.floor(T/36524),Q=x(T,36524),I=Math.floor(Q/1461),k=x(Q,1461),G=Math.floor(k/365),J=400*O+100*P+4*I+G,4==P||4==G||J++,X=h-r(J,1,1),U=h<r(J,3,1)?0:e(J)?1:2,K=Math.floor((12*(X+U)+373)/367),ie=h-r(J,K,1)+1,J<=0&&J--,new Array(J,K,ie)}(c);break;case"JULIAN":case"julian":O=S.jd_to_julian(c);break;case"JEWISH":case"jewish":O=S.jd_to_hebrew(c);break;case"FRENCH":case"french":O=S.jd_to_french_revolutionary(c)}return f.year=O[0],f.month=O[1],f.day=O[2],f.weekday=function l(c){return c=Number(c),x(Math.floor(c+1.5),7)}(c),f}const u=o(D.dateval1,D.calendar),d=o(D.dateval2,D.calendar);let v="";if(D.dateprecision1==D.dateprecision2)switch(D.dateprecision1){case"DAY":v=u.year===d.year&&u.month===d.month&&u.day===d.day?"["+N[u.weekday]+"] "+u.day+". "+a[D.calendar][u.month]+" "+u.year:"["+N[u.weekday]+"] "+u.day+". "+a[D.calendar][u.month]+" "+u.year+" \u2013 ["+N[d.weekday]+"] "+d.day+". "+a[D.calendar][d.month]+" "+d.year;break;case"MONTH":v=u.year===d.year&&u.month===d.month?a[D.calendar][u.month]+" "+u.year:a[D.calendar][u.month]+" "+u.year+" \u2013 "+a[D.calendar][d.month]+" "+d.year;break;case"YEAR":v=u.year===d.year?u.year:u.year+"\u2013"+d.year}else{switch(D.dateprecision1){case"DAY":v="["+N[u.weekday]+"] "+u.day+". "+a[D.calendar][u.month]+" "+u.year;break;case"MONTH":v=a[D.calendar][u.month]+" "+u.year;break;case"YEAR":v=u.year}switch(v+=" \u2013 ",D.dateprecision2){case"DAY":v+="["+N[d.weekday]+"] "+d.day+". "+a[D.calendar][d.month]+" "+d.year;break;case"MONTH":v+=a[D.calendar][d.month]+" "+d.year;break;case"YEAR":v+=d.year}}return v+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[D.calendar].short+")",v}function htmlConverter(D,ne){let N,a,x,l,e,r,n,o,u,d,V="";const v={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},c={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},h={};for(let O in c.settings.matching)h[c.settings.matching[O]]=O;const f=Object.keys(D);f.sort(function(O,T){return v[h[O]]-v[h[T]]}),N=[];for(let O in f)for(n in r=f[O],D[r])x=D[r][n].start,void 0===N[x]&&(N[x]=[]),N[x].push({propname:r,proptype:"start"}),"_link"==N[x][N[x].length-1].propname?(N[x][N[x].length-1].href=D[r][n].href,void 0!==D[r][n].resid&&(N[x][N[x].length-1].resid=D[r][n].resid)):"style"==N[x][N[x].length-1].propname&&(N[x][N[x].length-1].css=D[r][n].css),x=D[r][n].end,void 0===N[x]&&(N[x]=[]),N[x].push({propname:r,proptype:"end"});for(a=[],o=0;o<=ne.length;o++){if(void 0!==N[o]){for(e=[],d=[],u=N[o].length-1;u>=0;u--)if("end"==N[o][u].proptype&&"linebreak"!=N[o][u].propname){for(;void 0!==(l=a.pop())&&(V+="</"+h[l]+">",l!=N[o][u].propname);)e.push(l);for(;void 0!==(l=e.pop());)a.push(l),V+="<"+h[l]+">"}for(u in N[o])if("start"==N[o][u].proptype)if("linebreak"==N[o][u].propname)V+="<br/>";else if("_link"==N[o][u].propname){a.push(N[o][u].propname);let O=N[o][u].href;void 0===O&&void 0!==N[o][u].resid&&(O="https://www.salsah.org/api/resources/"+N[o][u].resid),V+="<"+h[N[o][u].propname]+' href="'+O,void 0!==N[o][u].resid?V+='" class="salsah-link">':V+='">'}else"style"==N[o][u].propname?(a.push(N[o][u].propname),V+="<"+h[N[o][u].propname]+' style="'+N[o][u].css+'">'):(a.push(N[o][u].propname),V+="<"+h[N[o][u].propname]+">")}o<ne.length&&(V+=ne.charAt(o))}return V=V.replace(/\n/g,"<br/>"),V=V.replace(/\r/g,""),V}!function(D){"object"==typeof exports&&typeof module<"u"?module.exports=D():"function"==typeof define&&define.amd?define([],D):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).rdfstore=D()}(function(){var define,module,exports;return function D(ne,V,N){function a(e,r){if(!V[e]){if(!ne[e]){var n="function"==typeof require&&require;if(!r&&n)return n(e,!0);if(x)return x(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var u=V[e]={exports:{}};ne[e][0].call(u.exports,function(d){return a(ne[e][1][d]||d)},u,u.exports,D,ne,V,N)}return V[e].exports}for(var x="function"==typeof require&&require,l=0;l<N.length;l++)a(N[l]);return a}({1:[function(D,ne,V){(function(N){(function(){"use strict";var a=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],x=typeof globalThis>"u"?N:globalThis;ne.exports=function(){for(var l=[],e=0;e<a.length;e++)"function"==typeof x[a[e]]&&(l[l.length]=a[e]);return l}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(D,ne,V){"use strict";V.byteLength=function(u){var d=n(u),v=d[0],c=d[1];return 3*(v+c)/4-c},V.toByteArray=function(u){var d,v,k,c=n(u),h=c[0],f=c[1],O=new x(3*(h+(k=f))/4-k),T=0,P=f>0?h-4:h;for(v=0;v<P;v+=4)d=a[u.charCodeAt(v)]<<18|a[u.charCodeAt(v+1)]<<12|a[u.charCodeAt(v+2)]<<6|a[u.charCodeAt(v+3)],O[T++]=d>>16&255,O[T++]=d>>8&255,O[T++]=255&d;return 2===f&&(d=a[u.charCodeAt(v)]<<2|a[u.charCodeAt(v+1)]>>4,O[T++]=255&d),1===f&&(d=a[u.charCodeAt(v)]<<10|a[u.charCodeAt(v+1)]<<4|a[u.charCodeAt(v+2)]>>2,O[T++]=d>>8&255,O[T++]=255&d),O},V.fromByteArray=function(u){for(var d,v=u.length,c=v%3,h=[],f=16383,O=0,T=v-c;O<T;O+=f)h.push(o(u,O,O+f>T?T:O+f));return 1===c?(d=u[v-1],h.push(N[d>>2]+N[d<<4&63]+"==")):2===c&&(d=(u[v-2]<<8)+u[v-1],h.push(N[d>>10]+N[d>>4&63]+N[d<<2&63]+"=")),h.join("")};for(var N=[],a=[],x=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)N[e]=l[e],a[l.charCodeAt(e)]=e;function n(u){var d=u.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=u.indexOf("=");return-1===v&&(v=d),[v,v===d?0:4-v%4]}function o(u,d,v){for(var c,h,f=[],O=d;O<v;O+=3)c=(u[O]<<16&16711680)+(u[O+1]<<8&65280)+(255&u[O+2]),f.push(N[(h=c)>>18&63]+N[h>>12&63]+N[h>>6&63]+N[63&h]);return f.join("")}a[45]=62,a[95]=63},{}],3:[function(D,ne,V){},{}],4:[function(D,ne,V){arguments[4][3][0].apply(V,arguments)},{dup:3}],5:[function(D,ne,V){(function(N){(function(){"use strict";var a=D("base64-js"),x=D("ieee754");V.Buffer=r,V.SlowBuffer=function(m){return+m!=m&&(m=0),r.alloc(+m)},V.INSPECT_MAX_BYTES=50;var l=2147483647;function e(m){if(m>l)throw new RangeError('The value "'+m+'" is invalid for option "size"');var L=new Uint8Array(m);return L.__proto__=r.prototype,L}function r(m,L,q){if("number"==typeof m){if("string"==typeof L)throw new TypeError('The "string" argument must be of type string. Received type number');return u(m)}return n(m,L,q)}function n(m,L,q){if("string"==typeof m)return function(le,Ae){if("string"==typeof Ae&&""!==Ae||(Ae="utf8"),!r.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);var Se=0|c(le,Ae),je=e(Se),Ne=je.write(le,Ae);return Ne!==Se&&(je=je.slice(0,Ne)),je}(m,L);if(ArrayBuffer.isView(m))return d(m);if(null==m)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(Ee(m,ArrayBuffer)||m&&Ee(m.buffer,ArrayBuffer))return function(le,Ae,Se){if(Ae<0||le.byteLength<Ae)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<Ae+(Se||0))throw new RangeError('"length" is outside of buffer bounds');var je;return(je=void 0===Ae&&void 0===Se?new Uint8Array(le):void 0===Se?new Uint8Array(le,Ae):new Uint8Array(le,Ae,Se)).__proto__=r.prototype,je}(m,L,q);if("number"==typeof m)throw new TypeError('The "value" argument must not be of type number. Received type number');var re=m.valueOf&&m.valueOf();if(null!=re&&re!==m)return r.from(re,L,q);var se=function(le){if(r.isBuffer(le)){var Ae=0|v(le.length),Se=e(Ae);return 0===Se.length||le.copy(Se,0,0,Ae),Se}return void 0!==le.length?"number"!=typeof le.length||$(le.length)?e(0):d(le):"Buffer"===le.type&&Array.isArray(le.data)?d(le.data):void 0}(m);if(se)return se;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof m[Symbol.toPrimitive])return r.from(m[Symbol.toPrimitive]("string"),L,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}function o(m){if("number"!=typeof m)throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function u(m){return o(m),e(m<0?0:0|v(m))}function d(m){for(var L=m.length<0?0:0|v(m.length),q=e(L),re=0;re<L;re+=1)q[re]=255&m[re];return q}function v(m){if(m>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|m}function c(m,L){if(r.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||Ee(m,ArrayBuffer))return m.byteLength;if("string"!=typeof m)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);var q=m.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===q)return 0;for(var se=!1;;)switch(L){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return oe(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return he(m).length;default:if(se)return re?-1:oe(m).length;L=(""+L).toLowerCase(),se=!0}}function h(m,L,q){var re=!1;if((void 0===L||L<0)&&(L=0),L>this.length||((void 0===q||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(L>>>=0))return"";for(m||(m="utf8");;)switch(m){case"hex":return ve(this,L,q);case"utf8":case"utf-8":return U(this,L,q);case"ascii":return ie(this,L,q);case"latin1":case"binary":return ce(this,L,q);case"base64":return X(this,L,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,L,q);default:if(re)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),re=!0}}function f(m,L,q){var re=m[L];m[L]=m[q],m[q]=re}function O(m,L,q,re,se){if(0===m.length)return-1;if("string"==typeof q?(re=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),$(q=+q)&&(q=se?0:m.length-1),q<0&&(q=m.length+q),q>=m.length){if(se)return-1;q=m.length-1}else if(q<0){if(!se)return-1;q=0}if("string"==typeof L&&(L=r.from(L,re)),r.isBuffer(L))return 0===L.length?-1:T(m,L,q,re,se);if("number"==typeof L)return L&=255,"function"==typeof Uint8Array.prototype.indexOf?se?Uint8Array.prototype.indexOf.call(m,L,q):Uint8Array.prototype.lastIndexOf.call(m,L,q):T(m,[L],q,re,se);throw new TypeError("val must be string, number or Buffer")}function T(m,L,q,re,se){var le,Ae=1,Se=m.length,je=L.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(m.length<2||L.length<2)return-1;Ae=2,Se/=2,je/=2,q/=2}function Ne(De,Qe){return 1===Ae?De[Qe]:De.readUInt16BE(Qe*Ae)}if(se){var Oe=-1;for(le=q;le<Se;le++)if(Ne(m,le)===Ne(L,-1===Oe?0:le-Oe)){if(-1===Oe&&(Oe=le),le-Oe+1===je)return Oe*Ae}else-1!==Oe&&(le-=le-Oe),Oe=-1}else for(q+je>Se&&(q=Se-je),le=q;le>=0;le--){for(var Me=!0,qe=0;qe<je;qe++)if(Ne(m,le+qe)!==Ne(L,qe)){Me=!1;break}if(Me)return le}return-1}function P(m,L,q,re){q=Number(q)||0;var se=m.length-q;re?(re=Number(re))>se&&(re=se):re=se;var le=L.length;re>le/2&&(re=le/2);for(var Ae=0;Ae<re;++Ae){var Se=parseInt(L.substr(2*Ae,2),16);if($(Se))return Ae;m[q+Ae]=Se}return Ae}function Q(m,L,q,re){return _e(oe(L,m.length-q),m,q,re)}function I(m,L,q,re){return _e(function(se){for(var le=[],Ae=0;Ae<se.length;++Ae)le.push(255&se.charCodeAt(Ae));return le}(L),m,q,re)}function k(m,L,q,re){return I(m,L,q,re)}function G(m,L,q,re){return _e(he(L),m,q,re)}function J(m,L,q,re){return _e(function(se,le){for(var Ae,Se,je,Ne=[],Oe=0;Oe<se.length&&!((le-=2)<0);++Oe)Se=(Ae=se.charCodeAt(Oe))>>8,je=Ae%256,Ne.push(je),Ne.push(Se);return Ne}(L,m.length-q),m,q,re)}function X(m,L,q){return 0===L&&q===m.length?a.fromByteArray(m):a.fromByteArray(m.slice(L,q))}function U(m,L,q){q=Math.min(m.length,q);for(var re=[],se=L;se<q;){var le,Ae,Se,je,Ne=m[se],Oe=null,Me=Ne>239?4:Ne>223?3:Ne>191?2:1;if(se+Me<=q)switch(Me){case 1:Ne<128&&(Oe=Ne);break;case 2:128==(192&(le=m[se+1]))&&(je=(31&Ne)<<6|63&le)>127&&(Oe=je);break;case 3:le=m[se+1],Ae=m[se+2],128==(192&le)&&128==(192&Ae)&&(je=(15&Ne)<<12|(63&le)<<6|63&Ae)>2047&&(je<55296||je>57343)&&(Oe=je);break;case 4:le=m[se+1],Ae=m[se+2],Se=m[se+3],128==(192&le)&&128==(192&Ae)&&128==(192&Se)&&(je=(15&Ne)<<18|(63&le)<<12|(63&Ae)<<6|63&Se)>65535&&je<1114112&&(Oe=je)}null===Oe?(Oe=65533,Me=1):Oe>65535&&(Oe-=65536,re.push(Oe>>>10&1023|55296),Oe=56320|1023&Oe),re.push(Oe),se+=Me}return function(qe){var De=qe.length;if(De<=K)return String.fromCharCode.apply(String,qe);for(var Qe="",He=0;He<De;)Qe+=String.fromCharCode.apply(String,qe.slice(He,He+=K));return Qe}(re)}V.kMaxLength=l,r.TYPED_ARRAY_SUPPORT=function(){try{var m=new Uint8Array(1);return m.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===m.foo()}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(m,L,q){return n(m,L,q)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(m,L,q){return se=L,le=q,o(re=m),re<=0?e(re):void 0!==se?"string"==typeof le?e(re).fill(se,le):e(re).fill(se):e(re);var re,se,le},r.allocUnsafe=function(m){return u(m)},r.allocUnsafeSlow=function(m){return u(m)},r.isBuffer=function(m){return null!=m&&!0===m._isBuffer&&m!==r.prototype},r.compare=function(m,L){if(Ee(m,Uint8Array)&&(m=r.from(m,m.offset,m.byteLength)),Ee(L,Uint8Array)&&(L=r.from(L,L.offset,L.byteLength)),!r.isBuffer(m)||!r.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===L)return 0;for(var q=m.length,re=L.length,se=0,le=Math.min(q,re);se<le;++se)if(m[se]!==L[se]){q=m[se],re=L[se];break}return q<re?-1:re<q?1:0},r.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(m,L){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(0===m.length)return r.alloc(0);var q;if(void 0===L)for(L=0,q=0;q<m.length;++q)L+=m[q].length;var re=r.allocUnsafe(L),se=0;for(q=0;q<m.length;++q){var le=m[q];if(Ee(le,Uint8Array)&&(le=r.from(le)),!r.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(re,se),se+=le.length}return re},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var m=this.length;if(m%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<m;L+=2)f(this,L,L+1);return this},r.prototype.swap32=function(){var m=this.length;if(m%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<m;L+=4)f(this,L,L+3),f(this,L+1,L+2);return this},r.prototype.swap64=function(){var m=this.length;if(m%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<m;L+=8)f(this,L,L+7),f(this,L+1,L+6),f(this,L+2,L+5),f(this,L+3,L+4);return this},r.prototype.toString=function(){var m=this.length;return 0===m?"":0===arguments.length?U(this,0,m):h.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(m){if(!r.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m||0===r.compare(this,m)},r.prototype.inspect=function(){var m="",L=V.INSPECT_MAX_BYTES;return m=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(m+=" ... "),"<Buffer "+m+">"},r.prototype.compare=function(m,L,q,re,se){if(Ee(m,Uint8Array)&&(m=r.from(m,m.offset,m.byteLength)),!r.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(void 0===L&&(L=0),void 0===q&&(q=m?m.length:0),void 0===re&&(re=0),void 0===se&&(se=this.length),L<0||q>m.length||re<0||se>this.length)throw new RangeError("out of range index");if(re>=se&&L>=q)return 0;if(re>=se)return-1;if(L>=q)return 1;if(this===m)return 0;for(var le=(se>>>=0)-(re>>>=0),Ae=(q>>>=0)-(L>>>=0),Se=Math.min(le,Ae),je=this.slice(re,se),Ne=m.slice(L,q),Oe=0;Oe<Se;++Oe)if(je[Oe]!==Ne[Oe]){le=je[Oe],Ae=Ne[Oe];break}return le<Ae?-1:Ae<le?1:0},r.prototype.includes=function(m,L,q){return-1!==this.indexOf(m,L,q)},r.prototype.indexOf=function(m,L,q){return O(this,m,L,q,!0)},r.prototype.lastIndexOf=function(m,L,q){return O(this,m,L,q,!1)},r.prototype.write=function(m,L,q,re){if(void 0===L)re="utf8",q=this.length,L=0;else if(void 0===q&&"string"==typeof L)re=L,q=this.length,L=0;else{if(!isFinite(L))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");L>>>=0,isFinite(q)?(q>>>=0,void 0===re&&(re="utf8")):(re=q,q=void 0)}var se=this.length-L;if((void 0===q||q>se)&&(q=se),m.length>0&&(q<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var le=!1;;)switch(re){case"hex":return P(this,m,L,q);case"utf8":case"utf-8":return Q(this,m,L,q);case"ascii":return I(this,m,L,q);case"latin1":case"binary":return k(this,m,L,q);case"base64":return G(this,m,L,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,m,L,q);default:if(le)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),le=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;function ie(m,L,q){var re="";q=Math.min(m.length,q);for(var se=L;se<q;++se)re+=String.fromCharCode(127&m[se]);return re}function ce(m,L,q){var re="";q=Math.min(m.length,q);for(var se=L;se<q;++se)re+=String.fromCharCode(m[se]);return re}function ve(m,L,q){var re=m.length;(!L||L<0)&&(L=0),(!q||q<0||q>re)&&(q=re);for(var se="",le=L;le<q;++le)se+=ue(m[le]);return se}function fe(m,L,q){for(var re=m.slice(L,q),se="",le=0;le<re.length;le+=2)se+=String.fromCharCode(re[le]+256*re[le+1]);return se}function Y(m,L,q){if(m%1!=0||m<0)throw new RangeError("offset is not uint");if(m+L>q)throw new RangeError("Trying to access beyond buffer length")}function M(m,L,q,re,se,le){if(!r.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>se||L<le)throw new RangeError('"value" argument is out of bounds');if(q+re>m.length)throw new RangeError("Index out of range")}function z(m,L,q,re,se,le){if(q+re>m.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Z(m,L,q,re,se){return L=+L,q>>>=0,se||z(m,0,q,4),x.write(m,L,q,re,23,4),q+4}function ae(m,L,q,re,se){return L=+L,q>>>=0,se||z(m,0,q,8),x.write(m,L,q,re,52,8),q+8}r.prototype.slice=function(m,L){var q=this.length;(m=~~m)<0?(m+=q)<0&&(m=0):m>q&&(m=q),(L=void 0===L?q:~~L)<0?(L+=q)<0&&(L=0):L>q&&(L=q),L<m&&(L=m);var re=this.subarray(m,L);return re.__proto__=r.prototype,re},r.prototype.readUIntLE=function(m,L,q){m>>>=0,L>>>=0,q||Y(m,L,this.length);for(var re=this[m],se=1,le=0;++le<L&&(se*=256);)re+=this[m+le]*se;return re},r.prototype.readUIntBE=function(m,L,q){m>>>=0,L>>>=0,q||Y(m,L,this.length);for(var re=this[m+--L],se=1;L>0&&(se*=256);)re+=this[m+--L]*se;return re},r.prototype.readUInt8=function(m,L){return m>>>=0,L||Y(m,1,this.length),this[m]},r.prototype.readUInt16LE=function(m,L){return m>>>=0,L||Y(m,2,this.length),this[m]|this[m+1]<<8},r.prototype.readUInt16BE=function(m,L){return m>>>=0,L||Y(m,2,this.length),this[m]<<8|this[m+1]},r.prototype.readUInt32LE=function(m,L){return m>>>=0,L||Y(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+16777216*this[m+3]},r.prototype.readUInt32BE=function(m,L){return m>>>=0,L||Y(m,4,this.length),16777216*this[m]+(this[m+1]<<16|this[m+2]<<8|this[m+3])},r.prototype.readIntLE=function(m,L,q){m>>>=0,L>>>=0,q||Y(m,L,this.length);for(var re=this[m],se=1,le=0;++le<L&&(se*=256);)re+=this[m+le]*se;return re>=(se*=128)&&(re-=Math.pow(2,8*L)),re},r.prototype.readIntBE=function(m,L,q){m>>>=0,L>>>=0,q||Y(m,L,this.length);for(var re=L,se=1,le=this[m+--re];re>0&&(se*=256);)le+=this[m+--re]*se;return le>=(se*=128)&&(le-=Math.pow(2,8*L)),le},r.prototype.readInt8=function(m,L){return m>>>=0,L||Y(m,1,this.length),128&this[m]?-1*(255-this[m]+1):this[m]},r.prototype.readInt16LE=function(m,L){m>>>=0,L||Y(m,2,this.length);var q=this[m]|this[m+1]<<8;return 32768&q?4294901760|q:q},r.prototype.readInt16BE=function(m,L){m>>>=0,L||Y(m,2,this.length);var q=this[m+1]|this[m]<<8;return 32768&q?4294901760|q:q},r.prototype.readInt32LE=function(m,L){return m>>>=0,L||Y(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},r.prototype.readInt32BE=function(m,L){return m>>>=0,L||Y(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},r.prototype.readFloatLE=function(m,L){return m>>>=0,L||Y(m,4,this.length),x.read(this,m,!0,23,4)},r.prototype.readFloatBE=function(m,L){return m>>>=0,L||Y(m,4,this.length),x.read(this,m,!1,23,4)},r.prototype.readDoubleLE=function(m,L){return m>>>=0,L||Y(m,8,this.length),x.read(this,m,!0,52,8)},r.prototype.readDoubleBE=function(m,L){return m>>>=0,L||Y(m,8,this.length),x.read(this,m,!1,52,8)},r.prototype.writeUIntLE=function(m,L,q,re){m=+m,L>>>=0,q>>>=0,re||M(this,m,L,q,Math.pow(2,8*q)-1,0);var se=1,le=0;for(this[L]=255&m;++le<q&&(se*=256);)this[L+le]=m/se&255;return L+q},r.prototype.writeUIntBE=function(m,L,q,re){m=+m,L>>>=0,q>>>=0,re||M(this,m,L,q,Math.pow(2,8*q)-1,0);var se=q-1,le=1;for(this[L+se]=255&m;--se>=0&&(le*=256);)this[L+se]=m/le&255;return L+q},r.prototype.writeUInt8=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,1,255,0),this[L]=255&m,L+1},r.prototype.writeUInt16LE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,2,65535,0),this[L]=255&m,this[L+1]=m>>>8,L+2},r.prototype.writeUInt16BE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,2,65535,0),this[L]=m>>>8,this[L+1]=255&m,L+2},r.prototype.writeUInt32LE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,4,4294967295,0),this[L+3]=m>>>24,this[L+2]=m>>>16,this[L+1]=m>>>8,this[L]=255&m,L+4},r.prototype.writeUInt32BE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,4,4294967295,0),this[L]=m>>>24,this[L+1]=m>>>16,this[L+2]=m>>>8,this[L+3]=255&m,L+4},r.prototype.writeIntLE=function(m,L,q,re){if(m=+m,L>>>=0,!re){var se=Math.pow(2,8*q-1);M(this,m,L,q,se-1,-se)}var le=0,Ae=1,Se=0;for(this[L]=255&m;++le<q&&(Ae*=256);)m<0&&0===Se&&0!==this[L+le-1]&&(Se=1),this[L+le]=(m/Ae|0)-Se&255;return L+q},r.prototype.writeIntBE=function(m,L,q,re){if(m=+m,L>>>=0,!re){var se=Math.pow(2,8*q-1);M(this,m,L,q,se-1,-se)}var le=q-1,Ae=1,Se=0;for(this[L+le]=255&m;--le>=0&&(Ae*=256);)m<0&&0===Se&&0!==this[L+le+1]&&(Se=1),this[L+le]=(m/Ae|0)-Se&255;return L+q},r.prototype.writeInt8=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,1,127,-128),m<0&&(m=255+m+1),this[L]=255&m,L+1},r.prototype.writeInt16LE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,2,32767,-32768),this[L]=255&m,this[L+1]=m>>>8,L+2},r.prototype.writeInt16BE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,2,32767,-32768),this[L]=m>>>8,this[L+1]=255&m,L+2},r.prototype.writeInt32LE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,4,2147483647,-2147483648),this[L]=255&m,this[L+1]=m>>>8,this[L+2]=m>>>16,this[L+3]=m>>>24,L+4},r.prototype.writeInt32BE=function(m,L,q){return m=+m,L>>>=0,q||M(this,m,L,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[L]=m>>>24,this[L+1]=m>>>16,this[L+2]=m>>>8,this[L+3]=255&m,L+4},r.prototype.writeFloatLE=function(m,L,q){return Z(this,m,L,!0,q)},r.prototype.writeFloatBE=function(m,L,q){return Z(this,m,L,!1,q)},r.prototype.writeDoubleLE=function(m,L,q){return ae(this,m,L,!0,q)},r.prototype.writeDoubleBE=function(m,L,q){return ae(this,m,L,!1,q)},r.prototype.copy=function(m,L,q,re){if(!r.isBuffer(m))throw new TypeError("argument should be a Buffer");if(q||(q=0),re||0===re||(re=this.length),L>=m.length&&(L=m.length),L||(L=0),re>0&&re<q&&(re=q),re===q||0===m.length||0===this.length)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),m.length-L<re-q&&(re=m.length-L+q);var se=re-q;if(this===m&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(L,q,re);else if(this===m&&q<L&&L<re)for(var le=se-1;le>=0;--le)m[le+L]=this[le+q];else Uint8Array.prototype.set.call(m,this.subarray(q,re),L);return se},r.prototype.fill=function(m,L,q,re){if("string"==typeof m){if("string"==typeof L?(re=L,L=0,q=this.length):"string"==typeof q&&(re=q,q=this.length),void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!r.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(1===m.length){var se=m.charCodeAt(0);("utf8"===re&&se<128||"latin1"===re)&&(m=se)}}else"number"==typeof m&&(m&=255);if(L<0||this.length<L||this.length<q)throw new RangeError("Out of range index");if(q<=L)return this;var le;if(L>>>=0,q=void 0===q?this.length:q>>>0,m||(m=0),"number"==typeof m)for(le=L;le<q;++le)this[le]=m;else{var Ae=r.isBuffer(m)?m:r.from(m,re),Se=Ae.length;if(0===Se)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(le=0;le<q-L;++le)this[le+L]=Ae[le%Se]}return this};var de=/[^+/0-9A-Za-z-_]/g;function ue(m){return m<16?"0"+m.toString(16):m.toString(16)}function oe(m,L){var q;L=L||1/0;for(var re=m.length,se=null,le=[],Ae=0;Ae<re;++Ae){if((q=m.charCodeAt(Ae))>55295&&q<57344){if(!se){if(q>56319){(L-=3)>-1&&le.push(239,191,189);continue}if(Ae+1===re){(L-=3)>-1&&le.push(239,191,189);continue}se=q;continue}if(q<56320){(L-=3)>-1&&le.push(239,191,189),se=q;continue}q=65536+(se-55296<<10|q-56320)}else se&&(L-=3)>-1&&le.push(239,191,189);if(se=null,q<128){if((L-=1)<0)break;le.push(q)}else if(q<2048){if((L-=2)<0)break;le.push(q>>6|192,63&q|128)}else if(q<65536){if((L-=3)<0)break;le.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;le.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return le}function he(m){return a.toByteArray(function(L){if((L=(L=L.split("=")[0]).trim().replace(de,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L}(m))}function _e(m,L,q,re){for(var se=0;se<re&&!(se+q>=L.length||se>=m.length);++se)L[se+q]=m[se];return se}function Ee(m,L){return m instanceof L||null!=m&&null!=m.constructor&&null!=m.constructor.name&&m.constructor.name===L.name}function $(m){return m!=m}}).call(this)}).call(this,D("buffer").Buffer)},{"base64-js":2,buffer:5,ieee754:21}],6:[function(D,ne,V){ne.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],7:[function(D,ne,V){"use strict";var N=D("get-intrinsic"),a=D("./"),x=a(N("String.prototype.indexOf"));ne.exports=function(l,e){var r=N(l,!!e);return"function"==typeof r&&x(l,".prototype.")>-1?a(r):r}},{"./":8,"get-intrinsic":15}],8:[function(D,ne,V){"use strict";var N=D("function-bind"),a=D("get-intrinsic"),x=a("%Function.prototype.apply%"),l=a("%Function.prototype.call%"),e=a("%Reflect.apply%",!0)||N.call(l,x),r=a("%Object.getOwnPropertyDescriptor%",!0),n=a("%Object.defineProperty%",!0),o=a("%Math.max%");if(n)try{n({},"a",{value:1})}catch{n=null}ne.exports=function(d){var v=e(N,l,arguments);r&&n&&(r(v,"length").configurable&&n(v,"length",{value:1+o(0,d.length-(arguments.length-1))}));return v};var u=function(){return e(N,x,arguments)};n?n(ne.exports,"apply",{value:u}):ne.exports.apply=u},{"function-bind":14,"get-intrinsic":15}],9:[function(D,ne,V){"use strict";ne.exports=function N(a){return null===a||"object"!=typeof a||null!=a.toJSON?JSON.stringify(a):Array.isArray(a)?"["+a.reduce((x,l,e)=>x+(0===e?"":",")+N(void 0===l||"symbol"==typeof l?null:l),"")+"]":"{"+Object.keys(a).sort().reduce((x,l,e)=>void 0===a[l]||"symbol"==typeof a[l]?x:x+(0===x.length?"":",")+N(l)+":"+N(a[l]),"")+"}"}},{}],10:[function(D,ne,V){"use strict";var N=D("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(N)try{N([],"length")}catch{N=null}ne.exports=N},{"get-intrinsic":15}],11:[function(D,ne,V){"use strict";var N,a="object"==typeof Reflect?Reflect:null,x=a&&"function"==typeof a.apply?a.apply:function(T,P,Q){return Function.prototype.apply.call(T,P,Q)};N=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var l=Number.isNaN||function(T){return T!=T};function e(){e.init.call(this)}ne.exports=e,ne.exports.once=function(T,P){return new Promise(function(Q,I){function k(J){T.removeListener(P,G),I(J)}function G(){"function"==typeof T.removeListener&&T.removeListener("error",k),Q([].slice.call(arguments))}var J,X;O(T,P,G,{once:!0}),"error"!==P&&(X=k,"function"==typeof(J=T).on&&O(J,"error",X,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function n(T){if("function"!=typeof T)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function o(T){return void 0===T._maxListeners?e.defaultMaxListeners:T._maxListeners}function u(T,P,Q,I){var k,G,J,X;if(n(Q),void 0===(G=T._events)?(G=T._events=Object.create(null),T._eventsCount=0):(void 0!==G.newListener&&(T.emit("newListener",P,Q.listener?Q.listener:Q),G=T._events),J=G[P]),void 0===J)J=G[P]=Q,++T._eventsCount;else if("function"==typeof J?J=G[P]=I?[Q,J]:[J,Q]:I?J.unshift(Q):J.push(Q),(k=o(T))>0&&J.length>k&&!J.warned){J.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=T,U.type=P,U.count=J.length,X=U,console&&console.warn&&console.warn(X)}return T}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(T,P,Q){var I={fired:!1,wrapFn:void 0,target:T,type:P,listener:Q},k=d.bind(I);return k.listener=Q,I.wrapFn=k,k}function c(T,P,Q){var I=T._events;if(void 0===I)return[];var k=I[P];return void 0===k?[]:"function"==typeof k?Q?[k.listener||k]:[k]:Q?function(G){for(var J=new Array(G.length),X=0;X<J.length;++X)J[X]=G[X].listener||G[X];return J}(k):f(k,k.length)}function h(T){var P=this._events;if(void 0!==P){var Q=P[T];if("function"==typeof Q)return 1;if(void 0!==Q)return Q.length}return 0}function f(T,P){for(var Q=new Array(P),I=0;I<P;++I)Q[I]=T[I];return Q}function O(T,P,Q,I){if("function"==typeof T.on)I.once?T.once(P,Q):T.on(P,Q);else{if("function"!=typeof T.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(P,function k(G){I.once&&T.removeEventListener(P,k),Q(G)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(T){if("number"!=typeof T||T<0||l(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");r=T}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(T){if("number"!=typeof T||T<0||l(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},e.prototype.getMaxListeners=function(){return o(this)},e.prototype.emit=function(T){for(var P=[],Q=1;Q<arguments.length;Q++)P.push(arguments[Q]);var I="error"===T,k=this._events;if(void 0!==k)I=I&&void 0===k.error;else if(!I)return!1;if(I){var G;if(P.length>0&&(G=P[0]),G instanceof Error)throw G;var J=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw J.context=G,J}var X=k[T];if(void 0===X)return!1;if("function"==typeof X)x(X,this,P);else{var U=X.length,K=f(X,U);for(Q=0;Q<U;++Q)x(K[Q],this,P)}return!0},e.prototype.addListener=function(T,P){return u(this,T,P,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(T,P){return u(this,T,P,!0)},e.prototype.once=function(T,P){return n(P),this.on(T,v(this,T,P)),this},e.prototype.prependOnceListener=function(T,P){return n(P),this.prependListener(T,v(this,T,P)),this},e.prototype.removeListener=function(T,P){var Q,I,k,G,J;if(n(P),void 0===(I=this._events))return this;if(void 0===(Q=I[T]))return this;if(Q===P||Q.listener===P)0==--this._eventsCount?this._events=Object.create(null):(delete I[T],I.removeListener&&this.emit("removeListener",T,Q.listener||P));else if("function"!=typeof Q){for(k=-1,G=Q.length-1;G>=0;G--)if(Q[G]===P||Q[G].listener===P){J=Q[G].listener,k=G;break}if(k<0)return this;0===k?Q.shift():function(X,U){for(;U+1<X.length;U++)X[U]=X[U+1];X.pop()}(Q,k),1===Q.length&&(I[T]=Q[0]),void 0!==I.removeListener&&this.emit("removeListener",T,J||P)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(T){var P,Q,I;if(void 0===(Q=this._events))return this;if(void 0===Q.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Q[T]&&(0==--this._eventsCount?this._events=Object.create(null):delete Q[T]),this;if(0===arguments.length){var k,G=Object.keys(Q);for(I=0;I<G.length;++I)"removeListener"!==(k=G[I])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(P=Q[T]))this.removeListener(T,P);else if(void 0!==P)for(I=P.length-1;I>=0;I--)this.removeListener(T,P[I]);return this},e.prototype.listeners=function(T){return c(this,T,!0)},e.prototype.rawListeners=function(T){return c(this,T,!1)},e.listenerCount=function(T,P){return"function"==typeof T.listenerCount?T.listenerCount(P):h.call(T,P)},e.prototype.listenerCount=h,e.prototype.eventNames=function(){return this._eventsCount>0?N(this._events):[]}},{}],12:[function(D,ne,V){"use strict";var N=D("is-callable"),a=Object.prototype.toString,x=Object.prototype.hasOwnProperty;ne.exports=function(n,o,u){if(!N(o))throw new TypeError("iterator must be a function");var d;arguments.length>=3&&(d=u),"[object Array]"===a.call(n)?function(n,o,u){for(var d=0,v=n.length;d<v;d++)x.call(n,d)&&(null==u?o(n[d],d,n):o.call(u,n[d],d,n))}(n,o,d):"string"==typeof n?function(n,o,u){for(var d=0,v=n.length;d<v;d++)null==u?o(n.charAt(d),d,n):o.call(u,n.charAt(d),d,n)}(n,o,d):function(n,o,u){for(var d in n)x.call(n,d)&&(null==u?o(n[d],d,n):o.call(u,n[d],d,n))}(n,o,d)}},{"is-callable":24}],13:[function(D,ne,V){"use strict";var a=Array.prototype.slice,x=Object.prototype.toString;ne.exports=function(e){var r=this;if("function"!=typeof r||"[object Function]"!==x.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n,o=a.call(arguments,1),d=Math.max(0,r.length-o.length),v=[],c=0;c<d;c++)v.push("$"+c);if(n=Function("binder","return function ("+v.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var f=r.apply(this,o.concat(a.call(arguments)));return Object(f)===f?f:this}return r.apply(e,o.concat(a.call(arguments)))}),r.prototype){var h=function(){};h.prototype=r.prototype,n.prototype=new h,h.prototype=null}return n}},{}],14:[function(D,ne,V){"use strict";var N=D("./implementation");ne.exports=Function.prototype.bind||N},{"./implementation":13}],15:[function(D,ne,V){"use strict";var N,a=SyntaxError,x=Function,l=TypeError,e=function(ce){try{return x('"use strict"; return ('+ce+").constructor;")()}catch{}},r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch{r=null}var n=function(){throw new l},o=r?function(){try{return n}catch{try{return r(arguments,"callee").get}catch{return n}}}():n,u=D("has-symbols")(),d=Object.getPrototypeOf||function(ce){return ce.__proto__},v={},c=typeof Uint8Array>"u"?N:d(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?N:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?N:ArrayBuffer,"%ArrayIteratorPrototype%":u?d([][Symbol.iterator]()):N,"%AsyncFromSyncIteratorPrototype%":N,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?N:Atomics,"%BigInt%":typeof BigInt>"u"?N:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?N:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?N:Float32Array,"%Float64Array%":typeof Float64Array>"u"?N:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?N:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?N:Int8Array,"%Int16Array%":typeof Int16Array>"u"?N:Int16Array,"%Int32Array%":typeof Int32Array>"u"?N:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?d(d([][Symbol.iterator]())):N,"%JSON%":"object"==typeof JSON?JSON:N,"%Map%":typeof Map>"u"?N:Map,"%MapIteratorPrototype%":typeof Map<"u"&&u?d((new Map)[Symbol.iterator]()):N,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?N:Promise,"%Proxy%":typeof Proxy>"u"?N:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?N:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?N:Set,"%SetIteratorPrototype%":typeof Set<"u"&&u?d((new Set)[Symbol.iterator]()):N,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?N:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?d(""[Symbol.iterator]()):N,"%Symbol%":u?Symbol:N,"%SyntaxError%":a,"%ThrowTypeError%":o,"%TypedArray%":c,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?N:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?N:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?N:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?N:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?N:WeakMap,"%WeakRef%":typeof WeakRef>"u"?N:WeakRef,"%WeakSet%":typeof WeakSet>"u"?N:WeakSet},f=function ce(ve){var fe;if("%AsyncFunction%"===ve)fe=e("async function () {}");else if("%GeneratorFunction%"===ve)fe=e("function* () {}");else if("%AsyncGeneratorFunction%"===ve)fe=e("async function* () {}");else if("%AsyncGenerator%"===ve){var Y=ce("%AsyncGeneratorFunction%");Y&&(fe=Y.prototype)}else if("%AsyncIteratorPrototype%"===ve){var M=ce("%AsyncGenerator%");M&&(fe=d(M.prototype))}return h[ve]=fe,fe},O={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=D("function-bind"),P=D("has"),Q=T.call(Function.call,Array.prototype.concat),I=T.call(Function.apply,Array.prototype.splice),k=T.call(Function.call,String.prototype.replace),G=T.call(Function.call,String.prototype.slice),J=T.call(Function.call,RegExp.prototype.exec),X=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,ie=function(ce,ve){var fe,Y=ce;if(P(O,Y)&&(Y="%"+(fe=O[Y])[0]+"%"),P(h,Y)){var M=h[Y];if(M===v&&(M=f(Y)),void 0===M&&!ve)throw new l("intrinsic "+ce+" exists, but is not available. Please file an issue!");return{alias:fe,name:Y,value:M}}throw new a("intrinsic "+ce+" does not exist!")};ne.exports=function(ce,ve){if("string"!=typeof ce||0===ce.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof ve)throw new l('"allowMissing" argument must be a boolean');if(null===J(/^%?[^%]*%?$/g,ce))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var fe=function(ce){var ve=G(ce,0,1),fe=G(ce,-1);if("%"===ve&&"%"!==fe)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===fe&&"%"!==ve)throw new a("invalid intrinsic syntax, expected opening `%`");var Y=[];return k(ce,X,function(M,z,Z,ae){Y[Y.length]=Z?k(ae,U,"$1"):z||M}),Y}(ce),Y=fe.length>0?fe[0]:"",M=ie("%"+Y+"%",ve),z=M.name,Z=M.value,ae=!1,de=M.alias;de&&(Y=de[0],I(fe,Q([0,1],de)));for(var ue=1,oe=!0;ue<fe.length;ue+=1){var he=fe[ue],_e=G(he,0,1),Ee=G(he,-1);if(('"'===_e||"'"===_e||"`"===_e||'"'===Ee||"'"===Ee||"`"===Ee)&&_e!==Ee)throw new a("property names with quotes must have matching quotes");if("constructor"!==he&&oe||(ae=!0),P(h,z="%"+(Y+="."+he)+"%"))Z=h[z];else if(null!=Z){if(!(he in Z)){if(!ve)throw new l("base intrinsic for "+ce+" exists, but the property is not available.");return}if(r&&ue+1>=fe.length){var $=r(Z,he);Z=(oe=!!$)&&"get"in $&&!("originalValue"in $.get)?$.get:Z[he]}else oe=P(Z,he),Z=Z[he];oe&&!ae&&(h[z]=Z)}}return Z}},{"function-bind":14,has:19,"has-symbols":16}],16:[function(D,ne,V){"use strict";var N=typeof Symbol<"u"&&Symbol,a=D("./shams");ne.exports=function(){return"function"==typeof N&&"function"==typeof Symbol&&"symbol"==typeof N("foo")&&"symbol"==typeof Symbol("bar")&&a()}},{"./shams":17}],17:[function(D,ne,V){"use strict";ne.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var N={},a=Symbol("test"),x=Object(a);if("string"==typeof a||"[object Symbol]"!==Object.prototype.toString.call(a)||"[object Symbol]"!==Object.prototype.toString.call(x))return!1;for(a in N[a]=42,N)return!1;if("function"==typeof Object.keys&&0!==Object.keys(N).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(N).length)return!1;var l=Object.getOwnPropertySymbols(N);if(1!==l.length||l[0]!==a||!Object.prototype.propertyIsEnumerable.call(N,a))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(N,a);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],18:[function(D,ne,V){"use strict";var N=D("has-symbols/shams");ne.exports=function(){return N()&&!!Symbol.toStringTag}},{"has-symbols/shams":17}],19:[function(D,ne,V){"use strict";var N=D("function-bind");ne.exports=N.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":14}],20:[function(D,ne,V){var N=D("http"),a=D("url"),x=ne.exports;for(var l in N)N.hasOwnProperty(l)&&(x[l]=N[l]);function e(r){if("string"==typeof r&&(r=a.parse(r)),r.protocol||(r.protocol="https:"),"https:"!==r.protocol)throw new Error('Protocol "'+r.protocol+'" not supported. Expected "https:"');return r}x.request=function(r,n){return r=e(r),N.request.call(this,r,n)},x.get=function(r,n){return r=e(r),N.get.call(this,r,n)}},{http:91,url:112}],21:[function(D,ne,V){V.read=function(N,a,x,l,e){var r,n,o=8*e-l-1,u=(1<<o)-1,d=u>>1,v=-7,c=x?e-1:0,h=x?-1:1,f=N[a+c];for(c+=h,r=f&(1<<-v)-1,f>>=-v,v+=o;v>0;r=256*r+N[a+c],c+=h,v-=8);for(n=r&(1<<-v)-1,r>>=-v,v+=l;v>0;n=256*n+N[a+c],c+=h,v-=8);if(0===r)r=1-d;else{if(r===u)return n?NaN:1/0*(f?-1:1);n+=Math.pow(2,l),r-=d}return(f?-1:1)*n*Math.pow(2,r-l)},V.write=function(N,a,x,l,e,r){var n,o,u,d=8*r-e-1,v=(1<<d)-1,c=v>>1,h=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,f=l?0:r-1,O=l?1:-1,T=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,n=v):(n=Math.floor(Math.log(a)/Math.LN2),a*(u=Math.pow(2,-n))<1&&(n--,u*=2),(a+=n+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(n++,u/=2),n+c>=v?(o=0,n=v):n+c>=1?(o=(a*u-1)*Math.pow(2,e),n+=c):(o=a*Math.pow(2,c-1)*Math.pow(2,e),n=0));e>=8;N[x+f]=255&o,f+=O,o/=256,e-=8);for(n=n<<e|o,d+=e;d>0;N[x+f]=255&n,f+=O,n/=256,d-=8);N[x+f-O]|=128*T}},{}],22:[function(D,ne,V){"function"==typeof Object.create?ne.exports=function(N,a){a&&(N.super_=a,N.prototype=Object.create(a.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}))}:ne.exports=function(N,a){if(a){N.super_=a;var x=function(){};x.prototype=a.prototype,N.prototype=new x,N.prototype.constructor=N}}},{}],23:[function(D,ne,V){"use strict";var N=D("has-tostringtag/shams")(),a=D("call-bind/callBound")("Object.prototype.toString"),x=function(r){return!(N&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===a(r)},l=function(r){return!!x(r)||null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Array]"!==a(r)&&"[object Function]"===a(r.callee)},e=function(){return x(arguments)}();x.isLegacyArguments=l,ne.exports=e?x:l},{"call-bind/callBound":7,"has-tostringtag/shams":18}],24:[function(D,ne,V){"use strict";var N,a,x=Function.prototype.toString,l="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof l&&"function"==typeof Object.defineProperty)try{N=Object.defineProperty({},"length",{get:function(){throw a}}),a={},l(function(){throw 42},null,N)}catch(d){d!==a&&(l=null)}else l=null;var e=/^\s*class\b/,r=function(d){try{var v=x.call(d);return e.test(v)}catch{return!1}},n=Object.prototype.toString,o="function"==typeof Symbol&&!!Symbol.toStringTag,u="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};ne.exports=l?function(d){if(d===u)return!0;if(!d||"function"!=typeof d&&"object"!=typeof d)return!1;if("function"==typeof d&&!d.prototype)return!0;try{l(d,null,N)}catch(v){if(v!==a)return!1}return!r(d)}:function(d){if(d===u)return!0;if(!d||"function"!=typeof d&&"object"!=typeof d)return!1;if("function"==typeof d&&!d.prototype)return!0;if(o)return function(c){try{return!r(c)&&(x.call(c),!0)}catch{return!1}}(d);if(r(d))return!1;var v=n.call(d);return"[object Function]"===v||"[object GeneratorFunction]"===v}},{}],25:[function(D,ne,V){"use strict";var N,a=Object.prototype.toString,x=Function.prototype.toString,l=/^\s*(?:function)?\*/,e=D("has-tostringtag/shams")(),r=Object.getPrototypeOf;ne.exports=function(n){if("function"!=typeof n)return!1;if(l.test(x.call(n)))return!0;if(!e)return"[object GeneratorFunction]"===a.call(n);if(!r)return!1;if(void 0===N){var o=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch{}}();N=!!o&&r(o)}return r(n)===N}},{"has-tostringtag/shams":18}],26:[function(D,ne,V){(function(N){(function(){"use strict";var a=D("for-each"),x=D("available-typed-arrays"),l=D("call-bind/callBound"),e=l("Object.prototype.toString"),r=D("has-tostringtag/shams")(),n=typeof globalThis>"u"?N:globalThis,o=x(),u=l("Array.prototype.indexOf",!0)||function(f,O){for(var T=0;T<f.length;T+=1)if(f[T]===O)return T;return-1},d=l("String.prototype.slice"),v={},c=D("es-abstract/helpers/getOwnPropertyDescriptor"),h=Object.getPrototypeOf;r&&c&&h&&a(o,function(f){var O=new n[f];if(Symbol.toStringTag in O){var T=h(O),P=c(T,Symbol.toStringTag);if(!P){var Q=h(T);P=c(Q,Symbol.toStringTag)}v[f]=P.get}}),ne.exports=function(f){if(!f||"object"!=typeof f)return!1;if(!r||!(Symbol.toStringTag in f)){var O=d(e(f),8,-1);return u(o,O)>-1}return!!c&&(T=f,P=!1,a(v,function(Q,I){if(!P)try{P=Q.call(T)===I}catch{}}),P);var T,P}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18}],27:[function(D,ne,V){"use strict";const{isArray:N,isObject:a,isString:x}=D("./types"),{asArray:l}=D("./util"),{prependBase:e}=D("./url"),r=D("./JsonLdError"),n=D("./ResolvedContext");function o(d){throw new r("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:d})}function u({context:d,base:v}){if(!d)return;const c=d["@context"];if(x(c))d["@context"]=e(v,c);else if(N(c))for(let h=0;h<c.length;++h){const f=c[h];x(f)?c[h]=e(v,f):a(f)&&u({context:{"@context":f},base:v})}else if(a(c))for(const h in c)u({context:c[h],base:v})}ne.exports=class{constructor({sharedCache:d}){this.perOpCache=new Map,this.sharedCache=d}async resolve({activeCtx:d,context:v,documentLoader:c,base:h,cycles:f=new Set}){v&&a(v)&&v["@context"]&&(v=v["@context"]),v=l(v);const O=[];for(const T of v){if(x(T)){let I=this._get(T);I||(I=await this._resolveRemoteContext({activeCtx:d,url:T,documentLoader:c,base:h,cycles:f})),N(I)?O.push(...I):O.push(I);continue}if(null===T){O.push(new n({document:null}));continue}a(T)||o(v);const P=JSON.stringify(T);let Q=this._get(P);Q||(Q=new n({document:T}),this._cacheResolvedContext({key:P,resolved:Q,tag:"static"})),O.push(Q)}return O}_get(d){let v=this.perOpCache.get(d);if(!v){const c=this.sharedCache.get(d);c&&(v=c.get("static"),v&&this.perOpCache.set(d,v))}return v}_cacheResolvedContext({key:d,resolved:v,tag:c}){if(this.perOpCache.set(d,v),void 0!==c){let h=this.sharedCache.get(d);h||(h=new Map,this.sharedCache.set(d,h)),h.set(c,v)}return v}async _resolveRemoteContext({activeCtx:d,url:v,documentLoader:c,base:h,cycles:f}){v=e(h,v);const{context:O,remoteDoc:T}=await this._fetchContext({activeCtx:d,url:v,documentLoader:c,cycles:f});u({context:O,base:h=T.documentUrl||v});const P=await this.resolve({activeCtx:d,context:O,documentLoader:c,base:h,cycles:f});return this._cacheResolvedContext({key:v,resolved:P,tag:T.tag}),P}async _fetchContext({activeCtx:d,url:v,documentLoader:c,cycles:h}){if(h.size>10)throw new r("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===d.processingMode?"loading remote context failed":"context overflow",max:10});if(h.has(v))throw new r("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===d.processingMode?"recursive context inclusion":"context overflow",url:v});let f,O;h.add(v);try{O=await c(v),f=O.document||null,x(f)&&(f=JSON.parse(f))}catch(T){throw new r("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:v,cause:T})}if(!a(f))throw new r("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:v});return f="@context"in f?{"@context":f["@context"]}:{"@context":{}},O.contextUrl&&(N(f["@context"])||(f["@context"]=[f["@context"]]),f["@context"].push(O.contextUrl)),{context:f,remoteDoc:O}}}},{"./JsonLdError":28,"./ResolvedContext":32,"./types":47,"./url":48,"./util":49}],28:[function(D,ne,V){"use strict";ne.exports=class extends Error{constructor(N="An unspecified JSON-LD error occurred.",a="jsonld.Error",x={}){super(N),this.name=a,this.message=N,this.details=x}}},{}],29:[function(D,ne,V){"use strict";ne.exports=N=>{class a{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(a,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(a.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:a}),a.compact=function(x,l){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):N.compact(x,l)},a.expand=function(x){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):N.expand(x)},a.flatten=function(x){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):N.flatten(x)},a}},{}],30:[function(D,ne,V){"use strict";ne.exports=D("rdf-canonize").NQuads},{"rdf-canonize":64}],31:[function(D,ne,V){"use strict";ne.exports=class{constructor(){this._requests={}}wrapLoader(N){const a=this;return a._loader=N,function(){return a.add.apply(a,arguments)}}async add(N){let a=this._requests[N];if(a)return Promise.resolve(a);a=this._requests[N]=this._loader(N);try{return await a}finally{delete this._requests[N]}}}},{}],32:[function(D,ne,V){"use strict";const N=D("lru-cache");ne.exports=class{constructor({document:a}){this.document=a,this.cache=new N({max:10})}getProcessed(a){return this.cache.get(a)}setProcessed(a,x){this.cache.set(a,x)}}},{"lru-cache":50}],33:[function(D,ne,V){"use strict";const N=D("./JsonLdError"),{isArray:a,isObject:x,isString:l,isUndefined:e}=D("./types"),{isList:r,isValue:n,isGraph:o,isSimpleGraph:u,isSubjectReference:d}=D("./graphTypes"),{expandIri:v,getContextValue:c,isKeyword:h,process:f,processingMode:O}=D("./context"),{removeBase:T,prependBase:P}=D("./url"),{REGEX_KEYWORD:Q,addValue:I,asArray:k,compareShortestLeast:G}=D("./util"),J={};function X(U,K,ie){if("@nest"!==v(U,K,{vocab:!0},ie))throw new N("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ne.exports=J,J.compact=async({activeCtx:U,activeProperty:K=null,element:ie,options:ce={}})=>{if(a(ie)){let fe=[];for(let Y=0;Y<ie.length;++Y){const M=await J.compact({activeCtx:U,activeProperty:K,element:ie[Y],options:ce});null!==M&&fe.push(M)}return ce.compactArrays&&1===fe.length&&0===(c(U,K,"@container")||[]).length&&(fe=fe[0]),fe}const ve=c(U,K,"@context");if(e(ve)||(U=await f({activeCtx:U,localCtx:ve,propagate:!0,overrideProtected:!0,options:ce})),x(ie)){if(ce.link&&"@id"in ie&&ce.link.hasOwnProperty(ie["@id"])){const ue=ce.link[ie["@id"]];for(let oe=0;oe<ue.length;++oe)if(ue[oe].expanded===ie)return ue[oe].compacted}if(n(ie)||d(ie)){const ue=J.compactValue({activeCtx:U,activeProperty:K,value:ie,options:ce});return ce.link&&d(ie)&&(ce.link.hasOwnProperty(ie["@id"])||(ce.link[ie["@id"]]=[]),ce.link[ie["@id"]].push({expanded:ie,compacted:ue})),ue}if(r(ie)&&(c(U,K,"@container")||[]).includes("@list"))return J.compact({activeCtx:U,activeProperty:K,element:ie["@list"],options:ce});const fe="@reverse"===K,Y={},M=U;n(ie)||d(ie)||(U=U.revertToPreviousContext());const z=c(M,K,"@context");e(z)||(U=await f({activeCtx:U,localCtx:z,propagate:!0,overrideProtected:!0,options:ce})),ce.link&&"@id"in ie&&(ce.link.hasOwnProperty(ie["@id"])||(ce.link[ie["@id"]]=[]),ce.link[ie["@id"]].push({expanded:ie,compacted:Y}));let Z=ie["@type"]||[];Z.length>1&&(Z=Array.from(Z).sort());const ae=U;for(const ue of Z){const oe=J.compactIri({activeCtx:ae,iri:ue,relativeTo:{vocab:!0}}),he=c(M,oe,"@context");e(he)||(U=await f({activeCtx:U,localCtx:he,options:ce,propagate:!1}))}const de=Object.keys(ie).sort();for(const ue of de){const oe=ie[ue];if("@id"!==ue)if("@type"!==ue)if("@reverse"!==ue)if("@preserve"!==ue)if("@index"!==ue)if("@graph"!==ue&&"@list"!==ue&&"@included"!==ue&&h(ue)){const he=J.compactIri({activeCtx:U,iri:ue,relativeTo:{vocab:!0}});I(Y,he,oe)}else{if(!a(oe))throw new N("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===oe.length){const he=J.compactIri({activeCtx:U,iri:ue,value:oe,relativeTo:{vocab:!0},reverse:fe}),_e=U.mappings.has(he)?U.mappings.get(he)["@nest"]:null;let Ee=Y;_e&&(X(U,_e,ce),x(Y[_e])||(Y[_e]={}),Ee=Y[_e]),I(Ee,he,oe,{propertyIsArray:!0})}for(const he of oe){const _e=J.compactIri({activeCtx:U,iri:ue,value:he,relativeTo:{vocab:!0},reverse:fe}),Ee=U.mappings.has(_e)?U.mappings.get(_e)["@nest"]:null;let $=Y;Ee&&(X(U,Ee,ce),x(Y[Ee])||(Y[Ee]={}),$=Y[Ee]);const m=c(U,_e,"@container")||[],L=o(he),q=r(he);let re;q?re=he["@list"]:L&&(re=he["@graph"]);let se=await J.compact({activeCtx:U,activeProperty:_e,element:q||L?re:he,options:ce});if(q){if(a(se)||(se=[se]),m.includes("@list")){I($,_e,se,{valueIsArray:!0,allowDuplicate:!0});continue}se={[J.compactIri({activeCtx:U,iri:"@list",relativeTo:{vocab:!0}})]:se},"@index"in he&&(se[J.compactIri({activeCtx:U,iri:"@index",relativeTo:{vocab:!0}})]=he["@index"])}if(L)if(m.includes("@graph")&&(m.includes("@id")||m.includes("@index")&&u(he))){let le;$.hasOwnProperty(_e)?le=$[_e]:$[_e]=le={};const Ae=(m.includes("@id")?he["@id"]:he["@index"])||J.compactIri({activeCtx:U,iri:"@none",relativeTo:{vocab:!0}});I(le,Ae,se,{propertyIsArray:!ce.compactArrays||m.includes("@set")})}else m.includes("@graph")&&u(he)?(a(se)&&se.length>1&&(se={"@included":se}),I($,_e,se,{propertyIsArray:!ce.compactArrays||m.includes("@set")})):(a(se)&&1===se.length&&ce.compactArrays&&(se=se[0]),se={[J.compactIri({activeCtx:U,iri:"@graph",relativeTo:{vocab:!0}})]:se},"@id"in he&&(se[J.compactIri({activeCtx:U,iri:"@id",relativeTo:{vocab:!0}})]=he["@id"]),"@index"in he&&(se[J.compactIri({activeCtx:U,iri:"@index",relativeTo:{vocab:!0}})]=he["@index"]),I($,_e,se,{propertyIsArray:!ce.compactArrays||m.includes("@set")}));else if(m.includes("@language")||m.includes("@index")||m.includes("@id")||m.includes("@type")){let le,Ae;if($.hasOwnProperty(_e)?le=$[_e]:$[_e]=le={},m.includes("@language"))n(se)&&(se=se["@value"]),Ae=he["@language"];else if(m.includes("@index")){const Se=c(U,_e,"@index")||"@index",je=J.compactIri({activeCtx:U,iri:Se,relativeTo:{vocab:!0}});if("@index"===Se)Ae=he["@index"],delete se[je];else{let Ne;if([Ae,...Ne]=k(se[Se]||[]),l(Ae))switch(Ne.length){case 0:delete se[Se];break;case 1:se[Se]=Ne[0];break;default:se[Se]=Ne}else Ae=null}}else if(m.includes("@id")){const Se=J.compactIri({activeCtx:U,iri:"@id",relativeTo:{vocab:!0}});Ae=se[Se],delete se[Se]}else if(m.includes("@type")){const Se=J.compactIri({activeCtx:U,iri:"@type",relativeTo:{vocab:!0}});let je;switch([Ae,...je]=k(se[Se]||[]),je.length){case 0:delete se[Se];break;case 1:se[Se]=je[0];break;default:se[Se]=je}1===Object.keys(se).length&&"@id"in he&&(se=await J.compact({activeCtx:U,activeProperty:_e,element:{"@id":he["@id"]},options:ce}))}Ae||(Ae=J.compactIri({activeCtx:U,iri:"@none",relativeTo:{vocab:!0}})),I(le,Ae,se,{propertyIsArray:m.includes("@set")})}else{const le=!ce.compactArrays||m.includes("@set")||m.includes("@list")||a(se)&&0===se.length||"@list"===ue||"@graph"===ue;I($,_e,se,{propertyIsArray:le})}}}else{if((c(U,K,"@container")||[]).includes("@index"))continue;const he=J.compactIri({activeCtx:U,iri:ue,relativeTo:{vocab:!0}});I(Y,he,oe)}else{const he=await J.compact({activeCtx:U,activeProperty:K,element:oe,options:ce});a(he)&&0===he.length||I(Y,ue,he)}else{const he=await J.compact({activeCtx:U,activeProperty:"@reverse",element:oe,options:ce});for(const _e in he)if(U.mappings.has(_e)&&U.mappings.get(_e).reverse){const Ee=he[_e],$=(c(U,_e,"@container")||[]).includes("@set")||!ce.compactArrays;I(Y,_e,Ee,{propertyIsArray:$}),delete he[_e]}if(Object.keys(he).length>0){const _e=J.compactIri({activeCtx:U,iri:ue,relativeTo:{vocab:!0}});I(Y,_e,he)}}else{let he=k(oe).map($=>J.compactIri({activeCtx:M,iri:$,relativeTo:{vocab:!0}}));1===he.length&&(he=he[0]);const _e=J.compactIri({activeCtx:U,iri:"@type",relativeTo:{vocab:!0}}),Ee=(c(U,_e,"@container")||[]).includes("@set")&&O(U,1.1)||a(he)&&0===oe.length;I(Y,_e,he,{propertyIsArray:Ee})}else{let he=k(oe).map(_e=>J.compactIri({activeCtx:U,iri:_e,relativeTo:{vocab:!1},base:ce.base}));1===he.length&&(he=he[0]),Y[J.compactIri({activeCtx:U,iri:"@id",relativeTo:{vocab:!0}})]=he}}return Y}return ie},J.compactIri=({activeCtx:U,iri:K,value:ie=null,relativeTo:ce={vocab:!1},reverse:ve=!1,base:fe=null})=>{if(null===K)return K;U.isPropertyTermScoped&&U.previousContext&&(U=U.previousContext);const Y=U.getInverse();if(h(K)&&K in Y&&"@none"in Y[K]&&"@type"in Y[K]["@none"]&&"@none"in Y[K]["@none"]["@type"])return Y[K]["@none"]["@type"]["@none"];if(ce.vocab&&K in Y){const de=U["@language"]||"@none",ue=[];x(ie)&&"@index"in ie&&!("@graph"in ie)&&ue.push("@index","@index@set"),x(ie)&&"@preserve"in ie&&(ie=ie["@preserve"][0]),o(ie)?("@index"in ie&&ue.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ie&&ue.push("@graph@id","@graph@id@set"),ue.push("@graph","@graph@set","@set"),"@index"in ie||ue.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in ie||ue.push("@graph@id","@graph@id@set")):x(ie)&&!n(ie)&&ue.push("@id","@id@set","@type","@set@type");let oe="@language",he="@null";if(ve)oe="@type",he="@reverse",ue.push("@set");else if(r(ie)){"@index"in ie||ue.push("@list");const Ee=ie["@list"];if(0===Ee.length)oe="@any",he="@none";else{let $=0===Ee.length?de:null,m=null;for(let L=0;L<Ee.length;++L){const q=Ee[L];let re="@none",se="@none";if(n(q)?"@direction"in q?re=`${(q["@language"]||"").toLowerCase()}_${q["@direction"]}`:"@language"in q?re=q["@language"].toLowerCase():"@type"in q?se=q["@type"]:re="@null":se="@id",null===$?$=re:re!==$&&n(q)&&($="@none"),null===m?m=se:se!==m&&(m="@none"),"@none"===$&&"@none"===m)break}$=$||"@none",m=m||"@none","@none"!==m?(oe="@type",he=m):he=$}}else{if(n(ie))if("@language"in ie&&!("@index"in ie)){ue.push("@language","@language@set"),he=ie["@language"];const Ee=ie["@direction"];Ee&&(he=`${he}_${Ee}`)}else"@direction"in ie&&!("@index"in ie)?he=`_${ie["@direction"]}`:"@type"in ie&&(oe="@type",he=ie["@type"]);else oe="@type",he="@id";ue.push("@set")}ue.push("@none"),x(ie)&&!("@index"in ie)&&ue.push("@index","@index@set"),n(ie)&&1===Object.keys(ie).length&&ue.push("@language","@language@set");const _e=function(Ee,$,m,L,q,re){null===re&&(re="@null");const se=[];if(("@id"===re||"@reverse"===re)&&x(m)&&"@id"in m){"@reverse"===re&&se.push("@reverse");const Ae=J.compactIri({activeCtx:Ee,iri:m["@id"],relativeTo:{vocab:!0}});Ee.mappings.has(Ae)&&Ee.mappings.get(Ae)&&Ee.mappings.get(Ae)["@id"]===m["@id"]?se.push.apply(se,["@vocab","@id"]):se.push.apply(se,["@id","@vocab"])}else{se.push(re);const Ae=se.find(Se=>Se.includes("_"));Ae&&se.push(Ae.replace(/^[^_]+_/,"_"))}se.push("@none");const le=Ee.inverse[$];for(const Ae of L){if(!(Ae in le))continue;const Se=le[Ae][q];for(const je of se)if(je in Se)return Se[je]}return null}(U,K,ie,ue,oe,he);if(null!==_e)return _e}if(ce.vocab&&"@vocab"in U){const de=U["@vocab"];if(0===K.indexOf(de)&&K!==de){const ue=K.substr(de.length);if(!U.mappings.has(ue))return ue}}let M=null;const z=[];let Z=U.fastCurieMap;const ae=K.length-1;for(let de=0;de<ae&&K[de]in Z;++de)Z=Z[K[de]],""in Z&&z.push(Z[""][0]);for(let de=z.length-1;de>=0;--de){const ue=z[de],oe=ue.terms;for(const he of oe){const _e=he+":"+K.substr(ue.iri.length);U.mappings.get(he)._prefix&&(!U.mappings.has(_e)||null===ie&&U.mappings.get(_e)["@id"]===K)&&(null===M||G(_e,M)<0)&&(M=_e)}}if(null!==M)return M;for(const[de,ue]of U.mappings)if(ue&&ue._prefix&&K.startsWith(de+":"))throw new N(`Absolute IRI "${K}" confused with prefix "${de}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:U});if(!ce.vocab){if("@base"in U){if(U["@base"]){const de=T(P(fe,U["@base"]),K);return Q.test(de)?`./${de}`:de}return K}return T(fe,K)}return K},J.compactValue=({activeCtx:U,activeProperty:K,value:ie,options:ce})=>{if(n(ie)){const M=c(U,K,"@type"),z=c(U,K,"@language"),Z=c(U,K,"@direction"),ae=c(U,K,"@container")||[],de="@index"in ie&&!ae.includes("@index");if(!de&&"@none"!==M&&(ie["@type"]===M||"@language"in ie&&ie["@language"]===z&&"@direction"in ie&&ie["@direction"]===Z||"@language"in ie&&ie["@language"]===z||"@direction"in ie&&ie["@direction"]===Z))return ie["@value"];const ue=Object.keys(ie).length,oe=1===ue||2===ue&&"@index"in ie&&!de,he="@language"in U,_e=l(ie["@value"]),Ee=U.mappings.has(K)&&null===U.mappings.get(K)["@language"];if(oe&&"@none"!==M&&(!he||!_e||Ee))return ie["@value"];const $={};return de&&($[J.compactIri({activeCtx:U,iri:"@index",relativeTo:{vocab:!0}})]=ie["@index"]),"@type"in ie?$[J.compactIri({activeCtx:U,iri:"@type",relativeTo:{vocab:!0}})]=J.compactIri({activeCtx:U,iri:ie["@type"],relativeTo:{vocab:!0}}):"@language"in ie&&($[J.compactIri({activeCtx:U,iri:"@language",relativeTo:{vocab:!0}})]=ie["@language"]),"@direction"in ie&&($[J.compactIri({activeCtx:U,iri:"@direction",relativeTo:{vocab:!0}})]=ie["@direction"]),$[J.compactIri({activeCtx:U,iri:"@value",relativeTo:{vocab:!0}})]=ie["@value"],$}const ve=v(U,K,{vocab:!0},ce),fe=c(U,K,"@type"),Y=J.compactIri({activeCtx:U,iri:ie["@id"],relativeTo:{vocab:"@vocab"===fe},base:ce.base});return"@id"===fe||"@vocab"===fe||"@graph"===ve?Y:{[J.compactIri({activeCtx:U,iri:"@id",relativeTo:{vocab:!0}})]:Y}}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],34:[function(D,ne,V){"use strict";const N="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a="http://www.w3.org/2001/XMLSchema#";ne.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:N,RDF_LIST:N+"List",RDF_FIRST:N+"first",RDF_REST:N+"rest",RDF_NIL:N+"nil",RDF_TYPE:N+"type",RDF_PLAIN_LITERAL:N+"PlainLiteral",RDF_XML_LITERAL:N+"XMLLiteral",RDF_JSON_LITERAL:N+"JSON",RDF_OBJECT:N+"object",RDF_LANGSTRING:N+"langString",XSD:a,XSD_BOOLEAN:a+"boolean",XSD_DOUBLE:a+"double",XSD_INTEGER:a+"integer",XSD_STRING:a+"string"}},{}],35:[function(D,ne,V){"use strict";const N=D("./util"),a=D("./JsonLdError"),{isArray:x,isObject:l,isString:e,isUndefined:r}=D("./types"),{isAbsolute:n,isRelative:o,prependBase:u}=D("./url"),{handleEvent:d}=D("./events"),{REGEX_BCP47:v,REGEX_KEYWORD:c,asArray:h,compareShortestLeast:f}=D("./util"),O=new Map,T={};function P(I,k,G,J,X,U){if(null===k||!e(k)||T.isKeyword(k))return k;if(k.match(c))return null;if(J&&J.hasOwnProperty(k)&&!0!==X.get(k)&&T.createTermDefinition({activeCtx:I,localCtx:J,term:k,defined:X,options:U}),(G=G||{}).vocab){const ie=I.mappings.get(k);if(null===ie)return null;if(l(ie)&&"@id"in ie)return ie["@id"]}const K=k.indexOf(":");if(K>0){const ie=k.substr(0,K),ce=k.substr(K+1);if("_"===ie||0===ce.indexOf("//"))return k;J&&J.hasOwnProperty(ie)&&T.createTermDefinition({activeCtx:I,localCtx:J,term:ie,defined:X,options:U});const ve=I.mappings.get(ie);if(ve&&ve._prefix)return ve["@id"]+ce;if(n(k))return k}if(G.vocab&&"@vocab"in I)k=I["@vocab"]+k;else if(G.base){let ie,ce;"@base"in I?I["@base"]?(ce=u(U.base,I["@base"]),ie=u(ce,k)):(ce=I["@base"],ie=k):(ce=U.base,ie=u(U.base,k)),k=ie}return k}function Q(I,k){if(!I||"object"!=typeof I||!k||"object"!=typeof k)return I===k;const G=Array.isArray(I);if(G!==Array.isArray(k))return!1;if(G){if(I.length!==k.length)return!1;for(let U=0;U<I.length;++U)if(!Q(I[U],k[U]))return!1;return!0}const J=Object.keys(I),X=Object.keys(k);if(J.length!==X.length)return!1;for(const U in I){let K=I[U],ie=k[U];if("@container"===U&&Array.isArray(K)&&Array.isArray(ie)&&(K=K.slice().sort(),ie=ie.slice().sort()),!Q(K,ie))return!1}return!0}ne.exports=T,T.process=async({activeCtx:I,localCtx:k,options:G,propagate:J=!0,overrideProtected:X=!1,cycles:U=new Set})=>{if(l(k)&&"@context"in k&&x(k["@context"])&&(k=k["@context"]),0===h(k).length)return I;const K=[],ie=[({event:Y,next:M})=>{K.push(Y),M()}];G.eventHandler&&ie.push(G.eventHandler);const ce=G;G={...G,eventHandler:ie};const ve=await G.contextResolver.resolve({activeCtx:I,context:k,documentLoader:G.documentLoader,base:G.base});l(ve[0].document)&&"boolean"==typeof ve[0].document["@propagate"]&&(J=ve[0].document["@propagate"]);let fe=I;J||fe.previousContext||(fe=fe.clone(),fe.previousContext=I);for(const Y of ve){let{document:M}=Y;if(I=fe,null===M){if(!X&&0!==Object.keys(I.protected).length)throw new a("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});fe=I=T.getInitialContext(G).clone();continue}const z=Y.getProcessed(I);if(z){if(ce.eventHandler)for(const ae of z.events)d({event:ae,options:ce});fe=I=z.context;continue}if(l(M)&&"@context"in M&&(M=M["@context"]),!l(M))throw new a("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:M});fe=fe.clone();const Z=new Map;if("@version"in M){if(1.1!==M["@version"])throw new a("Unsupported JSON-LD version: "+M["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:M});if(I.processingMode&&"json-ld-1.0"===I.processingMode)throw new a("@version: "+M["@version"]+" not compatible with "+I.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:M});fe.processingMode="json-ld-1.1",fe["@version"]=M["@version"],Z.set("@version",!0)}if(fe.processingMode=fe.processingMode||I.processingMode,"@base"in M){let ae=M["@base"];if(null!==ae&&!n(ae)){if(!o(ae))throw new a('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:M});ae=u(fe["@base"],ae)}fe["@base"]=ae,Z.set("@base",!0)}if("@vocab"in M){const ae=M["@vocab"];if(null===ae)delete fe["@vocab"];else{if(!e(ae))throw new a('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:M});if(!n(ae)&&T.processingMode(fe,1))throw new a('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:M});{const de=P(fe,ae,{vocab:!0,base:!0},void 0,void 0,G);n(de)||G.eventHandler&&d({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:de}},options:G}),fe["@vocab"]=de}}Z.set("@vocab",!0)}if("@language"in M){const ae=M["@language"];if(null===ae)delete fe["@language"];else{if(!e(ae))throw new a('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:M});ae.match(v)||G.eventHandler&&d({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ae}},options:G}),fe["@language"]=ae.toLowerCase()}Z.set("@language",!0)}if("@direction"in M){const ae=M["@direction"];if("json-ld-1.0"===I.processingMode)throw new a("Invalid JSON-LD syntax; @direction not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:M});if(null===ae)delete fe["@direction"];else{if("ltr"!==ae&&"rtl"!==ae)throw new a('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:M});fe["@direction"]=ae}Z.set("@direction",!0)}if("@propagate"in M){const ae=M["@propagate"];if("json-ld-1.0"===I.processingMode)throw new a("Invalid JSON-LD syntax; @propagate not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:M});if("boolean"!=typeof ae)throw new a("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:k});Z.set("@propagate",!0)}if("@import"in M){const ae=M["@import"];if("json-ld-1.0"===I.processingMode)throw new a("Invalid JSON-LD syntax; @import not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:M});if(!e(ae))throw new a("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:k});const de=await G.contextResolver.resolve({activeCtx:I,context:ae,documentLoader:G.documentLoader,base:G.base});if(1!==de.length)throw new a("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:k});const ue=de[0].getProcessed(I);if(ue)M=ue;else{const oe=de[0].document;if("@import"in oe)throw new a("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:k});for(const he in oe)M.hasOwnProperty(he)||(M[he]=oe[he]);de[0].setProcessed(I,M)}Z.set("@import",!0)}Z.set("@protected",M["@protected"]||!1);for(const ae in M)if(T.createTermDefinition({activeCtx:fe,localCtx:M,term:ae,defined:Z,options:G,overrideProtected:X}),l(M[ae])&&"@context"in M[ae]){const de=M[ae]["@context"];let ue=!0;if(e(de)){const oe=u(G.base,de);U.has(oe)?ue=!1:U.add(oe)}if(ue)try{await T.process({activeCtx:fe.clone(),localCtx:M[ae]["@context"],overrideProtected:!0,options:G,cycles:U})}catch{throw new a("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:M[ae]["@context"],term:ae})}}Y.setProcessed(I,{context:fe,events:K})}return fe},T.createTermDefinition=({activeCtx:I,localCtx:k,term:G,defined:J,options:X,overrideProtected:U=!1})=>{if(J.has(G)){if(J.get(G))return;throw new a("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:k,term:G})}let K;if(J.set(G,!1),k.hasOwnProperty(G)&&(K=k[G]),"@type"===G&&l(K)&&"@set"===(K["@container"]||"@set")&&T.processingMode(I,1.1)){const z=["@container","@id","@protected"],Z=Object.keys(K);if(0===Z.length||Z.some(ae=>!z.includes(ae)))throw new a("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:k,term:G})}else{if(T.isKeyword(G))throw new a("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:k,term:G});if(G.match(c))return void(X.eventHandler&&d({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:G}},options:X}));if(""===G)throw new a("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:k})}const ie=I.mappings.get(G);I.mappings.has(G)&&I.mappings.delete(G);let ce=!1;if((e(K)||null===K)&&(ce=!0,K={"@id":K}),!l(K))throw new a("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:k});const ve={};I.mappings.set(G,ve),ve.reverse=!1;const fe=["@container","@id","@language","@reverse","@type"];T.processingMode(I,1.1)&&fe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const z in K)if(!fe.includes(z))throw new a("Invalid JSON-LD syntax; a term definition must not contain "+z,"jsonld.SyntaxError",{code:"invalid term definition",context:k});const Y=G.indexOf(":");if(ve._termHasColon=Y>0,"@reverse"in K){if("@id"in K)throw new a("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:k});if("@nest"in K)throw new a("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:k});const z=K["@reverse"];if(!e(z))throw new a("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:k});if(z.match(c))return X.eventHandler&&d({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:z}},options:X}),void(ie?I.mappings.set(G,ie):I.mappings.delete(G));const Z=P(I,z,{vocab:!0,base:!1},k,J,X);if(!n(Z))throw new a("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:k});ve["@id"]=Z,ve.reverse=!0}else if("@id"in K){let z=K["@id"];if(z&&!e(z))throw new a("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:k});if(null===z)ve["@id"]=null;else{if(!T.isKeyword(z)&&z.match(c))return X.eventHandler&&d({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:z}},options:X}),void(ie?I.mappings.set(G,ie):I.mappings.delete(G));if(z!==G){if(z=P(I,z,{vocab:!0,base:!1},k,J,X),!n(z)&&!T.isKeyword(z))throw new a("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:k});if(G.match(/(?::[^:])|\//)&&P(I,G,{vocab:!0,base:!1},k,new Map(J).set(G,!0),X)!==z)throw new a("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:k});ve["@id"]=z,ve._prefix=ce&&!ve._termHasColon&&null!==z.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ve))if(ve._termHasColon){const z=G.substr(0,Y);if(k.hasOwnProperty(z)&&T.createTermDefinition({activeCtx:I,localCtx:k,term:z,defined:J,options:X}),I.mappings.has(z)){const Z=G.substr(Y+1);ve["@id"]=I.mappings.get(z)["@id"]+Z}else ve["@id"]=G}else if("@type"===G)ve["@id"]=G;else{if(!("@vocab"in I))throw new a("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:k,term:G});ve["@id"]=I["@vocab"]+G}if((!0===K["@protected"]||!0===J.get("@protected")&&!1!==K["@protected"])&&(I.protected[G]=!0,ve.protected=!0),J.set(G,!0),"@type"in K){let z=K["@type"];if(!e(z))throw new a("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:k});if("@json"===z||"@none"===z){if(T.processingMode(I,1))throw new a(`Invalid JSON-LD syntax; an @context @type value must not be "${z}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:k})}else if("@id"!==z&&"@vocab"!==z){if(z=P(I,z,{vocab:!0,base:!1},k,J,X),!n(z))throw new a("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:k});if(0===z.indexOf("_:"))throw new a("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:k})}ve["@type"]=z}if("@container"in K){const z=e(K["@container"])?[K["@container"]]:K["@container"]||[],Z=["@list","@set","@index","@language"];let ae=!0;const de=z.includes("@set");if(T.processingMode(I,1.1)){if(Z.push("@graph","@id","@type"),z.includes("@list")){if(1!==z.length)throw new a("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:k})}else if(z.includes("@graph")){if(z.some(ue=>"@graph"!==ue&&"@id"!==ue&&"@index"!==ue&&"@set"!==ue))throw new a("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:k})}else ae&=z.length<=(de?2:1);if(z.includes("@type")&&(ve["@type"]=ve["@type"]||"@id",!["@id","@vocab"].includes(ve["@type"])))throw new a("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:k})}else ae&=!x(K["@container"]),ae&=z.length<=1;if(ae&=z.every(ue=>Z.includes(ue)),ae&=!(de&&z.includes("@list")),!ae)throw new a("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Z.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:k});if(ve.reverse&&!z.every(ue=>["@index","@set"].includes(ue)))throw new a("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:k});ve["@container"]=z}if("@index"in K){if(!("@container"in K)||!ve["@container"].includes("@index"))throw new a(`Invalid JSON-LD syntax; @index without @index in @container: "${K["@index"]}" on term "${G}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:k});if(!e(K["@index"])||0===K["@index"].indexOf("@"))throw new a(`Invalid JSON-LD syntax; @index must expand to an IRI: "${K["@index"]}" on term "${G}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:k});ve["@index"]=K["@index"]}if("@context"in K&&(ve["@context"]=K["@context"]),"@language"in K&&!("@type"in K)){let z=K["@language"];if(null!==z&&!e(z))throw new a("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:k});null!==z&&(z=z.toLowerCase()),ve["@language"]=z}if("@prefix"in K){if(G.match(/:|\//))throw new a("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:k});if(T.isKeyword(ve["@id"]))throw new a("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:k});if("boolean"!=typeof K["@prefix"])throw new a("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:k});ve._prefix=!0===K["@prefix"]}if("@direction"in K){const z=K["@direction"];if(null!==z&&"ltr"!==z&&"rtl"!==z)throw new a('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:k});ve["@direction"]=z}if("@nest"in K){const z=K["@nest"];if(!e(z)||"@nest"!==z&&0===z.indexOf("@"))throw new a("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:k});ve["@nest"]=z}const M=ve["@id"];if("@context"===M||"@preserve"===M)throw new a("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:k});if(ie&&ie.protected&&!U&&(I.protected[G]=!0,ve.protected=!0,!Q(ie,ve)))throw new a("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:k,term:G})},T.expandIri=(I,k,G,J)=>P(I,k,G,void 0,void 0,J),T.getInitialContext=I=>{const k=JSON.stringify({processingMode:I.processingMode}),G=O.get(k);if(G)return G;const J={processingMode:I.processingMode,mappings:new Map,inverse:null,getInverse:function(){const K=this;if(K.inverse)return K.inverse;const ie=K.inverse={},ce=K.fastCurieMap={},ve={},fe=(K["@language"]||"@none").toLowerCase(),Y=K["@direction"],M=K.mappings,z=[...M.keys()].sort(f);for(const Z of z){const ae=M.get(Z);if(null===ae)continue;let de=ae["@container"]||"@none";if(de=[].concat(de).sort().join(""),null===ae["@id"])continue;const ue=h(ae["@id"]);for(const oe of ue){let he=ie[oe];const _e=T.isKeyword(oe);if(he)_e||ae._termHasColon||ve[oe].push(Z);else if(ie[oe]=he={},!_e&&!ae._termHasColon){ve[oe]=[Z];const Ee={iri:oe,terms:ve[oe]};oe[0]in ce?ce[oe[0]].push(Ee):ce[oe[0]]=[Ee]}if(he[de]||(he[de]={"@language":{},"@type":{},"@any":{}}),he=he[de],U(Z,he["@any"],"@none"),ae.reverse)U(Z,he["@type"],"@reverse");else if("@none"===ae["@type"])U(Z,he["@any"],"@none"),U(Z,he["@language"],"@none"),U(Z,he["@type"],"@none");else if("@type"in ae)U(Z,he["@type"],ae["@type"]);else if("@language"in ae&&"@direction"in ae){const Ee=ae["@language"],$=ae["@direction"];U(Z,he["@language"],Ee&&$?`${Ee}_${$}`.toLowerCase():Ee?Ee.toLowerCase():$?`_${$}`:"@null")}else"@language"in ae?U(Z,he["@language"],(ae["@language"]||"@null").toLowerCase()):"@direction"in ae?ae["@direction"]?U(Z,he["@language"],`_${ae["@direction"]}`):U(Z,he["@language"],"@none"):Y?(U(Z,he["@language"],`_${Y}`),U(Z,he["@language"],"@none"),U(Z,he["@type"],"@none")):(U(Z,he["@language"],fe),U(Z,he["@language"],"@none"),U(Z,he["@type"],"@none"))}}for(const Z in ce)X(ce,Z,1);return ie},clone:function(){const K={};return K.mappings=N.clone(this.mappings),K.clone=this.clone,K.inverse=null,K.getInverse=this.getInverse,K.protected=N.clone(this.protected),this.previousContext&&(K.previousContext=this.previousContext.clone()),K.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(K["@base"]=this["@base"]),"@language"in this&&(K["@language"]=this["@language"]),"@vocab"in this&&(K["@vocab"]=this["@vocab"]),K},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===O.size&&O.clear(),O.set(k,J),J;function X(K,ie,ce){const ve=K[ie],fe=K[ie]={};let Y,M;for(const z of ve)Y=z.iri,M=ce>=Y.length?"":Y[ce],M in fe?fe[M].push(z):fe[M]=[z];for(const z in fe)""!==z&&X(fe,z,ce+1)}function U(K,ie,ce){ie.hasOwnProperty(ce)||(ie[ce]=K)}},T.getContextValue=(I,k,G)=>{if(null===k)return"@context"===G?void 0:null;if(I.mappings.has(k)){const J=I.mappings.get(k);if(r(G))return J;if(J.hasOwnProperty(G))return J[G]}return"@language"===G&&G in I||"@direction"===G&&G in I?I[G]:"@context"!==G?null:void 0},T.processingMode=(I,k)=>k.toString()>="1.1"?!I.processingMode||I.processingMode>="json-ld-"+k.toString():"json-ld-1.0"===I.processingMode,T.isKeyword=I=>{if(!e(I)||"@"!==I[0])return!1;switch(I){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":28,"./events":37,"./types":47,"./url":48,"./util":49}],36:[function(D,ne,V){"use strict";const{parseLinkHeader:N,buildHeaders:a}=D("../util"),{LINK_HEADER_CONTEXT:x}=D("../constants"),l=D("../JsonLdError"),e=D("../RequestQueue"),{prependBase:r}=D("../url"),n=/(^|(\r\n))link:/i;ne.exports=({secure:o,headers:u={},xhr:d}={headers:{}})=>(u=a(u),(new e).wrapLoader(async function v(c){if(0!==c.indexOf("http:")&&0!==c.indexOf("https:"))throw new l('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:c});if(o&&0!==c.indexOf("https"))throw new l('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:c});let h;try{h=await function(Q,I,k){const G=new(Q=Q||XMLHttpRequest);return new Promise((J,X)=>{G.onload=()=>J(G),G.onerror=U=>X(U),G.open("GET",I,!0);for(const U in k)G.setRequestHeader(U,k[U]);G.send()})}(d,c,u)}catch(Q){throw new l("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:c,cause:Q})}if(h.status>=400)throw new l("URL could not be dereferenced: "+h.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:c,httpStatusCode:h.status});let f={contextUrl:null,documentUrl:c,document:h.response},O=null;const T=h.getResponseHeader("Content-Type");let P;if(n.test(h.getAllResponseHeaders())&&(P=h.getResponseHeader("Link")),P&&"application/ld+json"!==T){const Q=N(P),I=Q[x];if(Array.isArray(I))throw new l("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:c});I&&(f.contextUrl=I.target),O=Q.alternate,O&&"application/ld+json"==O.type&&!(T||"").match(/^application\/(\w*\+)?json$/)&&(f=await v(r(c,O.target)))}return f}))},{"../JsonLdError":28,"../RequestQueue":31,"../constants":34,"../url":48,"../util":49}],37:[function(D,ne,V){"use strict";const N=D("./JsonLdError"),{isArray:a}=D("./types"),{asArray:x}=D("./util"),l={};function e({event:n,handlers:o}){let u=!0;for(let d=0;u&&d<o.length;++d){u=!1;const v=o[d];if(a(v))u=e({event:n,handlers:v});else if("function"==typeof v)v({event:n,next:()=>{u=!0}});else{if("object"!=typeof v)throw new N("Invalid event handler.","jsonld.InvalidEventHandler",{event:n});n.code in v?v[n.code]({event:n,next:()=>{u=!0}}):u=!0}}return u}ne.exports=l,l.defaultEventHandler=null,l.setupEventHandler=({options:n={}})=>{const o=[].concat(n.safe?l.safeEventHandler:[],n.eventHandler?x(n.eventHandler):[],l.defaultEventHandler?l.defaultEventHandler:[]);return 0===o.length?null:o},l.handleEvent=({event:n,options:o})=>{e({event:n,handlers:o.eventHandler})};const r=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);l.safeEventHandler=function({event:n,next:o}){if("warning"===n.level&&r.has(n.code))throw new N("Safe mode validation error.","jsonld.ValidationError",{event:n});o()},l.logEventHandler=function({event:n,next:o}){console.log(`EVENT: ${n.message}`,{event:n}),o()},l.logWarningEventHandler=function({event:n,next:o}){"warning"===n.level&&console.warn(`WARNING: ${n.message}`,{event:n}),o()},l.unhandledEventHandler=function({event:n}){throw new N("No handler for event.","jsonld.UnhandledEvent",{event:n})},l.setDefaultEventHandler=function({eventHandler:n}={}){l.defaultEventHandler=n?x(n):null}},{"./JsonLdError":28,"./types":47,"./util":49}],38:[function(D,ne,V){"use strict";const N=D("./JsonLdError"),{isArray:a,isObject:x,isEmptyObject:l,isString:e,isUndefined:r}=D("./types"),{isList:n,isValue:o,isGraph:u,isSubject:d}=D("./graphTypes"),{expandIri:v,getContextValue:c,isKeyword:h,process:f,processingMode:O}=D("./context"),{isAbsolute:T}=D("./url"),{REGEX_BCP47:P,REGEX_KEYWORD:Q,addValue:I,asArray:k,getValues:G,validateTypeValue:J}=D("./util"),{handleEvent:X}=D("./events"),U={};function K({value:Y,count:M,options:z}){if(0===M||"@value"in Y||"@list"in Y||1===M&&"@id"in Y){if(z.eventHandler){let Z,ae;0===M?(Z="empty object",ae="Dropping empty object."):"@value"in Y?(Z="object with only @value",ae="Dropping object with only @value."):"@list"in Y?(Z="object with only @list",ae="Dropping object with only @list."):1===M&&"@id"in Y&&(Z="object with only @id",ae="Dropping object with only @id."),X({event:{type:["JsonLdEvent"],code:Z,level:"warning",message:ae,details:{value:Y}},options:z})}return null}return Y}async function ie({activeCtx:Y,activeProperty:M,expandedActiveProperty:z,element:Z,expandedParent:ae,options:de={},insideList:ue,typeKey:oe,typeScopedContext:he}){const _e=Object.keys(Z).sort(),Ee=[];let $;const m=Z[oe]&&"@json"===v(Y,a(Z[oe])?Z[oe][0]:Z[oe],{vocab:!0},{...de,typeExpansion:!0});for(const L of _e){let q,re=Z[L];if("@context"===L)continue;const se=v(Y,L,{vocab:!0},de);if(null===se||!T(se)&&!h(se)){de.eventHandler&&X({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:L,expandedProperty:se}},options:de});continue}if(h(se)){if("@reverse"===z)throw new N("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:re});if(se in ae&&"@included"!==se&&"@type"!==se)throw new N("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:se})}if("@id"===se){if(!e(re)){if(!de.isFrame)throw new N('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:re});if(x(re)){if(!l(re))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:re})}else{if(!a(re))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:re});if(!re.every(je=>e(je)))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:re})}}I(ae,"@id",k(re).map(je=>{if(e(je)){const Ne=v(Y,je,{base:!0},de);return de.eventHandler&&(null===Ne?X(null===je?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:je}},options:de}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:je}},options:de}):T(Ne)||X({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:je,expandedId:Ne}},options:de})),Ne}return je}),{propertyIsArray:de.isFrame});continue}if("@type"===se){x(re)&&(re=Object.fromEntries(Object.entries(re).map(([je,Ne])=>[v(he,je,{vocab:!0}),k(Ne).map(Oe=>v(he,Oe,{base:!0,vocab:!0},{...de,typeExpansion:!0}))]))),J(re,de.isFrame),I(ae,"@type",k(re).map(je=>{if(e(je)){const Ne=v(he,je,{base:!0,vocab:!0},{...de,typeExpansion:!0});return"@json"===Ne||T(Ne)||de.eventHandler&&X({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:je}},options:de}),Ne}return je}),{propertyIsArray:!!de.isFrame});continue}if("@included"===se&&O(Y,1.1)){const je=k(await U.expand({activeCtx:Y,activeProperty:M,element:re,options:de}));if(!je.every(Ne=>d(Ne)))throw new N("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:re});I(ae,"@included",je,{propertyIsArray:!0});continue}if("@graph"===se&&!x(re)&&!a(re))throw new N('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:re});if("@value"===se){$=re,m&&O(Y,1.1)?ae["@value"]=re:I(ae,"@value",re,{propertyIsArray:de.isFrame});continue}if("@language"===se){if(null===re)continue;if(!e(re)&&!de.isFrame)throw new N('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:re});re=k(re).map(je=>e(je)?je.toLowerCase():je);for(const je of re)e(je)&&!je.match(P)&&de.eventHandler&&X({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:je}},options:de});I(ae,"@language",re,{propertyIsArray:de.isFrame});continue}if("@direction"===se){if(!e(re)&&!de.isFrame)throw new N('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:re});re=k(re);for(const je of re)if(e(je)&&"ltr"!==je&&"rtl"!==je)throw new N('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:re});I(ae,"@direction",re,{propertyIsArray:de.isFrame});continue}if("@index"===se){if(!e(re))throw new N('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:re});I(ae,"@index",re);continue}if("@reverse"===se){if(!x(re))throw new N('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:re});if(q=await U.expand({activeCtx:Y,activeProperty:"@reverse",element:re,options:de}),"@reverse"in q)for(const Ne in q["@reverse"])I(ae,Ne,q["@reverse"][Ne],{propertyIsArray:!0});let je=ae["@reverse"]||null;for(const Ne in q){if("@reverse"===Ne)continue;null===je&&(je=ae["@reverse"]={}),I(je,Ne,[],{propertyIsArray:!0});const Oe=q[Ne];for(let Me=0;Me<Oe.length;++Me){const qe=Oe[Me];if(o(qe)||n(qe))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});I(je,Ne,qe,{propertyIsArray:!0})}}continue}if("@nest"===se){Ee.push(L);continue}let le=Y;const Ae=c(Y,L,"@context");r(Ae)||(le=await f({activeCtx:Y,localCtx:Ae,propagate:!0,overrideProtected:!0,options:de}));const Se=c(Y,L,"@container")||[];if(Se.includes("@language")&&x(re))q=ve(le,re,c(le,L,"@direction"),de);else if(Se.includes("@index")&&x(re)){const je=Se.includes("@graph"),Ne=c(le,L,"@index")||"@index",Oe="@index"!==Ne&&v(Y,Ne,{vocab:!0},de);q=await fe({activeCtx:le,options:de,activeProperty:L,value:re,asGraph:je,indexKey:Ne,propertyIndex:Oe})}else if(Se.includes("@id")&&x(re)){const je=Se.includes("@graph");q=await fe({activeCtx:le,options:de,activeProperty:L,value:re,asGraph:je,indexKey:"@id"})}else if(Se.includes("@type")&&x(re))q=await fe({activeCtx:le.revertToPreviousContext(),options:de,activeProperty:L,value:re,asGraph:!1,indexKey:"@type"});else{const je="@list"===se;if(je||"@set"===se){let Ne=M;je&&"@graph"===z&&(Ne=null),q=await U.expand({activeCtx:le,activeProperty:Ne,element:re,options:de,insideList:je})}else q="@json"===c(Y,L,"@type")?{"@type":"@json","@value":re}:await U.expand({activeCtx:le,activeProperty:L,element:re,options:de,insideList:!1})}if(null!==q||"@value"===se){if("@list"!==se&&!n(q)&&Se.includes("@list")&&(q={"@list":k(q)}),Se.includes("@graph")&&!Se.some(je=>"@id"===je||"@index"===je)){if(q=k(q),de.isFrame||(q=q.filter(je=>null!==K({value:je,count:Object.keys(je).length,options:de}))),0===q.length)continue;q=q.map(je=>({"@graph":k(je)}))}if(le.mappings.has(L)&&le.mappings.get(L).reverse){const je=ae["@reverse"]=ae["@reverse"]||{};q=k(q);for(let Ne=0;Ne<q.length;++Ne){const Oe=q[Ne];if(o(Oe)||n(Oe))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});I(je,se,Oe,{propertyIsArray:!0})}}else I(ae,se,q,{propertyIsArray:!0})}}if("@value"in ae&&("@json"!==ae["@type"]||!O(Y,1.1))&&(x($)||a($))&&!de.isFrame)throw new N('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:$});for(const L of Ee){const q=a(Z[L])?Z[L]:[Z[L]];for(const re of q){if(!x(re)||Object.keys(re).some(se=>"@value"===v(Y,se,{vocab:!0},de)))throw new N("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:re});await ie({activeCtx:Y,activeProperty:M,expandedActiveProperty:z,element:re,expandedParent:ae,options:de,insideList:ue,typeScopedContext:he,typeKey:oe})}}}function ce({activeCtx:Y,activeProperty:M,value:z,options:Z}){if(null==z)return null;const ae=v(Y,M,{vocab:!0},Z);if("@id"===ae)return v(Y,z,{base:!0},Z);if("@type"===ae)return v(Y,z,{vocab:!0,base:!0},{...Z,typeExpansion:!0});const de=c(Y,M,"@type");if(("@id"===de||"@graph"===ae)&&e(z)){const oe=v(Y,z,{base:!0},Z);return null===oe&&z.match(Q)&&Z.eventHandler&&X({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:M}},options:Z}),{"@id":oe}}if("@vocab"===de&&e(z))return{"@id":v(Y,z,{vocab:!0,base:!0},Z)};if(h(ae))return z;const ue={};if(de&&!["@id","@vocab","@none"].includes(de))ue["@type"]=de;else if(e(z)){const oe=c(Y,M,"@language");null!==oe&&(ue["@language"]=oe);const he=c(Y,M,"@direction");null!==he&&(ue["@direction"]=he)}return["boolean","number","string"].includes(typeof z)||(z=z.toString()),ue["@value"]=z,ue}function ve(Y,M,z,Z){const ae=[],de=Object.keys(M).sort();for(const ue of de){const oe=v(Y,ue,{vocab:!0},Z);let he=M[ue];a(he)||(he=[he]);for(const _e of he){if(null===_e)continue;if(!e(_e))throw new N("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:M});const Ee={"@value":_e};"@none"!==oe&&(ue.match(P)||Z.eventHandler&&X({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ue}},options:Z}),Ee["@language"]=ue.toLowerCase()),z&&(Ee["@direction"]=z),ae.push(Ee)}}return ae}async function fe({activeCtx:Y,options:M,activeProperty:z,value:Z,asGraph:ae,indexKey:de,propertyIndex:ue}){const oe=[],he=Object.keys(Z).sort(),_e="@type"===de;for(let Ee of he){if(_e){const L=c(Y,Ee,"@context");r(L)||(Y=await f({activeCtx:Y,localCtx:L,propagate:!1,options:M}))}let $,m=Z[Ee];a(m)||(m=[m]),m=await U.expand({activeCtx:Y,activeProperty:z,element:m,options:M,insideList:!1,insideIndex:!0}),$=ue?"@none"===Ee?"@none":ce({activeCtx:Y,activeProperty:de,value:Ee,options:M}):v(Y,Ee,{vocab:!0},M),"@id"===de?Ee=v(Y,Ee,{base:!0},M):_e&&(Ee=$);for(let L of m){if(ae&&!u(L)&&(L={"@graph":[L]}),"@type"===de)"@none"===$||(L["@type"]?L["@type"]=[Ee].concat(L["@type"]):L["@type"]=[Ee]);else{if(o(L)&&!["@language","@type","@index"].includes(de))throw new N(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${de}".`,"jsonld.SyntaxError",{code:"invalid value object",value:L});ue?"@none"!==$&&I(L,ue,$,{propertyIsArray:!0,prependValue:!0}):"@none"===$||de in L||(L[de]=Ee)}oe.push(L)}}return oe}ne.exports=U,U.expand=async({activeCtx:Y,activeProperty:M=null,element:z,options:Z={},insideList:ae=!1,insideIndex:de=!1,typeScopedContext:ue=null})=>{if(null==z)return null;if("@default"===M&&(Z=Object.assign({},Z,{isFrame:!1})),!a(z)&&!x(z))return ae||null!==M&&"@graph"!==v(Y,M,{vocab:!0},Z)?ce({activeCtx:Y,activeProperty:M,value:z,options:Z}):(Z.eventHandler&&X({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:z}},options:Z}),null);if(a(z)){let q=[];const re=c(Y,M,"@container")||[];ae=ae||re.includes("@list");for(let se=0;se<z.length;++se){let le=await U.expand({activeCtx:Y,activeProperty:M,element:z[se],options:Z,insideIndex:de,typeScopedContext:ue});ae&&a(le)&&(le={"@list":le}),null!==le&&(a(le)?q=q.concat(le):q.push(le))}return q}const oe=v(Y,M,{vocab:!0},Z),he=c(Y,M,"@context");ue=ue||(Y.previousContext?Y:null);let _e=Object.keys(z).sort(),Ee=!de;if(Ee&&ue&&_e.length<=2&&!_e.includes("@context"))for(const q of _e){const re=v(ue,q,{vocab:!0},Z);if("@value"===re){Ee=!1,Y=ue;break}if("@id"===re&&1===_e.length){Ee=!1;break}}Ee&&(Y=Y.revertToPreviousContext()),r(he)||(Y=await f({activeCtx:Y,localCtx:he,propagate:!0,overrideProtected:!0,options:Z})),"@context"in z&&(Y=await f({activeCtx:Y,localCtx:z["@context"],options:Z})),ue=Y;let $=null;for(const q of _e)if("@type"===v(Y,q,{vocab:!0},Z)){$=$||q;const re=z[q],se=Array.isArray(re)?re.length>1?re.slice().sort():re:[re];for(const le of se){const Ae=c(ue,le,"@context");r(Ae)||(Y=await f({activeCtx:Y,localCtx:Ae,options:Z,propagate:!1}))}}let m={};await ie({activeCtx:Y,activeProperty:M,expandedActiveProperty:oe,element:z,expandedParent:m,options:Z,insideList:ae,typeKey:$,typeScopedContext:ue}),_e=Object.keys(m);let L=_e.length;if("@value"in m){if("@type"in m&&("@language"in m||"@direction"in m))throw new N('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:m});let q=L-1;if("@type"in m&&(q-=1),"@index"in m&&(q-=1),"@language"in m&&(q-=1),"@direction"in m&&(q-=1),0!==q)throw new N('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:m});const re=null===m["@value"]?[]:k(m["@value"]),se=G(m,"@type");if(!O(Y,1.1)||!se.includes("@json")||1!==se.length)if(0===re.length)Z.eventHandler&&X({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:m}},options:Z}),m=null;else{if(!re.every(le=>e(le)||l(le))&&"@language"in m)throw new N("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:m});if(!se.every(le=>T(le)&&!(e(le)&&0===le.indexOf("_:"))||l(le)))throw new N('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:m})}}else if("@type"in m&&!a(m["@type"]))m["@type"]=[m["@type"]];else if("@set"in m||"@list"in m){if(L>1&&(2!==L||!("@index"in m)))throw new N('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:m});"@set"in m&&(m=m["@set"],_e=Object.keys(m),L=_e.length)}else 1===L&&"@language"in m&&(Z.eventHandler&&X({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:m}},options:Z}),m=null);return!x(m)||Z.keepFreeFloatingNodes||ae||null!==M&&"@graph"!==oe&&!(c(Y,M,"@container")||[]).includes("@graph")||(m=K({value:m,count:L,options:Z})),m}},{"./JsonLdError":28,"./context":35,"./events":37,"./graphTypes":42,"./types":47,"./url":48,"./util":49}],39:[function(D,ne,V){"use strict";const{isSubjectReference:N}=D("./graphTypes"),{createMergedNodeMap:a}=D("./nodeMap"),x={};ne.exports=x,x.flatten=l=>{const e=a(l),r=[],n=Object.keys(e).sort();for(let o=0;o<n.length;++o){const u=e[n[o]];N(u)||r.push(u)}return r}},{"./graphTypes":42,"./nodeMap":44}],40:[function(D,ne,V){"use strict";const{isKeyword:N}=D("./context"),a=D("./graphTypes"),x=D("./types"),l=D("./util"),e=D("./url"),r=D("./JsonLdError"),{createNodeMap:n,mergeNodeMapGraphs:o}=D("./nodeMap"),u={};function d(k){const G={};for(const J in k)void 0!==k[J]&&(G["@"+J]=[k[J]]);return[G]}function v(k,G,J){for(let X=J.length-1;X>=0;--X){const U=J[X];if(U.graph===G&&U.subject["@id"]===k["@id"])return!0}return!1}function c(k,G,J){const X="@"+J;let U=X in k?k[X][0]:G[J];if("embed"===J)if(!0===U)U="@once";else if(!1===U)U="@never";else if("@always"!==U&&"@never"!==U&&"@link"!==U&&"@first"!==U&&"@last"!==U&&"@once"!==U)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:k});return U}function h(k){if(!x.isArray(k)||1!==k.length||!x.isObject(k[0]))throw new r("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:k});if("@id"in k[0])for(const G of l.asArray(k[0]["@id"]))if(!x.isObject(G)&&!e.isAbsolute(G)||x.isString(G)&&0===G.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:k});if("@type"in k[0])for(const G of l.asArray(k[0]["@type"]))if(!x.isObject(G)&&!e.isAbsolute(G)&&"@json"!==G||x.isString(G)&&0===G.indexOf("_:"))throw new r("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:k})}function f(k,G,J,X){let U=!0,K=!1;for(const ie in J){let ce=!1;const ve=l.getValues(G,ie),fe=0===l.getValues(J,ie).length;if("@id"===ie){if(x.isEmptyObject(J["@id"][0]||{})?ce=!0:J["@id"].length>=0&&(ce=J["@id"].includes(ve[0])),!X.requireAll)return ce}else if("@type"===ie){if(U=!1,fe){if(ve.length>0)return!1;ce=!0}else if(1===J["@type"].length&&x.isEmptyObject(J["@type"][0]))ce=ve.length>0;else for(const Y of J["@type"])ce=!(!x.isObject(Y)||!("@default"in Y))||ce||ve.some(M=>M===Y);if(!X.requireAll)return ce}else{if(N(ie))continue;{const Y=l.getValues(J,ie)[0];let M=!1;if(Y&&(h([Y]),M="@default"in Y),U=!1,0===ve.length&&M)continue;if(ve.length>0&&fe)return!1;if(void 0===Y){if(ve.length>0)return!1;ce=!0}else if(a.isList(Y)){const z=Y["@list"][0];if(a.isList(ve[0])){const Z=ve[0]["@list"];a.isValue(z)?ce=Z.some(ae=>I(z,ae)):(a.isSubject(z)||a.isSubjectReference(z))&&(ce=Z.some(ae=>Q(k,z,ae,X)))}}else ce=a.isValue(Y)?ve.some(z=>I(Y,z)):a.isSubjectReference(Y)?ve.some(z=>Q(k,Y,z,X)):!!x.isObject(Y)&&ve.length>0}}if(!ce&&X.requireAll)return!1;K=K||ce}return U||K}function O(k,G){const J=k.uniqueEmbeds[k.graph],X=J[G],U=X.parent,K=X.property,ie={"@id":G};if(x.isArray(U)){for(let ve=0;ve<U.length;++ve)if(l.compareValues(U[ve],ie)){U[ve]=ie;break}}else{const ve=x.isArray(U[K]);l.removeValue(U,K,ie,{propertyIsArray:ve}),l.addValue(U,K,ie,{propertyIsArray:ve})}const ce=ve=>{const fe=Object.keys(J);for(const Y of fe)Y in J&&x.isObject(J[Y].parent)&&J[Y].parent["@id"]===ve&&(delete J[Y],ce(Y))};ce(G)}function T(k,G){if(x.isArray(k))return k.map(J=>T(J,G));if(x.isObject(k)){if("@preserve"in k)return k["@preserve"][0];if(a.isValue(k))return k;if(a.isList(k))return k["@list"]=T(k["@list"],G),k;if("@id"in k){const J=k["@id"];if(G.link.hasOwnProperty(J)){const X=G.link[J].indexOf(k);if(-1!==X)return G.link[J][X];G.link[J].push(k)}else G.link[J]=[k]}for(const J in k)"@id"===J&&G.bnodesToClear.includes(k[J])?delete k["@id"]:k[J]=T(k[J],G)}return k}function P(k,G,J){x.isObject(k)?l.addValue(k,G,J,{propertyIsArray:!0}):k.push(J)}function Q(k,G,J,X){if(!("@id"in J))return!1;const U=k.subjects[J["@id"]];return U&&f(k,U,G,X)}function I(k,G){const J=G["@value"],X=G["@type"],U=G["@language"],K=k["@value"]?x.isArray(k["@value"])?k["@value"]:[k["@value"]]:[],ie=k["@type"]?x.isArray(k["@type"])?k["@type"]:[k["@type"]]:[],ce=k["@language"]?x.isArray(k["@language"])?k["@language"]:[k["@language"]]:[];return 0===K.length&&0===ie.length&&0===ce.length||!(!K.includes(J)&&!x.isEmptyObject(K[0]))&&!!(!X&&0===ie.length||ie.includes(X)||X&&x.isEmptyObject(ie[0]))&&!!(!U&&0===ce.length||ce.includes(U)||U&&x.isEmptyObject(ce[0]))}ne.exports=u,u.frameMergedOrDefault=(k,G,J)=>{const X={options:J,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},U=new l.IdentifierIssuer("_:b");n(k,X.graphMap,"@default",U),J.merged&&(X.graphMap["@merged"]=o(X.graphMap),X.graph="@merged"),X.subjects=X.graphMap[X.graph];const K=[];return u.frame(X,Object.keys(X.subjects).sort(),G,K),J.pruneBlankNodeIdentifiers&&(J.bnodesToClear=Object.keys(X.bnodeMap).filter(ie=>1===X.bnodeMap[ie].length)),// remove @preserve from results
J.link={},T(K,J)},u.frame=(k,G,J,X,U=null)=>{h(J),J=J[0];const K=k.options,ie={embed:c(J,K,"embed"),explicit:c(J,K,"explicit"),requireAll:c(J,K,"requireAll")};k.link.hasOwnProperty(k.graph)||(k.link[k.graph]={});const ce=k.link[k.graph],ve=function(Y,M,z,Z){const ae={};for(const de of M){const ue=Y.graphMap[Y.graph][de];f(Y,ue,z,Z)&&(ae[de]=ue)}return ae}(k,G,J,ie),fe=Object.keys(ve).sort();for(const Y of fe){const M=ve[Y];if(null===U?k.uniqueEmbeds={[k.graph]:{}}:k.uniqueEmbeds[k.graph]=k.uniqueEmbeds[k.graph]||{},"@link"===ie.embed&&Y in ce){P(X,U,ce[Y]);continue}const z={"@id":Y};if(0===Y.indexOf("_:")&&l.addValue(k.bnodeMap,Y,z,{propertyIsArray:!0}),ce[Y]=z,("@first"===ie.embed||"@last"===ie.embed)&&k.is11)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:J});if(k.embedded||!k.uniqueEmbeds[k.graph].hasOwnProperty(Y))if(!k.embedded||"@never"!==ie.embed&&!v(M,k.graph,k.subjectStack))if(!k.embedded||"@first"!=ie.embed&&"@once"!=ie.embed||!k.uniqueEmbeds[k.graph].hasOwnProperty(Y)){if("@last"===ie.embed&&Y in k.uniqueEmbeds[k.graph]&&O(k,Y),k.uniqueEmbeds[k.graph][Y]={parent:X,property:U},k.subjectStack.push({subject:M,graph:k.graph}),Y in k.graphMap){let Z=!1,ae=null;"@graph"in J?(ae=J["@graph"][0],Z=!("@merged"===Y||"@default"===Y),x.isObject(ae)||(ae={})):(Z="@merged"!==k.graph,ae={}),Z&&u.frame({...k,graph:Y,embedded:!1},Object.keys(k.graphMap[Y]).sort(),[ae],z,"@graph")}"@included"in J&&u.frame({...k,embedded:!1},G,J["@included"],z,"@included");for(const Z of Object.keys(M).sort())if(N(Z)){if(z[Z]=l.clone(M[Z]),"@type"===Z)for(const ae of M["@type"])0===ae.indexOf("_:")&&l.addValue(k.bnodeMap,ae,z,{propertyIsArray:!0})}else if(!ie.explicit||Z in J)for(const ae of M[Z]){const de=Z in J?J[Z]:d(ie);if(a.isList(ae)){const ue=J[Z]&&J[Z][0]&&J[Z][0]["@list"]?J[Z][0]["@list"]:d(ie),oe={"@list":[]};P(z,Z,oe);const he=ae["@list"];for(const _e of he)a.isSubjectReference(_e)?u.frame({...k,embedded:!0},[_e["@id"]],ue,oe,"@list"):P(oe,"@list",l.clone(_e))}else a.isSubjectReference(ae)?u.frame({...k,embedded:!0},[ae["@id"]],de,z,Z):I(de[0],ae)&&P(z,Z,l.clone(ae))}for(const Z of Object.keys(J).sort()){if("@type"===Z){if(!x.isObject(J[Z][0])||!("@default"in J[Z][0]))continue}else if(N(Z))continue;const ae=J[Z][0]||{};if(!c(ae,K,"omitDefault")&&!(Z in z)){let de="@null";"@default"in ae&&(de=l.clone(ae["@default"])),x.isArray(de)||(de=[de]),z[Z]=[{"@preserve":de}]}}for(const Z of Object.keys(J["@reverse"]||{}).sort()){const ae=J["@reverse"][Z];for(const de of Object.keys(k.subjects))l.getValues(k.subjects[de],Z).some(ue=>ue["@id"]===Y)&&(z["@reverse"]=z["@reverse"]||{},l.addValue(z["@reverse"],Z,[],{propertyIsArray:!0}),u.frame({...k,embedded:!0},[de],ae,z["@reverse"][Z],U))}P(X,U,z),k.subjectStack.pop()}else P(X,U,z);else P(X,U,z)}},u.cleanupNull=(k,G)=>{if(x.isArray(k))return k.map(J=>u.cleanupNull(J,G)).filter(J=>J);if("@null"===k)return null;if(x.isObject(k)){if("@id"in k){const J=k["@id"];if(G.link.hasOwnProperty(J)){const X=G.link[J].indexOf(k);if(-1!==X)return G.link[J][X];G.link[J].push(k)}else G.link[J]=[k]}for(const J in k)k[J]=u.cleanupNull(k[J],G)}return k}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49}],41:[function(D,ne,V){"use strict";const N=D("./JsonLdError"),a=D("./graphTypes"),x=D("./types"),{REGEX_BCP47:l,addValue:e}=D("./util"),{handleEvent:r}=D("./events"),{RDF_LIST:n,RDF_FIRST:o,RDF_REST:u,RDF_NIL:d,RDF_TYPE:v,RDF_JSON_LITERAL:c,XSD_BOOLEAN:h,XSD_DOUBLE:f,XSD_INTEGER:O,XSD_STRING:T}=D("./constants"),P={};function Q(I,k,G,J){if(I.termType.endsWith("Node"))return{"@id":I.value};const X={"@value":I.value};if(I.language)I.language.match(l)||J.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:I.language}},options:J}),X["@language"]=I.language;else{let U=I.datatype.value;if(U||(U=T),U===c){U="@json";try{X["@value"]=JSON.parse(X["@value"])}catch(K){throw new N("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:X["@value"],cause:K})}}if(k){if(U===h)"true"===X["@value"]?X["@value"]=!0:"false"===X["@value"]&&(X["@value"]=!1);else if(x.isNumeric(X["@value"]))if(U===O){const K=parseInt(X["@value"],10);K.toFixed(0)===X["@value"]&&(X["@value"]=K)}else U===f&&(X["@value"]=parseFloat(X["@value"]));[h,O,f,T].includes(U)||(X["@type"]=U)}else if("i18n-datatype"===G&&U.startsWith("https://www.w3.org/ns/i18n#")){const[,K,ie]=U.split(/[#_]/);K.length>0&&(X["@language"]=K,K.match(l)||J.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:K}},options:J})),X["@direction"]=ie}else U!==T&&(X["@type"]=U)}return X}ne.exports=P,P.fromRDF=async(I,k)=>{const{useRdfType:G=!1,useNativeTypes:J=!1,rdfDirection:X=null}=k,U={},K={"@default":U},ie={};if(X){if("compound-literal"===X)throw new N("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:X});if("i18n-datatype"!==X)throw new N("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:X})}for(const fe of I){const Y="DefaultGraph"===fe.graph.termType?"@default":fe.graph.value;Y in K||(K[Y]={}),"@default"===Y||Y in U||(U[Y]={"@id":Y});const M=K[Y],z=fe.subject.value,Z=fe.predicate.value,ae=fe.object;z in M||(M[z]={"@id":z});const de=M[z],ue=ae.termType.endsWith("Node");if(ue&&!(ae.value in M)&&(M[ae.value]={"@id":ae.value}),Z===v&&!G&&ue){e(de,"@type",ae.value,{propertyIsArray:!0});continue}const oe=Q(ae,J,X,k);if(e(de,Z,oe,{propertyIsArray:!0}),ue)if(ae.value===d){const he=M[ae.value];"usages"in he||(he.usages=[]),he.usages.push({node:de,property:Z,value:oe})}else ae.value in ie?ie[ae.value]=!1:ie[ae.value]={node:de,property:Z,value:oe}}for(const fe in K){const Y=K[fe];if(!(d in Y))continue;const M=Y[d];if(M.usages){for(let z of M.usages){let Z=z.node,ae=z.property,de=z.value;const ue=[],oe=[];let he=Object.keys(Z).length;for(;ae===u&&x.isObject(ie[Z["@id"]])&&x.isArray(Z[o])&&1===Z[o].length&&x.isArray(Z[u])&&1===Z[u].length&&(3===he||4===he&&x.isArray(Z["@type"])&&1===Z["@type"].length&&Z["@type"][0]===n)&&(ue.push(Z[o][0]),oe.push(Z["@id"]),z=ie[Z["@id"]],Z=z.node,ae=z.property,de=z.value,he=Object.keys(Z).length,a.isBlankNode(Z)););delete de["@id"],de["@list"]=ue.reverse();for(const _e of oe)delete Y[_e]}delete M.usages}}const ce=[],ve=Object.keys(U).sort();for(const fe of ve){const Y=U[fe];if(fe in K){const M=Y["@graph"]=[],z=K[fe],Z=Object.keys(z).sort();for(const ae of Z){const de=z[ae];a.isSubjectReference(de)||M.push(de)}}a.isSubjectReference(Y)||ce.push(Y)}return ce}},{"./JsonLdError":28,"./constants":34,"./events":37,"./graphTypes":42,"./types":47,"./util":49}],42:[function(D,ne,V){"use strict";const N=D("./types"),a={};ne.exports=a,a.isSubject=x=>!(!N.isObject(x)||"@value"in x||"@set"in x||"@list"in x)&&(Object.keys(x).length>1||!("@id"in x)),a.isSubjectReference=x=>N.isObject(x)&&1===Object.keys(x).length&&"@id"in x,a.isValue=x=>N.isObject(x)&&"@value"in x,a.isList=x=>N.isObject(x)&&"@list"in x,a.isGraph=x=>N.isObject(x)&&"@graph"in x&&1===Object.keys(x).filter(l=>"@id"!==l&&"@index"!==l).length,a.isSimpleGraph=x=>a.isGraph(x)&&!("@id"in x),a.isBlankNode=x=>{if(N.isObject(x)){if("@id"in x){const l=x["@id"];return!N.isString(l)||0===l.indexOf("_:")}return 0===Object.keys(x).length||!("@value"in x||"@set"in x||"@list"in x)}return!1}},{"./types":47}],43:[function(D,ne,V){const N=D("rdf-canonize"),a=D("./platform"),x=D("./util"),l=D("./ContextResolver"),e=x.IdentifierIssuer,r=D("./JsonLdError"),n=D("lru-cache"),o=D("./NQuads"),{expand:u}=D("./expand"),{flatten:d}=D("./flatten"),{fromRDF:v}=D("./fromRdf"),{toRDF:c}=D("./toRdf"),{frameMergedOrDefault:h,cleanupNull:f}=D("./frame"),{isArray:O,isObject:T,isString:P}=D("./types"),{isSubjectReference:Q}=D("./graphTypes"),{expandIri:I,getInitialContext:k,process:G,processingMode:J}=D("./context"),{compact:X,compactIri:U}=D("./compact"),{createNodeMap:K,createMergedNodeMap:ie,mergeNodeMaps:ce}=D("./nodeMap"),{logEventHandler:ve,logWarningEventHandler:fe,safeEventHandler:Y,setDefaultEventHandler:M,setupEventHandler:z,strictEventHandler:Z,unhandledEventHandler:ae}=D("./events"),de=function(oe){const he={},_e=new n({max:100});function Ee($,{documentLoader:m=oe.documentLoader,...L}){if($&&"compactionMap"in $)throw new r('"compactionMap" not supported.',"jsonld.OptionsError");if($&&"expansionMap"in $)throw new r('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:m},L,$,{eventHandler:z({options:$})})}return oe.compact=async function($,m,L){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===m)throw new r("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===$)return null;let q;(L=Ee(L,{base:P($)?$:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new l({sharedCache:_e})})).link&&(L.skipExpansion=!0),L.compactToRelative||delete L.base,q=L.skipExpansion?$:await oe.expand($,L);const re=await oe.processContext(k(L),m,L);let se=await X({activeCtx:re,element:q,options:L});L.compactArrays&&!L.graph&&O(se)?1===se.length?se=se[0]:0===se.length&&(se={}):L.graph&&T(se)&&(se=[se]),T(m)&&"@context"in m&&(m=m["@context"]),m=x.clone(m),O(m)||(m=[m]);const le=m;m=[];for(let Se=0;Se<le.length;++Se)(!T(le[Se])||Object.keys(le[Se]).length>0)&&m.push(le[Se]);const Ae=m.length>0;if(1===m.length&&(m=m[0]),O(se)){const Se=U({activeCtx:re,iri:"@graph",relativeTo:{vocab:!0}}),je=se;se={},Ae&&(se["@context"]=m),se[Se]=je}else if(T(se)&&Ae){const Se=se;se={"@context":m};for(const je in Se)se[je]=Se[je]}return se},oe.expand=async function($,m){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const L={},q=[];if("expandContext"in(m=Ee(m,{keepFreeFloatingNodes:!1,contextResolver:new l({sharedCache:_e})}))){const Ae=x.clone(m.expandContext);T(Ae)&&"@context"in Ae?L.expandContext=Ae:L.expandContext={"@context":Ae},q.push(L.expandContext)}let re;if(P($)){const Ae=await oe.get($,m);re=Ae.documentUrl,L.input=Ae.document,Ae.contextUrl&&(L.remoteContext={"@context":Ae.contextUrl},q.push(L.remoteContext))}else L.input=x.clone($);"base"in m||(m.base=re||"");let se=k(m);for(const Ae of q)se=await G({activeCtx:se,localCtx:Ae,options:m});let le=await u({activeCtx:se,element:L.input,options:m});return T(le)&&"@graph"in le&&1===Object.keys(le).length?le=le["@graph"]:null===le&&(le=[]),O(le)||(le=[le]),le},oe.flatten=async function($,m,L){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");m="function"==typeof m?null:m||null,L=Ee(L,{base:P($)?$:"",contextResolver:new l({sharedCache:_e})});const q=await oe.expand($,L),re=d(q);return null===m?re:(L.graph=!0,L.skipExpansion=!0,await oe.compact(re,m,L))},oe.frame=async function($,m,L){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(L=Ee(L,{base:P($)?$:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new l({sharedCache:_e})}),P(m)){const Oe=await oe.get(m,L);if(m=Oe.document,Oe.contextUrl){let Me=m["@context"];Me?O(Me)?Me.push(Oe.contextUrl):Me=[Me,Oe.contextUrl]:Me=Oe.contextUrl,m["@context"]=Me}}const q=m&&m["@context"]||{},re=await oe.processContext(k(L),q,L);L.hasOwnProperty("omitGraph")||(L.omitGraph=J(re,1.1)),L.hasOwnProperty("pruneBlankNodeIdentifiers")||(L.pruneBlankNodeIdentifiers=J(re,1.1));const se=await oe.expand($,L),le={...L};le.isFrame=!0,le.keepFreeFloatingNodes=!0;const Ae=await oe.expand(m,le),Se=Object.keys(m).map(Oe=>I(re,Oe,{vocab:!0}));le.merged=!Se.includes("@graph"),le.is11=J(re,1.1);const je=h(se,Ae,le);le.graph=!L.omitGraph,le.skipExpansion=!0,le.link={},le.framing=!0;let Ne=await oe.compact(je,q,le);return le.link={},Ne=f(Ne,le),Ne},oe.link=async function($,m,L){const q={};return m&&(q["@context"]=m),q["@embed"]="@link",oe.frame($,q,L)},oe.normalize=oe.canonize=async function($,m){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(m=Ee(m,{base:P($)?$:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new l({sharedCache:_e})}))){if("application/n-quads"!==m.inputFormat&&"application/nquads"!==m.inputFormat)throw new r("Unknown canonicalization input format.","jsonld.CanonizeError");const re=o.parse($);return N.canonize(re,m)}const L={...m};delete L.format,L.produceGeneralizedRdf=!1;const q=await oe.toRDF($,L);return N.canonize(q,m)},oe.fromRDF=async function($,m){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");m=Ee(m,{format:P($)?"application/n-quads":void 0});const{format:L}=m;let{rdfParser:q}=m;if(L){if(q=q||he[L],!q)throw new r("Unknown input format.","jsonld.UnknownFormat",{format:L})}else q=()=>$;const re=await q($);return v(re,m)},oe.toRDF=async function($,m){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let L;L=(m=Ee(m,{base:P($)?$:"",skipExpansion:!1,contextResolver:new l({sharedCache:_e})})).skipExpansion?$:await oe.expand($,m);const q=c(L,m);if(m.format){if("application/n-quads"===m.format||"application/nquads"===m.format)return o.serialize(q);throw new r("Unknown output format.","jsonld.UnknownFormat",{format:m.format})}return q},oe.createNodeMap=async function($,m){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");m=Ee(m,{base:P($)?$:"",contextResolver:new l({sharedCache:_e})});const L=await oe.expand($,m);return ie(L,m)},oe.merge=async function($,m,L){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!O($))throw new TypeError('Could not merge, "docs" must be an array.');m="function"==typeof m?null:m||null,L=Ee(L,{contextResolver:new l({sharedCache:_e})});const q=await Promise.all($.map(Oe=>{const Me={...L};return oe.expand(Oe,Me)}));let re=!0;"mergeNodes"in L&&(re=L.mergeNodes);const se=L.issuer||new e("_:b"),le={"@default":{}};for(let Oe=0;Oe<q.length;++Oe){const Me=x.relabelBlankNodes(q[Oe],{issuer:new e("_:b"+Oe+"-")}),qe=re||0===Oe?le:{"@default":{}};if(K(Me,qe,"@default",se),qe!==le)for(const De in qe){const Qe=qe[De];if(!(De in le)){le[De]=Qe;continue}const He=le[De];for(const Ke in Qe)Ke in He||(He[Ke]=Qe[Ke])}}const Ae=ce(le),Se=[],je=Object.keys(Ae).sort();for(let Oe=0;Oe<je.length;++Oe){const Me=Ae[je[Oe]];Q(Me)||Se.push(Me)}return null===m?Se:(L.graph=!0,L.skipExpansion=!0,await oe.compact(Se,m,L))},Object.defineProperty(oe,"documentLoader",{get:()=>oe._documentLoader,set:$=>oe._documentLoader=$}),oe.documentLoader=async $=>{throw new r("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:$})},oe.get=async function($,m){let L;L="function"==typeof m.documentLoader?m.documentLoader:oe.documentLoader;const q=await L($);try{if(!q.document)throw new r("No remote document found at the given URL.","jsonld.NullRemoteDocument");P(q.document)&&(q.document=JSON.parse(q.document))}catch(re){throw new r("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:re,remoteDoc:q})}return q},oe.processContext=async function($,m,L){return L=Ee(L,{base:"",contextResolver:new l({sharedCache:_e})}),null===m?k(L):(m=x.clone(m),T(m)&&"@context"in m||(m={"@context":m}),G({activeCtx:$,localCtx:m,options:L}))},oe.getContextValue=D("./context").getContextValue,oe.documentLoaders={},oe.useDocumentLoader=function($){if(!($ in oe.documentLoaders))throw new r('Unknown document loader type: "'+$+'"',"jsonld.UnknownDocumentLoader",{type:$});oe.documentLoader=oe.documentLoaders[$].apply(oe,Array.prototype.slice.call(arguments,1))},oe.registerRDFParser=function($,m){he[$]=m},oe.unregisterRDFParser=function($){delete he[$]},oe.registerRDFParser("application/n-quads",o.parse),oe.registerRDFParser("application/nquads",o.parse),oe.url=D("./url"),oe.logEventHandler=ve,oe.logWarningEventHandler=fe,oe.safeEventHandler=Y,oe.setDefaultEventHandler=M,oe.strictEventHandler=Z,oe.unhandledEventHandler=ae,oe.util=x,Object.assign(oe,x),oe.promises=oe,oe.RequestQueue=D("./RequestQueue"),oe.JsonLdProcessor=D("./JsonLdProcessor")(oe),a.setupGlobals(oe),a.setupDocumentLoaders(oe),oe},ue=function(){return de(function(){return ue()})};de(ue),ne.exports=ue},{"./ContextResolver":27,"./JsonLdError":28,"./JsonLdProcessor":29,"./NQuads":30,"./RequestQueue":31,"./compact":33,"./context":35,"./events":37,"./expand":38,"./flatten":39,"./frame":40,"./fromRdf":41,"./graphTypes":42,"./nodeMap":44,"./platform":45,"./toRdf":46,"./types":47,"./url":48,"./util":49,"lru-cache":50,"rdf-canonize":64}],44:[function(D,ne,V){"use strict";const{isKeyword:N}=D("./context"),a=D("./graphTypes"),x=D("./types"),l=D("./util"),e=D("./JsonLdError"),r={};ne.exports=r,r.createMergedNodeMap=(n,o)=>{const u=(o=o||{}).issuer||new l.IdentifierIssuer("_:b"),d={"@default":{}};return r.createNodeMap(n,d,"@default",u),r.mergeNodeMaps(d)},r.createNodeMap=(n,o,u,d,v,c)=>{if(x.isArray(n)){for(const T of n)r.createNodeMap(T,o,u,d,void 0,c);return}if(!x.isObject(n))return void(c&&c.push(n));if(a.isValue(n)){if("@type"in n){let T=n["@type"];0===T.indexOf("_:")&&(n["@type"]=T=d.getId(T))}return void(c&&c.push(n))}if(c&&a.isList(n)){const T=[];return r.createNodeMap(n["@list"],o,u,d,v,T),void c.push({"@list":T})}if("@type"in n){const T=n["@type"];for(const P of T)0===P.indexOf("_:")&&d.getId(P)}x.isUndefined(v)&&(v=a.isBlankNode(n)?d.getId(n["@id"]):n["@id"]),c&&c.push({"@id":v});const h=o[u],f=h[v]=h[v]||{};f["@id"]=v;const O=Object.keys(n).sort();for(let T of O){if("@id"===T)continue;if("@reverse"===T){const Q={"@id":v},I=n["@reverse"];for(const k in I){const G=I[k];for(const J of G){let X=J["@id"];a.isBlankNode(J)&&(X=d.getId(X)),r.createNodeMap(J,o,u,d,X),l.addValue(h[X],k,Q,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===T){v in o||(o[v]={}),r.createNodeMap(n[T],o,v,d);continue}if("@included"===T){r.createNodeMap(n[T],o,u,d);continue}if("@type"!==T&&N(T)){if("@index"===T&&T in f&&(n[T]!==f[T]||n[T]["@id"]!==f[T]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[T]=n[T];continue}const P=n[T];if(0===T.indexOf("_:")&&(T=d.getId(T)),0!==P.length)for(let Q of P)if("@type"===T&&(Q=0===Q.indexOf("_:")?d.getId(Q):Q),a.isSubject(Q)||a.isSubjectReference(Q)){if("@id"in Q&&!Q["@id"])continue;const I=a.isBlankNode(Q)?d.getId(Q["@id"]):Q["@id"];l.addValue(f,T,{"@id":I},{propertyIsArray:!0,allowDuplicate:!1}),r.createNodeMap(Q,o,u,d,I)}else if(a.isValue(Q))l.addValue(f,T,Q,{propertyIsArray:!0,allowDuplicate:!1});else if(a.isList(Q)){const I=[];r.createNodeMap(Q["@list"],o,u,d,v,I),Q={"@list":I},l.addValue(f,T,Q,{propertyIsArray:!0,allowDuplicate:!1})}else r.createNodeMap(Q,o,u,d,v),l.addValue(f,T,Q,{propertyIsArray:!0,allowDuplicate:!1});else l.addValue(f,T,[],{propertyIsArray:!0})}},r.mergeNodeMapGraphs=n=>{const o={};for(const u of Object.keys(n).sort())for(const d of Object.keys(n[u]).sort()){const v=n[u][d];d in o||(o[d]={"@id":d});const c=o[d];for(const h of Object.keys(v).sort())if(N(h)&&"@type"!==h)c[h]=l.clone(v[h]);else for(const f of v[h])l.addValue(c,h,l.clone(f),{propertyIsArray:!0,allowDuplicate:!1})}return o},r.mergeNodeMaps=n=>{const o=n["@default"],u=Object.keys(n).sort();for(const d of u){if("@default"===d)continue;const v=n[d];let c=o[d];c?"@graph"in c||(c["@graph"]=[]):o[d]=c={"@id":d,"@graph":[]};const h=c["@graph"];for(const f of Object.keys(v).sort()){const O=v[f];a.isSubjectReference(O)||h.push(O)}}return o}},{"./JsonLdError":28,"./context":35,"./graphTypes":42,"./types":47,"./util":49}],45:[function(D,ne,V){"use strict";const N=D("./documentLoaders/xhr"),a={};ne.exports=a,a.setupDocumentLoaders=function(x){typeof XMLHttpRequest<"u"&&(x.documentLoaders.xhr=N,x.useDocumentLoader("xhr"))},a.setupGlobals=function(x){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:x.JsonLdProcessor})}},{"./documentLoaders/xhr":36}],46:[function(D,ne,V){"use strict";const{createNodeMap:N}=D("./nodeMap"),{isKeyword:a}=D("./context"),x=D("./graphTypes"),l=D("canonicalize"),e=D("./JsonLdError"),r=D("./types"),n=D("./util"),{handleEvent:o}=D("./events"),{RDF_FIRST:u,RDF_REST:d,RDF_NIL:v,RDF_TYPE:c,RDF_JSON_LITERAL:h,RDF_LANGSTRING:f,XSD_BOOLEAN:O,XSD_DOUBLE:T,XSD_INTEGER:P,XSD_STRING:Q}=D("./constants"),{isAbsolute:I}=D("./url"),k={};function G(X,U,K,ie,ce){const ve=Object.keys(U).sort();for(const fe of ve){const Y=U[fe],M=Object.keys(Y).sort();for(let z of M){const Z=Y[z];if("@type"===z)z=c;else if(a(z))continue;for(const ae of Z){const de={termType:fe.startsWith("_:")?"BlankNode":"NamedNode",value:fe};if(!I(fe)){ce.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:fe}},options:ce});continue}const ue={termType:z.startsWith("_:")?"BlankNode":"NamedNode",value:z};if(!I(z)){ce.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:z}},options:ce});continue}if("BlankNode"===ue.termType&&!ce.produceGeneralizedRdf){ce.eventHandler&&o({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ie.getOldIds().find(he=>ie.getId(he)===z)}},options:ce});continue}const oe=J(ae,ie,X,K,ce.rdfDirection,ce);oe&&X.push({subject:de,predicate:ue,object:oe,graph:K})}}}}function J(X,U,K,ie,ce,ve){const fe={};if(x.isValue(X)){fe.termType="Literal",fe.value=void 0,fe.datatype={termType:"NamedNode"};let Y=X["@value"];const M=X["@type"]||null;if("@json"===M)fe.value=l(Y),fe.datatype.value=h;else if(r.isBoolean(Y))fe.value=Y.toString(),fe.datatype.value=M||O;else if(r.isDouble(Y)||M===T)r.isDouble(Y)||(Y=parseFloat(Y)),fe.value=Y.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),fe.datatype.value=M||T;else if(r.isNumber(Y))fe.value=Y.toFixed(0),fe.datatype.value=M||P;else if("@direction"in X&&"i18n-datatype"===ce){const z=`https://www.w3.org/ns/i18n#${(X["@language"]||"").toLowerCase()}_${X["@direction"]}`;fe.datatype.value=z,fe.value=Y}else{if("@direction"in X&&"compound-literal"===ce)throw new e("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:ce});if("@direction"in X&&ce)throw new e("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:ce});"@language"in X?("@direction"in X&&!ce&&ve.eventHandler&&o({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:fe.value}},options:ve}),fe.value=Y,fe.datatype.value=M||f,fe.language=X["@language"]):("@direction"in X&&!ce&&ve.eventHandler&&o({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:fe.value}},options:ve}),fe.value=Y,fe.datatype.value=M||Q)}}else if(x.isList(X)){const Y=function(M,z,Z,ae,de,ue){const oe={termType:"NamedNode",value:u},he={termType:"NamedNode",value:d},_e={termType:"NamedNode",value:v},Ee=M.pop(),$=Ee?{termType:"BlankNode",value:z.getId()}:_e;let m=$;for(const L of M){const q=J(L,z,Z,ae,de,ue),re={termType:"BlankNode",value:z.getId()};Z.push({subject:m,predicate:oe,object:q,graph:ae}),Z.push({subject:m,predicate:he,object:re,graph:ae}),m=re}if(Ee){const L=J(Ee,z,Z,ae,de,ue);Z.push({subject:m,predicate:oe,object:L,graph:ae}),Z.push({subject:m,predicate:he,object:_e,graph:ae})}return $}(X["@list"],U,K,ie,ce,ve);fe.termType=Y.termType,fe.value=Y.value}else{const Y=r.isObject(X)?X["@id"]:X;fe.termType=Y.startsWith("_:")?"BlankNode":"NamedNode",fe.value=Y}return"NamedNode"!==fe.termType||I(fe.value)?fe:(ve.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:fe.value}},options:ve}),null)}ne.exports=k,k.toRDF=(X,U)=>{const K=new n.IdentifierIssuer("_:b"),ie={"@default":{}};N(X,ie,"@default",K);const ce=[],ve=Object.keys(ie).sort();for(const fe of ve){let Y;if("@default"===fe)Y={termType:"DefaultGraph",value:""};else{if(!I(fe)){U.eventHandler&&o({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:fe}},options:U});continue}Y=fe.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Y.value=fe}G(ce,ie[fe],Y,K,U)}return ce}},{"./JsonLdError":28,"./constants":34,"./context":35,"./events":37,"./graphTypes":42,"./nodeMap":44,"./types":47,"./url":48,"./util":49,canonicalize:9}],47:[function(D,ne,V){"use strict";const N={};ne.exports=N,N.isArray=Array.isArray,N.isBoolean=a=>"boolean"==typeof a||"[object Boolean]"===Object.prototype.toString.call(a),N.isDouble=a=>N.isNumber(a)&&(-1!==String(a).indexOf(".")||Math.abs(a)>=1e21),N.isEmptyObject=a=>N.isObject(a)&&0===Object.keys(a).length,N.isNumber=a=>"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a),N.isNumeric=a=>!isNaN(parseFloat(a))&&isFinite(a),N.isObject=a=>"[object Object]"===Object.prototype.toString.call(a),N.isString=a=>"string"==typeof a||"[object String]"===Object.prototype.toString.call(a),N.isUndefined=a=>void 0===a},{}],48:[function(D,ne,V){"use strict";const N=D("./types"),a={};ne.exports=a,a.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},a.parse=(l,e)=>{const r={},n=a.parsers[e||"full"],o=n.regex.exec(l);let u=n.keys.length;for(;u--;)r[n.keys[u]]=void 0===o[u]?null:o[u];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=a.removeDotSegments(r.path),r},a.prependBase=(l,e)=>{if(null===l||a.isAbsolute(e))return e;l&&!N.isString(l)||(l=a.parse(l||""));const r=a.parse(e),n={protocol:l.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=l.authority,""===r.path)n.path=l.path,null!==r.query?n.query=r.query:n.query=l.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{let u=l.path;u=u.substr(0,u.lastIndexOf("/")+1),(u.length>0||l.authority)&&"/"!==u.substr(-1)&&(u+="/"),u+=r.path,n.path=u}n.query=r.query}""!==r.path&&(n.path=a.removeDotSegments(n.path));let o=n.protocol;return null!==n.authority&&(o+="//"+n.authority),o+=n.path,null!==n.query&&(o+="?"+n.query),null!==r.fragment&&(o+="#"+r.fragment),""===o&&(o="./"),o},a.removeBase=(l,e)=>{if(null===l)return e;l&&!N.isString(l)||(l=a.parse(l||""));let r="";if(""!==l.href?r+=(l.protocol||"")+"//"+(l.authority||""):e.indexOf("//")&&(r+="//"),0!==e.indexOf(r))return e;const n=a.parse(e.substr(r.length)),o=l.normalizedPath.split("/"),u=n.normalizedPath.split("/"),d=n.fragment||n.query?0:1;for(;o.length>0&&u.length>d&&o[0]===u[0];)o.shift(),u.shift();let v="";if(o.length>0){o.pop();for(let c=0;c<o.length;++c)v+="../"}return v+=u.join("/"),null!==n.query&&(v+="?"+n.query),null!==n.fragment&&(v+="#"+n.fragment),""===v&&(v="./"),v},a.removeDotSegments=l=>{if(0===l.length)return"";const e=l.split("/"),r=[];for(;e.length>0;){const n=e.shift(),o=0===e.length;"."!==n?".."!==n?r.push(n):(r.pop(),o&&r.push("")):o&&r.push("")}return"/"===l[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const x=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;a.isAbsolute=l=>N.isString(l)&&x.test(l),a.isRelative=l=>N.isString(l)},{"./types":47}],49:[function(D,ne,V){"use strict";const N=D("./graphTypes"),a=D("./types"),x=D("rdf-canonize").IdentifierIssuer,l=D("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,n=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,o_accept="application/ld+json, application/json",u={};function d(v,c){if(a.isArray(c))for(let h=0;h<c.length;++h)c[h]=d(v,c[h]);else if(N.isList(c))c["@list"]=d(v,c["@list"]);else if(a.isObject(c)){N.isBlankNode(c)&&(c["@id"]=v.getId(c["@id"]));const h=Object.keys(c).sort();for(let f=0;f<h.length;++f){const O=h[f];"@id"!==O&&(c[O]=d(v,c[O]))}}return c}ne.exports=u,u.IdentifierIssuer=x,u.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,u.REGEX_KEYWORD=/^@[a-zA-Z]+$/,u.clone=function(v){if(v&&"object"==typeof v){let c;if(a.isArray(v)){c=[];for(let h=0;h<v.length;++h)c[h]=u.clone(v[h])}else if(v instanceof Map){c=new Map;for(const[h,f]of v)c.set(h,u.clone(f))}else if(v instanceof Set){c=new Set;for(const h of v)c.add(u.clone(h))}else if(a.isObject(v)){c={};for(const h in v)c[h]=u.clone(v[h])}else c=v.toString();return c}return v},u.asArray=function(v){return Array.isArray(v)?v:[v]},u.buildHeaders=(v={})=>{if(Object.keys(v).some(c=>"accept"===c.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+o_accept+'" is supported.');return Object.assign({Accept:o_accept},v)},u.parseLinkHeader=v=>{const c={},h=v.match(e);for(let f=0;f<h.length;++f){let O=h[f].match(r);if(!O)continue;const T={target:O[1]},P=O[2];for(;O=n.exec(P);)T[O[1]]=void 0===O[2]?O[3]:O[2];const Q=T.rel||"";Array.isArray(c[Q])?c[Q].push(T):c.hasOwnProperty(Q)?c[Q]=[c[Q],T]:c[Q]=T}return c},u.validateTypeValue=(v,c)=>{if(!(a.isString(v)||a.isArray(v)&&v.every(h=>a.isString(h)))){if(c&&a.isObject(v))switch(Object.keys(v).length){case 0:return;case 1:if("@default"in v&&u.asArray(v["@default"]).every(h=>a.isString(h)))return}throw new l('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:v})}},u.hasProperty=(v,c)=>{if(v.hasOwnProperty(c)){const h=v[c];return!a.isArray(h)||h.length>0}return!1},u.hasValue=(v,c,h)=>{if(u.hasProperty(v,c)){let f=v[c];const O=N.isList(f);if(a.isArray(f)||O){O&&(f=f["@list"]);for(let T=0;T<f.length;++T)if(u.compareValues(h,f[T]))return!0}else if(!a.isArray(h))return u.compareValues(h,f)}return!1},u.addValue=(v,c,h,f)=>{if("propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1),"valueIsArray"in f||(f.valueIsArray=!1),"allowDuplicate"in f||(f.allowDuplicate=!0),"prependValue"in f||(f.prependValue=!1),f.valueIsArray)v[c]=h;else if(a.isArray(h)){0===h.length&&f.propertyIsArray&&!v.hasOwnProperty(c)&&(v[c]=[]),f.prependValue&&(h=h.concat(v[c]),v[c]=[]);for(let O=0;O<h.length;++O)u.addValue(v,c,h[O],f)}else if(v.hasOwnProperty(c)){const O=!f.allowDuplicate&&u.hasValue(v,c,h);a.isArray(v[c])||O&&!f.propertyIsArray||(v[c]=[v[c]]),O||(f.prependValue?v[c].unshift(h):v[c].push(h))}else v[c]=f.propertyIsArray?[h]:h},u.getValues=(v,c)=>[].concat(v[c]||[]),u.removeProperty=(v,c)=>{delete v[c]},u.removeValue=(v,c,h,f)=>{"propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1);const O=u.getValues(v,c).filter(T=>!u.compareValues(T,h));0===O.length?u.removeProperty(v,c):1!==O.length||f.propertyIsArray?v[c]=O:v[c]=O[0]},u.relabelBlankNodes=(v,c)=>d((c=c||{}).issuer||new x("_:b"),v),u.compareValues=(v,c)=>v===c||!(!N.isValue(v)||!N.isValue(c)||v["@value"]!==c["@value"]||v["@type"]!==c["@type"]||v["@language"]!==c["@language"]||v["@index"]!==c["@index"])||!!(a.isObject(v)&&"@id"in v&&a.isObject(c)&&"@id"in c)&&v["@id"]===c["@id"],u.compareShortestLeast=(v,c)=>v.length<c.length?-1:c.length<v.length?1:v===c?0:v<c?-1:1},{"./JsonLdError":28,"./graphTypes":42,"./types":47,"rdf-canonize":64}],50:[function(D,ne,V){"use strict";const N=D("yallist"),a=Symbol("max"),x=Symbol("length"),l=Symbol("lengthCalculator"),e=Symbol("allowStale"),r=Symbol("maxAge"),n=Symbol("dispose"),o=Symbol("noDisposeOnSet"),u=Symbol("lruList"),d=Symbol("cache"),v=Symbol("updateAgeOnGet"),c=()=>1,h=(I,k,G)=>{const J=I[d].get(k);if(J){const X=J.value;if(f(I,X)){if(T(I,J),!I[e])return}else G&&(I[v]&&(J.value.now=Date.now()),I[u].unshiftNode(J));return X.value}},f=(I,k)=>{if(!k||!k.maxAge&&!I[r])return!1;const G=Date.now()-k.now;return k.maxAge?G>k.maxAge:I[r]&&G>I[r]},O=I=>{if(I[x]>I[a])for(let k=I[u].tail;I[x]>I[a]&&null!==k;){const G=k.prev;T(I,k),k=G}},T=(I,k)=>{if(k){const G=k.value;I[n]&&I[n](G.key,G.value),I[x]-=G.length,I[d].delete(G.key),I[u].removeNode(k)}};class P{constructor(k,G,J,X,U){this.key=k,this.value=G,this.length=J,this.now=X,this.maxAge=U||0}}const Q=(I,k,G,J)=>{let X=G.value;f(I,X)&&(T(I,G),I[e]||(X=void 0)),X&&k.call(J,X.value,X.key,I)};ne.exports=class{constructor(I){if("number"==typeof I&&(I={max:I}),I||(I={}),I.max&&("number"!=typeof I.max||I.max<0))throw new TypeError("max must be a non-negative number");this[a]=I.max||1/0;const k=I.length||c;if(this[l]="function"!=typeof k?c:k,this[e]=I.stale||!1,I.maxAge&&"number"!=typeof I.maxAge)throw new TypeError("maxAge must be a number");this[r]=I.maxAge||0,this[n]=I.dispose,this[o]=I.noDisposeOnSet||!1,this[v]=I.updateAgeOnGet||!1,this.reset()}set max(I){if("number"!=typeof I||I<0)throw new TypeError("max must be a non-negative number");this[a]=I||1/0,O(this)}get max(){return this[a]}set allowStale(I){this[e]=!!I}get allowStale(){return this[e]}set maxAge(I){if("number"!=typeof I)throw new TypeError("maxAge must be a non-negative number");this[r]=I,O(this)}get maxAge(){return this[r]}set lengthCalculator(I){"function"!=typeof I&&(I=c),I!==this[l]&&(this[l]=I,this[x]=0,this[u].forEach(k=>{k.length=this[l](k.value,k.key),this[x]+=k.length})),O(this)}get lengthCalculator(){return this[l]}get length(){return this[x]}get itemCount(){return this[u].length}rforEach(I,k){k=k||this;for(let G=this[u].tail;null!==G;){const J=G.prev;Q(this,I,G,k),G=J}}forEach(I,k){k=k||this;for(let G=this[u].head;null!==G;){const J=G.next;Q(this,I,G,k),G=J}}keys(){return this[u].toArray().map(I=>I.key)}values(){return this[u].toArray().map(I=>I.value)}reset(){this[n]&&this[u]&&this[u].length&&this[u].forEach(I=>this[n](I.key,I.value)),this[d]=new Map,this[u]=new N,this[x]=0}dump(){return this[u].map(I=>!f(this,I)&&{k:I.key,v:I.value,e:I.now+(I.maxAge||0)}).toArray().filter(I=>I)}dumpLru(){return this[u]}set(I,k,G){if((G=G||this[r])&&"number"!=typeof G)throw new TypeError("maxAge must be a number");const J=G?Date.now():0,X=this[l](k,I);if(this[d].has(I)){if(X>this[a])return T(this,this[d].get(I)),!1;const K=this[d].get(I).value;return this[n]&&(this[o]||this[n](I,K.value)),K.now=J,K.maxAge=G,K.value=k,this[x]+=X-K.length,K.length=X,this.get(I),O(this),!0}const U=new P(I,k,X,J,G);return U.length>this[a]?(this[n]&&this[n](I,k),!1):(this[x]+=U.length,this[u].unshift(U),this[d].set(I,this[u].head),O(this),!0)}has(I){if(!this[d].has(I))return!1;const k=this[d].get(I).value;return!f(this,k)}get(I){return h(this,I,!0)}peek(I){return h(this,I,!1)}pop(){const I=this[u].tail;return I?(T(this,I),I.value):null}del(I){T(this,this[d].get(I))}load(I){this.reset();const k=Date.now();for(let G=I.length-1;G>=0;G--){const J=I[G],X=J.e||0;if(0===X)this.set(J.k,J.v);else{const U=X-k;U>0&&this.set(J.k,J.v,U)}}}prune(){this[d].forEach((I,k)=>h(this,k,!1))}}},{yallist:121}],51:[function(D,ne,V){var N=D;D=function(){},V=ne.exports={Lexer:D("./lib/N3Lexer"),Parser:D("./lib/N3Parser"),Writer:D("./lib/N3Writer"),Store:D("./lib/N3Store"),StreamParser:D("./lib/N3StreamParser"),StreamWriter:D("./lib/N3StreamWriter"),Util:D("./lib/N3Util")},Object.keys(V).forEach(function(a){Object.defineProperty(V,a,{configurable:!0,enumerable:!0,get:function(){return delete V[a],V[a]=N("./lib/N3"+a)}})})},{"./lib/N3Lexer":52,"./lib/N3Parser":53,"./lib/N3Store":54,"./lib/N3StreamParser":55,"./lib/N3StreamWriter":56,"./lib/N3Util":57,"./lib/N3Writer":58}],52:[function(D,ne,V){(function(N){(function(){var a=String.fromCharCode,x="function"==typeof N?N:function(o){setTimeout(o,0)},l=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},r=/[\x00-\x20<>\\"\{\}\|\^\`]/;function n(o){if(!(this instanceof n))return new n(o);if((o=o||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var u=this;this._tokenize=this.tokenize,this.tokenize=function(d,v){this._tokenize(d,function(c,h){!c&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(h.type)?v&&v(c,h):v&&v(c||u._syntaxError(h.type,v=null))})}}this._n3Mode=!1!==o.n3,this._comments=!!o.comments}n.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(o,u){for(var d=this._input,v=this._comments;;){for(var c,h;c=this._newline.exec(d);)v&&(h=this._comment.exec(c[0]))&&o(null,{line:this._line,type:"comment",value:h[1],prefix:""}),d=d.substr(c[0].length,d.length),this._line++;if((c=this._whitespace.exec(d))&&(d=d.substr(c[0].length,d.length)),this._endOfFile.test(d))return u&&(v&&(h=this._comment.exec(d))&&o(null,{line:this._line,type:"comment",value:h[1],prefix:""}),o(d=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=d;var f,O=this._line,T="",P="",Q="",I=d[0],k=null,G=0,J=!1;switch(I){case"^":if(d.length<3)break;if("^"!==d[1]){this._n3Mode&&(G=1,T="^");break}if(this._previousMarker="^^","<"!==(d=d.substr(2))[0]){J=!0;break}case"<":if(k=this._unescapedIri.exec(d))T="IRI",P=k[1];else if(k=this._iri.exec(d)){if(null===(f=this._unescape(k[1]))||r.test(f))return U(this);T="IRI",P=f}else this._n3Mode&&d.length>1&&"="===d[1]&&(T="inverse",G=2,P="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((k=this._blank.exec(d))||u&&(k=this._blank.exec(d+" ")))&&(T="blank",Q="_",P=k[1]);break;case'"':case"'":if(k=this._unescapedString.exec(d))T="literal",P=k[0];else if(k=this._singleQuotedString.exec(d)){if(null===(f=this._unescape(k[0])))return U(this);T="literal",P=f.replace(/^'|'$/g,'"')}else if(k=this._tripleQuotedString.exec(d)){if(f=k[1]||k[2],this._line+=f.split(/\r\n|\r|\n/).length-1,null===(f=this._unescape(f)))return U(this);T="literal",P=f.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(k=this._variable.exec(d))&&(T="var",P=k[0]);break;case"@":"literal"===this._previousMarker&&(k=this._langcode.exec(d))?(T="langcode",P=k[1]):(k=this._keyword.exec(d))&&(T=k[0]);break;case".":if(1===d.length?u:d[1]<"0"||d[1]>"9"){T=".",G=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(k=this._number.exec(d)||u&&(k=this._number.exec(d+" ")))&&(T="literal",P='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(k[1]?"double":/^[+\-]?\d+$/.test(k[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(k=this._sparqlKeyword.exec(d))?T=k[0].toUpperCase():J=!0;break;case"f":case"t":(k=this._boolean.exec(d))?(T="literal",P='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):J=!0;break;case"a":(k=this._shortPredicates.exec(d))?(T="abbreviation",P="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):J=!0;break;case"=":this._n3Mode&&d.length>1&&(T="abbreviation",">"!==d[1]?(G=1,P="http://www.w3.org/2002/07/owl#sameAs"):(G=2,P="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":G=1,T=I;break;default:J=!0}if(J&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(k=this._prefix.exec(d))?((k=this._prefixed.exec(d))||u&&(k=this._prefixed.exec(d+" ")))&&(T="prefixed",Q=k[1]||"",P=this._unescape(k[2])):(T="prefix",P=k[1]||"")),"^^"===this._previousMarker)switch(T){case"prefixed":T="type";break;case"IRI":T="typeIRI";break;default:T=""}if(!T)return u||!/^'''|^"""/.test(d)&&/\n|\r/.test(d)?U(this):this._input=d;var X={line:O,type:T,value:P,prefix:Q};o(null,X),this.previousToken=X,this._previousMarker=T,d=d.substr(G||k[0].length,d.length)}function U(K){o(K._syntaxError(/^\S*/.exec(d)[0]))}},_unescape:function(o){try{return o.replace(l,function(u,d,v,c){var h;if(d){if(h=parseInt(d,16),isNaN(h))throw new Error;return a(h)}if(v){if(h=parseInt(v,16),isNaN(h))throw new Error;return h<=65535?a(h):a(55296+(h-=65536)/1024,56320+(1023&h))}var f=e[c];if(!f)throw new Error;return f})}catch{return null}},_syntaxError:function(o){this._input=null;var u=new Error('Unexpected "'+o+'" on line '+this._line+".");return u.context={token:void 0,line:this._line,previousToken:this.previousToken},u},tokenize:function(o,u){var d=this;if(this._line=1,"string"==typeof o){if(this._input=o,"function"!=typeof u){var v,c=[];if(this._tokenizeToEnd(function(h,f){h?v=h:c.push(f)},!0),v)throw v;return c}x(function(){d._tokenizeToEnd(u,!0)})}else this._input="","function"==typeof o.setEncoding&&o.setEncoding("utf8"),o.on("data",function(h){null!==d._input&&(d._input+=h,d._tokenizeToEnd(u,!1))}),o.on("end",function(){null!==d._input&&d._tokenizeToEnd(u,!0)}),o.on("error",u)}},ne.exports=n}).call(this)}).call(this,D("timers").setImmediate)},{timers:111}],53:[function(D,ne,V){var N=D("./N3Lexer"),a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",x=a+"nil",l=a+"first",e=a+"rest",r="urn:n3:quantifiers",n=/^[a-z][a-z0-9+.-]*:/i,o=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,u=/(?:^|\/)\.\.?(?:$|[\/#?])/,d=0,v=0;function c(f){if(!(this instanceof c))return new c(f);this._contextStack=[],this._graph=null,f=f||{},this._setBase(f.documentIRI);var O="string"==typeof f.format?f.format.match(/\w*$/)[0].toLowerCase():"",T="turtle"===O,P="trig"===O,Q=/triple/.test(O),I=/quad/.test(O),k=this._n3Mode=/n3/.test(O),G=Q||I;(this._supportsNamedGraphs=!(T||k))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(T||P||Q||k),G&&(this._base="",this._resolveIRI=function(J){return this._error("Disallowed relative IRI",J),this._callback=h,this._subject=null}),this._blankNodePrefix="string"!=typeof f.blankNodePrefix?"":"_:"+f.blankNodePrefix.replace(/^_:/,""),this._lexer=f.lexer||new N({lineMode:G,n3:k}),this._explicitQuantifiers=!!f.explicitQuantifiers}function h(){}c._resetBlankNodeIds=function(){d=v=0},c.prototype={_setBase:function(f){if(f){var O=f.indexOf("#");O>=0&&(f=f.substr(0,O)),this._base=f,this._basePath=f.indexOf("/")<0?f:f.replace(/[^\/?]*(?:\?.*)?$/,""),f=f.match(o),this._baseRoot=f[0],this._baseScheme=f[1]}else this._base=null},_saveContext:function(f,O,T,P,Q){var I=this._n3Mode;this._contextStack.push({subject:T,predicate:P,object:Q,graph:O,type:f,inverse:!!I&&this._inversePredicate,blankPrefix:I?this._prefixes._:"",quantified:I?this._quantified:null}),I&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var f=this._contextStack.pop(),O=this._n3Mode;this._subject=f.subject,this._predicate=f.predicate,this._object=f.object,this._graph=f.graph,O&&(this._inversePredicate=f.inverse,this._prefixes._=f.blankPrefix,this._quantified=f.quantified)},_readInTopContext:function(f){switch(f.type){case"eof":return null!==this._graph?this._error("Unclosed graph",f):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(f)}},_readEntity:function(f,O){var T;switch(f.type){case"IRI":case"typeIRI":T=null===this._base||n.test(f.value)?f.value:this._resolveIRI(f);break;case"type":case"blank":case"prefixed":var P=this._prefixes[f.prefix];if(void 0===P)return this._error('Undefined prefix "'+f.prefix+':"',f);T=P+f.value;break;case"var":return f.value;default:return this._error("Expected entity but got "+f.type,f)}return!O&&this._n3Mode&&T in this._quantified&&(T=this._quantified[T]),T},_readSubject:function(f){switch(this._predicate=null,f.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+v++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,x,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+v++,null,null),this._readSubject):this._error("Unexpected graph",f);case"}":return this._readPunctuation(f);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',f);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',f);default:if(void 0===(this._subject=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(f){var O=f.type;switch(O){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=f.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+O,f):(this._subject=null,"]"===O?this._readBlankNodeTail(f):this._readPunctuation(f));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",f);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",f);default:if(void 0===(this._predicate=this._readEntity(f)))return}return this._readObject},_readObject:function(f){switch(f.type){case"literal":return this._object=f.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+v++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,x),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+v++),this._readSubject):this._error("Unexpected graph",f);default:if(void 0===(this._object=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(f){return"{"===f.type?this._readGraph(f):this._readPredicate(f)},_readGraph:function(f){return"{"!==f.type?this._error("Expected graph but got "+f.type,f):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(f){return"]"===f.type?(this._subject=null,this._readBlankNodeTail(f)):(this._predicate=null,this._readPredicate(f))},_readBlankNodeTail:function(f){if("]"!==f.type)return this._readBlankNodePunctuation(f);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var O=null===this._predicate;return this._restoreContext(),null===this._object?O?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(f){return"."!==f.type||this._contextStack.length?this._readPredicate(f):(this._subject=null,this._readPunctuation(f))},_readListItem:function(f){var O=null,T=null,P=this._subject,Q=this._contextStack,I=Q[Q.length-1],k=this._readListItem,G=!0;switch(f.type){case"[":this._saveContext("blank",this._graph,T="_:b"+v++,l,this._subject=O="_:b"+v++),k=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,T="_:b"+v++,l,x),this._subject=null;break;case")":if(this._restoreContext(),0!==Q.length&&"list"===Q[Q.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(k=this._readPredicate,this._subject===x)return k}else if(k=this._getContextEndReader(),this._object===x)return k;T=x;break;case"literal":O=f.value,G=!1,k=this._readListItemDataTypeOrLang;break;default:if(void 0===(O=this._readEntity(f)))return}if(null===T&&(this._subject=T="_:b"+v++),null===P?null===I.predicate?I.subject=T:I.object=T:this._triple(P,e,T,this._graph),null!==O){if(this._n3Mode&&("IRI"===f.type||"prefixed"===f.type))return this._saveContext("item",this._graph,T,l,O),this._subject=O,this._predicate=null,this._getPathReader(this._readListItem);G?this._triple(T,l,O,this._graph):this._object=O}return k},_readDataTypeOrLang:function(f){return this._completeLiteral(f,!1)},_readListItemDataTypeOrLang:function(f){return this._completeLiteral(f,!0)},_completeLiteral:function(f,O){var T=!1;switch(f.type){case"type":case"typeIRI":var P=this._readEntity(f);if(void 0===P)return;T=!0,this._object+="^^"+P;break;case"langcode":T=!0,this._object+="@"+f.value.toLowerCase()}return O&&this._triple(this._subject,l,this._object,this._graph),T?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(f))},_readFormulaTail:function(f){return"}"!==f.type?this._readPunctuation(f):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(f){var O,T=this._subject,P=this._graph,Q=this._inversePredicate;switch(f.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",f);if(this._n3Mode)return this._readFormulaTail(f);this._graph=null;case".":this._subject=null,O=this._contextStack.length?this._readSubject:this._readInTopContext,Q&&(this._inversePredicate=!1);break;case";":O=this._readPredicate;break;case",":O=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(P=this._readEntity(f))){O=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',f)}if(null!==T){var I=this._predicate,k=this._object;Q?this._triple(k,I,T,P):this._triple(T,I,k,P)}return O},_readBlankNodePunctuation:function(f){var O;switch(f.type){case";":O=this._readPredicate;break;case",":O=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',f)}return this._triple(this._subject,this._predicate,this._object,this._graph),O},_readQuadPunctuation:function(f){return"."!==f.type?this._error("Expected dot to follow quad",f):this._readInTopContext},_readPrefix:function(f){return"prefix"!==f.type?this._error("Expected prefix to follow @prefix",f):(this._prefix=f.value,this._readPrefixIRI)},_readPrefixIRI:function(f){if("IRI"!==f.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',f);var O=this._readEntity(f);return this._prefixes[this._prefix]=O,this._prefixCallback(this._prefix,O),this._readDeclarationPunctuation},_readBaseIRI:function(f){return"IRI"!==f.type?this._error("Expected IRI to follow base declaration",f):(this._setBase(null===this._base||n.test(f.value)?f.value:this._resolveIRI(f)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(f){switch(f.type){case"IRI":case"blank":case"prefixed":return this._readSubject(f),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",f)}},_readNamedGraphBlankLabel:function(f){return"]"!==f.type?this._error("Invalid graph label",f):(this._subject="_:b"+v++,this._readGraph)},_readDeclarationPunctuation:function(f){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(f)):"."!==f.type?this._error("Expected declaration to end with a dot",f):this._readInTopContext},_readQuantifierList:function(f){var O;switch(f.type){case"IRI":case"prefixed":if(void 0!==(O=this._readEntity(f,!0)))break;default:return this._error("Unexpected "+f.type,f)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+v++,r):this._triple(this._subject,e,this._subject="_:b"+v++,r),this._triple(this._subject,l,O,r)):this._quantified[O]=this._quantifiedPrefix+v++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(f){return","===f.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,x,r),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(f))},_getPathReader:function(f){return this._afterPath=f,this._readPath},_readPath:function(f){switch(f.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var O=this._contextStack,T=O.length&&O[O.length-1];if(T&&"item"===T.type){var P=this._subject;this._restoreContext(),this._triple(this._subject,l,P,this._graph)}return this._afterPath(f)}},_readForwardPath:function(f){var O,T,P="_:b"+v++;if(void 0!==(T=this._readEntity(f)))return null===this._predicate?(O=this._subject,this._subject=P):(O=this._object,this._object=P),this._triple(O,T,P,this._graph),this._readPath},_readBackwardPath:function(f){var O,T,P="_:b"+v++;if(void 0!==(O=this._readEntity(f)))return null===this._predicate?(T=this._subject,this._subject=P):(T=this._object,this._object=P),this._triple(P,O,T,this._graph),this._readPath},_getContextEndReader:function(){var f=this._contextStack;if(!f.length)return this._readPunctuation;switch(f[f.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(f,O,T,P){this._callback(null,{subject:f,predicate:O,object:T,graph:P||""})},_error:function(f,O){var T=new Error(f+" on line "+O.line+".");T.context={token:O,line:O.line,previousToken:this._lexer.previousToken},this._callback(T),this._callback=h},_resolveIRI:function(f){var O=f.value;switch(O[0]){case void 0:return this._base;case"#":return this._base+O;case"?":return this._base.replace(/(?:\?.*)?$/,O);case"/":return("/"===O[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(O);default:return this._removeDotSegments(this._basePath+O)}},_removeDotSegments:function(f){if(!u.test(f))return f;for(var O="",T=f.length,P=-1,Q=-1,I=0,k="/";P<T;){switch(k){case":":if(Q<0&&"/"===f[++P]&&"/"===f[++P])for(;(Q=P+1)<T&&"/"!==f[Q];)P=Q;break;case"?":case"#":P=T;break;case"/":if("."===f[P+1])switch(k=f[1+ ++P]){case"/":O+=f.substring(I,P-1),I=P+1;break;case void 0:case"?":case"#":return O+f.substring(I,P)+f.substr(P+1);case".":if(void 0===(k=f[1+ ++P])||"/"===k||"?"===k||"#"===k){if((I=(O+=f.substring(I,P-2)).lastIndexOf("/"))>=Q&&(O=O.substr(0,I)),"/"!==k)return O+"/"+f.substr(P+1);I=P+1}}}k=f[++P]}return O+f.substring(I)},parse:function(f,O,T){var P=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+d+++"_",this._prefixCallback=T||h,this._inversePredicate=!1,this._quantified=Object.create(null),!O){var Q,I=[];if(this._callback=function(k,G){k?Q=k:G&&I.push(G)},this._lexer.tokenize(f).every(function(k){return P._readCallback=P._readCallback(k)}),Q)throw Q;return I}this._callback=O,this._lexer.tokenize(f,function(k,G){null!==k?(P._callback(k),P._callback=h):P._readCallback&&(P._readCallback=P._readCallback(G))})}},ne.exports=c},{"./N3Lexer":52}],54:[function(D,ne,V){var N=D("./N3Util").expandPrefixedName;function a(l,e){if(!(this instanceof a))return new a(l,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!l||l[0]||(e=l,l=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),l&&this.addTriples(l)}function x(l){return"string"==typeof l||l instanceof String}a.prototype={get size(){var l=this._size;if(null!==l)return l;l=0;var e,r,n=this._graphs;for(var o in n)for(var u in e=n[o].subjects)for(var d in r=e[u])l+=Object.keys(r[d]).length;return this._size=l},_addToIndex:function(l,e,r,n){var o=l[e]||(l[e]={}),u=o[r]||(o[r]={}),d=n in u;return d||(u[n]=null),!d},_removeFromIndex:function(l,e,r,n){var o,u=l[e],d=u[r];for(o in delete d[n],d)return;for(o in delete u[r],u)return;delete l[e]},_findInIndex:function(l,e,r,n,o,u,d,v,c,h){var f,O,T,P=!e+!r+!n>1?Object.keys(this._ids):this._entities;for(var Q in e&&((f=l,l={})[e]=f[e]),l){var I=P[Q];if(O=l[Q])for(var k in r&&((f=O,O={})[r]=f[r]),O){var G=P[k];if(T=O[k])for(var J=(n?n in T?[n]:[]:Object.keys(T)),X=J.length-1;X>=0;X--){var U={subject:"",predicate:"",object:"",graph:v};if(U[o]=I,U[u]=G,U[d]=P[J[X]],h)h.push(U);else if(c(U))return!0}}}return h},_loop:function(l,e){for(var r in l)e(r)},_loopByKey0:function(l,e,r){var n,o;if(n=l[e])for(o in n)r(o)},_loopByKey1:function(l,e,r){var n;for(n in l)l[n][e]&&r(n)},_loopBy2Keys:function(l,e,r,n){var o,u,d;if((o=l[e])&&(u=o[r]))for(d in u)n(d)},_countInIndex:function(l,e,r,n){var o,u,d,v=0;for(var c in e&&((o=l,l={})[e]=o[e]),l)if(u=l[c])for(var h in r&&((o=u,u={})[r]=o[r]),u)(d=u[h])&&(n?n in d&&v++:v+=Object.keys(d).length);return v},_getGraphs:function(l){if(!x(l))return this._graphs;var e={};return e[l]=this._graphs[l],e},_uniqueEntities:function(l){var e=Object.create(null),r=this._entities;return function(n){n in e||(e[n]=!0,l(r[n]))}},addTriple:function(l,e,r,n){e||(n=l.graph,r=l.object,e=l.predicate,l=l.subject),n=n||"";var o=this._graphs[n];o||(o=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(o));var u=this._ids,d=this._entities;l=u[l]||(u[d[++this._id]=l]=this._id),e=u[e]||(u[d[++this._id]=e]=this._id),r=u[r]||(u[d[++this._id]=r]=this._id);var v=this._addToIndex(o.subjects,l,e,r);return this._addToIndex(o.predicates,e,r,l),this._addToIndex(o.objects,r,l,e),this._size=null,v},addTriples:function(l){for(var e=l.length-1;e>=0;e--)this.addTriple(l[e])},addPrefix:function(l,e){this._prefixes[l]=e},addPrefixes:function(l){for(var e in l)this.addPrefix(e,l[e])},removeTriple:function(l,e,r,n){e||(n=l.graph,r=l.object,e=l.predicate,l=l.subject),n=n||"";var o,u,d,v=this._ids,c=this._graphs;if(!((l=v[l])&&(e=v[e])&&(r=v[r])&&(o=c[n])&&(u=o.subjects[l])&&(d=u[e])&&r in d))return!1;for(l in this._removeFromIndex(o.subjects,l,e,r),this._removeFromIndex(o.predicates,e,r,l),this._removeFromIndex(o.objects,r,l,e),null!==this._size&&this._size--,o.subjects)return!0;return delete c[n],!0},removeTriples:function(l){for(var e=l.length-1;e>=0;e--)this.removeTriple(l[e])},getTriples:function(l,e,r,n){var o=this._prefixes;return this.getTriplesByIRI(N(l,o),N(e,o),N(r,o),N(n,o))},getTriplesByIRI:function(l,e,r,n){var o,u,d,v,c=[],h=this._getGraphs(n),f=this._ids;if(x(l)&&!(u=f[l])||x(e)&&!(d=f[e])||x(r)&&!(v=f[r]))return c;for(var O in h)(o=h[O])&&(u?v?this._findInIndex(o.objects,v,u,d,"object","subject","predicate",O,null,c):this._findInIndex(o.subjects,u,d,null,"subject","predicate","object",O,null,c):d?this._findInIndex(o.predicates,d,v,null,"predicate","object","subject",O,null,c):v?this._findInIndex(o.objects,v,null,null,"object","subject","predicate",O,null,c):this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",O,null,c));return c},countTriples:function(l,e,r,n){var o=this._prefixes;return this.countTriplesByIRI(N(l,o),N(e,o),N(r,o),N(n,o))},countTriplesByIRI:function(l,e,r,n){var o,u,d,v,c=0,h=this._getGraphs(n),f=this._ids;if(x(l)&&!(u=f[l])||x(e)&&!(d=f[e])||x(r)&&!(v=f[r]))return 0;for(var O in h)(o=h[O])&&(c+=l?r?this._countInIndex(o.objects,v,u,d):this._countInIndex(o.subjects,u,d,v):e?this._countInIndex(o.predicates,d,v,u):this._countInIndex(o.objects,v,u,d));return c},forEach:function(l,e,r,n,o){var u=this._prefixes;this.forEachByIRI(l,N(e,u),N(r,u),N(n,u),N(o,u))},forEachByIRI:function(l,e,r,n,o){this.someByIRI(function(u){return l(u),!1},e,r,n,o)},every:function(l,e,r,n,o){var u=this._prefixes;return this.everyByIRI(l,N(e,u),N(r,u),N(n,u),N(o,u))},everyByIRI:function(l,e,r,n,o){var u=!1,d=!this.someByIRI(function(v){return u=!0,!l(v)},e,r,n,o);return u&&d},some:function(l,e,r,n,o){var u=this._prefixes;return this.someByIRI(l,N(e,u),N(r,u),N(n,u),N(o,u))},someByIRI:function(l,e,r,n,o){var u,d,v,c,h=this._getGraphs(o),f=this._ids;if(x(e)&&!(d=f[e])||x(r)&&!(v=f[r])||x(n)&&!(c=f[n]))return!1;for(var O in h)if(u=h[O])if(d){if(c){if(this._findInIndex(u.objects,c,d,v,"object","subject","predicate",O,l,null))return!0}else if(this._findInIndex(u.subjects,d,v,null,"subject","predicate","object",O,l,null))return!0}else if(v){if(this._findInIndex(u.predicates,v,c,null,"predicate","object","subject",O,l,null))return!0}else if(c){if(this._findInIndex(u.objects,c,null,null,"object","subject","predicate",O,l,null))return!0}else if(this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",O,l,null))return!0;return!1},getSubjects:function(l,e,r){var n=this._prefixes;return this.getSubjectsByIRI(N(l,n),N(e,n),N(r,n))},getSubjectsByIRI:function(l,e,r){var n=[];return this.forSubjectsByIRI(function(o){n.push(o)},l,e,r),n},forSubjects:function(l,e,r,n){var o=this._prefixes;this.forSubjectsByIRI(l,N(e,o),N(r,o),N(n,o))},forSubjectsByIRI:function(l,e,r,n){var o,u,d,v=this._ids,c=this._getGraphs(n);if(l=this._uniqueEntities(l),!(x(e)&&!(u=v[e])||x(r)&&!(d=v[r])))for(n in c)(o=c[n])&&(u?d?this._loopBy2Keys(o.predicates,u,d,l):this._loopByKey1(o.subjects,u,l):d?this._loopByKey0(o.objects,d,l):this._loop(o.subjects,l))},getPredicates:function(l,e,r){var n=this._prefixes;return this.getPredicatesByIRI(N(l,n),N(e,n),N(r,n))},getPredicatesByIRI:function(l,e,r){var n=[];return this.forPredicatesByIRI(function(o){n.push(o)},l,e,r),n},forPredicates:function(l,e,r,n){var o=this._prefixes;this.forPredicatesByIRI(l,N(e,o),N(r,o),N(n,o))},forPredicatesByIRI:function(l,e,r,n){var o,u,d,v=this._ids,c=this._getGraphs(n);if(l=this._uniqueEntities(l),!(x(e)&&!(u=v[e])||x(r)&&!(d=v[r])))for(n in c)(o=c[n])&&(u?d?this._loopBy2Keys(o.objects,d,u,l):this._loopByKey0(o.subjects,u,l):d?this._loopByKey1(o.predicates,d,l):this._loop(o.predicates,l))},getObjects:function(l,e,r){var n=this._prefixes;return this.getObjectsByIRI(N(l,n),N(e,n),N(r,n))},getObjectsByIRI:function(l,e,r){var n=[];return this.forObjectsByIRI(function(o){n.push(o)},l,e,r),n},forObjects:function(l,e,r,n){var o=this._prefixes;this.forObjectsByIRI(l,N(e,o),N(r,o),N(n,o))},forObjectsByIRI:function(l,e,r,n){var o,u,d,v=this._ids,c=this._getGraphs(n);if(l=this._uniqueEntities(l),!(x(e)&&!(u=v[e])||x(r)&&!(d=v[r])))for(n in c)(o=c[n])&&(u?d?this._loopBy2Keys(o.subjects,u,d,l):this._loopByKey1(o.objects,u,l):d?this._loopByKey0(o.predicates,d,l):this._loop(o.objects,l))},getGraphs:function(l,e,r){var n=this._prefixes;return this.getGraphsByIRI(N(l,n),N(e,n),N(r,n))},getGraphsByIRI:function(l,e,r){var n=[];return this.forGraphsByIRI(function(o){n.push(o)},l,e,r),n},forGraphs:function(l,e,r,n){var o=this._prefixes;this.forGraphsByIRI(l,N(e,o),N(r,o),N(n,o))},forGraphsByIRI:function(l,e,r,n){for(var o in this._graphs)this.someByIRI(function(u){return l(u.graph),!0},e,r,n,o)},createBlankNode:function(l){var e,r;if(l)for(e=l="_:"+l,r=1;this._ids[e];)e=l+r++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},ne.exports=a},{"./N3Util":57}],55:[function(D,ne,V){var N=D("stream").Transform,a=D("util"),x=D("./N3Parser.js");function l(e){if(!(this instanceof l))return new l(e);N.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var r,n,o=this;new x(e).parse({on:function(u,d){switch(u){case"data":r=d;break;case"end":n=d}}},function(u,d){u&&o.emit("error",u)||d&&o.push(d)},function(u,d){o.emit("prefix",u,d)}),this._transform=function(u,d,v){r(u),v()},this._flush=function(u){n(),u()}}a.inherits(l,N),ne.exports=l},{"./N3Parser.js":53,stream:76,util:117}],56:[function(D,ne,V){var N=D("stream").Transform,a=D("util"),x=D("./N3Writer.js");function l(e){if(!(this instanceof l))return new l(e);N.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var r=this,n=new x({write:function(o,u,d){r.push(o),d&&d()},end:function(o){r.push(null),o&&o()}},e);this._transform=function(o,u,d){n.addTriple(o,d)},this._flush=function(o){n.end(o)}}a.inherits(l,N),ne.exports=l},{"./N3Writer.js":58,stream:76,util:117}],57:[function(D,ne,V){var N="http://www.w3.org/2001/XMLSchema#",a=N+"string",x=N+"integer",l=N+"double",e=N+"boolean",r={isIRI:function(n){if("string"!=typeof n)return!1;if(0===n.length)return!0;var o=n[0];return'"'!==o&&"_"!==o},isLiteral:function(n){return"string"==typeof n&&'"'===n[0]},isBlank:function(n){return"string"==typeof n&&"_:"===n.substr(0,2)},isDefaultGraph:function(n){return!n},inDefaultGraph:function(n){return!n.graph},getLiteralValue:function(n){var o=/^"([^]*)"/.exec(n);if(!o)throw new Error(n+" is not a literal");return o[1]},getLiteralType:function(n){var o=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(n);if(!o)throw new Error(n+" is not a literal");return o[1]||(o[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":a)},getLiteralLanguage:function(n){var o=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(n);if(!o)throw new Error(n+" is not a literal");return o[1]?o[1].toLowerCase():""},isPrefixedName:function(n){return"string"==typeof n&&/^[^:\/"']*:[^:\/"']+$/.test(n)},expandPrefixedName:function(n,o){var u,d,v,c=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(n);return c&&(d=o[u=c[1]],v=c.index),void 0===d?n:0===v?d+n.substr(u.length+1):n.substr(0,v+3)+d+n.substr(v+u.length+4)},createIRI:function(n){return n&&'"'===n[0]?r.getLiteralValue(n):n},createLiteral:function(n,o){if(!o)switch(typeof n){case"boolean":o=e;break;case"number":isFinite(n)?o=n%1==0?x:l:(o=l,isNaN(n)||(n=n>0?"INF":"-INF"));break;default:return'"'+n+'"'}return'"'+n+(/^[a-z]+(-[a-z0-9]+)*$/i.test(o)?'"@'+o.toLowerCase():'"^^'+o)},prefix:function(n){return r.prefixes({"":n})("")},prefixes:function(n){var o=Object.create(null);for(var u in n)d(u,n[u]);function d(v,c){if(c||!(v in o)){var h=Object.create(null);c=c||"",o[v]=function(f){return h[f]||(h[f]=c+f)}}return o[v]}return d}};ne.exports=r},{}],58:[function(D,ne,V){var N=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,a=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,x=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,l={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(n,o){if(!(this instanceof e))return new e(n,o);if(n&&"function"!=typeof n.write&&(o=n,n=null),o=o||{},n)this._outputStream=n,this._endStream=void 0===o.end||!!o.end;else{var u="";this._outputStream={write:function(d,v,c){u+=d,c&&c()},end:function(d){d&&d(null,u)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(o.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),o.prefixes&&this.addPrefixes(o.prefixes))}function r(n){var o=l[n];return void 0===o&&(1===n.length?(o=n.charCodeAt(0).toString(16),o="\\u0000".substr(0,6-o.length)+o):(o=(1024*(n.charCodeAt(0)-55296)+n.charCodeAt(1)+9216).toString(16),o="\\U00000000".substr(0,10-o.length)+o)),o}e.prototype={_write:function(n,o){this._outputStream.write(n,"utf8",o)},_writeTriple:function(n,o,u,d,v){try{this._graph!==d&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(d?this._encodeIriOrBlankNode(d)+" {\n":"")),this._subject=null,this._graph="["!==d[0]?d:"]"),this._subject===n?this._predicate===o?this._write(", "+this._encodeObject(u),v):this._write(";\n    "+this._encodePredicate(this._predicate=o)+" "+this._encodeObject(u),v):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=n)+" "+this._encodePredicate(this._predicate=o)+" "+this._encodeObject(u),v)}catch(c){v&&v(c)}},_writeTripleLine:function(n,o,u,d,v){delete this._prefixMatch;try{this._write(this.tripleToString(n,o,u,d),v)}catch(c){v&&v(c)}},tripleToString:function(n,o,u,d){return this._encodeIriOrBlankNode(n)+" "+this._encodeIriOrBlankNode(o)+" "+this._encodeObject(u)+(d?" "+this._encodeIriOrBlankNode(d)+".\n":".\n")},triplesToString:function(n){return n.map(function(o){return this.tripleToString(o.subject,o.predicate,o.object,o.graph)},this).join("")},_encodeIriOrBlankNode:function(n){var o=n[0];if("["===o||"("===o||"_"===o&&":"===n[1])return n;a.test(n)&&(n=n.replace(x,r));var u=this._prefixRegex.exec(n);return u?u[1]?this._prefixIRIs[u[1]]+u[2]:n:"<"+n+">"},_encodeLiteral:function(n,o,u){return a.test(n)&&(n=n.replace(x,r)),u?'"'+n+'"@'+u:o?'"'+n+'"^^'+this._encodeIriOrBlankNode(o):'"'+n+'"'},_encodeSubject:function(n){if('"'===n[0])throw new Error("A literal as subject is not allowed: "+n);return"["===n[0]&&(this._subject="]"),this._encodeIriOrBlankNode(n)},_encodePredicate:function(n){if('"'===n[0])throw new Error("A literal as predicate is not allowed: "+n);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===n?"a":this._encodeIriOrBlankNode(n)},_encodeObject:function(n){if('"'!==n[0])return this._encodeIriOrBlankNode(n);var o=N.exec(n);if(!o)throw new Error("Invalid literal: "+n);return this._encodeLiteral(o[1],o[2],o[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(n,o,u,d,v){void 0===u?this._writeTriple(n.subject,n.predicate,n.object,n.graph||"",o):"string"!=typeof d?this._writeTriple(n,o,u,"",d):this._writeTriple(n,o,u,d,v)},addTriples:function(n){for(var o=0;o<n.length;o++)this.addTriple(n[o])},addPrefix:function(n,o,u){var d={};d[n]=o,this.addPrefixes(d,u)},addPrefixes:function(n,o){var u=this._prefixIRIs,d=!1;for(var v in n){var c=n[v];/[#\/]$/.test(c)&&u[c]!==(v+=":")&&(d=!0,u[c]=v,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+v+" <"+c+">.\n"))}if(d){var h="",f="";for(var O in u)h+=h?"|"+O:O,f+=(f?"|":"")+u[O];h=h.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+f+")[^/]*$|^("+h+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(d?"\n":"",o)},blank:function(n,o){var u,d,v=n;switch(void 0===n?v=[]:"string"==typeof n?v=[{predicate:n,object:o}]:"length"in n||(v=[n]),d=v.length){case 0:return"[]";case 1:if("["!==(u=v[0]).object[0])return"[ "+this._encodePredicate(u.predicate)+" "+this._encodeObject(u.object)+" ]";default:for(var c="[",h=0;h<d;h++)(u=v[h]).predicate===n?c+=", "+this._encodeObject(u.object):(c+=(h?";\n  ":"\n  ")+this._encodePredicate(u.predicate)+" "+this._encodeObject(u.object),n=u.predicate);return c+"\n]"}},list:function(n){for(var o=n&&n.length||0,u=new Array(o),d=0;d<o;d++)u[d]=this._encodeObject(n[d]);return"("+u.join(" ")+")"},_prefixRegex:/$0^/,end:function(n){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var o=n&&function(u,d){o=null,n(u,d)};if(this._endStream)try{return this._outputStream.end(o)}catch{}o&&o()}},ne.exports=e},{}],59:[function(D,ne,V){var N,a,x=ne.exports={};function l(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(O){if(N===setTimeout)return setTimeout(O,0);if((N===l||!N)&&setTimeout)return N=setTimeout,setTimeout(O,0);try{return N(O,0)}catch{try{return N.call(null,O,0)}catch{return N.call(this,O,0)}}}!function(){try{N="function"==typeof setTimeout?setTimeout:l}catch{N=l}try{a="function"==typeof clearTimeout?clearTimeout:e}catch{a=e}}();var n,o=[],u=!1,d=-1;function v(){u&&n&&(u=!1,n.length?o=n.concat(o):d=-1,o.length&&c())}function c(){if(!u){var O=r(v);u=!0;for(var T=o.length;T;){for(n=o,o=[];++d<T;)n&&n[d].run();d=-1,T=o.length}n=null,u=!1,function(P){if(a===clearTimeout)return clearTimeout(P);if((a===e||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(P);try{a(P)}catch{try{return a.call(null,P)}catch{return a.call(this,P)}}}(O)}}function h(O,T){this.fun=O,this.array=T}function f(){}x.nextTick=function(O){var T=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)T[P-1]=arguments[P];o.push(new h(O,T)),1!==o.length||u||r(c)},h.prototype.run=function(){this.fun.apply(null,this.array)},x.title="browser",x.browser=!0,x.env={},x.argv=[],x.version="",x.versions={},x.on=f,x.addListener=f,x.once=f,x.off=f,x.removeListener=f,x.removeAllListeners=f,x.emit=f,x.prependListener=f,x.prependOnceListener=f,x.listeners=function(O){return[]},x.binding=function(O){throw new Error("process.binding is not supported")},x.cwd=function(){return"/"},x.chdir=function(O){throw new Error("process.chdir is not supported")},x.umask=function(){return 0}},{}],60:[function(D,ne,V){(function(N){(function(){!function(a){var x="object"==typeof V&&V&&!V.nodeType&&V,l="object"==typeof ne&&ne&&!ne.nodeType&&ne,e="object"==typeof N&&N;e.global!==e&&e.window!==e&&e.self!==e||(a=e);var r,n,o=2147483647,u=36,d=/^xn--/,v=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,O=String.fromCharCode;function T(K){throw new RangeError(h[K])}function P(K,ie){for(var ce=K.length,ve=[];ce--;)ve[ce]=ie(K[ce]);return ve}function Q(K,ie){var ce=K.split("@"),ve="";return ce.length>1&&(ve=ce[0]+"@",K=ce[1]),ve+P((K=K.replace(c,".")).split("."),ie).join(".")}function I(K){for(var ie,ce,ve=[],fe=0,Y=K.length;fe<Y;)(ie=K.charCodeAt(fe++))>=55296&&ie<=56319&&fe<Y?56320==(64512&(ce=K.charCodeAt(fe++)))?ve.push(((1023&ie)<<10)+(1023&ce)+65536):(ve.push(ie),fe--):ve.push(ie);return ve}function k(K){return P(K,function(ie){var ce="";return ie>65535&&(ce+=O((ie-=65536)>>>10&1023|55296),ie=56320|1023&ie),ce+O(ie)}).join("")}function G(K,ie){return K+22+75*(K<26)-((0!=ie)<<5)}function J(K,ie,ce){var ve=0;for(K=ce?f(K/700):K>>1,K+=f(K/ie);K>455;ve+=u)K=f(K/35);return f(ve+36*K/(K+38))}function X(K){var ie,ce,ve,fe,Y,M,z,Z,ae,de,ue,oe=[],he=K.length,_e=0,Ee=128,$=72;for((ce=K.lastIndexOf("-"))<0&&(ce=0),ve=0;ve<ce;++ve)K.charCodeAt(ve)>=128&&T("not-basic"),oe.push(K.charCodeAt(ve));for(fe=ce>0?ce+1:0;fe<he;){for(Y=_e,M=1,z=u;fe>=he&&T("invalid-input"),((Z=(ue=K.charCodeAt(fe++))-48<10?ue-22:ue-65<26?ue-65:ue-97<26?ue-97:u)>=u||Z>f((o-_e)/M))&&T("overflow"),_e+=Z*M,!(Z<(ae=z<=$?1:z>=$+26?26:z-$));z+=u)M>f(o/(de=u-ae))&&T("overflow"),M*=de;$=J(_e-Y,ie=oe.length+1,0==Y),f(_e/ie)>o-Ee&&T("overflow"),Ee+=f(_e/ie),_e%=ie,oe.splice(_e++,0,Ee)}return k(oe)}function U(K){var ie,ce,ve,fe,Y,M,z,Z,ae,de,ue,oe,he,_e,Ee,$=[];for(oe=(K=I(K)).length,ie=128,ce=0,Y=72,M=0;M<oe;++M)(ue=K[M])<128&&$.push(O(ue));for(ve=fe=$.length,fe&&$.push("-");ve<oe;){for(z=o,M=0;M<oe;++M)(ue=K[M])>=ie&&ue<z&&(z=ue);for(z-ie>f((o-ce)/(he=ve+1))&&T("overflow"),ce+=(z-ie)*he,ie=z,M=0;M<oe;++M)if((ue=K[M])<ie&&++ce>o&&T("overflow"),ue==ie){for(Z=ce,ae=u;!(Z<(de=ae<=Y?1:ae>=Y+26?26:ae-Y));ae+=u)Ee=Z-de,_e=u-de,$.push(O(G(de+Ee%_e,0))),Z=f(Ee/_e);$.push(O(G(Z,0))),Y=J(ce,he,ve==fe),ce=0,++ve}++ce,++ie}return $.join("")}if(r={version:"1.4.1",ucs2:{decode:I,encode:k},decode:X,encode:U,toASCII:function(K){return Q(K,function(ie){return v.test(ie)?"xn--"+U(ie):ie})},toUnicode:function(K){return Q(K,function(ie){return d.test(ie)?X(ie.slice(4).toLowerCase()):ie})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return r});else if(x&&l)if(ne.exports==x)l.exports=r;else for(n in r)r.hasOwnProperty(n)&&(x[n]=r[n]);else a.punycode=r}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(D,ne,V){"use strict";function N(x,l){return Object.prototype.hasOwnProperty.call(x,l)}ne.exports=function(x,l,e,r){l=l||"&",e=e||"=";var n={};if("string"!=typeof x||0===x.length)return n;var o=/\+/g;x=x.split(l);var u=1e3;r&&"number"==typeof r.maxKeys&&(u=r.maxKeys);var d=x.length;u>0&&d>u&&(d=u);for(var v=0;v<d;++v){var c,h,f,O,T=x[v].replace(o,"%20"),P=T.indexOf(e);P>=0?(c=T.substr(0,P),h=T.substr(P+1)):(c=T,h=""),f=decodeURIComponent(c),O=decodeURIComponent(h),N(n,f)?a(n[f])?n[f].push(O):n[f]=[n[f],O]:n[f]=O}return n};var a=Array.isArray||function(x){return"[object Array]"===Object.prototype.toString.call(x)}},{}],62:[function(D,ne,V){"use strict";var N=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};ne.exports=function(e,r,n,o){return r=r||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?x(l(e),function(u){var d=encodeURIComponent(N(u))+n;return a(e[u])?x(e[u],function(v){return d+encodeURIComponent(N(v))}).join(r):d+encodeURIComponent(N(e[u]))}).join(r):o?encodeURIComponent(N(o))+n+encodeURIComponent(N(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function x(e,r){if(e.map)return e.map(r);for(var n=[],o=0;o<e.length;o++)n.push(r(e[o],o));return n}var l=Object.keys||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(n);return r}},{}],63:[function(D,ne,V){"use strict";V.decode=V.parse=D("./decode"),V.encode=V.stringify=D("./encode")},{"./decode":61,"./encode":62}],64:[function(D,ne,V){ne.exports=D("./lib")},{"./lib":73}],65:[function(D,ne,V){"use strict";ne.exports=class va{constructor(a,x=new Map,l=0){this.prefix=a,this._existing=x,this.counter=l}clone(){const{prefix:a,_existing:x,counter:l}=this;return new va(a,new Map(x),l)}getId(a){const x=a&&this._existing.get(a);if(x)return x;const l=this.prefix+this.counter;return this.counter++,a&&this._existing.set(a,l),l}hasId(a){return this._existing.has(a)}getOldIds(){return[...this._existing.keys()]}}},{}],66:[function(D,ne,V){"use strict";D("setimmediate");const N=self.crypto||self.msCrypto;ne.exports=class{constructor(a){if(!N||!N.subtle)throw new Error("crypto.subtle not found.");if("sha256"===a)this.algorithm={name:"SHA-256"};else{if("sha1"!==a)throw new Error(`Unsupported algorithm "${a}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(a){this._content+=a}async digest(){const a=(new TextEncoder).encode(this._content),x=new Uint8Array(await N.subtle.digest(this.algorithm,a));let l="";for(let e=0;e<x.length;++e)l+=x[e].toString(16).padStart(2,"0");return l}}},{setimmediate:75}],67:[function(D,ne,V){"use strict";const N="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",a="http://www.w3.org/2001/XMLSchema#string",x="NamedNode",l="BlankNode",e="Literal",r="DefaultGraph",n={};function o(v,c){return v.subject.termType===c.subject.termType&&v.object.termType===c.object.termType&&v.subject.value===c.subject.value&&v.predicate.value===c.predicate.value&&v.object.value===c.object.value&&(v.object.termType!==e||v.object.datatype.termType===c.object.datatype.termType&&v.object.language===c.object.language&&v.object.datatype.value===c.object.datatype.value)}(()=>{const v="(?:<([^:]+:[^>]*)>)",c="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",h=c+"0-9-\xb7\u0300-\u036f\u203f-\u2040",f="(_:(?:["+c+"0-9])(?:(?:["+h+".])*(?:["+h+"]))?)",O="[ \\t]+",T="[ \\t]*",P="(?:"+v+"|"+f+")"+O,Q=v+O,I="(?:"+v+"|"+f+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+v+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+T,k="(?:\\.|(?:(?:"+v+"|"+f+")"+T+"\\.))";n.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,n.empty=new RegExp("^"+T+"$"),n.quad=new RegExp("^"+T+P+Q+I+k+T+"$")})(),ne.exports=class Hr{static parse(c){const h=[],f={},O=c.split(n.eoln);let T=0;for(const P of O){if(T++,n.empty.test(P))continue;const Q=P.match(n.quad);if(null===Q)throw new Error("N-Quads parse error on line "+T+".");const I={subject:null,predicate:null,object:null,graph:null};if(void 0!==Q[1]?I.subject={termType:x,value:Q[1]}:I.subject={termType:l,value:Q[2]},I.predicate={termType:x,value:Q[3]},void 0!==Q[4]?I.object={termType:x,value:Q[4]}:void 0!==Q[5]?I.object={termType:l,value:Q[5]}:(I.object={termType:e,value:void 0,datatype:{termType:x}},void 0!==Q[7]?I.object.datatype.value=Q[7]:void 0!==Q[8]?(I.object.datatype.value=N,I.object.language=Q[8]):I.object.datatype.value=a,I.object.value=Q[6].replace(d,function(k,G,J,X){if(G)switch(G){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(J)return String.fromCharCode(parseInt(J,16));if(X)throw new Error("Unsupported U escape")})),void 0!==Q[9]?I.graph={termType:x,value:Q[9]}:void 0!==Q[10]?I.graph={termType:l,value:Q[10]}:I.graph={termType:r,value:""},I.graph.value in f){let k=!0;const G=f[I.graph.value];for(const J of G)if(o(J,I)){k=!1;break}k&&(G.push(I),h.push(I))}else f[I.graph.value]=[I],h.push(I)}return h}static serialize(c){Array.isArray(c)||(c=Hr.legacyDatasetToQuads(c));const h=[];for(const f of c)h.push(Hr.serializeQuad(f));return h.sort().join("")}static serializeQuadComponents(c,h,f,O){let T="";return c.termType===x?T+=`<${c.value}>`:T+=`${c.value}`,T+=` <${h.value}> `,f.termType===x?T+=`<${f.value}>`:f.termType===l?T+=f.value:(T+=`"${P=f.value,P.replace(u,function(Q){switch(Q){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,f.datatype.value===N?f.language&&(T+=`@${f.language}`):f.datatype.value!==a&&(T+=`^^<${f.datatype.value}>`)),O.termType===x?T+=` <${O.value}>`:O.termType===l&&(T+=` ${O.value}`),T+=" .\n",T;var P}static serializeQuad(c){return Hr.serializeQuadComponents(c.subject,c.predicate,c.object,c.graph)}static legacyDatasetToQuads(c){const h=[],f={"blank node":l,IRI:x,literal:e};for(const O in c)c[O].forEach(T=>{const P={};for(const Q in T){const I=T[Q],k={termType:f[I.type],value:I.value};k.termType===e&&(k.datatype={termType:x},"datatype"in I&&(k.datatype.value=I.datatype),"language"in I?("datatype"in I||(k.datatype.value=N),k.language=I.language):"datatype"in I||(k.datatype.value=a)),P[Q]=k}P.graph="@default"===O?{termType:r,value:""}:{termType:O.startsWith("_:")?l:x,value:O},h.push(P)});return h}};const u=/["\\\n\r]/g,d=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],68:[function(D,ne,V){"use strict";ne.exports=class{constructor(N){this.current=N.sort(),this.done=!1,this.dir=new Map;for(let a=0;a<N.length;++a)this.dir.set(N[a],!0)}hasNext(){return!this.done}next(){const{current:N,dir:a}=this,x=N.slice();let l=null,e=0;const r=N.length;for(let n=0;n<r;++n){const o=N[n],u=a.get(o);(null===l||o>l)&&(u&&n>0&&o>N[n-1]||!u&&n<r-1&&o>N[n+1])&&(l=o,e=n)}if(null===l)this.done=!0;else{const n=a.get(l)?e-1:e+1;N[e]=N[n],N[n]=l;for(const o of N)o>l&&a.set(o,!a.get(o))}return x}}},{}],69:[function(D,ne,V){(function(N){(function(){"use strict";const a=D("./IdentifierIssuer"),x=D("./MessageDigest"),l=D("./Permuter"),e=D("./NQuads");function r(n,o){return n.hash<o.hash?-1:n.hash>o.hash?1:0}ne.exports=class{constructor({createMessageDigest:n=(()=>new x("sha256")),canonicalIdMap:o=new Map,maxDeepIterations:u=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new a("_:c14n",o),this.createMessageDigest=n,this.maxDeepIterations=u,this.quads=null,this.deepIterations=null}async main(n){this.deepIterations=new Map,this.quads=n;for(const f of n)this._addBlankNodeQuadInfo({quad:f,component:f.subject}),this._addBlankNodeQuadInfo({quad:f,component:f.object}),this._addBlankNodeQuadInfo({quad:f,component:f.graph});const o=new Map,u=[...this.blankNodeInfo.keys()];let d=0;for(const f of u)++d%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:f,hashToBlankNodes:o});const v=[...o.keys()].sort(),c=[];for(const f of v){const O=o.get(f);if(O.length>1){c.push(O);continue}const T=O[0];this.canonicalIssuer.getId(T)}for(const f of c){const O=[];for(const T of f){if(this.canonicalIssuer.hasId(T))continue;const P=new a("_:b");P.getId(T);const Q=await this.hashNDegreeQuads(T,P);O.push(Q)}O.sort(r);for(const T of O){const P=T.issuer.getOldIds();for(const Q of P)this.canonicalIssuer.getId(Q)}}const h=[];for(const f of this.quads){const O=e.serializeQuadComponents(this._componentWithCanonicalId(f.subject),f.predicate,this._componentWithCanonicalId(f.object),this._componentWithCanonicalId(f.graph));h.push(O)}return h.sort(),h.join("")}async hashFirstDegreeQuads(n){const o=[],u=this.blankNodeInfo.get(n),d=u.quads;for(const c of d){const h={subject:null,predicate:c.predicate,object:null,graph:null};h.subject=this.modifyFirstDegreeComponent(n,c.subject,"subject"),h.object=this.modifyFirstDegreeComponent(n,c.object,"object"),h.graph=this.modifyFirstDegreeComponent(n,c.graph,"graph"),o.push(e.serializeQuad(h))}o.sort();const v=this.createMessageDigest();for(const c of o)v.update(c);return u.hash=await v.digest(),u.hash}async hashRelatedBlankNode(n,o,u,d){let v;v=this.canonicalIssuer.hasId(n)?this.canonicalIssuer.getId(n):u.hasId(n)?u.getId(n):this.blankNodeInfo.get(n).hash;const c=this.createMessageDigest();return c.update(d),"g"!==d&&c.update(this.getRelatedPredicate(o)),c.update(v),c.digest()}async hashNDegreeQuads(n,o){const u=this.deepIterations.get(n)||0;if(u>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(n,u+1);const d=this.createMessageDigest(),v=await this.createHashToRelated(n,o),c=[...v.keys()].sort();for(const h of c){d.update(h);let f,O="";const T=new l(v.get(h));let P=0;for(;T.hasNext();){const Q=T.next();++P%3==0&&await this._yield();let I=o.clone(),k="";const G=[];let J=!1;for(const X of Q)if(this.canonicalIssuer.hasId(X)?k+=this.canonicalIssuer.getId(X):(I.hasId(X)||G.push(X),k+=I.getId(X)),0!==O.length&&k>O){J=!0;break}if(!J){for(const X of G){const U=await this.hashNDegreeQuads(X,I);if(k+=I.getId(X),k+=`<${U.hash}>`,I=U.issuer,0!==O.length&&k>O){J=!0;break}}J||(0===O.length||k<O)&&(O=k,f=I)}}d.update(O),o=f}return{hash:await d.digest(),issuer:o}}modifyFirstDegreeComponent(n,o){return"BlankNode"!==o.termType?o:{termType:"BlankNode",value:o.value===n?"_:a":"_:z"}}getRelatedPredicate(n){return`<${n.predicate.value}>`}async createHashToRelated(n,o){const u=new Map,d=this.blankNodeInfo.get(n).quads;let v=0;for(const c of d)++v%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:c,component:c.subject,position:"s",id:n,issuer:o,hashToRelated:u}),this._addRelatedBlankNodeHash({quad:c,component:c.object,position:"o",id:n,issuer:o,hashToRelated:u}),this._addRelatedBlankNodeHash({quad:c,component:c.graph,position:"g",id:n,issuer:o,hashToRelated:u})]);return u}async _hashAndTrackBlankNode({id:n,hashToBlankNodes:o}){const u=await this.hashFirstDegreeQuads(n),d=o.get(u);d?d.push(n):o.set(u,[n])}_addBlankNodeQuadInfo({quad:n,component:o}){if("BlankNode"!==o.termType)return;const u=o.value,d=this.blankNodeInfo.get(u);d?d.quads.add(n):this.blankNodeInfo.set(u,{quads:new Set([n]),hash:null})}async _addRelatedBlankNodeHash({quad:n,component:o,position:u,id:d,issuer:v,hashToRelated:c}){if("BlankNode"!==o.termType||o.value===d)return;const h=o.value,f=await this.hashRelatedBlankNode(h,n,v,u),O=c.get(f);O?O.push(h):c.set(f,[h])}_componentWithCanonicalId(n){return"BlankNode"!==n.termType||n.value.startsWith(this.canonicalIssuer.prefix)?n:{termType:"BlankNode",value:this.canonicalIssuer.getId(n.value)}}async _yield(){return new Promise(n=>N(n))}}}).call(this)}).call(this,D("timers").setImmediate)},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68,timers:111}],70:[function(D,ne,V){"use strict";const N=D("./IdentifierIssuer"),a=D("./MessageDigest"),x=D("./Permuter"),l=D("./NQuads");function e(r,n){return r.hash<n.hash?-1:r.hash>n.hash?1:0}ne.exports=class{constructor({createMessageDigest:r=(()=>new a("sha256")),canonicalIdMap:n=new Map,maxDeepIterations:o=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new N("_:c14n",n),this.createMessageDigest=r,this.maxDeepIterations=o,this.quads=null,this.deepIterations=null}main(r){this.deepIterations=new Map,this.quads=r;for(const c of r)this._addBlankNodeQuadInfo({quad:c,component:c.subject}),this._addBlankNodeQuadInfo({quad:c,component:c.object}),this._addBlankNodeQuadInfo({quad:c,component:c.graph});const n=new Map,o=[...this.blankNodeInfo.keys()];for(const c of o)this._hashAndTrackBlankNode({id:c,hashToBlankNodes:n});const u=[...n.keys()].sort(),d=[];for(const c of u){const h=n.get(c);if(h.length>1){d.push(h);continue}const f=h[0];this.canonicalIssuer.getId(f)}for(const c of d){const h=[];for(const f of c){if(this.canonicalIssuer.hasId(f))continue;const O=new N("_:b");O.getId(f);const T=this.hashNDegreeQuads(f,O);h.push(T)}h.sort(e);for(const f of h){const O=f.issuer.getOldIds();for(const T of O)this.canonicalIssuer.getId(T)}}const v=[];for(const c of this.quads){const h=l.serializeQuadComponents(this._componentWithCanonicalId({component:c.subject}),c.predicate,this._componentWithCanonicalId({component:c.object}),this._componentWithCanonicalId({component:c.graph}));v.push(h)}return v.sort(),v.join("")}hashFirstDegreeQuads(r){const n=[],o=this.blankNodeInfo.get(r),u=o.quads;for(const v of u){const c={subject:null,predicate:v.predicate,object:null,graph:null};c.subject=this.modifyFirstDegreeComponent(r,v.subject,"subject"),c.object=this.modifyFirstDegreeComponent(r,v.object,"object"),c.graph=this.modifyFirstDegreeComponent(r,v.graph,"graph"),n.push(l.serializeQuad(c))}n.sort();const d=this.createMessageDigest();for(const v of n)d.update(v);return o.hash=d.digest(),o.hash}hashRelatedBlankNode(r,n,o,u){let d;d=this.canonicalIssuer.hasId(r)?this.canonicalIssuer.getId(r):o.hasId(r)?o.getId(r):this.blankNodeInfo.get(r).hash;const v=this.createMessageDigest();return v.update(u),"g"!==u&&v.update(this.getRelatedPredicate(n)),v.update(d),v.digest()}hashNDegreeQuads(r,n){const o=this.deepIterations.get(r)||0;if(o>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(r,o+1);const u=this.createMessageDigest(),d=this.createHashToRelated(r,n),v=[...d.keys()].sort();for(const c of v){u.update(c);let h,f="";const O=new x(d.get(c));for(;O.hasNext();){const T=O.next();let P=n.clone(),Q="";const I=[];let k=!1;for(const G of T)if(this.canonicalIssuer.hasId(G)?Q+=this.canonicalIssuer.getId(G):(P.hasId(G)||I.push(G),Q+=P.getId(G)),0!==f.length&&Q>f){k=!0;break}if(!k){for(const G of I){const J=this.hashNDegreeQuads(G,P);if(Q+=P.getId(G),Q+=`<${J.hash}>`,P=J.issuer,0!==f.length&&Q>f){k=!0;break}}k||(0===f.length||Q<f)&&(f=Q,h=P)}}u.update(f),n=h}return{hash:u.digest(),issuer:n}}modifyFirstDegreeComponent(r,n){return"BlankNode"!==n.termType?n:{termType:"BlankNode",value:n.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return`<${r.predicate.value}>`}createHashToRelated(r,n){const o=new Map,u=this.blankNodeInfo.get(r).quads;for(const d of u)this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:r,issuer:n,hashToRelated:o}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:r,issuer:n,hashToRelated:o}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:r,issuer:n,hashToRelated:o});return o}_hashAndTrackBlankNode({id:r,hashToBlankNodes:n}){const o=this.hashFirstDegreeQuads(r),u=n.get(o);u?u.push(r):n.set(o,[r])}_addBlankNodeQuadInfo({quad:r,component:n}){if("BlankNode"!==n.termType)return;const o=n.value,u=this.blankNodeInfo.get(o);u?u.quads.add(r):this.blankNodeInfo.set(o,{quads:new Set([r]),hash:null})}_addRelatedBlankNodeHash({quad:r,component:n,position:o,id:u,issuer:d,hashToRelated:v}){if("BlankNode"!==n.termType||n.value===u)return;const c=n.value,h=this.hashRelatedBlankNode(c,r,d,o),f=v.get(h);f?f.push(c):v.set(h,[c])}_componentWithCanonicalId({component:r}){return"BlankNode"!==r.termType||r.value.startsWith(this.canonicalIssuer.prefix)?r:{termType:"BlankNode",value:this.canonicalIssuer.getId(r.value)}}}},{"./IdentifierIssuer":65,"./MessageDigest":66,"./NQuads":67,"./Permuter":68}],71:[function(D,ne,V){"use strict";const N=D("./MessageDigest"),a=D("./URDNA2015");ne.exports=class extends a{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new N("sha1")}modifyFirstDegreeComponent(x,l,e){return"BlankNode"!==l.termType?l:"graph"===e?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:l.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return x.predicate.value}async createHashToRelated(x,l){const e=new Map,r=this.blankNodeInfo.get(x).quads;let n=0;for(const o of r){let u,d;if("BlankNode"===o.subject.termType&&o.subject.value!==x)d=o.subject.value,u="p";else{if("BlankNode"!==o.object.termType||o.object.value===x)continue;d=o.object.value,u="r"}++n%100==0&&await this._yield();const v=await this.hashRelatedBlankNode(d,o,l,u),c=e.get(v);c?c.push(d):e.set(v,[d])}return e}}},{"./MessageDigest":66,"./URDNA2015":69}],72:[function(D,ne,V){"use strict";const N=D("./MessageDigest"),a=D("./URDNA2015Sync");ne.exports=class extends a{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new N("sha1")}modifyFirstDegreeComponent(x,l,e){return"BlankNode"!==l.termType?l:"graph"===e?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:l.value===x?"_:a":"_:z"}}getRelatedPredicate(x){return x.predicate.value}createHashToRelated(x,l){const e=new Map,r=this.blankNodeInfo.get(x).quads;for(const n of r){let o,u;if("BlankNode"===n.subject.termType&&n.subject.value!==x)u=n.subject.value,o="p";else{if("BlankNode"!==n.object.termType||n.object.value===x)continue;u=n.object.value,o="r"}const d=this.hashRelatedBlankNode(u,n,l,o),v=e.get(d);v?v.push(u):e.set(d,[u])}return e}}},{"./MessageDigest":66,"./URDNA2015Sync":70}],73:[function(D,ne,V){"use strict";const N=D("./URDNA2015"),a=D("./URGNA2012"),x=D("./URDNA2015Sync"),l=D("./URGNA2012Sync");let e;try{e=D("rdf-canonize-native")}catch{}function r(n){return Array.isArray(n)?n:V.NQuads.legacyDatasetToQuads(n)}V.NQuads=D("./NQuads"),V.IdentifierIssuer=D("./IdentifierIssuer"),V._rdfCanonizeNative=function(n){return n&&(e=n),e},V.canonize=async function(n,o){const u=r(n);if(o.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(o.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((d,v)=>e.canonize(u,o,(c,h)=>c?v(c):d(h)))}if("URDNA2015"===o.algorithm)return new N(o).main(u);if("URGNA2012"===o.algorithm){if(o.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new a(o).main(u)}throw"algorithm"in o?new Error("Invalid RDF Dataset Canonicalization algorithm: "+o.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},V._canonizeSync=function(n,o){const u=r(n);if(o.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(o.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return e.canonizeSync(u,o)}if("URDNA2015"===o.algorithm)return new x(o).main(u);if("URGNA2012"===o.algorithm){if(o.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new l(o).main(u)}throw"algorithm"in o?new Error("Invalid RDF Dataset Canonicalization algorithm: "+o.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":65,"./NQuads":67,"./URDNA2015":69,"./URDNA2015Sync":70,"./URGNA2012":71,"./URGNA2012Sync":72,"rdf-canonize-native":3}],74:[function(D,ne,V){var N=D("buffer"),a=N.Buffer;function x(e,r){for(var n in e)r[n]=e[n]}function l(e,r,n){return a(e,r,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?ne.exports=N:(x(N,V),V.Buffer=l),l.prototype=Object.create(a.prototype),x(a,l),l.from=function(e,r,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,r,n)},l.alloc=function(e,r,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=a(e);return void 0!==r?"string"==typeof n?o.fill(r,n):o.fill(r):o.fill(0),o},l.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},l.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return N.SlowBuffer(e)}},{buffer:5}],75:[function(D,ne,V){(function(N,a){(function(){!function(x,l){"use strict";if(!x.setImmediate){var e,r,n,o,u,d=1,v={},c=!1,h=x.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(x);f=f&&f.setTimeout?f:x,"[object process]"==={}.toString.call(x.process)?e=function(P){N.nextTick(function(){T(P)})}:function(){if(x.postMessage&&!x.importScripts){var P=!0,Q=x.onmessage;return x.onmessage=function(){P=!1},x.postMessage("","*"),x.onmessage=Q,P}}()?(o="setImmediate$"+Math.random()+"$",u=function(P){P.source===x&&"string"==typeof P.data&&0===P.data.indexOf(o)&&T(+P.data.slice(o.length))},x.addEventListener?x.addEventListener("message",u,!1):x.attachEvent("onmessage",u),e=function(P){x.postMessage(o+P,"*")}):x.MessageChannel?((n=new MessageChannel).port1.onmessage=function(P){T(P.data)},e=function(P){n.port2.postMessage(P)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,e=function(P){var Q=h.createElement("script");Q.onreadystatechange=function(){T(P),Q.onreadystatechange=null,r.removeChild(Q),Q=null},r.appendChild(Q)}):e=function(P){setTimeout(T,0,P)},f.setImmediate=function(P){"function"!=typeof P&&(P=new Function(""+P));for(var Q=new Array(arguments.length-1),I=0;I<Q.length;I++)Q[I]=arguments[I+1];var k={callback:P,args:Q};return v[d]=k,e(d),d++},f.clearImmediate=O}function O(P){delete v[P]}function T(P){if(c)setTimeout(T,0,P);else{var Q=v[P];if(Q){c=!0;try{!function(I){var k=I.callback,G=I.args;switch(G.length){case 0:k();break;case 1:k(G[0]);break;case 2:k(G[0],G[1]);break;case 3:k(G[0],G[1],G[2]);break;default:k.apply(void 0,G)}}(Q)}finally{O(P),c=!1}}}}}(typeof self>"u"?void 0===a?this:a:self)}).call(this)}).call(this,D("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:59}],76:[function(D,ne,V){ne.exports=a;var N=D("events").EventEmitter;function a(){N.call(this)}D("inherits")(a,N),a.Readable=D("readable-stream/lib/_stream_readable.js"),a.Writable=D("readable-stream/lib/_stream_writable.js"),a.Duplex=D("readable-stream/lib/_stream_duplex.js"),a.Transform=D("readable-stream/lib/_stream_transform.js"),a.PassThrough=D("readable-stream/lib/_stream_passthrough.js"),a.finished=D("readable-stream/lib/internal/streams/end-of-stream.js"),a.pipeline=D("readable-stream/lib/internal/streams/pipeline.js"),a.Stream=a,a.prototype.pipe=function(x,l){var e=this;function r(h){x.writable&&!1===x.write(h)&&e.pause&&e.pause()}function n(){e.readable&&e.resume&&e.resume()}e.on("data",r),x.on("drain",n),x._isStdio||l&&!1===l.end||(e.on("end",u),e.on("close",d));var o=!1;function u(){o||(o=!0,x.end())}function d(){o||(o=!0,"function"==typeof x.destroy&&x.destroy())}function v(h){if(c(),0===N.listenerCount(this,"error"))throw h}function c(){e.removeListener("data",r),x.removeListener("drain",n),e.removeListener("end",u),e.removeListener("close",d),e.removeListener("error",v),x.removeListener("error",v),e.removeListener("end",c),e.removeListener("close",c),x.removeListener("close",c)}return e.on("error",v),x.on("error",v),e.on("end",c),e.on("close",c),x.on("close",c),x.emit("pipe",e),x}},{events:11,inherits:22,"readable-stream/lib/_stream_duplex.js":78,"readable-stream/lib/_stream_passthrough.js":79,"readable-stream/lib/_stream_readable.js":80,"readable-stream/lib/_stream_transform.js":81,"readable-stream/lib/_stream_writable.js":82,"readable-stream/lib/internal/streams/end-of-stream.js":86,"readable-stream/lib/internal/streams/pipeline.js":88}],77:[function(D,ne,V){"use strict";var N={};function a(l,e,r){r||(r=Error);var n=function(o){var u,d;function v(c,h,f){return o.call(this,(O=c,T=h,P=f,"string"==typeof e?e:e(O,T,P)))||this;var O,T,P}return d=o,(u=v).prototype=Object.create(d.prototype),u.prototype.constructor=u,u.__proto__=d,v}(r);n.prototype.name=r.name,n.prototype.code=l,N[l]=n}function x(l,e){if(Array.isArray(l)){var r=l.length;return l=l.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(l.slice(0,r-1).join(", "),", or ")+l[r-1]:2===r?"one of ".concat(e," ").concat(l[0]," or ").concat(l[1]):"of ".concat(e," ").concat(l[0])}return"of ".concat(e," ").concat(String(l))}a("ERR_INVALID_OPT_VALUE",function(l,e){return'The value "'+e+'" is invalid for option "'+l+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(l,e,r){var n,o,d,c,h,f;if("string"==typeof e&&(o="not ",e.substr(0,4)===o)?(n="must not be",e=e.replace(/^not /,"")):n="must be",c=l,h=" argument",(void 0===f||f>c.length)&&(f=c.length),c.substring(f-9,f)===h)d="The ".concat(l," ").concat(n," ").concat(x(e,"type"));else{var v=function(c,h,f){return"number"!=typeof f&&(f=0),!(f+1>c.length)&&-1!==c.indexOf(".",f)}(l)?"property":"argument";d='The "'.concat(l,'" ').concat(v," ").concat(n," ").concat(x(e,"type"))}return d+". Received type ".concat(typeof r)},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ne.exports.codes=N},{}],78:[function(D,ne,V){(function(N){(function(){"use strict";var a=Object.keys||function(v){var c=[];for(var h in v)c.push(h);return c};ne.exports=o;var x=D("./_stream_readable"),l=D("./_stream_writable");D("inherits")(o,x);for(var e=a(l.prototype),r=0;r<e.length;r++){var n=e[r];o.prototype[n]||(o.prototype[n]=l.prototype[n])}function o(v){if(!(this instanceof o))return new o(v);x.call(this,v),l.call(this,v),this.allowHalfOpen=!0,v&&(!1===v.readable&&(this.readable=!1),!1===v.writable&&(this.writable=!1),!1===v.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||N.nextTick(d,this)}function d(v){v.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}})}).call(this)}).call(this,D("_process"))},{"./_stream_readable":80,"./_stream_writable":82,_process:59,inherits:22}],79:[function(D,ne,V){"use strict";ne.exports=a;var N=D("./_stream_transform");function a(x){if(!(this instanceof a))return new a(x);N.call(this,x)}D("inherits")(a,N),a.prototype._transform=function(x,l,e){e(null,x)}},{"./_stream_transform":81,inherits:22}],80:[function(D,ne,V){(function(N,a){(function(){"use strict";var x;ne.exports=U,U.ReadableState=X,D("events").EventEmitter;var o,l=function($,m){return $.listeners(m).length},e=D("./internal/streams/stream"),r=D("buffer").Buffer,n=a.Uint8Array||function(){},u=D("util");o=u&&u.debuglog?u.debuglog("stream"):function(){};var d,v,c,h=D("./internal/streams/buffer_list"),f=D("./internal/streams/destroy"),O=D("./internal/streams/state").getHighWaterMark,T=D("../errors").codes,P=T.ERR_INVALID_ARG_TYPE,Q=T.ERR_STREAM_PUSH_AFTER_EOF,I=T.ERR_METHOD_NOT_IMPLEMENTED,k=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;D("inherits")(U,e);var G=f.errorOrDestroy,J=["error","close","destroy","pause","resume"];function X($,m,L){x=x||D("./_stream_duplex"),$=$||{},"boolean"!=typeof L&&(L=m instanceof x),this.objectMode=!!$.objectMode,L&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=O(this,$,"readableHighWaterMark",L),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==$.emitClose,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(d||(d=D("string_decoder/").StringDecoder),this.decoder=new d($.encoding),this.encoding=$.encoding)}function U($){if(x=x||D("./_stream_duplex"),!(this instanceof U))return new U($);var m=this instanceof x;this._readableState=new X($,this,m),this.readable=!0,$&&("function"==typeof $.read&&(this._read=$.read),"function"==typeof $.destroy&&(this._destroy=$.destroy)),e.call(this)}function K($,m,L,q,re){o("readableAddChunk",m);var se,Ae,Se,je,Ne,le=$._readableState;if(null===m)le.reading=!1,function(Ae,Se){if(o("onEofChunk"),!Se.ended){if(Se.decoder){var je=Se.decoder.end();je&&je.length&&(Se.buffer.push(je),Se.length+=Se.objectMode?1:je.length)}Se.ended=!0,Se.sync?fe(Ae):(Se.needReadable=!1,Se.emittedReadable||(Se.emittedReadable=!0,Y(Ae)))}}($,le);else if(re||(Ae=le,Ne=Se=m,r.isBuffer(Ne)||Ne instanceof n||"string"==typeof Se||void 0===Se||Ae.objectMode||(je=new P("chunk",["string","Buffer","Uint8Array"],Se)),se=je),se)G($,se);else if(le.objectMode||m&&m.length>0)if("string"==typeof m||le.objectMode||Object.getPrototypeOf(m)===r.prototype||(m=function(Ae){return r.from(Ae)}(m)),q)le.endEmitted?G($,new k):ie($,le,m,!0);else if(le.ended)G($,new Q);else{if(le.destroyed)return!1;le.reading=!1,le.decoder&&!L?(m=le.decoder.write(m),le.objectMode||0!==m.length?ie($,le,m,!1):M($,le)):ie($,le,m,!1)}else q||(le.reading=!1,M($,le));return!le.ended&&(le.length<le.highWaterMark||0===le.length)}function ie($,m,L,q){m.flowing&&0===m.length&&!m.sync?(m.awaitDrain=0,$.emit("data",L)):(m.length+=m.objectMode?1:L.length,q?m.buffer.unshift(L):m.buffer.push(L),m.needReadable&&fe($)),M($,m)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),U.prototype.destroy=f.destroy,U.prototype._undestroy=f.undestroy,U.prototype._destroy=function($,m){m($)},U.prototype.push=function($,m){var L,q=this._readableState;return q.objectMode?L=!0:"string"==typeof $&&((m=m||q.defaultEncoding)!==q.encoding&&($=r.from($,m),m=""),L=!0),K(this,$,m,!1,L)},U.prototype.unshift=function($){return K(this,$,null,!0,!1)},U.prototype.isPaused=function(){return!1===this._readableState.flowing},U.prototype.setEncoding=function($){d||(d=D("string_decoder/").StringDecoder);var m=new d($);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;for(var L=this._readableState.buffer.head,q="";null!==L;)q+=m.write(L.data),L=L.next;return this._readableState.buffer.clear(),""!==q&&this._readableState.buffer.push(q),this._readableState.length=q.length,this};var ce=1073741824;function ve($,m){return $<=0||0===m.length&&m.ended?0:m.objectMode?1:$!=$?m.flowing&&m.length?m.buffer.head.data.length:m.length:($>m.highWaterMark&&(m.highWaterMark=((L=$)>=ce?L=ce:(L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++),L)),$<=m.length?$:m.ended?m.length:(m.needReadable=!0,0));var L}function fe($){var m=$._readableState;o("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(o("emitReadable",m.flowing),m.emittedReadable=!0,N.nextTick(Y,$))}function Y($){var m=$._readableState;o("emitReadable_",m.destroyed,m.length,m.ended),m.destroyed||!m.length&&!m.ended||($.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,ue($)}function M($,m){m.readingMore||(m.readingMore=!0,N.nextTick(z,$,m))}function z($,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&0===m.length);){var L=m.length;if(o("maybeReadMore read 0"),$.read(0),L===m.length)break}m.readingMore=!1}function Z($){var m=$._readableState;m.readableListening=$.listenerCount("readable")>0,m.resumeScheduled&&!m.paused?m.flowing=!0:$.listenerCount("data")>0&&$.resume()}function ae($){o("readable nexttick read 0"),$.read(0)}function de($,m){o("resume",m.reading),m.reading||$.read(0),m.resumeScheduled=!1,$.emit("resume"),ue($),m.flowing&&!m.reading&&$.read(0)}function ue($){var m=$._readableState;for(o("flow",m.flowing);m.flowing&&null!==$.read(););}function oe($,m){return 0===m.length?null:(m.objectMode?L=m.buffer.shift():!$||$>=m.length?(L=m.decoder?m.buffer.join(""):1===m.buffer.length?m.buffer.first():m.buffer.concat(m.length),m.buffer.clear()):L=m.buffer.consume($,m.decoder),L);var L}function he($){var m=$._readableState;o("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,N.nextTick(_e,m,$))}function _e($,m){if(o("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&0===$.length&&($.endEmitted=!0,m.readable=!1,m.emit("end"),$.autoDestroy)){var L=m._writableState;(!L||L.autoDestroy&&L.finished)&&m.destroy()}}function Ee($,m){for(var L=0,q=$.length;L<q;L++)if($[L]===m)return L;return-1}U.prototype.read=function($){o("read",$),$=parseInt($,10);var m=this._readableState,L=$;if(0!==$&&(m.emittedReadable=!1),0===$&&m.needReadable&&((0!==m.highWaterMark?m.length>=m.highWaterMark:m.length>0)||m.ended))return o("read: emitReadable",m.length,m.ended),0===m.length&&m.ended?he(this):fe(this),null;if(0===($=ve($,m))&&m.ended)return 0===m.length&&he(this),null;var q,re=m.needReadable;return o("need readable",re),(0===m.length||m.length-$<m.highWaterMark)&&o("length less than watermark",re=!0),m.ended||m.reading?o("reading or ended",re=!1):re&&(o("do read"),m.reading=!0,m.sync=!0,0===m.length&&(m.needReadable=!0),this._read(m.highWaterMark),m.sync=!1,m.reading||($=ve(L,m))),null===(q=$>0?oe($,m):null)?(m.needReadable=m.length<=m.highWaterMark,$=0):(m.length-=$,m.awaitDrain=0),0===m.length&&(m.ended||(m.needReadable=!0),L!==$&&m.ended&&he(this)),null!==q&&this.emit("data",q),q},U.prototype._read=function($){G(this,new I("_read()"))},U.prototype.pipe=function($,m){var L=this,q=this._readableState;switch(q.pipesCount){case 0:q.pipes=$;break;case 1:q.pipes=[q.pipes,$];break;default:q.pipes.push($)}q.pipesCount+=1,o("pipe count=%d opts=%j",q.pipesCount,m);var re=m&&!1===m.end||$===N.stdout||$===N.stderr?qe:le;function le(){o("onend"),$.end()}q.endEmitted?N.nextTick(re):L.once("end",re),$.on("unpipe",function se(De,Qe){o("onunpipe"),De===L&&Qe&&!1===Qe.hasUnpiped&&(Qe.hasUnpiped=!0,o("cleanup"),$.removeListener("close",Oe),$.removeListener("finish",Me),$.removeListener("drain",Ae),$.removeListener("error",Ne),$.removeListener("unpipe",se),L.removeListener("end",le),L.removeListener("end",qe),L.removeListener("data",je),Se=!0,!q.awaitDrain||$._writableState&&!$._writableState.needDrain||Ae())});var Ae=function(De){return function(){var Qe=De._readableState;o("pipeOnDrain",Qe.awaitDrain),Qe.awaitDrain&&Qe.awaitDrain--,0===Qe.awaitDrain&&l(De,"data")&&(Qe.flowing=!0,ue(De))}}(L);$.on("drain",Ae);var Se=!1;function je(De){o("ondata");var Qe=$.write(De);o("dest.write",Qe),!1===Qe&&((1===q.pipesCount&&q.pipes===$||q.pipesCount>1&&-1!==Ee(q.pipes,$))&&!Se&&(o("false write response, pause",q.awaitDrain),q.awaitDrain++),L.pause())}function Ne(De){o("onerror",De),qe(),$.removeListener("error",Ne),0===l($,"error")&&G($,De)}function Oe(){$.removeListener("finish",Me),qe()}function Me(){o("onfinish"),$.removeListener("close",Oe),qe()}function qe(){o("unpipe"),L.unpipe($)}return L.on("data",je),function(De,Qe,He){if("function"==typeof De.prependListener)return De.prependListener(Qe,He);De._events&&De._events[Qe]?Array.isArray(De._events[Qe])?De._events[Qe].unshift(He):De._events[Qe]=[He,De._events[Qe]]:De.on(Qe,He)}($,"error",Ne),$.once("close",Oe),$.once("finish",Me),$.emit("pipe",L),q.flowing||(o("pipe resume"),L.resume()),$},U.prototype.unpipe=function($){var m=this._readableState,L={hasUnpiped:!1};if(0===m.pipesCount)return this;if(1===m.pipesCount)return $&&$!==m.pipes||($||($=m.pipes),m.pipes=null,m.pipesCount=0,m.flowing=!1,$&&$.emit("unpipe",this,L)),this;if(!$){var q=m.pipes,re=m.pipesCount;m.pipes=null,m.pipesCount=0,m.flowing=!1;for(var se=0;se<re;se++)q[se].emit("unpipe",this,{hasUnpiped:!1});return this}var le=Ee(m.pipes,$);return-1===le||(m.pipes.splice(le,1),m.pipesCount-=1,1===m.pipesCount&&(m.pipes=m.pipes[0]),$.emit("unpipe",this,L)),this},U.prototype.on=function($,m){var L=e.prototype.on.call(this,$,m),q=this._readableState;return"data"===$?(q.readableListening=this.listenerCount("readable")>0,!1!==q.flowing&&this.resume()):"readable"===$&&(q.endEmitted||q.readableListening||(q.readableListening=q.needReadable=!0,q.flowing=!1,q.emittedReadable=!1,o("on readable",q.length,q.reading),q.length?fe(this):q.reading||N.nextTick(ae,this))),L},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function($,m){var L=e.prototype.removeListener.call(this,$,m);return"readable"===$&&N.nextTick(Z,this),L},U.prototype.removeAllListeners=function($){var m=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==$&&void 0!==$||N.nextTick(Z,this),m},U.prototype.resume=function(){var m,L,$=this._readableState;return $.flowing||(o("resume"),$.flowing=!$.readableListening,m=this,(L=$).resumeScheduled||(L.resumeScheduled=!0,N.nextTick(de,m,L))),$.paused=!1,this},U.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},U.prototype.wrap=function($){var m=this,L=this._readableState,q=!1;for(var re in $.on("end",function(){if(o("wrapped end"),L.decoder&&!L.ended){var le=L.decoder.end();le&&le.length&&m.push(le)}m.push(null)}),$.on("data",function(le){o("wrapped data"),L.decoder&&(le=L.decoder.write(le)),L.objectMode&&null==le||(L.objectMode||le&&le.length)&&(m.push(le)||(q=!0,$.pause()))}),$)void 0===this[re]&&"function"==typeof $[re]&&(this[re]=function(le){return function(){return $[le].apply($,arguments)}}(re));for(var se=0;se<J.length;se++)$.on(J[se],this.emit.bind(this,J[se]));return this._read=function(le){o("wrapped _read",le),q&&(q=!1,$.resume())},this},"function"==typeof Symbol&&(U.prototype[Symbol.asyncIterator]=function(){return void 0===v&&(v=D("./internal/streams/async_iterator")),v(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),U._fromList=oe,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(U.from=function($,m){return void 0===c&&(c=D("./internal/streams/from")),c(U,$,m)})}).call(this)}).call(this,D("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/async_iterator":83,"./internal/streams/buffer_list":84,"./internal/streams/destroy":85,"./internal/streams/from":87,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,events:11,inherits:22,"string_decoder/":110,util:3}],81:[function(D,ne,V){"use strict";ne.exports=o;var N=D("../errors").codes,a=N.ERR_METHOD_NOT_IMPLEMENTED,x=N.ERR_MULTIPLE_CALLBACK,l=N.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=N.ERR_TRANSFORM_WITH_LENGTH_0,r=D("./_stream_duplex");function n(v,c){var h=this._transformState;h.transforming=!1;var f=h.writecb;if(null===f)return this.emit("error",new x);h.writechunk=null,h.writecb=null,null!=c&&this.push(c),f(v);var O=this._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}function o(v){if(!(this instanceof o))return new o(v);r.call(this,v),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",u)}function u(){var v=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(c,h){d(v,c,h)})}function d(v,c,h){if(c)return v.emit("error",c);if(null!=h&&v.push(h),v._writableState.length)throw new e;if(v._transformState.transforming)throw new l;return v.push(null)}D("inherits")(o,r),o.prototype.push=function(v,c){return this._transformState.needTransform=!1,r.prototype.push.call(this,v,c)},o.prototype._transform=function(v,c,h){h(new a("_transform()"))},o.prototype._write=function(v,c,h){var f=this._transformState;if(f.writecb=h,f.writechunk=v,f.writeencoding=c,!f.transforming){var O=this._readableState;(f.needTransform||O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}},o.prototype._read=function(v){var c=this._transformState;null===c.writechunk||c.transforming?c.needTransform=!0:(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform))},o.prototype._destroy=function(v,c){r.prototype._destroy.call(this,v,function(h){c(h)})}},{"../errors":77,"./_stream_duplex":78,inherits:22}],82:[function(D,ne,V){(function(N,a){(function(){"use strict";function x(M){var z=this;this.next=null,this.entry=null,this.finish=function(){!function(Z,ae,de){var ue=Z.entry;for(Z.entry=null;ue;){var oe=ue.callback;ae.pendingcb--,oe(undefined),ue=ue.next}ae.corkedRequestsFree.next=Z}(z,M)}}var l;ne.exports=U,U.WritableState=X;var u,e={deprecate:D("util-deprecate")},r=D("./internal/streams/stream"),n=D("buffer").Buffer,o=a.Uint8Array||function(){},d=D("./internal/streams/destroy"),v=D("./internal/streams/state").getHighWaterMark,c=D("../errors").codes,h=c.ERR_INVALID_ARG_TYPE,f=c.ERR_METHOD_NOT_IMPLEMENTED,O=c.ERR_MULTIPLE_CALLBACK,T=c.ERR_STREAM_CANNOT_PIPE,P=c.ERR_STREAM_DESTROYED,Q=c.ERR_STREAM_NULL_VALUES,I=c.ERR_STREAM_WRITE_AFTER_END,k=c.ERR_UNKNOWN_ENCODING,G=d.errorOrDestroy;function J(){}function X(M,z,Z){l=l||D("./_stream_duplex"),M=M||{},"boolean"!=typeof Z&&(Z=z instanceof l),this.objectMode=!!M.objectMode,Z&&(this.objectMode=this.objectMode||!!M.writableObjectMode),this.highWaterMark=v(this,M,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ae=!1===M.decodeStrings;this.decodeStrings=!ae,this.defaultEncoding=M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(de){!function(ue,oe){var m,he=ue._writableState,_e=he.sync,Ee=he.writecb;if("function"!=typeof Ee)throw new O;if((m=he).writing=!1,m.writecb=null,m.length-=m.writelen,m.writelen=0,oe)!function(m,L,q,re,se){--L.pendingcb,q?(N.nextTick(se,re),N.nextTick(Y,m,L),m._writableState.errorEmitted=!0,G(m,re)):(se(re),m._writableState.errorEmitted=!0,G(m,re),Y(m,L))}(ue,he,_e,oe,Ee);else{var $=ve(he)||ue.destroyed;$||he.corked||he.bufferProcessing||!he.bufferedRequest||ce(ue,he),_e?N.nextTick(ie,ue,he,$,Ee):ie(ue,he,$,Ee)}}(z,de)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==M.emitClose,this.autoDestroy=!!M.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function U(M){var z=this instanceof(l=l||D("./_stream_duplex"));if(!z&&!u.call(U,this))return new U(M);this._writableState=new X(M,this,z),this.writable=!0,M&&("function"==typeof M.write&&(this._write=M.write),"function"==typeof M.writev&&(this._writev=M.writev),"function"==typeof M.destroy&&(this._destroy=M.destroy),"function"==typeof M.final&&(this._final=M.final)),r.call(this)}function K(M,z,Z,ae,de,ue,oe){z.writelen=ae,z.writecb=oe,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new P("write")):Z?M._writev(de,z.onwrite):M._write(de,ue,z.onwrite),z.sync=!1}function ie(M,z,Z,ae){var de,ue;Z||(de=M,0===(ue=z).length&&ue.needDrain&&(ue.needDrain=!1,de.emit("drain"))),z.pendingcb--,ae(),Y(M,z)}function ce(M,z){z.bufferProcessing=!0;var Z=z.bufferedRequest;if(M._writev&&Z&&Z.next){var ae=z.bufferedRequestCount,de=new Array(ae),ue=z.corkedRequestsFree;ue.entry=Z;for(var oe=0,he=!0;Z;)de[oe]=Z,Z.isBuf||(he=!1),Z=Z.next,oe+=1;de.allBuffers=he,K(M,z,!0,z.length,de,"",ue.finish),z.pendingcb++,z.lastBufferedRequest=null,ue.next?(z.corkedRequestsFree=ue.next,ue.next=null):z.corkedRequestsFree=new x(z),z.bufferedRequestCount=0}else{for(;Z;){var _e=Z.chunk,Ee=Z.encoding,$=Z.callback;if(K(M,z,!1,z.objectMode?1:_e.length,_e,Ee,$),Z=Z.next,z.bufferedRequestCount--,z.writing)break}null===Z&&(z.lastBufferedRequest=null)}z.bufferedRequest=Z,z.bufferProcessing=!1}function ve(M){return M.ending&&0===M.length&&null===M.bufferedRequest&&!M.finished&&!M.writing}function fe(M,z){M._final(function(Z){z.pendingcb--,Z&&G(M,Z),z.prefinished=!0,M.emit("prefinish"),Y(M,z)})}function Y(M,z){var de,ue,Z=ve(z);if(Z&&(de=M,(ue=z).prefinished||ue.finalCalled||("function"!=typeof de._final||ue.destroyed?(ue.prefinished=!0,de.emit("prefinish")):(ue.pendingcb++,ue.finalCalled=!0,N.nextTick(fe,de,ue))),0===z.pendingcb&&(z.finished=!0,M.emit("finish"),z.autoDestroy))){var ae=M._readableState;(!ae||ae.autoDestroy&&ae.endEmitted)&&M.destroy()}return Z}D("inherits")(U,r),X.prototype.getBuffer=function(){for(var M=this.bufferedRequest,z=[];M;)z.push(M),M=M.next;return z},function(){try{Object.defineProperty(X.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(U,Symbol.hasInstance,{value:function(M){return!!u.call(this,M)||this===U&&M&&M._writableState instanceof X}})):u=function(M){return M instanceof this},U.prototype.pipe=function(){G(this,new T)},U.prototype.write=function(M,z,Z){var ae,he,de=this._writableState,ue=!1,oe=!de.objectMode&&(ae=M,n.isBuffer(ae)||ae instanceof o);return oe&&!n.isBuffer(M)&&(he=M,M=n.from(he)),"function"==typeof z&&(Z=z,z=null),oe?z="buffer":z||(z=de.defaultEncoding),"function"!=typeof Z&&(Z=J),de.ending?function(he,_e){var Ee=new I;G(he,Ee),N.nextTick(_e,Ee)}(this,Z):(oe||function(he,_e,Ee,$){var m;return null===Ee?m=new Q:"string"==typeof Ee||_e.objectMode||(m=new h("chunk",["string","Buffer"],Ee)),!m||(G(he,m),N.nextTick($,m),!1)}(this,de,M,Z))&&(de.pendingcb++,ue=function(he,_e,Ee,$,m,L){if(!Ee){var q=(Se=$,je=m,(Ae=_e).objectMode||!1===Ae.decodeStrings||"string"!=typeof Se||(Se=n.from(Se,je)),Se);$!==q&&(Ee=!0,m="buffer",$=q)}var Ae,Se,je,re=_e.objectMode?1:$.length;_e.length+=re;var se=_e.length<_e.highWaterMark;if(se||(_e.needDrain=!0),_e.writing||_e.corked){var le=_e.lastBufferedRequest;_e.lastBufferedRequest={chunk:$,encoding:m,isBuf:Ee,callback:L,next:null},le?le.next=_e.lastBufferedRequest:_e.bufferedRequest=_e.lastBufferedRequest,_e.bufferedRequestCount+=1}else K(he,_e,!1,re,$,m,L);return se}(this,de,oe,M,z,Z)),ue},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){var M=this._writableState;M.corked&&(M.corked--,M.writing||M.corked||M.bufferProcessing||!M.bufferedRequest||ce(this,M))},U.prototype.setDefaultEncoding=function(M){if("string"==typeof M&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new k(M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(U.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(U.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),U.prototype._write=function(M,z,Z){Z(new f("_write()"))},U.prototype._writev=null,U.prototype.end=function(M,z,Z){var de,ue,oe,ae=this._writableState;return"function"==typeof M?(Z=M,M=null,z=null):"function"==typeof z&&(Z=z,z=null),null!=M&&this.write(M,z),ae.corked&&(ae.corked=1,this.uncork()),ae.ending||(de=this,oe=Z,(ue=ae).ending=!0,Y(de,ue),oe&&(ue.finished?N.nextTick(oe):de.once("finish",oe)),ue.ended=!0,de.writable=!1),this},Object.defineProperty(U.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),U.prototype.destroy=d.destroy,U.prototype._undestroy=d.undestroy,U.prototype._destroy=function(M,z){z(M)}}).call(this)}).call(this,D("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":77,"./_stream_duplex":78,"./internal/streams/destroy":85,"./internal/streams/state":89,"./internal/streams/stream":90,_process:59,buffer:5,inherits:22,"util-deprecate":114}],83:[function(D,ne,V){(function(N){(function(){"use strict";var a;function x(P,Q,I){return Q in P?Object.defineProperty(P,Q,{value:I,enumerable:!0,configurable:!0,writable:!0}):P[Q]=I,P}var l=D("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),n=Symbol("error"),o=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),v=Symbol("stream");function c(P,Q){return{value:P,done:Q}}function h(P){var Q=P[e];if(null!==Q){var I=P[v].read();null!==I&&(P[u]=null,P[e]=null,P[r]=null,Q(c(I,!1)))}}function f(P){N.nextTick(h,P)}var O=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((x(a={get stream(){return this[v]},next:function(){var P=this,Q=this[n];if(null!==Q)return Promise.reject(Q);if(this[o])return Promise.resolve(c(void 0,!0));if(this[v].destroyed)return new Promise(function(J,X){N.nextTick(function(){P[n]?X(P[n]):J(c(void 0,!0))})});var I,k=this[u];if(k)I=new Promise(function(J,X){return function(U,K){J.then(function(){X[o]?U(c(void 0,!0)):X[d](U,K)},K)}}(k,this));else{var G=this[v].read();if(null!==G)return Promise.resolve(c(G,!1));I=new Promise(this[d])}return this[u]=I,I}},Symbol.asyncIterator,function(){return this}),x(a,"return",function(){var P=this;return new Promise(function(Q,I){P[v].destroy(null,function(k){k?I(k):Q(c(void 0,!0))})})}),a),O);ne.exports=function(P){var Q,I=Object.create(T,(x(Q={},v,{value:P,writable:!0}),x(Q,e,{value:null,writable:!0}),x(Q,r,{value:null,writable:!0}),x(Q,n,{value:null,writable:!0}),x(Q,o,{value:P._readableState.endEmitted,writable:!0}),x(Q,d,{value:function(k,G){var J=I[v].read();J?(I[u]=null,I[e]=null,I[r]=null,k(c(J,!1))):(I[e]=k,I[r]=G)},writable:!0}),Q));return I[u]=null,l(P,function(k){if(k&&"ERR_STREAM_PREMATURE_CLOSE"!==k.code){var G=I[r];return null!==G&&(I[u]=null,I[e]=null,I[r]=null,G(k)),void(I[n]=k)}var J=I[e];null!==J&&(I[u]=null,I[e]=null,I[r]=null,J(c(void 0,!0))),I[o]=!0}),P.on("readable",f.bind(null,I)),I}}).call(this)}).call(this,D("_process"))},{"./end-of-stream":86,_process:59}],84:[function(D,ne,V){"use strict";function N(n,o){var u=Object.keys(n);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(n);o&&(d=d.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),u.push.apply(u,d)}return u}function a(n,o,u){return o in n?Object.defineProperty(n,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):n[o]=u,n}function x(n,o){for(var u=0;u<o.length;u++){var d=o[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(n,d.key,d)}}var l=D("buffer").Buffer,e=D("util").inspect,r=e&&e.custom||"inspect";ne.exports=function(){function n(){(function(v,c){if(!(v instanceof c))throw new TypeError("Cannot call a class as a function")})(this,n),this.head=null,this.tail=null,this.length=0}var o,u;return o=n,u=[{key:"push",value:function(v){var c={data:v,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(v){var c={data:v,next:this.head};0===this.length&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(0!==this.length){var v=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(0===this.length)return"";for(var c=this.head,h=""+c.data;c=c.next;)h+=v+c.data;return h}},{key:"concat",value:function(v){if(0===this.length)return l.alloc(0);for(var c,h,f,O=l.allocUnsafe(v>>>0),T=this.head,P=0;T;)c=T.data,h=O,f=P,l.prototype.copy.call(c,h,f),P+=T.data.length,T=T.next;return O}},{key:"consume",value:function(v,c){var h;return v<this.head.data.length?(h=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):h=v===this.head.data.length?this.shift():c?this._getString(v):this._getBuffer(v),h}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var c=this.head,h=1,f=c.data;for(v-=f.length;c=c.next;){var O=c.data,T=v>O.length?O.length:v;if(T===O.length?f+=O:f+=O.slice(0,v),0==(v-=T)){T===O.length?(++h,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=O.slice(T));break}++h}return this.length-=h,f}},{key:"_getBuffer",value:function(v){var c=l.allocUnsafe(v),h=this.head,f=1;for(h.data.copy(c),v-=h.data.length;h=h.next;){var O=h.data,T=v>O.length?O.length:v;if(O.copy(c,c.length-v,0,T),0==(v-=T)){T===O.length?(++f,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=O.slice(T));break}++f}return this.length-=f,c}},{key:r,value:function(v,c){return e(this,function(h){for(var f=1;f<arguments.length;f++){var O=null!=arguments[f]?arguments[f]:{};f%2?N(Object(O),!0).forEach(function(T){a(h,T,O[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(O)):N(Object(O)).forEach(function(T){Object.defineProperty(h,T,Object.getOwnPropertyDescriptor(O,T))})}return h}({},c,{depth:0,customInspect:!1}))}}],u&&x(o.prototype,u),n}()},{buffer:5,util:3}],85:[function(D,ne,V){(function(N){(function(){"use strict";function a(e,r){l(e,r),x(e)}function x(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function l(e,r){e.emit("error",r)}ne.exports={destroy:function(e,r){var n=this,o=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return o||u?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,N.nextTick(l,this,e)):N.nextTick(l,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!r&&d?n._writableState?n._writableState.errorEmitted?N.nextTick(x,n):(n._writableState.errorEmitted=!0,N.nextTick(a,n,d)):N.nextTick(a,n,d):r?(N.nextTick(x,n),r(d)):N.nextTick(x,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var n=e._readableState,o=e._writableState;n&&n.autoDestroy||o&&o.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,D("_process"))},{_process:59}],86:[function(D,ne,V){"use strict";var N=D("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(){}ne.exports=function x(l,e,r){if("function"==typeof e)return x(l,null,e);e||(e={}),r=function(P){var Q=!1;return function(){if(!Q){Q=!0;for(var I=arguments.length,k=new Array(I),G=0;G<I;G++)k[G]=arguments[G];P.apply(this,k)}}}(r||a);var P,n=e.readable||!1!==e.readable&&l.readable,o=e.writable||!1!==e.writable&&l.writable,u=function(){l.writable||v()},d=l._writableState&&l._writableState.finished,v=function(){o=!1,d=!0,n||r.call(l)},c=l._readableState&&l._readableState.endEmitted,h=function(){n=!1,c=!0,o||r.call(l)},f=function(P){r.call(l,P)},O=function(){var P;return n&&!c?(l._readableState&&l._readableState.ended||(P=new N),r.call(l,P)):o&&!d?(l._writableState&&l._writableState.ended||(P=new N),r.call(l,P)):void 0},T=function(){l.req.on("finish",v)};return(P=l).setHeader&&"function"==typeof P.abort?(l.on("complete",v),l.on("abort",O),l.req?T():l.on("request",T)):o&&!l._writableState&&(l.on("end",u),l.on("close",u)),l.on("end",h),l.on("finish",v),!1!==e.error&&l.on("error",f),l.on("close",O),function(){l.removeListener("complete",v),l.removeListener("abort",O),l.removeListener("request",T),l.req&&l.req.removeListener("finish",v),l.removeListener("end",u),l.removeListener("close",u),l.removeListener("finish",v),l.removeListener("end",h),l.removeListener("error",f),l.removeListener("close",O)}}},{"../../../errors":77}],87:[function(D,ne,V){ne.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],88:[function(D,ne,V){"use strict";var N,a=D("../../../errors").codes,x=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function n(d){d()}function o(d,v){return d.pipe(v)}ne.exports=function(){for(var d=arguments.length,v=new Array(d),c=0;c<d;c++)v[c]=arguments[c];var h,f=function u(d){return d.length?"function"!=typeof d[d.length-1]?e:d.pop():e}(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new x("streams");var O=v.map(function(T,P){var Q=P<v.length-1;return function r(d,v,c,h){h=function(T){var P=!1;return function(){P||(P=!0,T.apply(void 0,arguments))}}(h);var f=!1;d.on("close",function(){f=!0}),void 0===N&&(N=D("./end-of-stream")),N(d,{readable:v,writable:c},function(T){if(T)return h(T);f=!0,h()});var O=!1;return function(T){if(!f&&!O)return O=!0,(P=d).setHeader&&"function"==typeof P.abort?d.abort():"function"==typeof d.destroy?d.destroy():void h(T||new l("pipe"));var P}}(T,Q,P>0,function(I){h||(h=I),I&&O.forEach(n),Q||(O.forEach(n),f(h))})});return v.reduce(o)}},{"../../../errors":77,"./end-of-stream":86}],89:[function(D,ne,V){"use strict";var N=D("../../../errors").codes.ERR_INVALID_OPT_VALUE;ne.exports={getHighWaterMark:function(a,x,l,e){var n,o,u,r=(o=e,u=l,null!=(n=x).highWaterMark?n.highWaterMark:o?n[u]:null);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new N(e?l:"highWaterMark",r);return Math.floor(r)}return a.objectMode?16:16384}}},{"../../../errors":77}],90:[function(D,ne,V){ne.exports=D("events").EventEmitter},{events:11}],91:[function(D,ne,V){(function(N){(function(){var a=D("./lib/request"),x=D("./lib/response"),l=D("xtend"),e=D("builtin-status-codes"),r=D("url"),n=V;n.request=function(o,u){o="string"==typeof o?r.parse(o):l(o);var d=-1===N.location.protocol.search(/^https?:$/)?"http:":"",v=o.protocol||d,c=o.hostname||o.host,h=o.port,f=o.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),o.url=(c?v+"//"+c:"")+(h?":"+h:"")+f,o.method=(o.method||"GET").toUpperCase(),o.headers=o.headers||{};var O=new a(o);return u&&O.on("response",u),O},n.get=function(o,u){var d=n.request(o,u);return d.end(),d},n.ClientRequest=a,n.IncomingMessage=x.IncomingMessage,n.Agent=function(){},n.Agent.defaultMaxSockets=4,n.globalAgent=new n.Agent,n.STATUS_CODES=e,n.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/request":93,"./lib/response":94,"builtin-status-codes":6,url:112,xtend:119}],92:[function(D,ne,V){(function(N){(function(){var a;function x(){if(void 0!==a)return a;if(N.XMLHttpRequest){a=new N.XMLHttpRequest;try{a.open("GET",N.XDomainRequest?"/":"https://example.com")}catch{a=null}}else a=null;return a}function l(r){var n=x();if(!n)return!1;try{return n.responseType=r,n.responseType===r}catch{}return!1}function e(r){return"function"==typeof r}V.fetch=e(N.fetch)&&e(N.ReadableStream),V.writableStream=e(N.WritableStream),V.abortController=e(N.AbortController),V.arraybuffer=V.fetch||l("arraybuffer"),V.msstream=!V.fetch&&l("ms-stream"),V.mozchunkedarraybuffer=!V.fetch&&l("moz-chunked-arraybuffer"),V.overrideMimeType=V.fetch||!!x()&&e(x().overrideMimeType),a=null}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],93:[function(D,ne,V){(function(N,a,x){(function(){var l=D("./capability"),e=D("inherits"),r=D("./response"),n=D("readable-stream"),o=r.IncomingMessage,u=r.readyStates,d=ne.exports=function(c){var h,f=this;n.Writable.call(f),f._opts=c,f._body=[],f._headers={},c.auth&&f.setHeader("Authorization","Basic "+x.from(c.auth).toString("base64")),Object.keys(c.headers).forEach(function(T){f.setHeader(T,c.headers[T])});var T,P,O=!0;if("disable-fetch"===c.mode||"requestTimeout"in c&&!l.abortController)O=!1,h=!0;else if("prefer-streaming"===c.mode)h=!1;else if("allow-wrong-content-type"===c.mode)h=!l.overrideMimeType;else{if(c.mode&&"default"!==c.mode&&"prefer-fast"!==c.mode)throw new Error("Invalid value for opts.mode");h=!0}f._mode=(T=h,P=O,l.fetch&&P?"fetch":l.mozchunkedarraybuffer?"moz-chunked-arraybuffer":l.msstream?"ms-stream":l.arraybuffer&&T?"arraybuffer":"text"),f._fetchTimer=null,f._socketTimeout=null,f._socketTimer=null,f.on("finish",function(){f._onFinish()})};e(d,n.Writable),d.prototype.setHeader=function(c,h){var f=c.toLowerCase();-1===v.indexOf(f)&&(this._headers[f]={name:c,value:h})},d.prototype.getHeader=function(c){var h=this._headers[c.toLowerCase()];return h?h.value:null},d.prototype.removeHeader=function(c){delete this._headers[c.toLowerCase()]},d.prototype._onFinish=function(){var c=this;if(!c._destroyed){var h=c._opts;"timeout"in h&&0!==h.timeout&&c.setTimeout(h.timeout);var f=c._headers,O=null;"GET"!==h.method&&"HEAD"!==h.method&&(O=new Blob(c._body,{type:(f["content-type"]||{}).value||""}));var T=[];if(Object.keys(f).forEach(function(k){var G=f[k].name,J=f[k].value;Array.isArray(J)?J.forEach(function(X){T.push([G,X])}):T.push([G,J])}),"fetch"===c._mode){var P=null;if(l.abortController){var Q=new AbortController;P=Q.signal,c._fetchAbortController=Q,"requestTimeout"in h&&0!==h.requestTimeout&&(c._fetchTimer=a.setTimeout(function(){c.emit("requestTimeout"),c._fetchAbortController&&c._fetchAbortController.abort()},h.requestTimeout))}a.fetch(c._opts.url,{method:c._opts.method,headers:T,body:O||void 0,mode:"cors",credentials:h.withCredentials?"include":"same-origin",signal:P}).then(function(k){c._fetchResponse=k,c._resetTimers(!1),c._connect()},function(k){c._resetTimers(!0),c._destroyed||c.emit("error",k)})}else{var I=c._xhr=new a.XMLHttpRequest;try{I.open(c._opts.method,c._opts.url,!0)}catch(k){return void N.nextTick(function(){c.emit("error",k)})}"responseType"in I&&(I.responseType=c._mode),"withCredentials"in I&&(I.withCredentials=!!h.withCredentials),"text"===c._mode&&"overrideMimeType"in I&&I.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in h&&(I.timeout=h.requestTimeout,I.ontimeout=function(){c.emit("requestTimeout")}),T.forEach(function(k){I.setRequestHeader(k[0],k[1])}),c._response=null,I.onreadystatechange=function(){switch(I.readyState){case u.LOADING:case u.DONE:c._onXHRProgress()}},"moz-chunked-arraybuffer"===c._mode&&(I.onprogress=function(){c._onXHRProgress()}),I.onerror=function(){c._destroyed||(c._resetTimers(!0),c.emit("error",new Error("XHR error")))};try{I.send(O)}catch(k){return void N.nextTick(function(){c.emit("error",k)})}}}},d.prototype._onXHRProgress=function(){var c=this;c._resetTimers(!1),function(h){try{var f=h.status;return null!==f&&0!==f}catch{return!1}}(c._xhr)&&!c._destroyed&&(c._response||c._connect(),c._response._onXHRProgress(c._resetTimers.bind(c)))},d.prototype._connect=function(){var c=this;c._destroyed||(c._response=new o(c._xhr,c._fetchResponse,c._mode,c._resetTimers.bind(c)),c._response.on("error",function(h){c.emit("error",h)}),c.emit("response",c._response))},d.prototype._write=function(c,h,f){this._body.push(c),f()},d.prototype._resetTimers=function(c){var h=this;a.clearTimeout(h._socketTimer),h._socketTimer=null,c?(a.clearTimeout(h._fetchTimer),h._fetchTimer=null):h._socketTimeout&&(h._socketTimer=a.setTimeout(function(){h.emit("timeout")},h._socketTimeout))},d.prototype.abort=d.prototype.destroy=function(c){var h=this;h._destroyed=!0,h._resetTimers(!0),h._response&&(h._response._destroyed=!0),h._xhr?h._xhr.abort():h._fetchAbortController&&h._fetchAbortController.abort(),c&&h.emit("error",c)},d.prototype.end=function(c,h,f){"function"==typeof c&&(f=c,c=void 0),n.Writable.prototype.end.call(this,c,h,f)},d.prototype.setTimeout=function(c,h){var f=this;h&&f.once("timeout",h),f._socketTimeout=c,f._resetTimers(!1)},d.prototype.flushHeaders=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,D("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},D("buffer").Buffer)},{"./capability":92,"./response":94,_process:59,buffer:5,inherits:22,"readable-stream":109}],94:[function(D,ne,V){(function(N,a,x){(function(){var l=D("./capability"),e=D("inherits"),r=D("readable-stream"),n=V.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},o=V.IncomingMessage=function(u,d,v,c){var h=this;if(r.Readable.call(h),h._mode=v,h.headers={},h.rawHeaders=[],h.trailers={},h.rawTrailers=[],h.on("end",function(){N.nextTick(function(){h.emit("close")})}),"fetch"===v){if(h._fetchResponse=d,h.url=d.url,h.statusCode=d.status,h.statusMessage=d.statusText,d.headers.forEach(function(Q,I){h.headers[I.toLowerCase()]=Q,h.rawHeaders.push(I,Q)}),l.writableStream){var f=new WritableStream({write:function(Q){return c(!1),new Promise(function(I,k){h._destroyed?k():h.push(x.from(Q))?I():h._resumeFetch=I})},close:function(){c(!0),h._destroyed||h.push(null)},abort:function(Q){c(!0),h._destroyed||h.emit("error",Q)}});try{return void d.body.pipeTo(f).catch(function(Q){c(!0),h._destroyed||h.emit("error",Q)})}catch{}}var O=d.body.getReader();!function Q(){O.read().then(function(I){h._destroyed||(c(I.done),I.done?h.push(null):(h.push(x.from(I.value)),Q()))}).catch(function(I){c(!0),h._destroyed||h.emit("error",I)})}()}else if(h._xhr=u,h._pos=0,h.url=u.responseURL,h.statusCode=u.status,h.statusMessage=u.statusText,u.getAllResponseHeaders().split(/\r?\n/).forEach(function(Q){var I=Q.match(/^([^:]+):\s*(.*)/);if(I){var k=I[1].toLowerCase();"set-cookie"===k?(void 0===h.headers[k]&&(h.headers[k]=[]),h.headers[k].push(I[2])):void 0!==h.headers[k]?h.headers[k]+=", "+I[2]:h.headers[k]=I[2],h.rawHeaders.push(I[1],I[2])}}),h._charset="x-user-defined",!l.overrideMimeType){var T=h.rawHeaders["mime-type"];if(T){var P=T.match(/;\s*charset=([^;])(;|$)/);P&&(h._charset=P[1].toLowerCase())}h._charset||(h._charset="utf-8")}};e(o,r.Readable),o.prototype._read=function(){var u=this._resumeFetch;u&&(this._resumeFetch=null,u())},o.prototype._onXHRProgress=function(u){var d=this,v=d._xhr,c=null;switch(d._mode){case"text":if((c=v.responseText).length>d._pos){var h=c.substr(d._pos);if("x-user-defined"===d._charset){for(var f=x.alloc(h.length),O=0;O<h.length;O++)f[O]=255&h.charCodeAt(O);d.push(f)}else d.push(h,d._charset);d._pos=c.length}break;case"arraybuffer":if(v.readyState!==n.DONE||!v.response)break;c=v.response,d.push(x.from(new Uint8Array(c)));break;case"moz-chunked-arraybuffer":if(c=v.response,v.readyState!==n.LOADING||!c)break;d.push(x.from(new Uint8Array(c)));break;case"ms-stream":if(c=v.response,v.readyState!==n.LOADING)break;var T=new a.MSStreamReader;T.onprogress=function(){T.result.byteLength>d._pos&&(d.push(x.from(new Uint8Array(T.result.slice(d._pos)))),d._pos=T.result.byteLength)},T.onload=function(){u(!0),d.push(null)},T.readAsArrayBuffer(c)}d._xhr.readyState===n.DONE&&"ms-stream"!==d._mode&&(u(!0),d.push(null))}}).call(this)}).call(this,D("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},D("buffer").Buffer)},{"./capability":92,_process:59,buffer:5,inherits:22,"readable-stream":109}],95:[function(D,ne,V){arguments[4][77][0].apply(V,arguments)},{dup:77}],96:[function(D,ne,V){arguments[4][78][0].apply(V,arguments)},{"./_stream_readable":98,"./_stream_writable":100,_process:59,dup:78,inherits:22}],97:[function(D,ne,V){arguments[4][79][0].apply(V,arguments)},{"./_stream_transform":99,dup:79,inherits:22}],98:[function(D,ne,V){arguments[4][80][0].apply(V,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/async_iterator":101,"./internal/streams/buffer_list":102,"./internal/streams/destroy":103,"./internal/streams/from":105,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:80,events:11,inherits:22,"string_decoder/":110,util:3}],99:[function(D,ne,V){arguments[4][81][0].apply(V,arguments)},{"../errors":95,"./_stream_duplex":96,dup:81,inherits:22}],100:[function(D,ne,V){arguments[4][82][0].apply(V,arguments)},{"../errors":95,"./_stream_duplex":96,"./internal/streams/destroy":103,"./internal/streams/state":107,"./internal/streams/stream":108,_process:59,buffer:5,dup:82,inherits:22,"util-deprecate":114}],101:[function(D,ne,V){arguments[4][83][0].apply(V,arguments)},{"./end-of-stream":104,_process:59,dup:83}],102:[function(D,ne,V){arguments[4][84][0].apply(V,arguments)},{buffer:5,dup:84,util:3}],103:[function(D,ne,V){arguments[4][85][0].apply(V,arguments)},{_process:59,dup:85}],104:[function(D,ne,V){arguments[4][86][0].apply(V,arguments)},{"../../../errors":95,dup:86}],105:[function(D,ne,V){arguments[4][87][0].apply(V,arguments)},{dup:87}],106:[function(D,ne,V){arguments[4][88][0].apply(V,arguments)},{"../../../errors":95,"./end-of-stream":104,dup:88}],107:[function(D,ne,V){arguments[4][89][0].apply(V,arguments)},{"../../../errors":95,dup:89}],108:[function(D,ne,V){arguments[4][90][0].apply(V,arguments)},{dup:90,events:11}],109:[function(D,ne,V){(V=ne.exports=D("./lib/_stream_readable.js")).Stream=V,V.Readable=V,V.Writable=D("./lib/_stream_writable.js"),V.Duplex=D("./lib/_stream_duplex.js"),V.Transform=D("./lib/_stream_transform.js"),V.PassThrough=D("./lib/_stream_passthrough.js"),V.finished=D("./lib/internal/streams/end-of-stream.js"),V.pipeline=D("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":96,"./lib/_stream_passthrough.js":97,"./lib/_stream_readable.js":98,"./lib/_stream_transform.js":99,"./lib/_stream_writable.js":100,"./lib/internal/streams/end-of-stream.js":104,"./lib/internal/streams/pipeline.js":106}],110:[function(D,ne,V){"use strict";var N=D("safe-buffer").Buffer,a=N.isEncoding||function(c){switch((c=""+c)&&c.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function x(c){var h;switch(this.encoding=function(f){var O=function(T){if(!T)return"utf8";for(var P;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(P)return;T=(""+T).toLowerCase(),P=!0}}(f);if("string"!=typeof O&&(N.isEncoding===a||!a(f)))throw new Error("Unknown encoding: "+f);return O||f}(c),this.encoding){case"utf16le":this.text=r,this.end=n,h=4;break;case"utf8":this.fillLast=e,h=4;break;case"base64":this.text=o,this.end=u,h=3;break;default:return this.write=d,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=N.allocUnsafe(h)}function l(c){return c<=127?0:c>>5==6?2:c>>4==14?3:c>>3==30?4:c>>6==2?-1:-2}function e(c){var h=this.lastTotal-this.lastNeed,f=function(O,T,P){if(128!=(192&T[0]))return O.lastNeed=0,"\ufffd";if(O.lastNeed>1&&T.length>1){if(128!=(192&T[1]))return O.lastNeed=1,"\ufffd";if(O.lastNeed>2&&T.length>2&&128!=(192&T[2]))return O.lastNeed=2,"\ufffd"}}(this,c);return void 0!==f?f:this.lastNeed<=c.length?(c.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(c.copy(this.lastChar,h,0,c.length),void(this.lastNeed-=c.length))}function r(c,h){if((c.length-h)%2==0){var f=c.toString("utf16le",h);if(f){var O=f.charCodeAt(f.length-1);if(O>=55296&&O<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=c[c.length-1],c.toString("utf16le",h,c.length-1)}function n(c){var h=c&&c.length?this.write(c):"";if(this.lastNeed){var f=this.lastTotal-this.lastNeed;return h+this.lastChar.toString("utf16le",0,f)}return h}function o(c,h){var f=(c.length-h)%3;return 0===f?c.toString("base64",h):(this.lastNeed=3-f,this.lastTotal=3,1===f?this.lastChar[0]=c[c.length-1]:(this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1]),c.toString("base64",h,c.length-f))}function u(c){var h=c&&c.length?this.write(c):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function d(c){return c.toString(this.encoding)}function v(c){return c&&c.length?this.write(c):""}V.StringDecoder=x,x.prototype.write=function(c){if(0===c.length)return"";var h,f;if(this.lastNeed){if(void 0===(h=this.fillLast(c)))return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<c.length?h?h+this.text(c,f):this.text(c,f):h||""},x.prototype.end=function(c){var h=c&&c.length?this.write(c):"";return this.lastNeed?h+"\ufffd":h},x.prototype.text=function(c,h){var f=function(T,P,Q){var I=P.length-1;if(I<Q)return 0;var k=l(P[I]);return k>=0?(k>0&&(T.lastNeed=k-1),k):--I<Q||-2===k?0:(k=l(P[I]))>=0?(k>0&&(T.lastNeed=k-2),k):--I<Q||-2===k?0:(k=l(P[I]))>=0?(k>0&&(2===k?k=0:T.lastNeed=k-3),k):0}(this,c,h);if(!this.lastNeed)return c.toString("utf8",h);this.lastTotal=f;var O=c.length-(f-this.lastNeed);return c.copy(this.lastChar,0,O),c.toString("utf8",h,O)},x.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length),this.lastNeed-=c.length}},{"safe-buffer":74}],111:[function(D,ne,V){(function(N,a){(function(){var x=D("process/browser.js").nextTick,l=Function.prototype.apply,e=Array.prototype.slice,r={},n=0;function o(u,d){this._id=u,this._clearFn=d}V.setTimeout=function(){return new o(l.call(setTimeout,window,arguments),clearTimeout)},V.setInterval=function(){return new o(l.call(setInterval,window,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(u){u.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},V.enroll=function(u,d){clearTimeout(u._idleTimeoutId),u._idleTimeout=d},V.unenroll=function(u){clearTimeout(u._idleTimeoutId),u._idleTimeout=-1},V._unrefActive=V.active=function(u){clearTimeout(u._idleTimeoutId);var d=u._idleTimeout;d>=0&&(u._idleTimeoutId=setTimeout(function(){u._onTimeout&&u._onTimeout()},d))},V.setImmediate="function"==typeof N?N:function(u){var d=n++,v=!(arguments.length<2)&&e.call(arguments,1);return r[d]=!0,x(function(){r[d]&&(v?u.apply(null,v):u.call(null),V.clearImmediate(d))}),d},V.clearImmediate="function"==typeof a?a:function(u){delete r[u]}}).call(this)}).call(this,D("timers").setImmediate,D("timers").clearImmediate)},{"process/browser.js":59,timers:111}],112:[function(D,ne,V){"use strict";var N=D("punycode"),a=D("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}V.parse=P,V.resolve=function(Q,I){return P(Q,!1,!0).resolve(I)},V.resolveObject=function(Q,I){return Q?P(Q,!1,!0).resolveObject(I):I},V.format=function(Q){return a.isString(Q)&&(Q=P(Q)),Q instanceof x?Q.format():x.prototype.format.call(Q)},V.Url=x;var l=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),o=["'"].concat(n),u=["%","/","?",";","#"].concat(o),d=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,c=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=D("querystring");function P(Q,I,k){if(Q&&a.isObject(Q)&&Q instanceof x)return Q;var G=new x;return G.parse(Q,I,k),G}x.prototype.parse=function(Q,I,k){if(!a.isString(Q))throw new TypeError("Parameter 'url' must be a string, not "+typeof Q);var G=Q.indexOf("?"),J=-1!==G&&G<Q.indexOf("#")?"?":"#",X=Q.split(J);X[0]=X[0].replace(/\\/g,"/");var U=Q=X.join(J);if(U=U.trim(),!k&&1===Q.split("#").length){var K=r.exec(U);if(K)return this.path=U,this.href=U,this.pathname=K[1],K[2]?(this.search=K[2],this.query=I?T.parse(this.search.substr(1)):this.search.substr(1)):I&&(this.search="",this.query={}),this}var ie=l.exec(U);if(ie){var ce=(ie=ie[0]).toLowerCase();this.protocol=ce,U=U.substr(ie.length)}if(k||ie||U.match(/^\/\/[^@\/]+@[^@\/]+/)){var ve="//"===U.substr(0,2);!ve||ie&&f[ie]||(U=U.substr(2),this.slashes=!0)}if(!f[ie]&&(ve||ie&&!O[ie])){for(var fe,Y,M=-1,z=0;z<d.length;z++)-1!==(Z=U.indexOf(d[z]))&&(-1===M||Z<M)&&(M=Z);for(-1!==(Y=-1===M?U.lastIndexOf("@"):U.lastIndexOf("@",M))&&(fe=U.slice(0,Y),U=U.slice(Y+1),this.auth=decodeURIComponent(fe)),M=-1,z=0;z<u.length;z++){var Z;-1!==(Z=U.indexOf(u[z]))&&(-1===M||Z<M)&&(M=Z)}-1===M&&(M=U.length),this.host=U.slice(0,M),U=U.slice(M),this.parseHost(),this.hostname=this.hostname||"";var ae="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ae)for(var de=this.hostname.split(/\./),ue=(z=0,de.length);z<ue;z++){var oe=de[z];if(oe&&!oe.match(v)){for(var he="",_e=0,Ee=oe.length;_e<Ee;_e++)oe.charCodeAt(_e)>127?he+="x":he+=oe[_e];if(!he.match(v)){var $=de.slice(0,z),m=de.slice(z+1),L=oe.match(c);L&&($.push(L[1]),m.unshift(L[2])),m.length&&(U="/"+m.join(".")+U),this.hostname=$.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),ae||(this.hostname=N.toASCII(this.hostname));var q=this.port?":"+this.port:"",re=this.hostname||"";this.host=re+q,this.href+=this.host,ae&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==U[0]&&(U="/"+U))}if(!h[ce])for(z=0,ue=o.length;z<ue;z++){var se=o[z];if(-1!==U.indexOf(se)){var le=encodeURIComponent(se);le===se&&(le=escape(se)),U=U.split(se).join(le)}}var Ae=U.indexOf("#");-1!==Ae&&(this.hash=U.substr(Ae),U=U.slice(0,Ae));var Se=U.indexOf("?");if(-1!==Se?(this.search=U.substr(Se),this.query=U.substr(Se+1),I&&(this.query=T.parse(this.query)),U=U.slice(0,Se)):I&&(this.search="",this.query={}),U&&(this.pathname=U),O[ce]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var je=this.search||"";this.path=q+je}return this.href=this.format(),this},x.prototype.format=function(){var Q=this.auth||"";Q&&(Q=(Q=encodeURIComponent(Q)).replace(/%3A/i,":"),Q+="@");var I=this.protocol||"",k=this.pathname||"",G=this.hash||"",J=!1,X="";this.host?J=Q+this.host:this.hostname&&(J=Q+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(J+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(X=T.stringify(this.query));var U=this.search||X&&"?"+X||"";return I&&":"!==I.substr(-1)&&(I+=":"),this.slashes||(!I||O[I])&&!1!==J?(J="//"+(J||""),k&&"/"!==k.charAt(0)&&(k="/"+k)):J||(J=""),G&&"#"!==G.charAt(0)&&(G="#"+G),U&&"?"!==U.charAt(0)&&(U="?"+U),I+J+(k=k.replace(/[?#]/g,function(K){return encodeURIComponent(K)}))+(U=U.replace("#","%23"))+G},x.prototype.resolve=function(Q){return this.resolveObject(P(Q,!1,!0)).format()},x.prototype.resolveObject=function(Q){if(a.isString(Q)){var I=new x;I.parse(Q,!1,!0),Q=I}for(var k=new x,G=Object.keys(this),J=0;J<G.length;J++){var X=G[J];k[X]=this[X]}if(k.hash=Q.hash,""===Q.href)return k.href=k.format(),k;if(Q.slashes&&!Q.protocol){for(var U=Object.keys(Q),K=0;K<U.length;K++){var ie=U[K];"protocol"!==ie&&(k[ie]=Q[ie])}return O[k.protocol]&&k.hostname&&!k.pathname&&(k.path=k.pathname="/"),k.href=k.format(),k}if(Q.protocol&&Q.protocol!==k.protocol){if(!O[Q.protocol]){for(var ce=Object.keys(Q),ve=0;ve<ce.length;ve++){var fe=ce[ve];k[fe]=Q[fe]}return k.href=k.format(),k}if(k.protocol=Q.protocol,Q.host||f[Q.protocol])k.pathname=Q.pathname;else{for(var Y=(Q.pathname||"").split("/");Y.length&&!(Q.host=Y.shift()););Q.host||(Q.host=""),Q.hostname||(Q.hostname=""),""!==Y[0]&&Y.unshift(""),Y.length<2&&Y.unshift(""),k.pathname=Y.join("/")}if(k.search=Q.search,k.query=Q.query,k.host=Q.host||"",k.auth=Q.auth,k.hostname=Q.hostname||Q.host,k.port=Q.port,k.pathname||k.search){var M=k.pathname||"",z=k.search||"";k.path=M+z}return k.slashes=k.slashes||Q.slashes,k.href=k.format(),k}var Z=k.pathname&&"/"===k.pathname.charAt(0),ae=Q.host||Q.pathname&&"/"===Q.pathname.charAt(0),de=ae||Z||k.host&&Q.pathname,ue=de,oe=k.pathname&&k.pathname.split("/")||[],he=(Y=Q.pathname&&Q.pathname.split("/")||[],k.protocol&&!O[k.protocol]);if(he&&(k.hostname="",k.port=null,k.host&&(""===oe[0]?oe[0]=k.host:oe.unshift(k.host)),k.host="",Q.protocol&&(Q.hostname=null,Q.port=null,Q.host&&(""===Y[0]?Y[0]=Q.host:Y.unshift(Q.host)),Q.host=null),de=de&&(""===Y[0]||""===oe[0])),ae)k.host=Q.host||""===Q.host?Q.host:k.host,k.hostname=Q.hostname||""===Q.hostname?Q.hostname:k.hostname,k.search=Q.search,k.query=Q.query,oe=Y;else if(Y.length)oe||(oe=[]),oe.pop(),oe=oe.concat(Y),k.search=Q.search,k.query=Q.query;else if(!a.isNullOrUndefined(Q.search))return he&&(k.hostname=k.host=oe.shift(),(L=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=L.shift(),k.host=k.hostname=L.shift())),k.search=Q.search,k.query=Q.query,a.isNull(k.pathname)&&a.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.href=k.format(),k;if(!oe.length)return k.pathname=null,k.search?k.path="/"+k.search:k.path=null,k.href=k.format(),k;for(var _e=oe.slice(-1)[0],Ee=(k.host||Q.host||oe.length>1)&&("."===_e||".."===_e)||""===_e,$=0,m=oe.length;m>=0;m--)"."===(_e=oe[m])?oe.splice(m,1):".."===_e?(oe.splice(m,1),$++):$&&(oe.splice(m,1),$--);if(!de&&!ue)for(;$--;$)oe.unshift("..");!de||""===oe[0]||oe[0]&&"/"===oe[0].charAt(0)||oe.unshift(""),Ee&&"/"!==oe.join("/").substr(-1)&&oe.push("");var L,q=""===oe[0]||oe[0]&&"/"===oe[0].charAt(0);return he&&(k.hostname=k.host=q?"":oe.length?oe.shift():"",(L=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=L.shift(),k.host=k.hostname=L.shift())),(de=de||k.host&&oe.length)&&!q&&oe.unshift(""),oe.length?k.pathname=oe.join("/"):(k.pathname=null,k.path=null),a.isNull(k.pathname)&&a.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.auth=Q.auth||k.auth,k.slashes=k.slashes||Q.slashes,k.href=k.format(),k},x.prototype.parseHost=function(){var Q=this.host,I=e.exec(Q);I&&(":"!==(I=I[0])&&(this.port=I.substr(1)),Q=Q.substr(0,Q.length-I.length)),Q&&(this.hostname=Q)}},{"./util":113,punycode:60,querystring:63}],113:[function(D,ne,V){"use strict";ne.exports={isString:function(N){return"string"==typeof N},isObject:function(N){return"object"==typeof N&&null!==N},isNull:function(N){return null===N},isNullOrUndefined:function(N){return null==N}}},{}],114:[function(D,ne,V){(function(N){(function(){function a(x){try{if(!N.localStorage)return!1}catch{return!1}var l=N.localStorage[x];return null!=l&&"true"===String(l).toLowerCase()}ne.exports=function(x,l){if(a("noDeprecation"))return x;var e=!1;return function(){if(!e){if(a("throwDeprecation"))throw new Error(l);a("traceDeprecation")?console.trace(l):console.warn(l),e=!0}return x.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],115:[function(D,ne,V){ne.exports=function(N){return N&&"object"==typeof N&&"function"==typeof N.copy&&"function"==typeof N.fill&&"function"==typeof N.readUInt8}},{}],116:[function(D,ne,V){"use strict";var N=D("is-arguments"),a=D("is-generator-function"),x=D("which-typed-array"),l=D("is-typed-array");function e(M){return M.call.bind(M)}var r=typeof BigInt<"u",n=typeof Symbol<"u",o=e(Object.prototype.toString),u=e(Number.prototype.valueOf),d=e(String.prototype.valueOf),v=e(Boolean.prototype.valueOf);if(r)var c=e(BigInt.prototype.valueOf);if(n)var h=e(Symbol.prototype.valueOf);function f(M,z){if("object"!=typeof M)return!1;try{return z(M),!0}catch{return!1}}function O(M){return"[object Map]"===o(M)}function T(M){return"[object Set]"===o(M)}function P(M){return"[object WeakMap]"===o(M)}function Q(M){return"[object WeakSet]"===o(M)}function I(M){return"[object ArrayBuffer]"===o(M)}function k(M){return typeof ArrayBuffer<"u"&&(I.working?I(M):M instanceof ArrayBuffer)}function G(M){return"[object DataView]"===o(M)}function J(M){return typeof DataView<"u"&&(G.working?G(M):M instanceof DataView)}V.isArgumentsObject=N,V.isGeneratorFunction=a,V.isTypedArray=l,V.isPromise=function(M){return typeof Promise<"u"&&M instanceof Promise||null!==M&&"object"==typeof M&&"function"==typeof M.then&&"function"==typeof M.catch},V.isArrayBufferView=function(M){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(M):l(M)||J(M)},V.isUint8Array=function(M){return"Uint8Array"===x(M)},V.isUint8ClampedArray=function(M){return"Uint8ClampedArray"===x(M)},V.isUint16Array=function(M){return"Uint16Array"===x(M)},V.isUint32Array=function(M){return"Uint32Array"===x(M)},V.isInt8Array=function(M){return"Int8Array"===x(M)},V.isInt16Array=function(M){return"Int16Array"===x(M)},V.isInt32Array=function(M){return"Int32Array"===x(M)},V.isFloat32Array=function(M){return"Float32Array"===x(M)},V.isFloat64Array=function(M){return"Float64Array"===x(M)},V.isBigInt64Array=function(M){return"BigInt64Array"===x(M)},V.isBigUint64Array=function(M){return"BigUint64Array"===x(M)},O.working=typeof Map<"u"&&O(new Map),V.isMap=function(M){return typeof Map<"u"&&(O.working?O(M):M instanceof Map)},T.working=typeof Set<"u"&&T(new Set),V.isSet=function(M){return typeof Set<"u"&&(T.working?T(M):M instanceof Set)},P.working=typeof WeakMap<"u"&&P(new WeakMap),V.isWeakMap=function(M){return typeof WeakMap<"u"&&(P.working?P(M):M instanceof WeakMap)},Q.working=typeof WeakSet<"u"&&Q(new WeakSet),V.isWeakSet=function(M){return Q(M)},I.working=typeof ArrayBuffer<"u"&&I(new ArrayBuffer),V.isArrayBuffer=k,G.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&G(new DataView(new ArrayBuffer(1),0,1)),V.isDataView=J;var X=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function U(M){return"[object SharedArrayBuffer]"===o(M)}function K(M){return void 0!==X&&(void 0===U.working&&(U.working=U(new X)),U.working?U(M):M instanceof X)}function ie(M){return f(M,u)}function ce(M){return f(M,d)}function ve(M){return f(M,v)}function fe(M){return r&&f(M,c)}function Y(M){return n&&f(M,h)}V.isSharedArrayBuffer=K,V.isAsyncFunction=function(M){return"[object AsyncFunction]"===o(M)},V.isMapIterator=function(M){return"[object Map Iterator]"===o(M)},V.isSetIterator=function(M){return"[object Set Iterator]"===o(M)},V.isGeneratorObject=function(M){return"[object Generator]"===o(M)},V.isWebAssemblyCompiledModule=function(M){return"[object WebAssembly.Module]"===o(M)},V.isNumberObject=ie,V.isStringObject=ce,V.isBooleanObject=ve,V.isBigIntObject=fe,V.isSymbolObject=Y,V.isBoxedPrimitive=function(M){return ie(M)||ce(M)||ve(M)||fe(M)||Y(M)},V.isAnyArrayBuffer=function(M){return typeof Uint8Array<"u"&&(k(M)||K(M))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(M){Object.defineProperty(V,M,{enumerable:!1,value:function(){throw new Error(M+" is not supported in userland")}})})},{"is-arguments":23,"is-generator-function":25,"is-typed-array":26,"which-typed-array":118}],117:[function(D,ne,V){(function(N){(function(){var a=Object.getOwnPropertyDescriptors||function(M){for(var z=Object.keys(M),Z={},ae=0;ae<z.length;ae++)Z[z[ae]]=Object.getOwnPropertyDescriptor(M,z[ae]);return Z},x=/%[sdj%]/g;V.format=function(M){if(!P(M)){for(var z=[],Z=0;Z<arguments.length;Z++)z.push(n(arguments[Z]));return z.join(" ")}Z=1;for(var ae=arguments,de=ae.length,ue=String(M).replace(x,function(he){if("%%"===he)return"%";if(Z>=de)return he;switch(he){case"%s":return String(ae[Z++]);case"%d":return Number(ae[Z++]);case"%j":try{return JSON.stringify(ae[Z++])}catch{return"[Circular]"}default:return he}}),oe=ae[Z];Z<de;oe=ae[++Z])O(oe)||!k(oe)?ue+=" "+oe:ue+=" "+n(oe);return ue},V.deprecate=function(M,z){if(void 0!==N&&!0===N.noDeprecation)return M;if(void 0===N)return function(){return V.deprecate(M,z).apply(this,arguments)};var Z=!1;return function(){if(!Z){if(N.throwDeprecation)throw new Error(z);N.traceDeprecation?console.trace(z):console.error(z),Z=!0}return M.apply(this,arguments)}};var l={},e=/^$/;if(N.env.NODE_DEBUG){var r=N.env.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+r+"$","i")}function n(M,z){var Z={seen:[],stylize:u};return arguments.length>=3&&(Z.depth=arguments[2]),arguments.length>=4&&(Z.colors=arguments[3]),f(z)?Z.showHidden=z:z&&V._extend(Z,z),Q(Z.showHidden)&&(Z.showHidden=!1),Q(Z.depth)&&(Z.depth=2),Q(Z.colors)&&(Z.colors=!1),Q(Z.customInspect)&&(Z.customInspect=!0),Z.colors&&(Z.stylize=o),d(Z,M,Z.depth)}function o(M,z){var Z=n.styles[z];return Z?"\x1b["+n.colors[Z][0]+"m"+M+"\x1b["+n.colors[Z][1]+"m":M}function u(M,z){return M}function d(M,z,Z){if(M.customInspect&&z&&X(z.inspect)&&z.inspect!==V.inspect&&(!z.constructor||z.constructor.prototype!==z)){var ae=z.inspect(Z,M);return P(ae)||(ae=d(M,ae,Z)),ae}var de=function(L,q){if(Q(q))return L.stylize("undefined","undefined");if(P(q)){var re="'"+JSON.stringify(q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(re,"string")}return T(q)?L.stylize(""+q,"number"):f(q)?L.stylize(""+q,"boolean"):O(q)?L.stylize("null","null"):void 0}(M,z);if(de)return de;var q,ue=Object.keys(z),oe=(q={},ue.forEach(function(re,se){q[re]=!0}),q);if(M.showHidden&&(ue=Object.getOwnPropertyNames(z)),J(z)&&(ue.indexOf("message")>=0||ue.indexOf("description")>=0))return v(z);if(0===ue.length){if(X(z)){var he=z.name?": "+z.name:"";return M.stylize("[Function"+he+"]","special")}if(I(z))return M.stylize(RegExp.prototype.toString.call(z),"regexp");if(G(z))return M.stylize(Date.prototype.toString.call(z),"date");if(J(z))return v(z)}var _e,Ee="",$=!1,m=["{","}"];return h(z)&&($=!0,m=["[","]"]),X(z)&&(Ee=" [Function"+(z.name?": "+z.name:"")+"]"),I(z)&&(Ee=" "+RegExp.prototype.toString.call(z)),G(z)&&(Ee=" "+Date.prototype.toUTCString.call(z)),J(z)&&(Ee=" "+v(z)),0!==ue.length||$&&0!=z.length?Z<0?I(z)?M.stylize(RegExp.prototype.toString.call(z),"regexp"):M.stylize("[Object]","special"):(M.seen.push(z),_e=$?function(L,q,re,se,le){for(var Ae=[],Se=0,je=q.length;Se<je;++Se)ve(q,String(Se))?Ae.push(c(L,q,re,se,String(Se),!0)):Ae.push("");return le.forEach(function(Ne){Ne.match(/^\d+$/)||Ae.push(c(L,q,re,se,Ne,!0))}),Ae}(M,z,Z,oe,ue):ue.map(function(L){return c(M,z,Z,oe,L,$)}),M.seen.pop(),function(L,q,re){return L.reduce(function(le,Ae){return Ae.indexOf("\n"),le+Ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?re[0]+(""===q?"":q+"\n ")+" "+L.join(",\n  ")+" "+re[1]:re[0]+q+" "+L.join(", ")+" "+re[1]}(_e,Ee,m)):m[0]+Ee+m[1]}function v(M){return"["+Error.prototype.toString.call(M)+"]"}function c(M,z,Z,ae,de,ue){var oe,he,_e;if((_e=Object.getOwnPropertyDescriptor(z,de)||{value:z[de]}).get?he=_e.set?M.stylize("[Getter/Setter]","special"):M.stylize("[Getter]","special"):_e.set&&(he=M.stylize("[Setter]","special")),ve(ae,de)||(oe="["+de+"]"),he||(M.seen.indexOf(_e.value)<0?(he=O(Z)?d(M,_e.value,null):d(M,_e.value,Z-1)).indexOf("\n")>-1&&(he=ue?he.split("\n").map(function(Ee){return"  "+Ee}).join("\n").substr(2):"\n"+he.split("\n").map(function(Ee){return"   "+Ee}).join("\n")):he=M.stylize("[Circular]","special")),Q(oe)){if(ue&&de.match(/^\d+$/))return he;(oe=JSON.stringify(""+de)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.substr(1,oe.length-2),oe=M.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=M.stylize(oe,"string"))}return oe+": "+he}function h(M){return Array.isArray(M)}function f(M){return"boolean"==typeof M}function O(M){return null===M}function T(M){return"number"==typeof M}function P(M){return"string"==typeof M}function Q(M){return void 0===M}function I(M){return k(M)&&"[object RegExp]"===U(M)}function k(M){return"object"==typeof M&&null!==M}function G(M){return k(M)&&"[object Date]"===U(M)}function J(M){return k(M)&&("[object Error]"===U(M)||M instanceof Error)}function X(M){return"function"==typeof M}function U(M){return Object.prototype.toString.call(M)}function K(M){return M<10?"0"+M.toString(10):M.toString(10)}V.debuglog=function(M){if(M=M.toUpperCase(),!l[M])if(e.test(M)){var z=N.pid;l[M]=function(){var Z=V.format.apply(V,arguments);console.error("%s %d: %s",M,z,Z)}}else l[M]=function(){};return l[M]},V.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},V.types=D("./support/types"),V.isArray=h,V.isBoolean=f,V.isNull=O,V.isNullOrUndefined=function(M){return null==M},V.isNumber=T,V.isString=P,V.isSymbol=function(M){return"symbol"==typeof M},V.isUndefined=Q,V.isRegExp=I,V.types.isRegExp=I,V.isObject=k,V.isDate=G,V.types.isDate=G,V.isError=J,V.types.isNativeError=J,V.isFunction=X,V.isPrimitive=function(M){return null===M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||"symbol"==typeof M||void 0===M},V.isBuffer=D("./support/isBuffer");var ie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ve(M,z){return Object.prototype.hasOwnProperty.call(M,z)}V.log=function(){console.log("%s - %s",function ce(){var M=new Date,z=[K(M.getHours()),K(M.getMinutes()),K(M.getSeconds())].join(":");return[M.getDate(),ie[M.getMonth()],z].join(" ")}(),V.format.apply(V,arguments))},V.inherits=D("inherits"),V._extend=function(M,z){if(!z||!k(z))return M;for(var Z=Object.keys(z),ae=Z.length;ae--;)M[Z[ae]]=z[Z[ae]];return M};var fe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Y(M,z){if(!M){var Z=new Error("Promise was rejected with a falsy value");Z.reason=M,M=Z}return z(M)}V.promisify=function(M){if("function"!=typeof M)throw new TypeError('The "original" argument must be of type Function');if(fe&&M[fe]){var z;if("function"!=typeof(z=M[fe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,fe,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var Z,ae,de=new Promise(function(he,_e){Z=he,ae=_e}),ue=[],oe=0;oe<arguments.length;oe++)ue.push(arguments[oe]);ue.push(function(he,_e){he?ae(he):Z(_e)});try{M.apply(this,ue)}catch(he){ae(he)}return de}return Object.setPrototypeOf(z,Object.getPrototypeOf(M)),fe&&Object.defineProperty(z,fe,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,a(M))},V.promisify.custom=fe,V.callbackify=function(M){if("function"!=typeof M)throw new TypeError('The "original" argument must be of type Function');function z(){for(var Z=[],ae=0;ae<arguments.length;ae++)Z.push(arguments[ae]);var de=Z.pop();if("function"!=typeof de)throw new TypeError("The last argument must be of type Function");var ue=this,oe=function(){return de.apply(ue,arguments)};M.apply(this,Z).then(function(he){N.nextTick(oe.bind(null,null,he))},function(he){N.nextTick(Y.bind(null,he,oe))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(M)),Object.defineProperties(z,a(M)),z}}).call(this)}).call(this,D("_process"))},{"./support/isBuffer":115,"./support/types":116,_process:59,inherits:22}],118:[function(D,ne,V){(function(N){(function(){"use strict";var a=D("for-each"),x=D("available-typed-arrays"),l=D("call-bind/callBound"),e=l("Object.prototype.toString"),r=D("has-tostringtag/shams")(),n=typeof globalThis>"u"?N:globalThis,o=x(),u=l("String.prototype.slice"),d={},v=D("es-abstract/helpers/getOwnPropertyDescriptor"),c=Object.getPrototypeOf;r&&v&&c&&a(o,function(f){if("function"==typeof n[f]){var O=new n[f];if(Symbol.toStringTag in O){var T=c(O),P=v(T,Symbol.toStringTag);if(!P){var Q=c(T);P=v(Q,Symbol.toStringTag)}d[f]=P.get}}});var h=D("is-typed-array");ne.exports=function(f){return!!h(f)&&(r&&Symbol.toStringTag in f?(O=f,T=!1,a(d,function(P,Q){if(!T)try{var I=P.call(O);I===Q&&(T=I)}catch{}}),T):u(e(f),8,-1));var O,T}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind/callBound":7,"es-abstract/helpers/getOwnPropertyDescriptor":10,"for-each":12,"has-tostringtag/shams":18,"is-typed-array":26}],119:[function(D,ne,V){ne.exports=function(){for(var a={},x=0;x<arguments.length;x++){var l=arguments[x];for(var e in l)N.call(l,e)&&(a[e]=l[e])}return a};var N=Object.prototype.hasOwnProperty},{}],120:[function(D,ne,V){"use strict";ne.exports=function(N){N.prototype[Symbol.iterator]=function*(){for(let a=this.head;a;a=a.next)yield a.value}}},{}],121:[function(D,ne,V){"use strict";function N(r){var n=this;if(n instanceof N||(n=new N),n.tail=null,n.head=null,n.length=0,r&&"function"==typeof r.forEach)r.forEach(function(d){n.push(d)});else if(arguments.length>0)for(var o=0,u=arguments.length;o<u;o++)n.push(arguments[o]);return n}function a(r,n,o){var u=n===r.head?new e(o,null,n,r):new e(o,n,n.next,r);return null===u.next&&(r.tail=u),null===u.prev&&(r.head=u),r.length++,u}function x(r,n){r.tail=new e(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function l(r,n){r.head=new e(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function e(r,n,o,u){if(!(this instanceof e))return new e(r,n,o,u);this.list=u,this.value=r,n?(n.next=this,this.prev=n):this.prev=null,o?(o.prev=this,this.next=o):this.next=null}ne.exports=N,N.Node=e,N.create=N,N.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var n=r.next,o=r.prev;return n&&(n.prev=o),o&&(o.next=n),r===this.head&&(this.head=n),r===this.tail&&(this.tail=o),r.list.length--,r.next=null,r.prev=null,r.list=null,n},N.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var n=this.head;r.list=this,r.next=n,n&&(n.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},N.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var n=this.tail;r.list=this,r.prev=n,n&&(n.next=r),this.tail=r,this.head||(this.head=r),this.length++}},N.prototype.push=function(){for(var r=0,n=arguments.length;r<n;r++)x(this,arguments[r]);return this.length},N.prototype.unshift=function(){for(var r=0,n=arguments.length;r<n;r++)l(this,arguments[r]);return this.length},N.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},N.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},N.prototype.forEach=function(r,n){n=n||this;for(var o=this.head,u=0;null!==o;u++)r.call(n,o.value,u,this),o=o.next},N.prototype.forEachReverse=function(r,n){n=n||this;for(var o=this.tail,u=this.length-1;null!==o;u--)r.call(n,o.value,u,this),o=o.prev},N.prototype.get=function(r){for(var n=0,o=this.head;null!==o&&n<r;n++)o=o.next;if(n===r&&null!==o)return o.value},N.prototype.getReverse=function(r){for(var n=0,o=this.tail;null!==o&&n<r;n++)o=o.prev;if(n===r&&null!==o)return o.value},N.prototype.map=function(r,n){n=n||this;for(var o=new N,u=this.head;null!==u;)o.push(r.call(n,u.value,this)),u=u.next;return o},N.prototype.mapReverse=function(r,n){n=n||this;for(var o=new N,u=this.tail;null!==u;)o.push(r.call(n,u.value,this)),u=u.prev;return o},N.prototype.reduce=function(r,n){var o,u=this.head;if(arguments.length>1)o=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");u=this.head.next,o=this.head.value}for(var d=0;null!==u;d++)o=r(o,u.value,d),u=u.next;return o},N.prototype.reduceReverse=function(r,n){var o,u=this.tail;if(arguments.length>1)o=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");u=this.tail.prev,o=this.tail.value}for(var d=this.length-1;null!==u;d--)o=r(o,u.value,d),u=u.prev;return o},N.prototype.toArray=function(){for(var r=new Array(this.length),n=0,o=this.head;null!==o;n++)r[n]=o.value,o=o.next;return r},N.prototype.toArrayReverse=function(){for(var r=new Array(this.length),n=0,o=this.tail;null!==o;n++)r[n]=o.value,o=o.prev;return r},N.prototype.slice=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var o=new N;if(n<r||n<0)return o;r<0&&(r=0),n>this.length&&(n=this.length);for(var u=0,d=this.head;null!==d&&u<r;u++)d=d.next;for(;null!==d&&u<n;u++,d=d.next)o.push(d.value);return o},N.prototype.sliceReverse=function(r,n){(n=n||this.length)<0&&(n+=this.length),(r=r||0)<0&&(r+=this.length);var o=new N;if(n<r||n<0)return o;r<0&&(r=0),n>this.length&&(n=this.length);for(var u=this.length,d=this.tail;null!==d&&u>n;u--)d=d.prev;for(;null!==d&&u>r;u--,d=d.prev)o.push(d.value);return o},N.prototype.splice=function(r,n,...o){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var u=0,d=this.head;null!==d&&u<r;u++)d=d.next;var v=[];for(u=0;d&&u<n;u++)v.push(d.value),d=this.removeNode(d);for(null===d&&(d=this.tail),d!==this.head&&d!==this.tail&&(d=d.prev),u=0;u<o.length;u++)d=a(this,d,o[u]);return v},N.prototype.reverse=function(){for(var r=this.head,n=this.tail,o=r;null!==o;o=o.prev){var u=o.prev;o.prev=o.next,o.next=u}return this.head=n,this.tail=r,this};try{D("./iterator.js")(N)}catch{}},{"./iterator.js":120}],122:[function(D,ne,V){var N=D("./parser"),a=D("./utils"),x=a;function l(r,n){this.name="NonSupportedSparqlFeatureError",this.feature=r,this.message=n||"SPARQL feature "+r+" non supported"}function e(r){this.name=ParserError,this.message=r||"Error parsing SPARQL query"}l.prototype=new Error,l.constructor=l,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(r){return N.parse(r)},AbstractQueryTree.prototype.parseExecutableUnit=function(r){if("select"===r.kind)return this.parseSelect(r);if("ask"===r.kind)return this.parseSelect(r);if("modify"===r.kind)return this.parseSelect(r);if("construct"===r.kind)return this.parseSelect(r);if("insertdata"===r.kind)return this.parseInsertData(r);if("deletedata"===r.kind)return this.parseInsertData(r);if("load"===r.kind||"clear"===r.kind||"drop"===r.kind||"create"===r.kind)return r;throw new Error("unknown executable unit: "+r.kind)},AbstractQueryTree.prototype.parseSelect=function(r){return null==r?(console.log("error parsing query"),null):(r.pattern=this.build(r.pattern,{freshCounter:0}),r)},AbstractQueryTree.prototype.parseInsertData=function(r){return r??(console.log("error parsing query"),null)},AbstractQueryTree.prototype.build=function(r,n){if("groupgraphpattern"===r.token)return this._buildGroupGraphPattern(r,n);if("basicgraphpattern"===r.token){var o={kind:"BGP",value:r.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(o,n)}if("graphunionpattern"===r.token)return{kind:"UNION",value:[this.build(r.value[0],n),this.build(r.value[1],n)]};if("graphgraphpattern"===r.token)return{kind:"GRAPH",value:this.build(r.value,n),graph:r.graph};throw null!=r.token?new l(r.token,"Non implemented SPARQL graph pattern: '"+r.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(r)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(r,n){for(var o,u,d,v=[],c=0;c<r.value.length;c++)if(r.value[c].predicate&&"path"===r.value[c].predicate.token){o=r.value[c],u=r.value.slice(c+1);var h=AbstractQueryTree.translatePathExpression(o,n),f=null;if("BGP"!==h.kind){if("ZERO_OR_MORE_PATH"===h.kind||"ONE_OR_MORE_PATH"===h.kind){if(d=v.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:v},rvalue:h}:h,"ZERO_OR_MORE_PATH"===h.kind)if("var"===h.y.token&&0===h.y.value.indexOf("fresh:")&&"var"===h.x.token&&0===h.x.value.indexOf("fresh:"))for(var O=0;O<r.value.length;O++)r.value[O].object&&"var"===r.value[O].object.token&&r.value[O].object.value===h.x.value&&((f=x.clone(r.value[O],!0)).object=h.y);else if("var"===h.y.token&&0===h.y.value.indexOf("fresh:"))for(O=0;O<r.value.length;O++)r.value[O].subject&&"var"===r.value[O].subject.token&&r.value[O].subject.value===h.y.value&&((f=x.clone(r.value[O],!0)).subject=h.x);if(u.length>0){var T=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:u},n);return null!=f?{kind:"UNION",value:[{kind:"JOIN",lvalue:d,rvalue:T},{kind:"BGP",value:v.concat([f]).concat(u)}]}:{kind:"JOIN",lvalue:d,rvalue:T}}return d}return h}v=v.concat(h.value)}else v.push(r.value[c]);return r.value=v,r},AbstractQueryTree.translatePathExpression=function(r,n){if("element"===r.predicate.kind)return"+"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,n),x:r.subject,y:r.object}):"*"===r.predicate.modifier?(r.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,n),x:r.subject,y:r.object}):(r.predicate=r.predicate.value,{kind:"BGP",value:[r]});if("sequence"===r.predicate.kind){for(var o,u,d=r.subject,v=r.object,c=r.graph,h=[],f=0;f<r.predicate.value.length;f++)f!=r.predicate.value.length-1?(o={token:"var",value:"fresh:"+n.freshCounter},n.freshCounter++):o=v,u={subject:d,predicate:r.predicate.value[f],object:o},null!=c&&(u.graph=x.clone(c,!0)),h.push(u),f!=r.predicate.value.length-1&&(d=x.clone(o,!0));var O={kind:"BGP",value:h};return AbstractQueryTree.translatePathExpressionsInBGP(O,n)}throw new l("Non supported path expression "+r.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(r,n){for(var o=r.filters||[],u=r.binds||[],d={kind:"EMPTY_PATTERN"},v=0;v<r.patterns.length;v++){var c=r.patterns[v];if("optionalgraphpattern"===c.token)d="FILTER"===(h=this.build(c.value,n)).kind?{kind:"LEFT_JOIN",lvalue:d,rvalue:h.value,filter:h.filter}:{kind:"LEFT_JOIN",lvalue:d,rvalue:h,filter:!0};else{var h=this.build(c,n);d="EMPTY_PATTERN"==d.kind?h:{kind:"JOIN",lvalue:d,rvalue:h}}}if(d.binds=u,0!=o.length){if("EMPTY_PATTERN"===d.kind)return{kind:"FILTER",filter:o,value:d};if("LEFT_JOIN"===d.kind&&!0===d.filter)return{kind:"FILTER",filter:o,value:d};if("LEFT_JOIN"===d.kind)return{kind:"FILTER",filter:o,value:d};if("JOIN"===d.kind)return{kind:"FILTER",filter:o,value:d};if("UNION"===d.kind)return{kind:"FILTER",filter:o,value:d};if("GRAPH"===d.kind)return{kind:"FILTER",filter:o,value:d};if("BGP"===d.kind)return{kind:"FILTER",filter:o,value:d};throw new Error("Unknow kind of algebra expression: "+d.kind)}return d},AbstractQueryTree.prototype.collectBasicTriples=function(r,n){if(null==n&&(n=[]),"select"===r.kind)n=this.collectBasicTriples(r.pattern,n);else if("BGP"===r.kind)n=n.concat(r.value);else if("ZERO_OR_MORE_PATH"===r.kind)n=this.collectBasicTriples(r.path);else if("UNION"===r.kind)n=this.collectBasicTriples(r.value[0],n),n=this.collectBasicTriples(r.value[1],n);else if("GRAPH"===r.kind)n=this.collectBasicTriples(r.value,n);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)n=this.collectBasicTriples(r.lvalue,n),n=this.collectBasicTriples(r.rvalue,n);else if("FILTER"===r.kind)n=this.collectBasicTriples(r.value,n);else if("construct"===r.kind)n=this.collectBasicTriples(r.pattern,n);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return n},AbstractQueryTree.prototype.bind=function(r,n){if(null!=r.graph&&r.graph.token&&"var"===r.graph.token&&null!=n[r.graph.value]&&(r.graph=n[r.graph.value]),null!=r.filter){for(var o=[],u=0;u<r.filter.length;u++)r.filter[u].value=this._bindFilter(r.filter[u].value,n),o.push(r.filter[u]);r.filter=o}if("select"===r.kind)r.pattern=this.bind(r.pattern,n);else if("BGP"===r.kind)r.value=this._bindTripleContext(r.value,n);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._bindTripleContext(r.path,n),r.x&&"var"===r.x.token&&null!=n[r.x.value]&&(r.x=n[r.x.value]),r.y&&"var"===r.y.token&&null!=n[r.y.value]&&(r.y=n[r.y.value]);else if("UNION"===r.kind)r.value[0]=this.bind(r.value[0],n),r.value[1]=this.bind(r.value[1],n);else if("GRAPH"===r.kind)r.value=this.bind(r.value,n);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.bind(r.lvalue,n),r.rvalue=this.bind(r.rvalue,n);else if("FILTER"===r.kind){var d=this;r.value=this.bind(r.value,n),r.filter=r.filter.map(function(v){return{token:"filter",value:d._bindFilter(v.value,n)}})}else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._bindTripleContext=function(r,n){for(var o=0;o<r.length;o++)for(var u in delete r[o].graph,delete r[o].variables,r[o]){var d=r[o][u];"var"===d.token&&null!=n[d.value]&&(r[o][u]=n[d.value])}return r},AbstractQueryTree.prototype._bindFilter=function(r,n){if(null!=r.expressionType){var o=r.expressionType;if("relationalexpression"==o)r.op1=this._bindFilter(r.op1,n),r.op2=this._bindFilter(r.op2,n);else if("conditionalor"==o||"conditionaland"==o)for(var u=0;u<r.operands.length;u++)r.operands[u]=this._bindFilter(r.operands[u],n);else if("additiveexpression"==o)for(r.summand=this._bindFilter(r.summand,n),u=0;u<r.summands.length;u++)r.summands[u].expression=this._bindFilter(r.summands[u].expression,n);else if("builtincall"==o)for(u=0;u<r.args.length;u++)r.args[u]=this._bindFilter(r.args[u],n);else if("multiplicativeexpression"==o)for(r.factor=this._bindFilter(r.factor,n),u=0;u<r.factors.length;u++)r.factors[u].expression=this._bindFilter(r.factors[u].expression,n);else if("unaryexpression"==o)r.expression=this._bindFilter(r.expression,n);else if("irireforfunction"==o)for(u=0;u<r.factors.args;u++)r.args[u]=this._bindFilter(r.args[u],n);else if("atomic"==o&&"var"==r.primaryexpression&&null!=n[r.value.value]){var d=n[r.value.value];"uri"===d.token?r.primaryexpression="iri":r.primaryexpression="literal",r.value=d}}return r},AbstractQueryTree.prototype.replace=function(r,n,o,u){if(null!=r.graph&&r.graph.token&&r.graph.token===n.token&&r.graph.value==n.value&&(r.graph=x.clone(o,!0)),null!=r.filter){for(var d=[],v=0;v<r.filter.length;v++)r.filter[v].value=this._replaceFilter(r.filter[v].value,n,o,u),d.push(r.filter[v]);r.filter=d}if("select"===r.kind)r.pattern=this.replace(r.pattern,n,o,u);else if("BGP"===r.kind)r.value=this._replaceTripleContext(r.value,n,o,u);else if("ZERO_OR_MORE_PATH"===r.kind)r.path=this._replaceTripleContext(r.path,n,o,u),r.x&&r.x.token===n.token&&r.value===n.value&&(r.x=x.clone(o,!0)),r.y&&r.y.token===n.token&&r.value===n.value&&(r.y=x.clone(o,!0));else if("UNION"===r.kind)r.value[0]=this.replace(r.value[0],n,o,u),r.value[1]=this.replace(r.value[1],n,o,u);else if("GRAPH"===r.kind)r.value=this.replace(r.value,n,o);else if("LEFT_JOIN"===r.kind||"JOIN"===r.kind)r.lvalue=this.replace(r.lvalue,n,o,u),r.rvalue=this.replace(r.rvalue,n,o,u);else if("FILTER"===r.kind)r.value=this._replaceFilter(r.value,n,o,u);else if("EMPTY_PATTERN"!==r.kind)throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._replaceTripleContext=function(r,n,o,u){for(var d=0;d<r.length;d++)for(var v in r[d]){var c=r[d][v];"var"===c.token&&"var"===n.token&&c.value===n.value||"blank"===c.token&&"blank"===n.token&&c.value===n.value?r[d][v]=o:"literal"!==c.token&&"uri"!==c.token||"literal"!==n.token&&"uri"!==n.token||c.token!==n.token||a.lexicalFormTerm(c,u)[c.token]!==a.lexicalFormTerm(n,u)[c.token]||(r[d][v]=o)}return r},AbstractQueryTree.prototype._replaceFilter=function(r,n,o,u){if(null!=r.expressionType){var d=r.expressionType;if("relationalexpression"==d)r.op1=this._replaceFilter(r.op1,n,o,u),r.op2=this._replaceFilter(r.op2,n,o,u);else if("conditionalor"==d||"conditionaland"==d)for(var v=0;v<r.operands.length;v++)r.operands[v]=this._replaceFilter(r.operands[v],n,o,u);else if("additiveexpression"==d)for(r.summand=this._replaceFilter(r.summand,n,o,u),v=0;v<r.summands.length;v++)r.summands[v].expression=this._replaceFilter(r.summands[v].expression,n,o,u);else if("builtincall"==d)for(v=0;v<r.args.length;v++)r.args[v]=this._replaceFilter(r.args[v],n,o,u);else if("multiplicativeexpression"==d)for(r.factor=this._replaceFilter(r.factor,n,o,u),v=0;v<r.factors.length;v++)r.factors[v].expression=this._replaceFilter(r.factors[v].expression,n,o,u);else if("unaryexpression"==d)r.expression=this._replaceFilter(r.expression,n,o,u);else if("irireforfunction"==d)for(v=0;v<r.factors.args;v++)r.args[v]=this._replaceFilter(r.args[v],n,o,u);else if("atomic"==d){var c=null;(r.primaryexpression==n.token&&r.value==n.value||"iri"==r.primaryexpression&&"uri"==n.token&&r.value==n.value)&&(c=o.value),null!=c&&("uri"===o.token?r.primaryexpression="iri":r.primaryexpression=o.token,r.value=c)}}return r},AbstractQueryTree.prototype.treeWithUnion=function(r){if(null==r||null==r.kind)return!1;if("select"===r.kind)return this.treeWithUnion(r.pattern);if("BGP"===r.kind)return this.treeWithUnion(r.value);if("ZERO_OR_MORE_PATH"===r.kind)return!1;if("UNION"===r.kind){if(null==r.value[0].value||null==r.value[0].value.variables||null==r.value[1].value||null==r.value[1].value.variables)return!0;if(r.value[0].variables.join("/")===r.values[1].variables.join("/"))return!!this.treeWithUnion(r.value[0])||this.treeWithUnion(r.value[1])}else{if("GRAPH"===r.kind)return!1;if("LEFT_JOIN"!==r.kind&&"JOIN"!==r.kind)return"FILTER"===r.kind||r.kind,!1;if(this.treeWithUnion(r.lvalue))return!0;this.treeWithUnion(r.rvalue)}},ne.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:l,SparqlParserError:e}},{"./parser":128,"./utils":140}],123:[function(D,ne,V){"use strict";var N=D("./utils"),a=N,x=N.nextTick,l=function(r,n){if(0!=arguments.length){this.order=r,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var o=this;this._diskWrite(this.root,function(u){o.root=u,o._updateRootNode(o.root,function(d){o.comparator=function(v,c){return v<c?-1:v>c?1:0},o.merger=null,n?.(o)})})}};l.prototype._allocateNode=function(){return new e},l.prototype._diskWrite=function(r,n){x(function(){n(r)})},l.prototype._diskRead=function(r,n){x(function(){n(r)})},l.prototype._diskDelete=function(r,n){x(function(){n()})},l.prototype._updateRootNode=function(r,n){n(r)},l.prototype.search=function(r,n,o){var u=this.root;this.__search(this,r,u,n,o)},l.prototype.__search=function(r,n,o,u,d){for(var v=0;v<o.numberActives&&1===r.comparator(n,o.keys[v].key);)v++;v<o.numberActives&&0===r.comparator(o.keys[v].key,n)?u(null!=d&&1==d||o.keys[v].data):!0===o.isLeaf?u(null):r._diskRead(o.children[v],function(c){r.__search(r,n,c,u,d)})},l.prototype.walk=function(r,n){this.__walk(this,this.root,r,n)},l.prototype.__walk=function(r,n,o,u){var d=n.numberActives,v=0;if(n.isLeaf){for(v=0;v<n.numberActives;v++)o(n.keys[v]);return u()}a.whilst(function(){return v<d},function(c){r._diskRead(n.children[v],function(h){r.__walk(r,h,o,function(){r._diskRead(n.keys[v],function(f){o(f),v++,c()})})})},function(){r._diskRead(n.children[d],function(c){r.__walk(r,c,o,function(){u()})})})},l.prototype.walkNodes=function(r){this.__walkNodes(this,root,r,function(){})},l.prototype.__walkNodes=function(r,n,o,u){if(n.isLeaf)return o(n),u();o(n);var d=n.numberActives,v=0;a.whilst(function(){return v<d},function(c){r._diskRead(n.children[v],function(h){r.__walkNodes(r,h,o,function(){v++,c()})})},function(){r._diskRead(n.children[d],function(c){r.__walkNodes(r,c,o,function(){})})})},l.prototype._splitChild=function(r,n,o,u){var d=this._allocateNode();d.isLeaf=o.isLeaf,d.level=o.level,d.numberActives=this.order-1;var v=o.keys[this.order-1];o.keys[this.order-1]=null;for(var c=0;c<this.order-1;c++)d.keys[c]=o.keys[c+this.order],o.keys[c+this.order]=null,o.isLeaf||(d.children[c]=o.children[c+this.order],o.children[c+this.order]=null);for(o.isLeaf||(d.children[c]=o.children[c+this.order],o.children[c+this.order]=null),o.numberActives=this.order-1,c=r.numberActives+1;c>n+1;c--)r.children[c]=r.children[c-1];for(r.children[n+1]=d,c=r.numberActives;c>n;c--)r.keys[c]=r.keys[c-1];r.keys[n]=v,r.numberActives++;var h=this;this._diskWrite(d,function(f){h._diskWrite(r,function(O){O.children[n+1]=f,h._diskWrite(o,function(T){return u(O)})})})},l.prototype.insert=function(r,n,o){if(this.root.numberActives===2*this.order-1){var u=this._allocateNode();u.isLeaf=!1,u.level=this.root.level+1,u.numberActives=0,u.children[0]=this.root;var d=this;this._splitChild(u,0,this.root,function(v){u=v,d.root=u,d._updateRootNode(u,function(c){d._insertNonFull(c,r,n,o)})})}else this._insertNonFull(this.root,r,n,o)},l.prototype._insertNonFull=function(r,n,o,u){var d=r.numberActives-1;this.__insertNonFull(this,r,d,n,o,u)},l.prototype.__insertNonFull=function(r,n,o,u,d,v){if(n.isLeaf){for(;o>=0&&-1===r.comparator(u,n.keys[o].key);)n.keys[o+1]=n.keys[o],o--;o>=0&&0===r.comparator(u,n.keys[o].key)?n.keys[o]={key:u,data:d}:(n.keys[o+1]={key:u,data:d},n.numberActives++),r._diskWrite(n,function(h){return v(h)})}else{for(;o>=0&&-1===r.comparator(u,n.keys[o].key);)o--;o++;var c=r;r._diskRead(n.children[o],function(h){h.numberActives===2*c.order-1?c._splitChild(n,o,h,function(){1===c.comparator(u,n.keys[o].key)&&o++,c._diskRead(n.children[o],function(f){o=f.numberActives-1,c.__insertNonFull(r,f,o,u,d,v)})}):c._diskRead(n.children[o],function(f){o=f.numberActives-1,c.__insertNonFull(r,f,o,u,d,v)})})}},l.prototype.delete=function(r,n){var o=this.root;l.prototype.__deleteSearchNode(this,r,o,n)},l.prototype.__deleteSearchNode=function(r,n,o,u){var d=0;if(0===o.numberActives)return u(!1);for(;d<o.numberActives&&1===r.comparator(n,o.keys[d].key);)d++;var v=d;if(d<o.numberActives&&0===r.comparator(n,o.keys[d].key))return r.__deleteNodeFound(r,v,n,o,u);if(!0===o.isLeaf)return u(!1);var c=o;r._diskRead(o.children[d],function(h){if(null===h)return u(!1);var f=!1,O=!1,T=null,P=null;v===c.numberActives?(O=!0,P=c.children[v-1],T=c.children[v-1]):0===v?(f=!0,T=c.children[1],P=c.children[1]):(P=c.children[v-1],T=c.children[v+1]),r._diskRead(P,function(Q){r._diskRead(T,function(I){!0===O&&(I=null),!0===f&&(Q=null),h.numberActives===r.order-1&&null!=c?null!=I&&I.numberActives>r.order-1?r._moveKey(c,d,-1,function(k){r.__deleteSearchNode(r,n,h,u)}):null!=Q&&Q.numberActives>r.order-1?r._moveKey(c,d,1,function(k){r.__deleteSearchNode(r,n,h,u)}):null!=Q&&Q.numberActives===r.order-1?r._mergeSiblings(c,d,-1,function(k){r.__deleteSearchNode(r,n,k,u)}):null!=I&&I.numberActives===r.order-1&&r._mergeSiblings(c,d,1,function(k){r.__deleteSearchNode(r,n,k,u)}):r.__deleteSearchNode(r,n,h,u)})})})},l.prototype.__deleteNodeFound=function(r,n,o,u,d){return u.isLeaf&&u.numberActives>r.order-1||u.isLeaf&&u===r.root?(r._deleteKeyFromNode(u,n,function(){d(!0)}),!0):(!1===u.isLeaf&&r._diskRead(u.children[n],function(v){v.numberActives>r.order-1?r._getMaxKeyPos(r,v,function(c){o=c.node.keys[c.index],u.keys[n]=o,r._diskWrite(u,function(h){h=v,o=o.key,r.__deleteSearchNode(r,o,h,d)})}):r._diskRead(u.children[n+1],function(c){c.numberActives>r.order-1?r._getMinKeyPos(r,c,function(h){o=h.node.keys[h.index],u.keys[n]=o,r._diskWrite(u,function(f){f=c,o=o.key,r.__deleteSearchNode(r,o,f,d)})}):v.numberActives===r.order-1&&c.numberActives===r.order-1&&r._mergeNodes(v,u.keys[n],c,function(h){u.children[n]=h;for(var f=++n;f<u.numberActives;f++)u.children[f]=u.children[f+1],u.keys[f-1]=u.keys[f];u.children[f]=null,u.keys[f-1]=null,u.numberActives--,0===u.numberActives&&r.root===u&&(r.root=h),r._diskWrite(u,function(O){r.__deleteSearchNode(r,o,h,d)})})})}),void(u.isLeaf&&u.numberActives>r.order-1&&r._deleteKeyFromNode(u,n,function(v){r.__deleteSearchNode(r,o,v,d)})))},l.prototype._moveKey=function(r,n,o,u){1===o&&n--;var d=this;d._diskRead(r.children[n],function(v){d._diskRead(r.children[n+1],function(c){if(-1==o){v.keys[v.numberActives]=r.keys[n],v.children[v.numberActives+1]=c.children[0],c.children[0]=null,v.numberActives++,r.keys[n]=c.keys[0];for(var h=1;h<c.numberActives;h++)c.keys[h-1]=c.keys[h],c.children[h-1]=c.children[h];c.children[c.numberActives-1]=c.children[c.numberActives],c.numberActives--}else{for(c.children[c.numberActives+1]=c.children[c.numberActives],h=c.numberActives;h>0;h--)c.children[h]=c.children[h-1],c.keys[h]=c.keys[h-1];c.keys[0]=null,c.children[0]=null,c.children[0]=v.children[v.numberActives],c.keys[0]=r.keys[n],c.numberActives++,v.children[v.numberActives]=null,r.keys[n]=v.keys[v.numberActives-1],v.keys[v.numberActives-1]=null,v.numberActives--}d._diskWrite(v,function(f){d._diskWrite(c,function(O){d._diskWrite(r,function(T){return u(T)})})})})})},l.prototype._mergeSiblings=function(r,n,o,u){var d,v,c,h;n===r.numberActives?(n--,c=r.children[r.numberActives-1],h=r.children[r.numberActives]):(c=r.children[n],h=r.children[n+1]);var f=this;f._diskRead(c,function(O){f._diskRead(h,function(T){var P=f._allocateNode();for(P.isLeaf=O.isLeaf,P.level=O.level,v=0;v<f.order-1;v++)P.keys[v]=O.keys[v],P.children[v]=O.children[v];for(P.keys[f.order-1]=r.keys[n],P.children[f.order-1]=O.children[f.order-1],v=0;v<f.order-1;v++)P.keys[v+f.order]=T.keys[v],P.children[v+f.order]=T.children[v];for(P.children[2*f.order-1]=T.children[f.order-1],r.children[n]=P,v=n;v<r.numberActives;v++)r.keys[v]=r.keys[v+1],r.children[v+1]=r.children[v+2];for(P.numberActives=O.numberActives+T.numberActives+1,r.numberActives--,d=r.numberActives;d<2*f.order-1;d++)r.keys[d]=null;0===r.numberActives&&f.root===r&&(f.root=P,P.level?P.isLeaf=!1:P.isLeaf=!0),f._diskWrite(P,function(Q){f._diskWrite(r,function(I){f._diskDelete(O,function(){f._diskDelete(T,function(){if(f.root!==Q)return u(Q);f._updateRootNode(f.root,function(){return u(Q)})})})})})})})},l.prototype._deleteKeyFromNode=function(r,n,o){var u,d=2*this.order-1;if(r.numberActives<d&&(d=r.numberActives),!1===r.isLeaf)return!1;for(r.keys[n],u=n;u<d-1;u++)r.keys[u]=r.keys[u+1];r.keys.pop(),r.numberActives--,this._diskWrite(r,function(v){return o(v)})},l.prototype._mergeNodes=function(r,n,o,u){var d,v;for((d=this._allocateNode()).isLeaf=!0,v=0;v<r.numberActives;v++)d.keys[v]=r.keys[v],d.children[v]=r.children[v];for(d.children[r.numberActives]=r.children[r.numberActives],d.keys[r.numberActives]=n,v=0;v<o.numberActives;v++)d.keys[v+r.numberActives+1]=o.keys[v],d.children[v+r.numberActives+1]=o.children[v];d.children[2*this.order-1]=o.children[o.numberActives],d.numberActives=r.numberActives+o.numberActives+1,d.isLeaf=r.isLeaf,d.level=r.level;var c=this;this._diskWrite(d,function(h){c._diskDelete(r,function(){c._diskDelete(o,function(){return u(h)})})})},l.prototype.audit=function(r){var n=[],o=[],u=this,d=function(c){for(var h=0;h<o.length;h++)if(0===u.comparator(o[h],c)){var f=" !!! duplicated key "+c;!0===r&&console.log(f),n.push(f)}},v=null;return u=this,this.walkNodes(function(c){!0===r&&(console.log("--- Node at "+c.level+" level"),console.log(" - leaf? "+c.isLeaf),console.log(" - num actives? "+c.numberActives),console.log(" - keys: "));for(var h=c.numberActives;h<c.keys.length;h++)null!=c.keys[h]&&!0===r&&(console.log(" * warning : redundant key data"),n.push(" * warning : redundant key data"));for(h=c.numberActives+1;h<c.children.length;h++)null!=c.children[h]&&!0===r&&(console.log(" * warning : redundant children data"),n.push(" * warning : redundant key data"));if(!1===c.isLeaf)for(h=0;h<c.numberActives;h++){var f=this._diskRead(c.children[h]).keys[this._diskRead(c.children[h]).numberActives-1].key,O=this._diskRead(c.children[h+1]).keys[0].key;if(!0===r&&console.log("   "+c.keys[h].key+"("+f+","+O+")"),-1===u.comparator(c.keys[h].key,f)){var T=" !!! value max left "+f+" > key "+c.keys[h].key;!0===r&&console.log(T),n.push(T)}1===u.comparator(c.keys[h].key,O)&&(T=" !!! value min right "+O+" < key "+c.keys[h].key,!0===r&&console.log(T),n.push(T)),d(c.keys[h].key),o.push(c.keys[h].key)}else for(null===v?v=c.level:v!=c.level&&(T=" !!! Leaf node with wrong level value",!0===r&&console.log(T),n.push(T)),h=0;h<c.numberActives;h++)!0===r&&console.log(" "+c.keys[h].key),d(c.keys[h].key),o.push(c.keys[h].key);c!=u.root&&(c.numberActives>2*u.order-1&&(!0===r&&(T=" !!!! MAX num keys restriction violated "),console.log(T),n.push(T)),c.numberActives<u.order-1&&(!0===r&&(T=" !!!! MIN num keys restriction violated "),console.log(T),n.push(T)))}),n},l.prototype._getMaxKeyPos=function(r,n,o){var u={};return null===n?o(null):!0===n.isLeaf?(u.node=n,u.index=n.numberActives-1,o(u)):(u.node=n,u.index=n.numberActives-1,void r._diskRead(n.children[n.numberActives],function(d){return r._getMaxKeyPos(r,d,o)}))},l.prototype._getMinKeyPos=function(r,n,o){var u={};if(null===n&&o(null),!0===n.isLeaf)return u.node=n,u.index=0,o(u);u.node=n,u.index=0,r._diskRead(n.children[0],function(d){return r._getMinKeyPos(r,d,o)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};ne.exports={Tree:l,Node:e}},{"./utils":140}],124:[function(D,ne,V){var N=D("./utils"),a=D("./utils"),x=(D("./quad_index").QuadIndex,D("./quad_index").Pattern),l=D("./rdf_model"),e=D("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var r=0;r<this.indices.length;r++){var n=this.indices[r];this.indexMap[n]={},this.queriesIndexMap[n]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(r,n){this.updateInProgress[r].push(n)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(r){if(!0!==this.ongoingModification){var n=this;if(null!=this.updateInProgress){var o=n.updateInProgress;n.updateInProgress=null,this.sendNotification(Callbacks.deleted,o[Callbacks.deleted],function(){n.sendNotification(Callbacks.added,o[Callbacks.added],function(){n.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){n.dispatchQueries(function(){r(!0)})})})})}else r(!0)}else r(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(r,n,o){for(var u={},d=0;d<n.length;d++){var v=n[d];for(var c in this.indexMap){var h=this.indexMap[c],f=this.componentOrders[c];this._searchCallbacksInIndex(h,f,r,v,u),0!=this.pendingQueries.length&&(h=this.queriesIndexMap[c],this._searchQueriesInIndex(h,f,v))}}this.dispatchNotifications(u),o?.(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(r,n,o){for(var u=this.emptyNotificationsMap[r]||[],d=0;d<u.length;d++)u[d](r,n);o()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(r){for(var n in r){var o=this.callbacksMap[n],u=r[n][Callbacks.deleted];if(null!=u)try{o(Callbacks.deleted,u)}catch{}for(var d in r[n])if(d!=Callbacks.deleted)try{o(d,r[n][d])}catch{}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(r,n,o,u,d){for(var v=u[1],c=(u=u[0],0);c<n.length+1;c++){for(var h=r._||[],f=[],O=0;O<h.length;O++){var T=h[O];null!=this.callbacksMap[T]&&(d[T]=d[T]||{},d[T][o]=d[T][o]||[],d[T][o].push(u),f.push(T))}r._=f;var P=n[c];if(null==r[""+v[P]])break;r=r[""+v[P]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(r,n){var o=this.emptyNotificationsMap[r]||[];o.push(n),this.emptyNotificationsMap[r]=o},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(r,n){var o=this.emptyNotificationsMap[r];null!=o&&(o=N.reject(o,function(u){return u===n})),this.emptyNotificationsMap[r]=o},Callbacks.CallbacksBackend.prototype.subscribe=function(r,n,o,u,d,v){var c=this._tokenizeComponents(r,n,o,u),h={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,h);var f=this;this.engine.normalizeQuad(c,h,!0,function(O){for(var T=new x(O),P=f._indexForPattern(T),Q=f.componentOrders[P],I=f.indexMap[P],k=0;k<Q.length;k++){var G=O[Q[k]];if("_"===G){null==I._&&(I._=[]),f.callbackCounter++,I._.push(f.callbackCounter),f.callbacksMap[f.callbackCounter]=d,f.callbacksInverseMap[d]=f.callbackCounter;break}k===Q.length-1?(I[G]=I[G]||{_:[]},f.callbackCounter++,I[G]._.push(f.callbackCounter),f.callbacksMap[f.callbackCounter]=d,f.callbacksInverseMap[d]=f.callbackCounter):(I[G]=I[G]||{},I=I[G])}v?.(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(r){var n=this.callbacksInverseMap[r];null!=n&&(delete this.callbacksInverseMap[r],delete this.callbacksMap[n])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(r,n,o,u){var d={};return null==r?d.subject=Callbacks.ANYTHING:0==r.indexOf("_:")?d.subject={token:"blank",value:r}:d.subject={token:"uri",value:r},d.predicate=null==n?Callbacks.ANYTHING:{token:"uri",value:n},d.object=null==o?Callbacks.ANYTHING:{token:"uri",value:o},d.graph=null==u?Callbacks.ANYTHING:{token:"uri",value:u},d},Callbacks.CallbacksBackend.prototype._indexForPattern=function(r){for(var n=r.indexKey,o=this.indices,u=0;u<o.length;u++)for(var d=o[u],v=this.componentOrders[d],c=0;c<v.length&&!1!==N.include(n,v[c]);c++)if(c==n.length-1)return d;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var r,n,o,u;4===arguments.length?(r=arguments[0],n=arguments[1],o=arguments[2],u=arguments[3]):(r=arguments[0],n=this.engine.lexicon.defaultGraphUri,o=arguments[1],u=arguments[2]);var d="CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+n+"> { <"+r+"> ?p ?o } }",v=this,c={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,c);var h=[];this.engine.execute(d,function(f,O){if(f)u&&u(!1);else{var T=O,P=!1,Q=function(I,k){if("eventsFlushed"===I&&P){P=!1;try{o(T)}catch{}}else if("eventsFlushed"!==I){P=!0;for(var G=0;G<k.length;G++){var J=k[G],X=l.buildRDFResource(J.subject,h,v.engine,c),U=l.buildRDFResource(J.predicate,h,v.engine,c),K=l.buildRDFResource(J.object,h,v.engine,c);null!=X&&null!=U&&null!=K&&(J=new l.Triple(X,U,K),I===Callbacks.added?T.add(J):I===Callbacks.deleted&&T.remove(J))}}};v.observersMap[o]=Q,v.subscribeEmpty(Callbacks.eventsFlushed,Q),v.subscribe(r,null,null,null,Q,function(){try{o(T)}catch{}u&&u(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(r){var n=this.observersMap[r];return!!n&&(this.unsubscribe(n),this.unsubscribeEmpty(Callbacks.eventsFlushed,n),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(r,n,o){var u=this.aqt.parseQueryString(r),d=this.aqt.parseSelect(u.units[0]),v=this.aqt.collectBasicTriples(d),c=this,h={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,h);var f=this.queryCounter;this.queryCounter++,this.queriesMap[f]=r,this.queriesInverseMap[r]=f,this.queriesList.push(f),this.queriesCallbacksMap[f]=n,a.eachSeries(v,function(O,T){null==O.graph&&(O.graph=c.engine.lexicon.defaultGraphUriTerm),c.engine.normalizeQuad(O,h,!0,function(P){for(var Q=new x(P),I=c._indexForPattern(Q),k=c.componentOrders[I],G=c.queriesIndexMap[I],J=0;J<k.length;J++){var X=P[k[J]];if("string"==typeof X){null==G._&&(G._=[]),G._.push(f);break}J===k.length-1?(G[X]=G[X]||{_:[]},G[X]._.push(f)):(G[X]=G[X]||{},G=G[X])}T()})},function(){c.engine.execute(r,function(O,T){O?console.log("ERROR in query callback "+T):n(T)}),o?.()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(r){var n=this.queriesInverseMap[r];null!=n&&(delete this.queriesInverseMap[r],delete this.queriesMap[n],this.queriesList=N.reject(this.queriesList,function(o){return o===n}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(r,n,o){for(var u=o[1],d=(o=o[0],0);d<n.length+1;d++){for(var v=r._||[],c=[],h=0;h<v.length;h++){var f=v[h];N.include(this.pendingQueries,f)&&(N.remove(this.pendingQueries,function(T){return T===f}),this.matchedQueries.push(f)),null!=this.queriesMap[f]&&c.push(f)}r._=c;var O=n[d];if(null==r[""+u[O]])break;r=r[""+u[O]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(r){var n,o,u=this,d={};a.eachSeries(this.matchedQueries,function(v,c){null==d[v]?(d[v]=!0,n=u.queriesMap[v],o=u.queriesCallbacksMap[v],u.engine.execute(n,function(h,f){if(!h)try{o(f)}catch{}c()})):c()},function(){r()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,ne.exports=Callbacks},{"./abstract_query_tree":122,"./quad_index":132,"./rdf_model":137,"./utils":140}],125:[function(D,ne,V){var N=D("jsonld");V.JSONLDParser={};var a=V.JSONLDParser;a.parser={async:!0,parse:function(x,l,e,r){try{"string"==typeof x&&(x=JSON.parse(x)),async function(n,o,u){var d=null;const v=await N.toRDF(n,{});var P,Q,I,c=function(P){return"BlankNode"===P.termType?{blank:P.value}:"NamedNode"===P.termType?{token:"uri",value:P.value}:"Literal"===P.termType?null!=P.language?{literal:'"'+P.value+'"@'+P.language}:null!==P.datatype?{literal:'"'+P.value+'"^^<'+P.datatype.value+">"}:{literal:'"'+P.value+'"'}:void 0};d=[];for(var f=v,O=0;O<f.length;O++){var T=f[O];P=T.subject,Q=T.predicate,I=T.object,d.push({subject:c(P),predicate:c(Q),object:c(I),graph:o})}u(null,d)}(x,l,r)}catch(n){r(n)}}},ne.exports={JSONLDParser:a}},{jsonld:43}],126:[function(D,ne,V){var N=D("./utils"),a=D("./btree").Tree;Lexicon=function(x){var l=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,N.seq(function(e){new a(2,function(r){l.uris=r,e()})},function(e){new a(2,function(r){l.literals=r,e()})},function(e){new a(2,function(r){l.knownGraphs=r,e()})},function(e){new a(2,function(r){l.oidUris=r,e()})},function(e){new a(2,function(r){l.oidLiterals=r,e()})},function(e){new a(2,function(r){l.oidBlanks=r,e()})})(function(){x?.(l)})},Lexicon.prototype.registerGraph=function(x,l,e){x!=this.defaultGraphOid?this.knownGraphs.insert(x,l,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(x,l){var e=[];this.knownGraphs.walk(function(r){!0===x?e.push(r.data):e.push(r.key)},function(){l(e)})},Lexicon.prototype.registerUri=function(x,l){var e=this;x===this.defaultGraphUri?l(this.defaultGraphOid):this.uris.search(x,function(r){if(null==r){var n=e.oidCounter,o="u"+n;e.oidCounter++,N.seq(function(u){e.uris.insert(x,[n,0],function(){u()})},function(u){e.oidUris.insert(o,x,function(){u()})})(function(){l(n)})}else n=r[0],r[1]=r[1]+1,l(n)})},Lexicon.prototype.resolveUri=function(x,l){x===this.defaultGraphUri?l(this.defaultGraphOid):this.uris.search(x,function(e){l(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(x,l){x===this.defaultGraphUri?l(0):this.uris.search(x,function(e){l(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(x){var l=this.oidCounter;this.oidCounter++;var e=""+l;this.oidBlanks.insert(e,e,function(){x(l)})},Lexicon.prototype.resolveBlank=function(x,l){var e=this;this.oidBlanks.search(x,function(r){if(null!=r)l(r);else{var n=e.oidCounter;this.oidCounter++,l(""+n)}})},Lexicon.prototype.resolveBlankCost=function(x,l){l(0)},Lexicon.prototype.registerLiteral=function(x,l){var e=this;this.literals.search(x,function(r){if(null==r){var n="l"+(o=e.oidCounter);e.oidCounter++,N.seq(function(u){e.literals.insert(x,[o,0],function(){u()})},function(u){e.oidLiterals.insert(n,x,function(){u()})})(function(){l(o)})}else{var o=r[0];r[1]=r[1]+1,l(o)}})},Lexicon.prototype.resolveLiteral=function(x,l){this.literals.search(x,function(e){l(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(x,l){this.literals.search(x,function(e){l(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(x){var l;return-1!=(l=x.lastIndexOf("@"))&&'"'===x[l-1]&&null!=x.substring(l,x.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:x.substring(1,l-1),lang:x.substring(l+1,x.length)}:-1!=(l=x.lastIndexOf("^^"))&&'"'===x[l-1]&&"<"===x[l+2]&&">"===x[x.length-1]?{token:"literal",value:x.substring(1,l-1),type:x.substring(l+3,x.length-1)}:{token:"literal",value:x.substring(1,x.length-1)}},Lexicon.prototype.parseUri=function(x){return{token:"uri",value:x}},Lexicon.prototype.retrieve=function(x,l){var e=this;x===this.defaultGraphOid?l({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):N.seq(function(r,n){e.oidUris.search("u"+x,function(o){n(null,null!=o?e.parseUri(o):null)})},function(r,n){null==r?e.oidLiterals.search("l"+x,function(o){n(null,null!=o?e.parseLiteral(o):null)}):n(null,r)},function(r,n){null==r?e.oidBlanks.search(""+x,function(o){n(null,null!=o?{token:"blank",value:"_:"+x}:null)}):n(null,r)})(null,function(r,n){l(n)})},Lexicon.prototype.clear=function(x){var l=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,N.seq(function(e){new a(2,function(r){l.uris=r,e()})},function(e){new a(2,function(r){l.literals=r,e()})},function(e){new a(2,function(r){l.knownGraphs=r,e()})},function(e){new a(2,function(r){l.oidUris=r,e()})},function(e){new a(2,function(r){l.oidLiterals=r,e()})},function(e){new a(2,function(r){l.oidBlanks=r,e()})})(function(){x?.()})},Lexicon.prototype.unregister=function(x,l,e){var r=this;N.seq(function(n){r._unregisterTerm(x.subject.token,l.subject,n)},function(n){r._unregisterTerm(x.predicate.token,l.predicate,n)},function(n){r._unregisterTerm(x.object.token,l.object,n)},function(n){null!=x.graph?r._unregisterTerm(x.graph.token,l.graph,n):n()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(x,l,e){var r=this;if("uri"===x)if(l!=this.defaultGraphOid){var n="u"+l;r.oidUris.search(n,function(o){r.uris.search(o,function(u){var d=u[1];""+u[0]==""+l?0===d?N.seq(function(v){r.oidUris.delete(n,function(){v()})},function(v){r.uris.delete(o,function(){v()})},function(v){r.knownGraphs.delete(l,function(){v()})})(function(){e()}):r.uris.insert(o,[l,d-1],function(){e()}):e()})})}else e();else"literal"===x?(this.oidCounter++,n="l"+l,r.oidLiterals.search(n,function(o){r.literals.search(o,function(u){var d=u[1];""+u[0]==""+l?0===d?N.seq(function(v){r.oidLiterals.delete(n,function(){v()})},function(v){r.literals.delete(o,function(){v()})})(function(){e()}):r.literals.insert(o,[l,d-1],function(){e()}):e()})})):"blank"===x?r.oidBlanks.delete(""+l,function(){e()}):e()},ne.exports={Lexicon}},{"./btree":123,"./utils":140}],127:[function(D,ne,V){if(!D("./utils").isWorker()){var N=D("http"),a=D("https"),x=D("url");NetworkTransport={load:function(l,e,r,n){var o=n??3,u=x.parse(l,!0,!0),d={host:u.host,hostname:u.hostname,method:"GET",path:u.path,headers:{host:u.hostname,Accept:e}},v=null;"http:"===u.protocol?(d.port=u.port||80,v=N):"https:"===u.protocol&&(d.port=u.port||443,v=a);var c=v.request(d,function(h){var f=h.headers,O="";if("2"==(""+h.statusCode)[0])h.on("end",function(){r(null,{headers:f,data:O})}),h.on("data",function(P){O+=P});else if("3"==(""+h.statusCode)[0])if(0==o)r(new Error("Too many redirections"));else{var T=f.Location||f.location;null!=T?NetworkTransport.load(T,e,r,o-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+h.statusCode))});c.on("error",r),c.end()}},ne.exports={NetworkTransport}}},{"./utils":140,http:91,https:20,url:112}],128:[function(D,ne,V){ne.exports=function(){"use strict";function N(a,x,l,e){this.message=a,this.expected=x,this.found=l,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,N)}return function(a,x){function l(){this.constructor=a}l.prototype=x.prototype,a.prototype=new l}(N,Error),N.buildMessage=function(a,x){var o,l={literal:function(o){return'"'+r(o.text)+'"'},class:function(o){var u,d="";for(u=0;u<o.parts.length;u++)d+=o.parts[u]instanceof Array?n(o.parts[u][0])+"-"+n(o.parts[u][1]):n(o.parts[u]);return"["+(o.inverted?"^":"")+d+"]"},any:function(o){return"any character"},end:function(o){return"end of input"},other:function(o){return o.description}};function e(o){return o.charCodeAt(0).toString(16).toUpperCase()}function r(o){return o.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+e(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+e(u)})}function n(o){return o.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+e(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+e(u)})}return"Expected "+function(o){var u,d,v,c=new Array(o.length);for(u=0;u<o.length;u++)c[u]=(v=o[u],l[v.type](v));if(c.sort(),c.length>0){for(u=1,d=1;u<c.length;u++)c[u-1]!==c[u]&&(c[d]=c[u],d++);c.length=d}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(a)+" but "+(((o=x)?'"'+r(o)+'"':"end of input")+" found.")},{SyntaxError:N,parse:function(a,x){x=void 0!==x?x:{};var l,e={},r={DOCUMENT:Rs},n=Rs,o=we("[1] QueryUnit"),u=we("[2] Query"),d=we("[3] Prologue"),v=we("[4] BaseDecl"),c="BASE",h=be("BASE",!1),f="base",O=be("base",!1),T=we("[5] PrefixDecl"),P="PREFIX",Q=be("PREFIX",!1),I="prefix",k=be("prefix",!1),G=we("[6] SelectQuery"),J=we("[7] SubSelect"),X=we("[8] SelectClause"),U="SELECT",K=be("SELECT",!1),ie="select",ce=be("select",!1),ve="DISTINCT",fe=be("DISTINCT",!1),Y="distinct",M=be("distinct",!1),z="REDUCED",Z=be("REDUCED",!1),ae="reduced",de=be("reduced",!1),ue="(",oe=be("(",!1),he="AS",_e=be("AS",!1),Ee="as",$=be("as",!1),m=")",L=be(")",!1),q="*",re=be("*",!1),se=we("[9] ConstructQuery"),le="CONSTRUCT",Ae=be("CONSTRUCT",!1),Se="construct",je=be("construct",!1),Ne="WHERE",Oe=be("WHERE",!1),Me="where",qe=be("where",!1),De="{",Qe=be("{",!1),He="}",Ke=be("}",!1),ga=we("[10] DescribeQuery"),Gn="DESCRIBE",ba=be("DESCRIBE",!1),ma=we("[11] AskQuery"),qn="ASK",xa=be("ASK",!1),Hn="ask",wa=be("ask",!1),_a=we("[12] DatasetClause"),Jn="FROM",ka=be("FROM",!1),zn="from",Ea=be("from",!1),Aa=we("[13] DefaultGraphClause"),Sa=we("[14] NamedGraphClause"),At="NAMED",Jr=be("NAMED",!1),St="named",zr=be("named",!1),ja=we("[15] SourceSelector"),Fa=we("[16] WhereClause"),Ta=we("[17] SolutionModifier"),Ia=we("[18] GroupClause"),Vn="GROUP",Ca=be("GROUP",!1),Wn="group",Ra=be("group",!1),Yt="BY",Xn=be("BY",!1),er="by",Kn=be("by",!1),Na=we("[19] GroupCondition"),Oa=we("[20] HavingClause"),$n="HAVING",La=be("HAVING",!1),Pa=we("[21] HavingCondition"),Da=we("[22] OrderClause"),Zn="ORDER",Qa=be("ORDER",!1),Yn="order",Ma=be("order",!1),Ba=we("[23] OrderCondition"),Ua=be("ASC",!1),Ga=be("asc",!1),ei="DESC",qa=be("DESC",!1),ti="desc",Ha=be("desc",!1),Ja=we("[24] LimitOffsetClauses"),za=we("[25] LimitClause"),ri="LIMIT",Va=be("LIMIT",!1),ni="limit",Wa=be("limit",!1),Xa=we("[26] OffsetClause"),ii="OFFSET",Ka=be("OFFSET",!1),oi="offset",$a=be("offset",!1),Za=we("[27] BindingsClause"),si="BINDINGS",Ya=be("BINDINGS",!1),el=we("[28] BindingValue"),tr="UNDEF",ai=be("UNDEF",!1),tl=we("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),rr="VALUES",li=be("VALUES",!1),nr="values",ui=be("values",!1),rl=we("[29] UpdateUnit"),nl=we("[30] Update"),pt=";",dt=be(";",!1),il=we("[31] Update1"),ol=we("[32] Load"),ci="LOAD",sl=be("LOAD",!1),fi="load",al=be("load",!1),pi="INTO",ll=be("INTO",!1),di="into",ul=be("into",!1),cl=we("[33] Clear"),hi="CLEAR",fl=be("CLEAR",!1),yi="clear",pl=be("clear",!1),jt="SILENT",Vr=be("SILENT",!1),Ft="silent",Wr=be("silent",!1),dl=we("[34] Drop"),vi="DROP",hl=be("DROP",!1),gi="drop",yl=be("drop",!1),vl=we("[35] Create"),bi="CREATE",gl=be("CREATE",!1),mi="create",bl=be("create",!1),ml=we("[36] InsertData"),ir="INSERT",xi=be("INSERT",!1),or="insert",wi=be("insert",!1),sr="DATA",_i=be("DATA",!1),ar="data",ki=be("data",!1),xl=we("[37] DeleteData"),Tt="DELETE",Xr=be("DELETE",!1),It="delete",Kr=be("delete",!1),wl=we("[38] DeleteWhere"),_l=we("[39] Modify"),Ei="WITH",kl=be("WITH",!1),Ai="with",El=be("with",!1),Al=we("[40] DeleteClause"),Sl=we("[41] InsertClause"),jl=we("[42] UsingClause"),Si="USING",Fl=be("USING",!1),ji="using",Tl=be("using",!1),Il=we("[43] GraphRef"),Ct="GRAPH",$r=be("GRAPH",!1),Rt="graph",Zr=be("graph",!1),Cl=we("[44] GraphRefAll"),Fi="DEFAULT",Rl=be("DEFAULT",!1),Ti="default",Nl=be("default",!1),Ol=be("ALL",!1),Ll=be("all",!1),Pl=we("[45] QuadPattern"),Ii=function(s){return s.quadsContext},Dl=we("[46] QuadData"),Ql=we("[47] Quads"),et=".",tt=be(".",!1),Ml=we("[48] QuadsNotTriples"),Bl=we("[49] TriplesTemplate"),Ul=we("[50] GroupGraphPattern"),Gl=we("[51] GroupGraphPatternSub"),ql=we("[54] TriplesBlock"),Hl=we("[53] GraphPatternNotTriples"),Jl=we("[54] OptionalGraphPattern"),Ci="OPTIONAL",zl=be("OPTIONAL",!1),Ri="optional",Vl=be("optional",!1),Wl=we("[55] GraphGraphPattern"),Xl=we("[56] ServiceGraphPattern"),Ni="SERVICE",Kl=be("SERVICE",!1),$l=we("[57] MinusGraphPattern"),Oi="MINUS",Zl=be("MINUS",!1),Li="minus",Yl=be("minus",!1),eu=we("[58] GroupOrUnionGraphPattern"),lr="UNION",Pi=be("UNION",!1),ur="union",Di=be("union",!1),tu=we("[59] Filter"),Qi="FILTER",ru=be("FILTER",!1),Mi="filter",nu=be("filter",!1),iu=we("[60] Bind"),Bi="BIND",ou=be("BIND",!1),Ui="bind",su=be("bind",!1),au=we("[60] Constraint"),lu=we("[61] InlineData"),uu=we("[62] DataBlock"),cu=we("[63] InlineDataOneVar"),fu=we("[64] InlineDataFull"),pu=we("[65] DataBlockValue"),du=we("[61] FunctionCall"),hu=we("[62] ArgList"),Gi=function(){return{token:"args",value:[]}},We=",",Xe=be(",",!1),yu=we("[63] ExpressionList"),vu=we("[64] ConstructTemplate"),gu=we("[65] ConstructTriples"),bu=we("[66] TriplesSameSubject"),mu=we("[83] PropertyListPathNotEmpty"),xu=we("[67] PropertyListNotEmpty"),wu=we("[68] PropertyList"),_u=we("[86] ObjectListPath"),ku=we("[69] ObjectList"),Eu=we("[87] ObjectPath"),Au=we("[70] Object"),Su=we("[71] Verb"),cr="a",fr=be("a",!1),ju=we("[72] TriplesSameSubjectPath"),Fu=we("[73] PropertyListNotEmptyPath"),Tu=we("[74] PropertyListPath"),Iu=we("[75]"),Cu=we("[76] VerbSimple"),Ru=we("[77] Path"),Nu=we("[78] PathAlternative"),pr="|",dr=be("|",!1),Ou=we("[79] PathSequence"),wt="/",_t=be("/",!1),Lu=we("[88] PathElt"),Pu=we("[81] PathEltOrInverse"),qi=be("^",!1),Du=we("[82] PathMod"),Yr="?",en=be("?",!1),gt="+",bt=be("+",!1),Qu=we("[83] PathPrimary"),tn="!",rn=be("!",!1),Mu=we("[85] PathOneInPropertySet"),Bu=we("[86] Integer"),Uu=we("[100] TriplesNodePath"),Gu=we("[87] TriplesNode"),qu=we("[101] BlankNodePropertyListPath"),nn="[",on=be("[",!1),sn="]",an=be("]",!1),Hu=we("[88] BlankNodePropertyList"),Ju=we("[103] CollectionPath"),zu=we("[89] Collection"),Vu=we("[105] GraphNodePath"),Hi=function(s){return s[1]},Wu=we("[90] GraphNode"),Xu=we("[91] VarOrTerm"),Ku=we("[92] VarOrIRIref"),$u=we("[93] Var"),Zu=we("[94] GraphTerm"),Yu=we("[95] Expression"),ec=we("[96] ConditionalOrExpression"),hr="||",Ji=be("||",!1),tc=we("[97] ConditionalAndExpression"),yr="&&",zi=be("&&",!1),rc=we("[98] ValueLogical"),nc=we("[99] RelationalExpression"),vr="=",gr=be("=",!1),br="!=",Vi=be("!=",!1),ln="<",un=be("<",!1),cn=">",fn=be(">",!1),mr="<=",Wi=be("<=",!1),xr=">=",Xi=be(">=",!1),wr="I",_r=be("I",!1),kr="i",Er=be("i",!1),Nt="N",Ot=be("N",!1),Lt="n",Pt=be("n",!1),Ki="O",$i=be("O",!1),Zi="o",Yi=be("o",!1),eo="T",to=be("T",!1),ro="t",no=be("t",!1),ic=we("[100] NumericExpression"),oc=we("[101] AdditiveExpression"),lt="-",ut=be("-",!1),sc=we("[102] MultiplicativeExpression"),ac=we("[103] UnaryExpression"),lc=we("[104] PrimaryExpression"),uc=we("[105] BrackettedExpression"),cc=we("[106] BuiltInCall"),fc=be("STR",!1),pc=be("str",!1),io="LANG",dc=be("LANG",!1),oo="lang",hc=be("lang",!1),so="LANGMATCHES",yc=be("LANGMATCHES",!1),ao="langmatches",vc=be("langmatches",!1),lo="DATATYPE",gc=be("DATATYPE",!1),uo="datatype",bc=be("datatype",!1),co="BOUND",mc=be("BOUND",!1),fo="bound",xc=be("bound",!1),wc=be("IRI",!1),_c=be("iri",!1),kc=be("URI",!1),Ec=be("uri",!1),po="BNODE",Ac=be("BNODE",!1),ho="bnode",Sc=be("bnode",!1),yo="COALESCE",jc=be("COALESCE",!1),vo="coalesce",Fc=be("coalesce",!1),Tc=be("IF",!1),Ic=be("if",!1),go="ISLITERAL",Cc=be("ISLITERAL",!1),bo="isliteral",Rc=be("isliteral",!1),mo="isLITERAL",Nc=be("isLITERAL",!1),xo="ISBLANK",Oc=be("ISBLANK",!1),wo="isblank",Lc=be("isblank",!1),_o="isBLANK",Pc=be("isBLANK",!1),ko="SAMETERM",Dc=be("SAMETERM",!1),Eo="sameterm",Qc=be("sameterm",!1),Ao="ISURI",Mc=be("ISURI",!1),So="isuri",Bc=be("isuri",!1),jo="isURI",Uc=be("isURI",!1),Fo="ISIRI",Gc=be("ISIRI",!1),To="isiri",qc=be("isiri",!1),Io="isIRI",Hc=be("isIRI",!1),Co="custom:",Jc=be("custom:",!1),Ro="CUSTOM:",zc=be("CUSTOM:",!1),No=/^[a-zA-Z0-9_]/,Oo=Ue([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Vc=we("[107] RegexExpression"),Lo="REGEX",Wc=be("REGEX",!1),Po="regex",Xc=be("regex",!1),Kc=we("[108] ExistsFunc"),Ar="EXISTS",Do=be("EXISTS",!1),Sr="exists",Qo=be("exists",!1),$c=we("[109] NotExistsFunc"),Mo="NOT",Zc=be("NOT",!1),Bo="not",Yc=be("not",!1),ef=we("[110] Aggregate"),Uo="COUNT",tf=be("COUNT",!1),Go="count",rf=be("count",!1),qo="GROUP_CONCAT",nf=be("GROUP_CONCAT",!1),Ho="group_concat",of=be("group_concat",!1),Jo="SEPARATOR",sf=be("SEPARATOR",!1),zo="SUM",af=be("SUM",!1),Vo="sum",lf=be("sum",!1),Wo="MIN",uf=be("MIN",!1),Xo="min",cf=be("min",!1),Ko="MAX",ff=be("MAX",!1),$o="max",pf=be("max",!1),Zo="AVG",df=be("AVG",!1),Yo="avg",hf=be("avg",!1),yf=we("[117] IRIrefOrFunction"),vf=we("[112] RDFLiteral"),gf=be("^^",!1),bf=we("[113] NumericLiteral"),mf=we("[114] NumericLiteralUnsigned"),xf=we("[115] NumericLiteralPositive"),wf=we("[116] NumericLiteralNegative"),_f=we("[117] BooleanLiteral"),es="TRUE",kf=be("TRUE",!1),ts="true",Ef=be("true",!1),rs="FALSE",Af=be("FALSE",!1),ns="false",Sf=be("false",!1),jf=we("[118] String"),jr=function(s){return{token:"string",value:s}},Ff=we("[119] IRIref"),Tf=we("[120] PrefixedName"),If=we("[121] BlankNode"),Cf=we("[122] IRI_REF"),is=/^[^<>"{}|\^`\\]/,os=Ue(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Rf=we("[123] PNAME_NS"),Ht=":",Jt=be(":",!1),Nf=we("[124] PNAME_LN"),Of=we("[125] BLANK_NODE_LABEL"),ss="_:",Lf=be("_:",!1),Pf=we("[126] VAR1"),Df=we("[127] VAR2"),Qf="$",as=be("$",!1),Mf=we("[128] LANGTAG"),Bf="@",ls=be("@",!1),us=/^[a-zA-Z]/,cs=Ue([["a","z"],["A","Z"]],!1,!1),Fr=/^[a-zA-Z0-9]/,Tr=Ue([["a","z"],["A","Z"],["0","9"]],!1,!1),Uf=we("[129] INTEGER"),Je=/^[0-9]/,ze=Ue([["0","9"]],!1,!1),Gf=we("[130] DECIMAL"),qf=we("[131] DOUBLE"),Hf=we("[132] INTEGER_POSITIVE"),Jf=we("[133] DECIMAL_POSITIVE"),fs=function(s){return s.value="+"+s.value,s},zf=we("[134] DOUBLE_POSITIVE"),Vf=we("[135] INTEGER_NEGATIVE"),pn=function(s){return s.value="-"+s.value,s},Wf=we("[136] DECIMAL_NEGATIVE"),Xf=we("[137] DOUBLE_NEGATIVE"),Kf=we("[138] EXPONENT"),$f=/^[eE]/,Zf=Ue(["e","E"],!1,!1),Yf=/^[+\-]/,ep=Ue(["+","-"],!1,!1),tp=we("[139] STRING_LITERAL1"),dn="'",hn=be("'",!1),ps=/^[^'\\\n\r]/,ds=Ue(["'","\\","\n","\r"],!0,!1),Ir=function(s){return xt(s)},rp=we("[140] STRING_LITERAL2"),hs='"',ys=be('"',!1),vs=/^[^"\\\n\r]/,gs=Ue(['"',"\\","\n","\r"],!0,!1),np=we("[141] STRING_LITERAL_LONG1"),Cr="'''",bs=be("'''",!1),ms=/^[^'\\]/,xs=Ue(["'","\\"],!0,!1),ip=we("[142] STRING_LITERAL_LONG2"),Rr='"""',ws=be('"""',!1),_s=/^[^"\\]/,ks=Ue(['"',"\\"],!0,!1),op=we("[143] ECHAR"),Es=be("\\",!1),sp=/^[tbnrf"']/,ap=Ue(["t","b","n","r","f",'"',"'"],!1,!1),lp=we("[144] NIL"),up=we("[145] WS"),cp=/^[ ]/,fp=Ue([" "],!1,!1),pp=/^[\t]/,dp=Ue(["\t"],!1,!1),hp=/^[\r]/,yp=Ue(["\r"],!1,!1),vp=/^[\n]/,gp=Ue(["\n"],!1,!1),bp=we(" COMMENT"),mp="#",As=be("#",!1),Ss=/^[^\n\r]/,js=Ue(["\n","\r"],!0,!1),xp=we("[146] ANON"),wp=we("[147] PN_CHARS_BASE"),_p=/^[A-Z]/,kp=Ue([["A","Z"]],!1,!1),Ep=/^[a-z]/,Ap=Ue([["a","z"]],!1,!1),Sp=/^[\xC0-\xD6]/,jp=Ue([["\xc0","\xd6"]],!1,!1),Fp=/^[\xD8-\xF6]/,Tp=Ue([["\xd8","\xf6"]],!1,!1),Ip=/^[\xF8-\u02FF]/,Cp=Ue([["\xf8","\u02ff"]],!1,!1),Rp=/^[\u0370-\u037D]/,Np=Ue([["\u0370","\u037d"]],!1,!1),Op=/^[\u037F-\u1FFF]/,Lp=Ue([["\u037f","\u1fff"]],!1,!1),Pp=/^[\u200C-\u200D]/,Dp=Ue([["\u200c","\u200d"]],!1,!1),Qp=/^[\u2070-\u218F]/,Mp=Ue([["\u2070","\u218f"]],!1,!1),Bp=/^[\u2C00-\u2FEF]/,Up=Ue([["\u2c00","\u2fef"]],!1,!1),Gp=/^[\u3001-\uD7FF]/,qp=Ue([["\u3001","\ud7ff"]],!1,!1),Hp=/^[\uF900-\uFDCF]/,Jp=Ue([["\uf900","\ufdcf"]],!1,!1),zp=/^[\uFDF0-\uFFFD]/,Vp=Ue([["\ufdf0","\ufffd"]],!1,!1),Wp=/^[\u1000-\uEFFF]/,Xp=Ue([["\u1000","\uefff"]],!1,!1),Kp=we("[148] PN_CHARS_U"),Fs=be("_",!1),$p=we("[149] VARNAME"),yn=/^[\xB7]/,vn=Ue(["\xb7"],!1,!1),gn=/^[\u0300-\u036F]/,bn=Ue([["\u0300","\u036f"]],!1,!1),mn=/^[\u203F-\u2040]/,xn=Ue([["\u203f","\u2040"]],!1,!1),Zp=we("[150] PN_CHARS"),Yp=we("[151] PN_PREFIX"),ed=we("[152] PN_LOCAL"),td=we("[170] PLX"),rd=we("[171] PERCENT"),nd="%",Ts=be("%",!1),id=we("[172] HEX"),od=/^[A-F]/,sd=Ue([["A","F"]],!1,!1),ad=/^[a-f]/,ld=Ue([["a","f"]],!1,!1),ud=we("[173] PN_LOCAL_ESC"),cd=be("~",!1),fd=be("&",!1),t=0,Nr=[{line:1,column:1}],ct=0,wn=[],g=0;if("startRule"in x){if(!(x.startRule in r))throw new Error("Can't start parsing from rule \""+x.startRule+'".');n=r[x.startRule]}function be(s,b){return{type:"literal",text:s,ignoreCase:b}}function Ue(s,b,A){return{type:"class",parts:s,inverted:b,ignoreCase:A}}function we(s){return{type:"other",description:s}}function Is(s){var b,A=Nr[s];if(A)return A;for(b=s-1;!Nr[b];)b--;for(A={line:(A=Nr[b]).line,column:A.column};b<s;)10===a.charCodeAt(b)?(A.line++,A.column=1):A.column++,b++;return Nr[s]=A,A}function Cs(s,b){var A=Is(s),y=Is(b);return{start:{offset:s,line:A.line,column:A.column},end:{offset:b,line:y.line,column:y.column}}}function C(s){t<ct||(t>ct&&(ct=t,wn=[]),wn.push(s))}function Rs(){return g++,g++,A=t,(y=Ns())!==e?(w=function(){var _,F,R,H,B,W,ee,te,pe,ye;if(g++,_=t,(F=Ls())!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e){for(H=[],B=ft();B!==e;)H.push(B),B=ft();if(H!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();if(B!==e)if((W=zt())!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if((te=Vt())!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e&&(ye=function(){var me,ge,xe,ke,Te,Fe,Ce,Ie,Re;if(g++,me=t,a.substr(t,8)===si?(ge=si,t+=8):(ge=e,0===g&&C(Ya)),ge!==e){for(xe=[],ke=$e();ke!==e;)xe.push(ke),ke=$e();if(xe!==e)if(123===a.charCodeAt(t)?(ke=De,t++):(ke=e,0===g&&C(Qe)),ke!==e){if(Te=[],Fe=t,40===a.charCodeAt(t)?(Ce=ue,t++):(Ce=e,0===g&&C(oe)),Ce!==e){if(Ie=[],(Re=Or())!==e)for(;Re!==e;)Ie.push(Re),Re=Or();else Ie=e;Ie!==e?(41===a.charCodeAt(t)?(Re=m,t++):(Re=e,0===g&&C(L)),Re!==e?Fe=Ce=[Ce,Ie,Re]:(t=Fe,Fe=e)):(t=Fe,Fe=e)}else t=Fe,Fe=e;for(Fe===e&&(Fe=yt());Fe!==e;){if(Te.push(Fe),Fe=t,40===a.charCodeAt(t)?(Ce=ue,t++):(Ce=e,0===g&&C(oe)),Ce!==e){if(Ie=[],(Re=Or())!==e)for(;Re!==e;)Ie.push(Re),Re=Or();else Ie=e;Ie!==e?(41===a.charCodeAt(t)?(Re=m,t++):(Re=e,0===g&&C(L)),Re!==e?Fe=Ce=[Ce,Ie,Re]:(t=Fe,Fe=e)):(t=Fe,Fe=e)}else t=Fe,Fe=e;Fe===e&&(Fe=yt())}Te!==e?(125===a.charCodeAt(t)?(Fe=He,t++):(Fe=e,0===g&&C(Ke)),Fe!==e?me=ge=[ge,xe,ke,Te,Fe]:(t=me,me=e)):(t=me,me=e)}else t=me,me=e;else t=me,me=e}else t=me,me=e;return me===e&&(me=null),g--,me===e&&(ge=e,0===g&&C(Za)),me}())!==e?_=F=function(me,ge,xe,ke){for(var Te={named:[],implicit:[]},Fe=0;Fe<ge.length;Fe++){var Ce=ge[Fe];"default"===Ce.kind?Te.implicit.push(Ce.graph):Te.named.push(Ce.graph)}0===Te.named.length&&0===Te.implicit.length&&Te.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Ie={kind:"select",token:"executableunit"};return Ie.dataset=Te,Ie.projection=me.vars,Ie.modifier=me.modifier,Ie.pattern=xe,null!=ke&&null!=ke.limit&&(Ie.limit=ke.limit),null!=ke&&null!=ke.offset&&(Ie.offset=ke.offset),null!=ke&&null!=ke.order&&""!=ke.order&&(Ie.order=ke.order),null!=ke&&null!=ke.group&&(Ie.group=ke.group),Ie}(F,H,W,te):(t=_,_=e)}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e}else t=_,_=e}else t=_,_=e;return g--,_===e&&(F=e,0===g&&C(G)),_}(),w===e&&(w=function(){var _,F,R,H,B,W,ee,te,pe,ye,me,ge,xe,ke,Te;for(g++,_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,9)===le?(R=le,t+=9):(R=e,0===g&&C(Ae)),R===e&&(a.substr(t,9)===Se?(R=Se,t+=9):(R=e,0===g&&C(je))),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=function(){var Fe,Ce,Ie,Re,Pe,Le;if(g++,Fe=t,123===a.charCodeAt(t)?(Ce=De,t++):(Ce=e,0===g&&C(Qe)),Ce!==e){for(Ie=[],Re=E();Re!==e;)Ie.push(Re),Re=E();if(Ie!==e)if((Re=ea())===e&&(Re=null),Re!==e){for(Pe=[],Le=E();Le!==e;)Pe.push(Le),Le=E();Pe!==e?(125===a.charCodeAt(t)?(Le=He,t++):(Le=e,0===g&&C(Ke)),Le!==e?Fe=Ce=Re:(t=Fe,Fe=e)):(t=Fe,Fe=e)}else t=Fe,Fe=e;else t=Fe,Fe=e}else t=Fe,Fe=e;return g--,Fe===e&&(Ce=e,0===g&&C(vu)),Fe}())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e){for(ee=[],te=ft();te!==e;)ee.push(te),te=ft();if(ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();if(te!==e)if((pe=zt())!==e){for(ye=[],me=E();me!==e;)ye.push(me),me=E();ye!==e&&(me=Vt())!==e?_=F=function(Fe,Ce,Ie,Re){for(var Pe={named:[],implicit:[]},Le=0;Le<Ce.length;Le++){var Ve=Ce[Le];"default"===Ve.kind?Pe.implicit.push(Ve.graph):Pe.named.push(Ve.graph)}0===Pe.named.length&&0===Pe.implicit.length&&Pe.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Ge={kind:"construct",token:"executableunit"};return Ge.dataset=Pe,Ge.template=Fe,Ge.pattern=Ie,null!=Re&&null!=Re.limit&&(Ge.limit=Re.limit),null!=Re&&null!=Re.offset&&(Ge.offset=Re.offset),null!=Re&&null!=Re.order&&""!=Re.order&&(Ge.order=Re.order),Ge}(B,ee,pe,me):(t=_,_=e)}else t=_,_=e;else t=_,_=e}else t=_,_=e}else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,9)===le?(R=le,t+=9):(R=e,0===g&&C(Ae)),R===e&&(a.substr(t,9)===Se?(R=Se,t+=9):(R=e,0===g&&C(je))),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e){for(B=[],W=ft();W!==e;)B.push(W),W=ft();if(B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(a.substr(t,5)===Ne?(ee=Ne,t+=5):(ee=e,0===g&&C(Oe)),ee===e&&(a.substr(t,5)===Me?(ee=Me,t+=5):(ee=e,0===g&&C(qe))),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();if(te!==e)if(123===a.charCodeAt(t)?(pe=De,t++):(pe=e,0===g&&C(Qe)),pe!==e){for(ye=[],me=E();me!==e;)ye.push(me),me=E();if(ye!==e)if((me=Dt())===e&&(me=null),me!==e){for(ge=[],xe=E();xe!==e;)ge.push(xe),xe=E();if(ge!==e)if(125===a.charCodeAt(t)?(xe=He,t++):(xe=e,0===g&&C(Ke)),xe!==e){for(ke=[],Te=E();Te!==e;)ke.push(Te),Te=E();ke!==e&&(Te=Vt())!==e?_=F=function(Fe,Ce,Ie){for(var Re={named:[],implicit:[]},Pe=0;Pe<Fe.length;Pe++){var Le=Fe[Pe];"default"===Le.kind?Re.implicit.push(Le.graph):Re.named.push(Le.graph)}0===Re.named.length&&0===Re.implicit.length&&Re.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var Ve={kind:"construct",token:"executableunit"};return Ve.dataset=Re,Ve.template=Ce,Ve.pattern={token:"basicgraphpattern",triplesContext:Ce.triplesContext},null!=Ie&&null!=Ie.limit&&(Ve.limit=Ie.limit),null!=Ie&&null!=Ie.offset&&(Ve.offset=Ie.offset),null!=Ie&&null!=Ie.order&&""!=Ie.order&&(Ve.order=Ie.order),Ve}(B,me,Te):(t=_,_=e)}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e}else t=_,_=e}else t=_,_=e;else t=_,_=e}return g--,_===e&&(F=e,0===g&&C(se)),_}(),w===e&&(w=function(){var _,F,R,H,B,W;if(g++,_=t,a.substr(t,8)===Gn?(F=Gn,t+=8):(F=e,0===g&&C(ba)),F!==e){if(R=[],(H=Ut())!==e)for(;H!==e;)R.push(H),H=Ut();else R=e;if(R===e&&(42===a.charCodeAt(t)?(R=q,t++):(R=e,0===g&&C(re))),R!==e){for(H=[],B=ft();B!==e;)H.push(B),B=ft();H!==e?((B=zt())===e&&(B=null),B!==e&&(W=Vt())!==e?_=F=[F,R,H,B,W]:(t=_,_=e)):(t=_,_=e)}else t=_,_=e}else t=_,_=e;return g--,_===e&&(F=e,0===g&&C(ga)),_}(),w===e&&(w=function(){var _,F,R,H,B,W,ee;for(g++,_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,3)===qn?(R=qn,t+=3):(R=e,0===g&&C(xa)),R===e&&(a.substr(t,3)===Hn?(R=Hn,t+=3):(R=e,0===g&&C(wa))),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e){for(B=[],W=ft();W!==e;)B.push(W),W=ft();if(B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();W!==e&&(ee=zt())!==e?_=F=function(te,pe){for(var ye={named:[],implicit:[]},me=0;me<te.length;me++){var ge=te[me];"implicit"===ge.kind?ye.implicit.push(ge.graph):ye.named.push(ge.graph)}0===ye.named.length&&0===ye.implicit.length&&ye.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var xe={kind:"ask",token:"executableunit"};return xe.dataset=ye,xe.pattern=pe,xe}(B,ee):(t=_,_=e)}else t=_,_=e}else t=_,_=e}else t=_,_=e;else t=_,_=e;return g--,_===e&&(F=e,0===g&&C(ma)),_}()))),w!==e?(g++,F=t,a.substr(t,6)===rr?(R=rr,t+=6):(R=e,0===g&&C(li)),R===e&&(a.substr(t,6)===nr?(R=nr,t+=6):(R=e,0===g&&C(ui))),R!==e&&(H=$s())!==e?F=R=[R,H]:(t=F,F=e),F===e&&(F=null),F!==e&&(F=null!=(B=F)?B[1]:null),g--,(_=F)===e&&(F=e,0===g&&C(tl)),(j=_)!==e?A=y=function(_,F,R){return{token:"query",kind:"query",prologue:_,units:[F],inlineData:R}}(y,w,j):(t=A,A=e)):(t=A,A=e)):(t=A,A=e),g--,A===e&&(y=e,0===g&&C(u)),g--,(b=A)===e&&0===g&&C(o),(s=b)===e&&(s=function(){var b;return g++,b=Gs(),g--,b===e&&0===g&&C(rl),b}()),s;var s,b,A,y,w,j,_,F,R,H,B}function Ns(){var s,b,A,y,w;if(g++,s=t,(b=function(){var j,_,F,R,H;for(g++,j=t,_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(a.substr(t,4)===c?(F=c,t+=4):(F=e,0===g&&C(h)),F===e&&(a.substr(t,4)===f?(F=f,t+=4):(F=e,0===g&&C(O))),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e&&(H=Gr())!==e?j=_=function(B){hd(B);var W={token:"base"};return W.value=B,W}(H):(t=j,j=e)}else t=j,j=e;else t=j,j=e;return g--,j===e&&(_=e,0===g&&C(v)),j}())===e&&(b=null),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e){for(y=[],w=Os();w!==e;)y.push(w),w=Os();y!==e?s=b={token:"prologue",base:b,prefixes:y}:(t=s,s=e)}else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(d)),s}function Os(){var s,b,A,y,w,j,_;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(a.substr(t,6)===P?(A=P,t+=6):(A=e,0===g&&C(Q)),A===e&&(a.substr(t,6)===I?(A=I,t+=6):(A=e,0===g&&C(k))),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if((w=Dn())!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();j!==e&&(_=Gr())!==e?s=b=function(F,R){dd(F,R);var H={token:"prefix"};return H.prefix=F,H.local=R,H}(w,_):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(T)),s}function Ls(){var s,b,A,y,w,j,_,F,R,H,B,W,ee,te,pe,ye,me,ge,xe,ke;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(a.substr(t,6)===U?(A=U,t+=6):(A=e,0===g&&C(K)),A===e&&(a.substr(t,6)===ie?(A=ie,t+=6):(A=e,0===g&&C(ce))),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(a.substr(t,8)===ve?(w=ve,t+=8):(w=e,0===g&&C(fe)),w===e&&(a.substr(t,8)===Y?(w=Y,t+=8):(w=e,0===g&&C(M))),w===e&&(a.substr(t,7)===z?(w=z,t+=7):(w=e,0===g&&C(Z)),w===e&&(a.substr(t,7)===ae?(w=ae,t+=7):(w=e,0===g&&C(de)))),w===e&&(w=null),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e){for(_=[],F=t,R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if((H=$e())!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();B!==e?F=R=[R,H,B]:(t=F,F=e)}else t=F,F=e;else t=F,F=e;if(F===e){for(F=t,R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if(40===a.charCodeAt(t)?(H=ue,t++):(H=e,0===g&&C(oe)),H!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();if(B!==e)if((W=Be())!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(a.substr(t,2)===he?(te=he,t+=2):(te=e,0===g&&C(_e)),te===e&&(a.substr(t,2)===Ee?(te=Ee,t+=2):(te=e,0===g&&C($))),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();if(pe!==e)if((ye=$e())!==e){for(me=[],ge=E();ge!==e;)me.push(ge),ge=E();if(me!==e)if(41===a.charCodeAt(t)?(ge=m,t++):(ge=e,0===g&&C(L)),ge!==e){for(xe=[],ke=E();ke!==e;)xe.push(ke),ke=E();xe!==e?F=R=[R,H,B,W,ee,te,pe,ye,me,ge,xe]:(t=F,F=e)}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}if(F!==e)for(;F!==e;){for(_.push(F),F=t,R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if((H=$e())!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();B!==e?F=R=[R,H,B]:(t=F,F=e)}else t=F,F=e;else t=F,F=e;if(F===e){for(F=t,R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if(40===a.charCodeAt(t)?(H=ue,t++):(H=e,0===g&&C(oe)),H!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();if(B!==e)if((W=Be())!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(a.substr(t,2)===he?(te=he,t+=2):(te=e,0===g&&C(_e)),te===e&&(a.substr(t,2)===Ee?(te=Ee,t+=2):(te=e,0===g&&C($))),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();if(pe!==e)if((ye=$e())!==e){for(me=[],ge=E();ge!==e;)me.push(ge),ge=E();if(me!==e)if(41===a.charCodeAt(t)?(ge=m,t++):(ge=e,0===g&&C(L)),ge!==e){for(xe=[],ke=E();ke!==e;)xe.push(ke),ke=E();xe!==e?F=R=[R,H,B,W,ee,te,pe,ye,me,ge,xe]:(t=F,F=e)}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}else t=F,F=e;else t=F,F=e}}else _=e;if(_===e){for(_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(42===a.charCodeAt(t)?(R=q,t++):(R=e,0===g&&C(re)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e?_=F=[F,R,H]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}_!==e?s=b=function(Te,Fe){var Ce=[];if(3===Fe.length&&"*"===Fe[1])return{vars:[{token:"variable",kind:"*"}],modifier:ha(Te)};for(var Ie=0;Ie<Fe.length;Ie++){var Re=Fe[Ie];3===Re.length?Ce.push({token:"variable",kind:"var",value:Re[1]}):Ce.push({token:"variable",kind:"aliased",expression:Re[3],alias:Re[7]})}return{vars:Ce,modifier:ha(Te)}}(w,_):(t=s,s=e)}else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(X)),s}function ft(){var s,b,A,y,w,j;if(g++,s=t,a.substr(t,4)===Jn?(b=Jn,t+=4):(b=e,0===g&&C(ka)),b===e&&(a.substr(t,4)===zn?(b=zn,t+=4):(b=e,0===g&&C(Ea))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=function(){var _,F,R;for(g++,_=t,F=[],R=E();R!==e;)F.push(R),R=E();return F!==e&&(R=Ps())!==e?_=F={graph:R,kind:"default",token:"graphClause"}:(t=_,_=e),g--,_===e&&(F=e,0===g&&C(Aa)),_}())===e&&(y=function(){var _,F,R,H;if(g++,_=t,a.substr(t,5)===At?(F=At,t+=5):(F=e,0===g&&C(Jr)),F===e&&(a.substr(t,5)===St?(F=St,t+=5):(F=e,0===g&&C(zr))),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e&&(H=Ps())!==e?_=F={graph:H,kind:"named",token:"graphCluase"}:(t=_,_=e)}else t=_,_=e;return g--,_===e&&(F=e,0===g&&C(Sa)),_}()),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?s=b=y:(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(_a)),s}function Ps(){var s;return g++,s=Ze(),g--,s===e&&0===g&&C(ja),s}function zt(){var s,b,A,y,w,j;if(g++,s=t,a.substr(t,5)===Ne?(b=Ne,t+=5):(b=e,0===g&&C(Oe)),b===e&&(a.substr(t,5)===Me?(b=Me,t+=5):(b=e,0===g&&C(qe))),b===e&&(b=null),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=ot())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?s=b=y:(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Fa)),s}function Vt(){var s,b,A,y,w,j,_,F,R,H,B,W,ee;return g++,s=t,b=function(){var H,B,W,ee,te,pe,ye;if(g++,H=t,a.substr(t,5)===Vn?(B=Vn,t+=5):(B=e,0===g&&C(Ca)),B===e&&(a.substr(t,5)===Wn?(B=Wn,t+=5):(B=e,0===g&&C(Ra))),B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(a.substr(t,2)===Yt?(ee=Yt,t+=2):(ee=e,0===g&&C(Xn)),ee===e&&(a.substr(t,2)===er?(ee=er,t+=2):(ee=e,0===g&&C(Kn))),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();if(te!==e){if(pe=[],(ye=Ds())!==e)for(;ye!==e;)pe.push(ye),ye=Ds();else pe=e;pe!==e?H=B=pe:(t=H,H=e)}else t=H,H=e}else t=H,H=e;else t=H,H=e}else t=H,H=e;return g--,H===e&&(B=e,0===g&&C(Ia)),H}(),b===e&&(b=null),b!==e?(A=function(){var H,B,W,ee;if(g++,H=t,a.substr(t,6)===$n?(B=$n,t+=6):(B=e,0===g&&C(La)),B!==e){if(W=[],(ee=Qs())!==e)for(;ee!==e;)W.push(ee),ee=Qs();else W=e;W!==e?H=B=[B,W]:(t=H,H=e)}else t=H,H=e;return g--,H===e&&(B=e,0===g&&C(Oa)),H}(),A===e&&(A=null),A!==e?(y=function(){var H,B,W,ee,te,pe,ye,me;if(g++,H=t,a.substr(t,5)===Zn?(B=Zn,t+=5):(B=e,0===g&&C(Qa)),B===e&&(a.substr(t,5)===Yn?(B=Yn,t+=5):(B=e,0===g&&C(Ma))),B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(a.substr(t,2)===Yt?(ee=Yt,t+=2):(ee=e,0===g&&C(Xn)),ee===e&&(a.substr(t,2)===er?(ee=er,t+=2):(ee=e,0===g&&C(Kn))),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();if(te!==e){if(pe=[],(ye=Ms())!==e)for(;ye!==e;)pe.push(ye),ye=Ms();else pe=e;if(pe!==e){for(ye=[],me=E();me!==e;)ye.push(me),me=E();ye!==e?H=B=pe:(t=H,H=e)}else t=H,H=e}else t=H,H=e}else t=H,H=e;else t=H,H=e}else t=H,H=e;return g--,H===e&&(B=e,0===g&&C(Da)),H}(),y===e&&(y=null),y!==e?(g++,B=t,(W=Bs())!==e?((ee=Us())===e&&(ee=null),ee!==e?B=W=[W,ee]:(t=B,B=e)):(t=B,B=e),B===e&&(B=t,(W=Us())!==e?((ee=Bs())===e&&(ee=null),ee!==e?B=W=[W,ee]:(t=B,B=e)):(t=B,B=e)),B!==e&&(B=function(te){for(var pe={},ye=0;ye<te.length;ye++){var me=te[ye];null!=me&&null!=me.limit?pe.limit=me.limit:null!=me&&null!=me.offset&&(pe.offset=me.offset)}return pe}(B)),g--,(H=B)===e&&(B=e,0===g&&C(Ja)),(w=H)===e&&(w=null),w!==e?(j=b,_=y,R={},null!=(F=w)&&(null!=F.limit&&(R.limit=F.limit),null!=F.offset&&(R.offset=F.offset)),null!=j&&(R.group=j),R.order=_,s=b=R):(t=s,s=e)):(t=s,s=e)):(t=s,s=e)):(t=s,s=e),g--,s===e&&(b=e,0===g&&C(Ta)),s}function Ds(){var s,b,A,y,w,j,_,F,R,H,B,W,ee;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if((A=Pn())!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e?s=b=A:(t=s,s=e)}else t=s,s=e;else t=s,s=e;if(s===e){for(s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if((A=Zs())!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e?s=b=A:(t=s,s=e)}else t=s,s=e;else t=s,s=e;if(s===e){for(s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(40===a.charCodeAt(t)?(A=ue,t++):(A=e,0===g&&C(oe)),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if((w=Be())!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e){if(_=t,a.substr(t,2)===he?(F=he,t+=2):(F=e,0===g&&C(_e)),F===e&&(a.substr(t,2)===Ee?(F=Ee,t+=2):(F=e,0===g&&C($))),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e&&(H=$e())!==e?_=F=[F,R,H]:(t=_,_=e)}else t=_,_=e;if(_===e&&(_=null),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(41===a.charCodeAt(t)?(R=m,t++):(R=e,0===g&&C(L)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e?(W=w,s=b=0!=(ee=_).length?{token:"aliased_expression",expression:W,alias:ee[2]}:W):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e}else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e;if(s===e){for(s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if((A=$e())!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e?s=b=A:(t=s,s=e)}else t=s,s=e;else t=s,s=e}}}return g--,s===e&&(b=e,0===g&&C(Na)),s}function Qs(){var s;return g++,s=kn(),g--,s===e&&0===g&&C(Pa),s}function Ms(){var s,b,A,y,w,j,_,F;if(g++,s=t,"ASC"===a.substr(t,3)?(b="ASC",t+=3):(b=e,0===g&&C(Ua)),b===e&&("asc"===a.substr(t,3)?(b="asc",t+=3):(b=e,0===g&&C(Ga)),b===e&&(a.substr(t,4)===ei?(b=ei,t+=4):(b=e,0===g&&C(qa)),b===e&&(a.substr(t,4)===ti?(b=ti,t+=4):(b=e,0===g&&C(Ha))))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=Ln())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?(_=y,s=b={direction:b.toUpperCase(),expression:_}):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e)if(s=t,(b=kn())===e&&(b=$e()),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e?("var"===(F=b).token&&(F={token:"expression",expressionType:"atomic",primaryexpression:"var",value:F}),s=b={direction:"ASC",expression:F}):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Ba)),s}function Bs(){var s,b,A,y,w,j;if(g++,s=t,a.substr(t,5)===ri?(b=ri,t+=5):(b=e,0===g&&C(Va)),b===e&&(a.substr(t,5)===ni?(b=ni,t+=5):(b=e,0===g&&C(Wa))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=Gt())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?s=b={limit:parseInt(y.value)}:(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(za)),s}function Us(){var s,b,A,y,w,j;if(g++,s=t,a.substr(t,6)===ii?(b=ii,t+=6):(b=e,0===g&&C(Ka)),b===e&&(a.substr(t,6)===oi?(b=oi,t+=6):(b=e,0===g&&C($a))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=Gt())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?s=b={offset:parseInt(y.value)}:(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Xa)),s}function Or(){var s;return g++,(s=Ze())===e&&(s=Mr())===e&&(s=Br())===e&&(s=Ur())===e&&(a.substr(t,5)===tr?(s=tr,t+=5):(s=e,0===g&&C(ai))),g--,s===e&&0===g&&C(el),s}function Gs(){var s,b,A,y,w,j,_,F,R,H;if(g++,s=t,(b=Ns())!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(g++,(H=function(){var B,W,ee,te,pe,ye,me,ge,xe,ke,Te;if(g++,B=t,a.substr(t,4)===ci?(W=ci,t+=4):(W=e,0===g&&C(sl)),W===e&&(a.substr(t,4)===fi?(W=fi,t+=4):(W=e,0===g&&C(al))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if((te=Ze())!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();if(pe!==e){if(ye=t,a.substr(t,4)===pi?(me=pi,t+=4):(me=e,0===g&&C(ll)),me===e&&(a.substr(t,4)===di?(me=di,t+=4):(me=e,0===g&&C(ul))),me!==e){for(ge=[],xe=E();xe!==e;)ge.push(xe),xe=E();ge!==e&&(xe=_n())!==e?ye=me=[me,ge,xe]:(t=ye,ye=e)}else t=ye,ye=e;ye===e&&(ye=null),ye!==e?(ke=ye,(Te={kind:"load",token:"executableunit"}).sourceGraph=te,null!=ke&&(Te.destinyGraph=ke[2]),B=W=Te):(t=B,B=e)}else t=B,B=e}else t=B,B=e;else t=B,B=e}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(ol)),B}())===e&&(H=function(){var B,W,ee,te,pe,ye,me;if(g++,B=t,a.substr(t,5)===hi?(W=hi,t+=5):(W=e,0===g&&C(fl)),W===e&&(a.substr(t,5)===yi?(W=yi,t+=5):(W=e,0===g&&C(pl))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(a.substr(t,6)===jt?(te=jt,t+=6):(te=e,0===g&&C(Vr)),te===e&&(a.substr(t,6)===Ft?(te=Ft,t+=6):(te=e,0===g&&C(Wr))),te===e&&(te=null),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e&&(ye=Js())!==e?((me={kind:"clear",token:"executableunit"}).destinyGraph=ye,B=W=me):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(cl)),B}())===e&&(H=function(){var B,W,ee,te,pe,ye,me;if(g++,B=t,a.substr(t,4)===vi?(W=vi,t+=4):(W=e,0===g&&C(hl)),W===e&&(a.substr(t,4)===gi?(W=gi,t+=4):(W=e,0===g&&C(yl))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(a.substr(t,6)===jt?(te=jt,t+=6):(te=e,0===g&&C(Vr)),te===e&&(a.substr(t,6)===Ft?(te=Ft,t+=6):(te=e,0===g&&C(Wr))),te===e&&(te=null),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e&&(ye=Js())!==e?((me={kind:"drop",token:"executableunit"}).destinyGraph=ye,B=W=me):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(dl)),B}())===e&&(H=function(){var B,W,ee,te,pe,ye,me;if(g++,B=t,a.substr(t,6)===bi?(W=bi,t+=6):(W=e,0===g&&C(gl)),W===e&&(a.substr(t,6)===mi?(W=mi,t+=6):(W=e,0===g&&C(bl))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(a.substr(t,6)===jt?(te=jt,t+=6):(te=e,0===g&&C(Vr)),te===e&&(a.substr(t,6)===Ft?(te=Ft,t+=6):(te=e,0===g&&C(Wr))),te===e&&(te=null),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e&&(ye=_n())!==e?((me={kind:"create",token:"executableunit"}).destinyGraph=ye,B=W=me):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(vl)),B}())===e&&(H=function(){var B,W,ee,te,pe,ye,me;if(g++,B=t,a.substr(t,6)===ir?(W=ir,t+=6):(W=e,0===g&&C(xi)),W===e&&(a.substr(t,6)===or?(W=or,t+=6):(W=e,0===g&&C(wi))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(a.substr(t,4)===sr?(te=sr,t+=4):(te=e,0===g&&C(_i)),te===e&&(a.substr(t,4)===ar?(te=ar,t+=4):(te=e,0===g&&C(ki))),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e&&(ye=Vs())!==e?((me={kind:"insertdata",token:"executableunit"}).quads=ye,B=W=me):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(ml)),B}())===e&&(H=function(){var B,W,ee,te,pe,ye;if(g++,B=t,a.substr(t,6)===Tt?(W=Tt,t+=6):(W=e,0===g&&C(Xr)),W===e&&(a.substr(t,6)===It?(W=It,t+=6):(W=e,0===g&&C(Kr))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();ee!==e?(a.substr(t,4)===sr?(te=sr,t+=4):(te=e,0===g&&C(_i)),te===e&&(a.substr(t,4)===ar?(te=ar,t+=4):(te=e,0===g&&C(ki))),te!==e&&(pe=Vs())!==e?((ye={kind:"deletedata",token:"executableunit"}).quads=pe,B=W=ye):(t=B,B=e)):(t=B,B=e)}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(xl)),B}())===e&&(H=function(){var B,W,ee,te,pe,ye;if(g++,B=t,a.substr(t,6)===Tt?(W=Tt,t+=6):(W=e,0===g&&C(Xr)),W===e&&(a.substr(t,6)===It?(W=It,t+=6):(W=e,0===g&&C(Kr))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(a.substr(t,5)===Ne?(te=Ne,t+=5):(te=e,0===g&&C(Oe)),te===e&&(a.substr(t,5)===Me?(te=Me,t+=5):(te=e,0===g&&C(qe))),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e&&(ye=ot())!==e?B=W=function(me){var ge={kind:"modify"};ge.pattern=me,ge.with=null,ge.using=null;var xe=[],ke=me.patterns[0];ke=null==ke.triplesContext&&null!=ke.patterns?ke.patterns[0].triplesContext:ke.triplesContext;for(var Te=0;Te<ke.length;Te++){var Fe={},Ce=ke[Te];Fe.subject=Ce.subject,Fe.predicate=Ce.predicate,Fe.object=Ce.object,Fe.graph=Ce.graph,xe.push(Fe)}return ge.delete=xe,ge}(ye):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(wl)),B}())===e&&(H=function(){var B,W,ee,te,pe,ye,me,ge,xe,ke,Te,Fe,Ce,Ie,Re;if(g++,B=t,W=t,a.substr(t,4)===Ei?(ee=Ei,t+=4):(ee=e,0===g&&C(kl)),ee===e&&(a.substr(t,4)===Ai?(ee=Ai,t+=4):(ee=e,0===g&&C(El))),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();te!==e&&(pe=Ze())!==e?W=ee=[ee,te,pe]:(t=W,W=e)}else t=W,W=e;if(W===e&&(W=null),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e){if(te=t,g++,Ce=t,a.substr(t,6)===Tt?(Ie=Tt,t+=6):(Ie=e,0===g&&C(Xr)),Ie===e&&(a.substr(t,6)===It?(Ie=It,t+=6):(Ie=e,0===g&&C(Kr))),Ie!==e&&(Re=zs())!==e?Ce=Ie=Re:(t=Ce,Ce=e),g--,Ce===e&&(Ie=e,0===g&&C(Al)),(pe=Ce)!==e){for(ye=[],me=E();me!==e;)ye.push(me),me=E();ye!==e?((me=qs())===e&&(me=null),me!==e?te=pe=[pe,ye,me]:(t=te,te=e)):(t=te,te=e)}else t=te,te=e;if(te===e&&(te=qs()),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();if(pe!==e){for(ye=[],me=Hs();me!==e;)ye.push(me),me=Hs();if(ye!==e){for(me=[],ge=E();ge!==e;)me.push(ge),ge=E();if(me!==e)if(a.substr(t,5)===Ne?(ge=Ne,t+=5):(ge=e,0===g&&C(Oe)),ge===e&&(a.substr(t,5)===Me?(ge=Me,t+=5):(ge=e,0===g&&C(qe))),ge!==e){for(xe=[],ke=E();ke!==e;)xe.push(ke),ke=E();if(xe!==e)if((ke=ot())!==e){for(Te=[],Fe=E();Fe!==e;)Te.push(Fe),Fe=E();Te!==e?B=W=function(Ce,Ie,Re,Pe){var Le={kind:"modify"};return Le.with=""!=Ce&&null!=Ce?Ce[2]:null,3!==Ie.length||""!==Ie[2]&&null!=Ie[2]?3===Ie.length&&null!=Ie[0].length&&null!=Ie[1].length&&null!=Ie[2].length?(Le.delete=Ie[0],Le.insert=Ie[2]):(Le.insert=Ie,Le.delete=null):(Le.delete=Ie[0],Le.insert=null),""!=Re&&(Le.using=Re),Le.pattern=Pe,Le}(W,te,ye,ke):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;else t=B,B=e}else t=B,B=e}else t=B,B=e}else t=B,B=e}else t=B,B=e}else t=B,B=e;return g--,B===e&&(W=e,0===g&&C(_l)),B}()),g--,H===e&&0===g&&C(il),(y=H)!==e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(59===a.charCodeAt(t)?(_=pt,t++):(_=e,0===g&&C(dt)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e?((R=Gs())===e&&(R=null),R!==e?w=j=[j,_,F,R]:(t=w,w=e)):(t=w,w=e)}else t=w,w=e;else t=w,w=e;w===e&&(w=null),w!==e?s=b=function(H,B,W){var ee={token:"query",kind:"update"};ee.prologue=H;var te=[B];return null!=W&&null!=W.length&&null!=W[3]&&null!=W[3].units&&(te=te.concat(W[3].units)),ee.units=te,ee}(b,y,w):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(nl)),s}function qs(){var s,b,A;return g++,s=t,a.substr(t,6)===ir?(b=ir,t+=6):(b=e,0===g&&C(xi)),b===e&&(a.substr(t,6)===or?(b=or,t+=6):(b=e,0===g&&C(wi))),b!==e&&(A=zs())!==e?s=b=A:(t=s,s=e),g--,s===e&&(b=e,0===g&&C(Sl)),s}function Hs(){var s,b,A,y,w,j,_,F,R;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(a.substr(t,5)===Si?(A=Si,t+=5):(A=e,0===g&&C(Fl)),A===e&&(a.substr(t,5)===ji?(A=ji,t+=5):(A=e,0===g&&C(Tl))),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e){if((w=Ze())===e)if(w=t,a.substr(t,5)===At?(j=At,t+=5):(j=e,0===g&&C(Jr)),j===e&&(a.substr(t,5)===St?(j=St,t+=5):(j=e,0===g&&C(zr))),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=Ze())!==e?w=j=[j,_,F]:(t=w,w=e)}else t=w,w=e;w!==e?s=b=null!=(R=w).length?{kind:"named",uri:R[2]}:{kind:"default",uri:R}:(t=s,s=e)}else t=s,s=e}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(jl)),s}function _n(){var s,b,A,y;if(g++,s=t,a.substr(t,5)===Ct?(b=Ct,t+=5):(b=e,0===g&&C($r)),b===e&&(a.substr(t,5)===Rt?(b=Rt,t+=5):(b=e,0===g&&C(Zr))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e&&(y=Ze())!==e?s=b=y:(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Il)),s}function Js(){var s,b;return g++,s=t,(s=b=_n())===e&&(s=t,a.substr(t,7)===Fi?(b=Fi,t+=7):(b=e,0===g&&C(Rl)),b===e&&(a.substr(t,7)===Ti?(b=Ti,t+=7):(b=e,0===g&&C(Nl))),b!==e&&(b="default"),(s=b)===e&&(s=t,a.substr(t,5)===At?(b=At,t+=5):(b=e,0===g&&C(Jr)),b===e&&(a.substr(t,5)===St?(b=St,t+=5):(b=e,0===g&&C(zr))),b!==e&&(b="named"),(s=b)===e&&(s=t,"ALL"===a.substr(t,3)?(b="ALL",t+=3):(b=e,0===g&&C(Ol)),b===e&&("all"===a.substr(t,3)?(b="all",t+=3):(b=e,0===g&&C(Ll))),b!==e&&(b="all"),s=b))),g--,s===e&&(b=e,0===g&&C(Cl)),s}function zs(){var s,b,A,y,w,j,_,F,R;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(123===a.charCodeAt(t)?(A=De,t++):(A=e,0===g&&C(Qe)),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if((w=Ws())!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(125===a.charCodeAt(t)?(_=He,t++):(_=e,0===g&&C(Ke)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e?s=b=Ii(w):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Pl)),s}function Vs(){var s,b,A,y,w,j,_,F,R;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(123===a.charCodeAt(t)?(A=De,t++):(A=e,0===g&&C(Qe)),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if((w=Ws())!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(125===a.charCodeAt(t)?(_=He,t++):(_=e,0===g&&C(Ke)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e?s=b=Ii(w):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Dl)),s}function Ws(){var s,b,A,y,w,j,_;if(g++,s=t,(b=Dt())===e&&(b=null),b!==e){for(A=[],y=t,(w=Xs())!==e?(46===a.charCodeAt(t)?(j=et,t++):(j=e,0===g&&C(tt)),j===e&&(j=null),j!==e?((_=Dt())===e&&(_=null),_!==e?y=w=[w,j,_]:(t=y,y=e)):(t=y,y=e)):(t=y,y=e);y!==e;)A.push(y),y=t,(w=Xs())!==e?(46===a.charCodeAt(t)?(j=et,t++):(j=e,0===g&&C(tt)),j===e&&(j=null),j!==e?((_=Dt())===e&&(_=null),_!==e?y=w=[w,j,_]:(t=y,y=e)):(t=y,y=e)):(t=y,y=e);A!==e?s=b=function(F,R){var H=[];if(null!=F&&null!=F.triplesContext)for(var B=0;B<F.triplesContext.length;B++)(W=F.triplesContext[B]).graph=null,H.push(W);if(R&&R.length>0&&R[0].length>0&&(H=H.concat(R[0][0].quadsContext),null!=R[0][2]&&null!=R[0][2].triplesContext))for(B=0;B<R[0][2].triplesContext.length;B++){var W;(W=R[0][2].triplesContext[B]).graph=null,H.push(W)}return{token:"quads",quadsContext:H}}(b,A):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Ql)),s}function Xs(){var s,b,A,y,w,j,_,F,R,H,B,W,ee;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(a.substr(t,5)===Ct?(A=Ct,t+=5):(A=e,0===g&&C($r)),A===e&&(a.substr(t,5)===Rt?(A=Rt,t+=5):(A=e,0===g&&C(Zr))),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if((w=Ut())!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(123===a.charCodeAt(t)?(_=De,t++):(_=e,0===g&&C(Qe)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if((R=Dt())===e&&(R=null),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if(125===a.charCodeAt(t)?(B=He,t++):(B=e,0===g&&C(Ke)),B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();W!==e?s=b=function(te,pe){var ye=[];if(null!=pe)for(var me=0;me<pe.triplesContext.length;me++){var ge=pe.triplesContext[me];ge.graph=te,ye.push(ge)}return{token:"quadsnottriples",quadsContext:ye}}(w,R):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Ml)),s}function Dt(){var s,b,A,y,w,j,_,F,R;if(g++,s=t,(b=ta())!==e){for(A=t,y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(46===a.charCodeAt(t)?(w=et,t++):(w=e,0===g&&C(tt)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();j!==e?((_=Dt())===e&&(_=null),_!==e?A=y=[y,w,j,_]:(t=A,A=e)):(t=A,A=e)}else t=A,A=e;else t=A,A=e;A===e&&(A=null),A!==e?(F=A,R=b.triplesContext,null!=F&&"object"==typeof F&&null!=F.length&&null!=F[3]&&null!=F[3].triplesContext&&(R=R.concat(F[3].triplesContext)),s=b={token:"triplestemplate",triplesContext:R}):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Bl)),s}function ot(){var s,b,A,y,w,j,_,F,R,H,B,W,ee,te;if(g++,s=t,123===a.charCodeAt(t)?(b=De,t++):(b=e,0===g&&C(Qe)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(g++,_=t,(F=Ls())!==e&&(R=zt())!==e&&(H=Vt())!==e?(W=R,ee=H,(te={kind:"select",token:"subselect"}).projection=(B=F).vars,te.modifier=B.modifier,te.pattern=W,null!=ee&&null!=ee.limit&&(te.limit=ee.limit),null!=ee&&null!=ee.offset&&(te.offset=ee.offset),null!=ee&&null!=ee.order&&""!=ee.order&&(te.order=ee.order),null!=ee&&null!=ee.group&&(te.group=ee.group),_=F=te):(t=_,_=e),g--,_===e&&(F=e,0===g&&C(J)),(y=_)!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?(125===a.charCodeAt(t)?(j=He,t++):(j=e,0===g&&C(Ke)),j!==e?s=b=y:(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e)if(s=t,123===a.charCodeAt(t)?(b=De,t++):(b=e,0===g&&C(Qe)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(y=function(){var _,F,R,H,B,W,ee,te,pe,ye;if(g++,_=t,(F=Lr())===e&&(F=null),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e){if(H=[],B=t,(W=Ks())!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(46===a.charCodeAt(t)?(te=et,t++):(te=e,0===g&&C(tt)),te===e&&(te=null),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e?((ye=Lr())===e&&(ye=null),ye!==e?B=W=[W,ee,te,pe,ye]:(t=B,B=e)):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;for(;B!==e;)if(H.push(B),B=t,(W=Ks())!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if(46===a.charCodeAt(t)?(te=et,t++):(te=e,0===g&&C(tt)),te===e&&(te=null),te!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e?((ye=Lr())===e&&(ye=null),ye!==e?B=W=[W,ee,te,pe,ye]:(t=B,B=e)):(t=B,B=e)}else t=B,B=e;else t=B,B=e}else t=B,B=e;H!==e?_=F=function(me,ge){var xe=[];null!=me&&me!=[]&&xe.push(me);for(var ke=0;ke<ge.length;ke++)for(var Te=0;Te<ge[ke].length;Te++)null!=ge[ke][Te]&&null!=ge[ke][Te].token&&xe.push(ge[ke][Te]);var Fe=[],Ce=[],Ie=[],Re=[];for(ke=0;ke<xe.length;ke++)if("triplespattern"!==xe[ke].token&&"filter"!==xe[ke].token&&"bind"!==xe[ke].token){if(0!=Ce.length||0!=Ie.length){var Pe=[];for(Te=0;Te<Ce.length;Te++)Pe=Pe.concat(Ce[Te].triplesContext);Pe.length>0&&Fe.push({token:"basicgraphpattern",triplesContext:Pe}),Ce=[]}Fe.push(xe[ke])}else"triplespattern"===xe[ke].token?Ce.push(xe[ke]):"bind"===xe[ke].token?Re.push(xe[ke]):Ie.push(xe[ke]);if(0!=Ce.length||0!=Ie.length){for(Pe=[],Te=0;Te<Ce.length;Te++)Pe=Pe.concat(Ce[Te].triplesContext);Pe.length>0&&Fe.push({token:"basicgraphpattern",triplesContext:Pe})}return{token:"groupgraphpattern",patterns:Fe,filters:Ie,binds:Re}}(F,H):(t=_,_=e)}else t=_,_=e}else t=_,_=e;return g--,_===e&&(F=e,0===g&&C(Gl)),_}(),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?(125===a.charCodeAt(t)?(j=He,t++):(j=e,0===g&&C(Ke)),j!==e?s=b=y:(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Ul)),s}function Lr(){var s,b,A,y,w,j,_,F;if(g++,s=t,(b=function(){var R,H,B,W,ee,te;for(g++,R=t,H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=Dr())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();W!==e&&(ee=na())!==e?R=H=function(te,pe){var ye=pe.triplesContext,me=te;if(pe.pairs)for(var ge=0;ge<pe.pairs.length;ge++){var xe=pe.pairs[ge],ke=null;null!=xe[1].length&&(xe[1]=xe[1][0]),me.token&&"triplesnodecollection"===me.token?("path"===(ke={subject:me.chainSubject[0],predicate:xe[0],object:xe[1]}).predicate.token&&"element"===ke.predicate.kind&&(ke.predicate=ke.predicate.value),ye.push(ke),ye=ye.concat(me.triplesContext)):("path"===(ke={subject:me,predicate:xe[0],object:xe[1]}).predicate.token&&"element"===ke.predicate.kind&&(ke.predicate=ke.predicate.value),ye.push(ke))}var Te={token:"triplessamesubject"};return Te.triplesContext=ye,Te.chainSubject=me,Te}(B,ee):(t=R,R=e)}else t=R,R=e;else t=R,R=e;if(R===e){for(R=t,H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=sa())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();W!==e?(g++,(te=function(){var pe,ye,me,ge,xe,ke,Te,Fe,Ce,Ie,Re,Pe,Le;if(g++,pe=t,(ye=Mt())===e&&(ye=Bt()),ye!==e){for(me=[],ge=E();ge!==e;)me.push(ge),ge=E();if(me!==e)if((ge=ra())!==e){for(xe=[],ke=t,Te=[],Fe=E();Fe!==e;)Te.push(Fe),Fe=E();if(Te!==e)if(59===a.charCodeAt(t)?(Fe=pt,t++):(Fe=e,0===g&&C(dt)),Fe!==e){for(Ce=[],Ie=E();Ie!==e;)Ce.push(Ie),Ie=E();if(Ce!==e){if(Ie=t,(Re=Mt())===e&&(Re=Bt()),Re!==e){for(Pe=[],Le=E();Le!==e;)Pe.push(Le),Le=E();Pe!==e&&(Le=kt())!==e?Ie=Re=[Re,Pe,Le]:(t=Ie,Ie=e)}else t=Ie,Ie=e;Ie===e&&(Ie=null),Ie!==e?ke=Te=[Te,Fe,Ce,Ie]:(t=ke,ke=e)}else t=ke,ke=e}else t=ke,ke=e;else t=ke,ke=e;for(;ke!==e;){for(xe.push(ke),ke=t,Te=[],Fe=E();Fe!==e;)Te.push(Fe),Fe=E();if(Te!==e)if(59===a.charCodeAt(t)?(Fe=pt,t++):(Fe=e,0===g&&C(dt)),Fe!==e){for(Ce=[],Ie=E();Ie!==e;)Ce.push(Ie),Ie=E();if(Ce!==e){if(Ie=t,(Re=Mt())===e&&(Re=Bt()),Re!==e){for(Pe=[],Le=E();Le!==e;)Pe.push(Le),Le=E();Pe!==e&&(Le=kt())!==e?Ie=Re=[Re,Pe,Le]:(t=Ie,Ie=e)}else t=Ie,Ie=e;Ie===e&&(Ie=null),Ie!==e?ke=Te=[Te,Fe,Ce,Ie]:(t=ke,ke=e)}else t=ke,ke=e}else t=ke,ke=e;else t=ke,ke=e}xe!==e?pe=ye=function(Ve,Ge,at){for(var rt={token:"propertylist"},st=[],vt=[],Ye=0;Ye<Ge.length;Ye++)null!=Ge[Ye].triplesContext?(st=st.concat(Ge[Ye].triplesContext),"triplesnodecollection"===Ge[Ye].token&&null!=Ge[Ye].chainSubject.length?vt.push([Ve,Ge[Ye].chainSubject[0]]):vt.push([Ve,Ge[Ye].chainSubject])):vt.push([Ve,Ge[Ye]]);for(Ye=0;Ye<at.length;Ye++)for(var Et=at[Ye][3],ya=Et[0],Zt=Et[2]||[],qt=0;qt<Zt.length;qt++)null!=Zt[qt].triplesContext?(st=st.concat(Zt[qt].triplesContext),vt.push([ya,Zt[qt].chainSubject])):vt.push([ya,Zt[qt]]);return rt.pairs=vt,rt.triplesContext=st,rt}(ye,ge,xe):(t=pe,pe=e)}else t=pe,pe=e;else t=pe,pe=e}else t=pe,pe=e;return g--,pe===e&&(ye=e,0===g&&C(mu)),pe}())===e&&(te=null),g--,te===e&&0===g&&C(Tu),(ee=te)!==e?R=H=function(te,pe){var ye=te.triplesContext,me=te.chainSubject;if(null!=pe&&null!=pe.pairs)for(var ge=0;ge<pe.pairs.length;ge++){var xe=pe.pairs[ge];if(null!=xe[1].length&&(xe[1]=xe[1][0]),"triplesnodecollection"===te.token)for(var ke=0;ke<me.length;ke++){var Te=me[ke];if(null!=Te.triplesContext){var Fe={subject:Te.chainSubject,predicate:xe[0],object:xe[1]};ye.concat(Te.triplesContext)}else Fe={subject:me[ke],predicate:xe[0],object:xe[1]},ye.push(Fe)}else Fe={subject:me,predicate:xe[0],object:xe[1]},ye.push(Fe)}var Ce={token:"triplessamesubject"};return Ce.triplesContext=ye,Ce.chainSubject=me,Ce}(B,ee):(t=R,R=e)):(t=R,R=e)}else t=R,R=e;else t=R,R=e}return g--,R===e&&(H=e,0===g&&C(ju)),R}())!==e){for(A=t,y=[],w=E();w!==e;)y.push(w),w=E();y!==e?(46===a.charCodeAt(t)?(w=et,t++):(w=e,0===g&&C(tt)),w!==e?((j=Lr())===e&&(j=null),j!==e?A=y=[y,w,j]:(t=A,A=e)):(t=A,A=e)):(t=A,A=e),A===e&&(A=null),A!==e?(_=A,F=b.triplesContext,null!=_&&"object"==typeof _&&null!=_&&null!=_.length&&null!=_[2]&&null!=_[2].triplesContext&&(F=F.concat(_[2].triplesContext)),s=b={token:"triplespattern",triplesContext:F}):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(ql)),s}function Ks(){var s,b,A,y,w;return g++,s=function(){var b,A,y,w,j,_,F,R;if(g++,b=t,(A=ot())!==e){for(y=[],w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,5)===lr?(_=lr,t+=5):(_=e,0===g&&C(Pi)),_===e&&(a.substr(t,5)===ur?(_=ur,t+=5):(_=e,0===g&&C(Di))),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=ot())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;for(;w!==e;){for(y.push(w),w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,5)===lr?(_=lr,t+=5):(_=e,0===g&&C(Pi)),_===e&&(a.substr(t,5)===ur?(_=ur,t+=5):(_=e,0===g&&C(Di))),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=ot())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e}y!==e?b=A=function(H,B){if(0===B.length)return H;for(var W={token:"graphunionpattern",value:[H]},ee=0;ee<B.length;ee++)ee==B.length-1?W.value.push(B[ee][3]):(W.value.push(B[ee][3]),W={token:"graphunionpattern",value:[W]});return W}(A,y):(t=b,b=e)}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(eu)),b}(),s===e&&(s=function(){var b,A,y,w,j;for(g++,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(a.substr(t,8)===Ci?(y=Ci,t+=8):(y=e,0===g&&C(zl)),y===e&&(a.substr(t,8)===Ri?(y=Ri,t+=8):(y=e,0===g&&C(Vl))),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e&&(j=ot())!==e?b=A={token:"optionalgraphpattern",value:j}:(t=b,b=e)}else t=b,b=e;else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(Jl)),b}(),s===e&&(s=function(){var b,A,y,w;if(g++,b=t,a.substr(t,5)===Oi?(A=Oi,t+=5):(A=e,0===g&&C(Zl)),A===e&&(a.substr(t,5)===Li?(A=Li,t+=5):(A=e,0===g&&C(Yl))),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e&&(w=ot())!==e?b=A={token:"minusgraphpattern",status:"todo",value:w}:(t=b,b=e)}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C($l)),b}(),s===e&&(s=function(){var b,A,y,w,j,_,F;for(g++,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(a.substr(t,5)===Ct?(y=Ct,t+=5):(y=e,0===g&&C($r)),y===e&&(a.substr(t,5)===Rt?(y=Rt,t+=5):(y=e,0===g&&C(Zr))),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Ut())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=ot())!==e?b=A=function(R,H){for(var B=0;B<H.patterns.length;B++)for(var W=H.patterns[B],ee=0;ee<W.triplesContext.length;ee++)W.triplesContext[ee].graph=R;return H.token="groupgraphpattern",H}(j,F):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(Wl)),b}(),s===e&&(g++,b=t,a.substr(t,7)===Ni?(A=Ni,t+=7):(A=e,0===g&&C(Kl)),A!==e&&(y=Ut())!==e&&(w=ot())!==e?b=A={token:"servicegraphpattern",status:"todo",value:[y,w]}:(t=b,b=e),g--,b===e&&(A=e,0===g&&C(Xl)),(s=b)===e&&(s=function(){var b,A,y,w,j;for(g++,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(a.substr(t,6)===Qi?(y=Qi,t+=6):(y=e,0===g&&C(ru)),y===e&&(a.substr(t,6)===Mi?(y=Mi,t+=6):(y=e,0===g&&C(nu))),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e&&(j=kn())!==e?b=A={token:"filter",value:j}:(t=b,b=e)}else t=b,b=e;else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(tu)),b}(),s===e&&(s=function(){var b,A,y,w,j,_,F,R,H,B,W,ee,te;for(g++,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(a.substr(t,4)===Bi?(y=Bi,t+=4):(y=e,0===g&&C(ou)),y===e&&(a.substr(t,4)===Ui?(y=Ui,t+=4):(y=e,0===g&&C(su))),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(40===a.charCodeAt(t)?(j=ue,t++):(j=e,0===g&&C(oe)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if((F=Be())!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if(a.substr(t,2)===Ee?(H=Ee,t+=2):(H=e,0===g&&C($)),H===e&&(a.substr(t,2)===he?(H=he,t+=2):(H=e,0===g&&C(_e))),H!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();if(B!==e)if((W=$e())!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();ee!==e?(41===a.charCodeAt(t)?(te=m,t++):(te=e,0===g&&C(L)),te!==e?b=A={token:"bind",expression:F,as:W}:(t=b,b=e)):(t=b,b=e)}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(iu)),b}(),s===e&&(s=function(){var b,A,y,w,j;for(g++,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(a.substr(t,6)===rr?(y=rr,t+=6):(y=e,0===g&&C(li)),y===e&&(a.substr(t,6)===nr?(y=nr,t+=6):(y=e,0===g&&C(ui))),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e&&(j=$s())!==e?b=A=j:(t=b,b=e)}else t=b,b=e;else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(lu)),b}()))))))),g--,s===e&&0===g&&C(Hl),s}function kn(){var s;return g++,(s=Ln())===e&&(s=Pn())===e&&(s=Zs()),g--,s===e&&0===g&&C(au),s}function $s(){var s;return g++,(s=function(){var b,A,y,w,j,_,F,R;for(g++,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=$e())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(123===a.charCodeAt(t)?(j=De,t++):(j=e,0===g&&C(Qe)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e){for(F=[],R=Qt();R!==e;)F.push(R),R=Qt();F!==e?(125===a.charCodeAt(t)?(R=He,t++):(R=e,0===g&&C(Ke)),R!==e?b=A={token:"inlineData",values:[{var:y,value:F}]}:(t=b,b=e)):(t=b,b=e)}else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e;else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(cu)),b}())===e&&(s=function(){var b,A,y,w,j,_,F,R,H,B,W,ee,te,pe,ye,me;for(g++,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e){if((y=yt())===e)if(y=t,40===a.charCodeAt(t)?(w=ue,t++):(w=e,0===g&&C(oe)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e){for(_=[],F=$e();F!==e;)_.push(F),F=$e();if(_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e?(41===a.charCodeAt(t)?(R=m,t++):(R=e,0===g&&C(L)),R!==e?y=w=[w,j,_,F,R]:(t=y,y=e)):(t=y,y=e)}else t=y,y=e}else t=y,y=e}else t=y,y=e;if(y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(123===a.charCodeAt(t)?(j=De,t++):(j=e,0===g&&C(Qe)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e){for(F=[],R=t,H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if(40===a.charCodeAt(t)?(B=ue,t++):(B=e,0===g&&C(oe)),B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e){for(ee=[],te=Qt();te!==e;)ee.push(te),te=Qt();if(ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();if(te!==e)if(41===a.charCodeAt(t)?(pe=m,t++):(pe=e,0===g&&C(L)),pe!==e){for(ye=[],me=E();me!==e;)ye.push(me),me=E();ye!==e?R=H=[H,B,W,ee,te,pe,ye]:(t=R,R=e)}else t=R,R=e;else t=R,R=e}else t=R,R=e}else t=R,R=e}else t=R,R=e;else t=R,R=e;for(R===e&&(R=yt());R!==e;){for(F.push(R),R=t,H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if(40===a.charCodeAt(t)?(B=ue,t++):(B=e,0===g&&C(oe)),B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e){for(ee=[],te=Qt();te!==e;)ee.push(te),te=Qt();if(ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();if(te!==e)if(41===a.charCodeAt(t)?(pe=m,t++):(pe=e,0===g&&C(L)),pe!==e){for(ye=[],me=E();me!==e;)ye.push(me),me=E();ye!==e?R=H=[H,B,W,ee,te,pe,ye]:(t=R,R=e)}else t=R,R=e;else t=R,R=e}else t=R,R=e}else t=R,R=e}else t=R,R=e;else t=R,R=e;R===e&&(R=yt())}if(F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e?(125===a.charCodeAt(t)?(H=He,t++):(H=e,0===g&&C(Ke)),H!==e?b=A={token:"inlineData",values:[],todo:!0}:(t=b,b=e)):(t=b,b=e)}else t=b,b=e}else t=b,b=e}else t=b,b=e;else t=b,b=e}else t=b,b=e}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(fu)),b}()),g--,s===e&&0===g&&C(uu),s}function Qt(){var s,b,A,y,w;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if((A=Gr())===e&&(A=Mr())===e&&(A=Br())===e&&(A=Ur())===e&&(a.substr(t,5)===tr?(A=tr,t+=5):(A=e,0===g&&C(ai))),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e?s=b=A:(t=s,s=e)}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(pu)),s}function Zs(){var s,b,A,y,w,j;if(g++,s=t,(b=Ze())!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e&&(y=Ys())!==e?(w=y,(j={token:"expression",expressionType:"irireforfunction"}).iriref=b,j.args=w.value,s=b=j):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(du)),s}function Ys(){var s,b,A,y,w,j,_,F,R,H,B,W;if(g++,s=t,(b=yt())!==e&&(b=Gi()),(s=b)===e)if(s=t,40===a.charCodeAt(t)?(b=ue,t++):(b=e,0===g&&C(oe)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(a.substr(t,8)===ve?(y=ve,t+=8):(y=e,0===g&&C(fe)),y===e&&(a.substr(t,8)===Y?(y=Y,t+=8):(y=e,0===g&&C(M))),y===e&&(y=null),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e){if(F=[],R=t,44===a.charCodeAt(t)?(H=We,t++):(H=e,0===g&&C(Xe)),H!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();B!==e&&(W=Be())!==e?R=H=[H,B,W]:(t=R,R=e)}else t=R,R=e;for(;R!==e;)if(F.push(R),R=t,44===a.charCodeAt(t)?(H=We,t++):(H=e,0===g&&C(Xe)),H!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();B!==e&&(W=Be())!==e?R=H=[H,B,W]:(t=R,R=e)}else t=R,R=e;F!==e?(41===a.charCodeAt(t)?(R=m,t++):(R=e,0===g&&C(L)),R!==e?s=b=function(ee,te,pe){for(var ye=[],me=0;me<pe.length;me++)ye.push(pe[me][2]);var ge={token:"args"};return ge.value=[te].concat(ye),null!=ee&&"DISTINCT"===ee.toUpperCase()?ge.distinct=!0:ge.distinct=!1,ge}(y,j,F):(t=s,s=e)):(t=s,s=e)}else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(hu)),s}function Wt(){var s,b,A,y,w,j,_,F,R,H;if(g++,s=t,(b=yt())!==e&&(b=Gi()),(s=b)===e)if(s=t,40===a.charCodeAt(t)?(b=ue,t++):(b=e,0===g&&C(oe)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=Ze())===e&&(y=Be()),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e){if(j=[],_=t,44===a.charCodeAt(t)?(F=We,t++):(F=e,0===g&&C(Xe)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e?((H=Ze())===e&&(H=Be()),H!==e?_=F=[F,R,H]:(t=_,_=e)):(t=_,_=e)}else t=_,_=e;for(;_!==e;)if(j.push(_),_=t,44===a.charCodeAt(t)?(F=We,t++):(F=e,0===g&&C(Xe)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e?((H=Ze())===e&&(H=Be()),H!==e?_=F=[F,R,H]:(t=_,_=e)):(t=_,_=e)}else t=_,_=e;j!==e?(41===a.charCodeAt(t)?(_=m,t++):(_=e,0===g&&C(L)),_!==e?s=b=function(B,W){for(var ee=[],te=0;te<W.length;te++)ee.push(W[te][2]);var pe={token:"args"};return pe.value=[B].concat(ee),pe}(y,j):(t=s,s=e)):(t=s,s=e)}else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(yu)),s}function ea(){var s,b,A,y,w,j,_,F,R;if(g++,s=t,(b=ta())!==e){for(A=t,y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(46===a.charCodeAt(t)?(w=et,t++):(w=e,0===g&&C(tt)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();j!==e?((_=ea())===e&&(_=null),_!==e?A=y=[y,w,j,_]:(t=A,A=e)):(t=A,A=e)}else t=A,A=e;else t=A,A=e;A===e&&(A=null),A!==e?(F=A,R=b.triplesContext,null!=F&&"object"==typeof F&&null!=F.length&&null!=F[3]&&null!=F[3].triplesContext&&(R=R.concat(F[3].triplesContext)),s=b={token:"triplestemplate",triplesContext:R}):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(gu)),s}function ta(){var s,b,A,y,w,j;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if((A=Dr())!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e&&(w=En())!==e?s=b=function(j,_){var F=_.triplesContext,R=j;if(_.pairs)for(var H=0;H<_.pairs.length;H++){var B=_.pairs[H],W=null;null!=B[1].length&&(B[1]=B[1][0]),R.token&&"triplesnodecollection"===R.token?(W={subject:R.chainSubject[0],predicate:B[0],object:B[1]},F.push(W),F=F.concat(R.triplesContext)):(W={subject:R,predicate:B[0],object:B[1]},F.push(W))}var ee={token:"triplessamesubject"};return ee.triplesContext=F,ee.chainSubject=R,ee}(A,w):(t=s,s=e)}else t=s,s=e;else t=s,s=e;if(s===e){for(s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if((A=aa())!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e?(g++,(j=En())===e&&(j=null),g--,j===e&&0===g&&C(wu),(w=j)!==e?s=b=function(j,_){var F=j.triplesContext,R=j.chainSubject;if(_.pairs)for(var H=0;H<_.pairs.length;H++){var B=_.pairs[H];if(null!=B[1].length&&(B[1]=B[1][0]),"triplesnodecollection"===j.token)for(var W=0;W<R.length;W++){var ee=R[W];if(null!=ee.triplesContext){var te={subject:ee.chainSubject,predicate:B[0],object:B[1]};F.concat(ee.triplesContext)}else te={subject:R[W],predicate:B[0],object:B[1]},F.push(te)}else te={subject:R,predicate:B[0],object:B[1]},F.push(te)}var pe={token:"triplessamesubject"};return pe.triplesContext=F,pe.chainSubject=R,pe}(A,w):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}return g--,s===e&&(b=e,0===g&&C(bu)),s}function En(){var s,b,A,y,w,j,_,F,R,H,B,W,ee;if(g++,s=t,(b=jn())!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=kt())!==e){for(w=[],j=t,_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(59===a.charCodeAt(t)?(F=pt,t++):(F=e,0===g&&C(dt)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e){if(H=t,(B=jn())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();W!==e&&(ee=kt())!==e?H=B=[B,W,ee]:(t=H,H=e)}else t=H,H=e;H===e&&(H=null),H!==e?j=_=[_,F,R,H]:(t=j,j=e)}else t=j,j=e}else t=j,j=e;else t=j,j=e;for(;j!==e;){for(w.push(j),j=t,_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(59===a.charCodeAt(t)?(F=pt,t++):(F=e,0===g&&C(dt)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e){if(H=t,(B=jn())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();W!==e&&(ee=kt())!==e?H=B=[B,W,ee]:(t=H,H=e)}else t=H,H=e;H===e&&(H=null),H!==e?j=_=[_,F,R,H]:(t=j,j=e)}else t=j,j=e}else t=j,j=e;else t=j,j=e}w!==e?s=b=function(te,pe,ye){for(var me={token:"propertylist"},ge=[],xe=[],ke=0;ke<pe.length;ke++)null!=pe[ke].triplesContext?(ge=ge.concat(pe[ke].triplesContext),"triplesnodecollection"===pe[ke].token&&null!=pe[ke].chainSubject.length?xe.push([te,pe[ke].chainSubject[0]]):xe.push([te,pe[ke].chainSubject])):xe.push([te,pe[ke]]);for(ke=0;ke<ye.length;ke++)for(var Te=ye[ke][3],Fe=Te[0],Ce=Te[2]||[],Ie=0;Ie<Ce.length;Ie++)null!=Ce[Ie].triplesContext?(ge=ge.concat(Ce[Ie].triplesContext),xe.push([Fe,Ce[Ie].chainSubject])):xe.push([Fe,Ce[Ie]]);return me.pairs=xe,me.triplesContext=ge,me}(b,y,w):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(xu)),s}function ra(){var s,b,A,y,w,j,_,F;if(g++,s=t,(b=An())!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e){if(y=[],w=t,44===a.charCodeAt(t)?(j=We,t++):(j=e,0===g&&C(Xe)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=An())!==e?w=j=[j,_,F]:(t=w,w=e)}else t=w,w=e;for(;w!==e;)if(y.push(w),w=t,44===a.charCodeAt(t)?(j=We,t++):(j=e,0===g&&C(Xe)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=An())!==e?w=j=[j,_,F]:(t=w,w=e)}else t=w,w=e;y!==e?s=b=function(R,H){var B=[];B.push(R);for(var W=0;W<H.length;W++)for(var ee=0;ee<H[W].length;ee++)"object"==typeof H[W][ee]&&null!=H[W][ee].token&&B.push(H[W][ee]);return B}(b,y):(t=s,s=e)}else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(_u)),s}function kt(){var s,b,A,y,w,j,_,F;if(g++,s=t,(b=Sn())!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e){if(y=[],w=t,44===a.charCodeAt(t)?(j=We,t++):(j=e,0===g&&C(Xe)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=Sn())!==e?w=j=[j,_,F]:(t=w,w=e)}else t=w,w=e;for(;w!==e;)if(y.push(w),w=t,44===a.charCodeAt(t)?(j=We,t++):(j=e,0===g&&C(Xe)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=Sn())!==e?w=j=[j,_,F]:(t=w,w=e)}else t=w,w=e;y!==e?s=b=function(R,H){var B=[];B.push(R);for(var W=0;W<H.length;W++)for(var ee=0;ee<H[W].length;ee++)"object"==typeof H[W][ee]&&null!=H[W][ee].token&&B.push(H[W][ee]);return B}(b,y):(t=s,s=e)}else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(ku)),s}function An(){var s;return g++,s=Cn(),g--,s===e&&0===g&&C(Eu),s}function Sn(){var s;return g++,s=Rn(),g--,s===e&&0===g&&C(Au),s}function jn(){var s,b;return g++,(s=Ut())===e&&(s=t,97===a.charCodeAt(t)?(b=cr,t++):(b=e,0===g&&C(fr)),b!==e&&(b={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),s=b),g--,s===e&&(b=e,0===g&&C(Su)),s}function na(){var s,b,A,y,w,j,_,F,R,H,B,W;if(g++,s=t,(b=Mt())===e&&(b=Bt()),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=ra())!==e){for(w=[],j=t,_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(59===a.charCodeAt(t)?(F=pt,t++):(F=e,0===g&&C(dt)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e?(H=t,(B=Mt())===e&&(B=Bt()),B!==e&&(W=kt())!==e?H=B=[B,W]:(t=H,H=e),H===e&&(H=null),H!==e?j=_=[_,F,R,H]:(t=j,j=e)):(t=j,j=e)}else t=j,j=e;else t=j,j=e;for(;j!==e;){for(w.push(j),j=t,_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(59===a.charCodeAt(t)?(F=pt,t++):(F=e,0===g&&C(dt)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e?(H=t,(B=Mt())===e&&(B=Bt()),B!==e&&(W=kt())!==e?H=B=[B,W]:(t=H,H=e),H===e&&(H=null),H!==e?j=_=[_,F,R,H]:(t=j,j=e)):(t=j,j=e)}else t=j,j=e;else t=j,j=e}w!==e?s=b=function(ee,te,pe){for(var ye={token:"propertylist"},me=[],ge=[],xe=0;xe<te.length;xe++)null!=te[xe].triplesContext?(me=me.concat(te[xe].triplesContext),"triplesnodecollection"===te[xe].token&&null!=te[xe].chainSubject.length?ge.push([ee,te[xe].chainSubject[0]]):ge.push([ee,te[xe].chainSubject])):ge.push([ee,te[xe]]);for(xe=0;xe<pe.length;xe++)for(var ke=pe[xe][3],Te=ke[0],Fe=ke[1]||[],Ce=0;Ce<Fe.length;Ce++)null!=Fe[Ce].triplesContext?(me=me.concat(Fe[Ce].triplesContext),ge.push([Te,Fe[Ce].chainSubject])):ge.push([Te,Fe[Ce]]);return ye.pairs=ge,ye.triplesContext=me,ye}(b,y,w):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Fu)),s}function Mt(){var s,b;return g++,t,b=ia(),g--,(s=b)===e&&(b=e,0===g&&C(Iu)),s}function Bt(){var s;return g++,s=$e(),g--,s===e&&0===g&&C(Cu),s}function ia(){var s;return g++,s=function(){var b,A,y,w,j,_;if(g++,b=t,(A=Fn())!==e){for(y=[],w=t,124===a.charCodeAt(t)?(j=pr,t++):(j=e,0===g&&C(dr)),j!==e&&(_=Fn())!==e?w=j=[j,_]:(t=w,w=e);w!==e;)y.push(w),w=t,124===a.charCodeAt(t)?(j=pr,t++):(j=e,0===g&&C(dr)),j!==e&&(_=Fn())!==e?w=j=[j,_]:(t=w,w=e);y!==e?b=A=function(F,R){if(null==R||0===R.length)return F;for(var H=[],B=0;B<R.length;B++)H.push(R[1]);var W={token:"path",kind:"alternative"};return W.value=H,W}(A,y):(t=b,b=e)}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(Nu)),b}(),g--,s===e&&0===g&&C(Ru),s}function Fn(){var s,b,A,y,w,j;if(g++,s=t,(b=Tn())!==e){for(A=[],y=t,47===a.charCodeAt(t)?(w=wt,t++):(w=e,0===g&&C(_t)),w!==e&&(j=Tn())!==e?y=w=[w,j]:(t=y,y=e);y!==e;)A.push(y),y=t,47===a.charCodeAt(t)?(w=wt,t++):(w=e,0===g&&C(_t)),w!==e&&(j=Tn())!==e?y=w=[w,j]:(t=y,y=e);A!==e?s=b=function(_,F){if(null==F||0===F.length)return _;for(var R=[_],H=0;H<F.length;H++)R.push(F[H][1]);var B={token:"path",kind:"sequence"};return B.value=R,B}(b,A):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Ou)),s}function oa(){var s,b,A,y,w,j,_;return g++,s=t,g++,(y=Ze())===e&&(y=t,97===a.charCodeAt(t)?(w=cr,t++):(w=e,0===g&&C(fr)),w!==e&&(w={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(y=w)===e&&(y=t,33===a.charCodeAt(t)?(w=tn,t++):(w=e,0===g&&C(rn)),w!==e&&(j=function(){var F,R,H,B,W,ee,te,pe;if((F=Pr())===e)if(F=t,40===a.charCodeAt(t)?(R=ue,t++):(R=e,0===g&&C(oe)),R!==e){if(H=t,(B=Pr())!==e){for(W=[],ee=t,124===a.charCodeAt(t)?(te=pr,t++):(te=e,0===g&&C(dr)),te!==e&&(pe=Pr())!==e?ee=te=[te,pe]:(t=ee,ee=e);ee!==e;)W.push(ee),ee=t,124===a.charCodeAt(t)?(te=pr,t++):(te=e,0===g&&C(dr)),te!==e&&(pe=Pr())!==e?ee=te=[te,pe]:(t=ee,ee=e);W!==e?H=B=[B,W]:(t=H,H=e)}else t=H,H=e;H===e&&(H=null),H!==e?(41===a.charCodeAt(t)?(B=m,t++):(B=e,0===g&&C(L)),B!==e?F=R=[R,H,B]:(t=F,F=e)):(t=F,F=e)}else t=F,F=e;return F}())!==e?y=w=[w,j]:(t=y,y=e),y===e&&(y=t,40===a.charCodeAt(t)?(w=ue,t++):(w=e,0===g&&C(oe)),w!==e&&(j=ia())!==e?(41===a.charCodeAt(t)?(_=m,t++):(_=e,0===g&&C(L)),_!==e?y=w=j:(t=y,y=e)):(t=y,y=e)))),g--,y===e&&(w=e,0===g&&C(Qu)),(b=y)!==e?(A=function(){var y,w,j,_,F,R,H,B,W;return g++,42===a.charCodeAt(t)?(y=q,t++):(y=e,0===g&&C(re)),y===e&&(63===a.charCodeAt(t)?(y=Yr,t++):(y=e,0===g&&C(en)),y===e&&(43===a.charCodeAt(t)?(y=gt,t++):(y=e,0===g&&C(bt)),y===e&&(y=t,123===a.charCodeAt(t)?(w=De,t++):(w=e,0===g&&C(Qe)),w!==e?(j=t,(_=In())!==e?(F=t,44===a.charCodeAt(t)?(R=We,t++):(R=e,0===g&&C(Xe)),R!==e?(125===a.charCodeAt(t)?(H=He,t++):(H=e,0===g&&C(Ke)),H===e&&(H=t,(B=In())!==e?(125===a.charCodeAt(t)?(W=He,t++):(W=e,0===g&&C(Ke)),W!==e?H=B=[B,W]:(t=H,H=e)):(t=H,H=e)),H!==e?F=R=[R,H]:(t=F,F=e)):(t=F,F=e),F===e&&(125===a.charCodeAt(t)?(F=He,t++):(F=e,0===g&&C(Ke))),F!==e?j=_=[_,F]:(t=j,j=e)):(t=j,j=e),j===e&&(j=t,44===a.charCodeAt(t)?(_=We,t++):(_=e,0===g&&C(Xe)),_!==e&&(F=In())!==e?(125===a.charCodeAt(t)?(R=He,t++):(R=e,0===g&&C(Ke)),R!==e?j=_=[_,F,R]:(t=j,j=e)):(t=j,j=e)),j!==e?y=w=[w,j]:(t=y,y=e)):(t=y,y=e)))),g--,y===e&&(w=e,0===g&&C(Du)),y}(),A===e&&(A=null),A!==e?s=b=function(y,w){if(y.token&&"path"!=y.token&&""==w)return y;if(y.token&&y.token!=j&&""!=w){var j={token:"path",kind:"element"};return j.value=y,j.modifier=w,j}return y.modifier=w,y}(b,A):(t=s,s=e)):(t=s,s=e),g--,s===e&&(b=e,0===g&&C(Lu)),s}function Tn(){var s,b,A,y;return g++,(s=oa())===e&&(s=t,94===a.charCodeAt(t)?(b="^",t++):(b=e,0===g&&C(qi)),b!==e&&(A=oa())!==e?((y={token:"path",kind:"inversePath"}).value=A,s=b=y):(t=s,s=e)),g--,s===e&&(b=e,0===g&&C(Pu)),s}function Pr(){var s,b,A;return g++,(s=Ze())===e&&(97===a.charCodeAt(t)?(s=cr,t++):(s=e,0===g&&C(fr)),s===e&&(s=t,94===a.charCodeAt(t)?(b="^",t++):(b=e,0===g&&C(qi)),b!==e?((A=Ze())===e&&(97===a.charCodeAt(t)?(A=cr,t++):(A=e,0===g&&C(fr))),A!==e?s=b=[b,A]:(t=s,s=e)):(t=s,s=e))),g--,s===e&&(b=e,0===g&&C(Mu)),s}function In(){var s;return g++,s=Gt(),g--,s===e&&0===g&&C(Bu),s}function sa(){var s,b;return g++,s=t,(b=function(){var A,y,w,j,_,F,R,H,B;for(g++,A=t,y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(40===a.charCodeAt(t)?(w=ue,t++):(w=e,0===g&&C(oe)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e){if(_=[],(F=Cn())!==e)for(;F!==e;)_.push(F),F=Cn();else _=e;if(_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(41===a.charCodeAt(t)?(R=m,t++):(R=e,0===g&&C(L)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e?A=y=_:(t=A,A=e)}else t=A,A=e;else t=A,A=e}else t=A,A=e}else t=A,A=e}else t=A,A=e;else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(Ju)),A}())!==e&&(b=function(A){for(var y=[],w=[],j=null,_=0;_<A.length;_++){it++;var F=null;null==A[_].chainSubject&&null==A[_].triplesContext?F=A[_]:(F=A[_].chainSubject,y=y.concat(A[_].triplesContext)),j={subject:{token:"blank",value:"_:"+it},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:F},0==_&&w.push(j.subject),y.push(j),j=_===A.length-1?{subject:{token:"blank",value:"_:"+it},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+it},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(it+1)}},y.push(j)}return{token:"triplesnodecollection",triplesContext:y,chainSubject:w}}(b)),(s=b)===e&&(s=function(){var A,y,w,j,_,F,R,H;for(g++,A=t,y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(91===a.charCodeAt(t)?(w=nn,t++):(w=e,0===g&&C(on)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if((_=na())!==e)if(93===a.charCodeAt(t)?(F=sn,t++):(F=e,0===g&&C(an)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e?A=y=function(B){for(var W={token:"blank",value:"_:"+ ++it},ee=[],te=0;te<B.pairs.length;te++){var pe=B.pairs[te],ye={};ye.subject=W,ye.predicate=pe[0],null!=pe[1].length&&(pe[1]=pe[1][0]),ye.object=pe[1],ee.push(ye)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:B.triplesContext.concat(ee),chainSubject:W}}(_):(t=A,A=e)}else t=A,A=e;else t=A,A=e;else t=A,A=e}else t=A,A=e;else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(qu)),A}()),g--,s===e&&(b=e,0===g&&C(Uu)),s}function aa(){var s,b;return g++,s=t,(b=function(){var A,y,w,j,_,F,R,H,B;for(g++,A=t,y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(40===a.charCodeAt(t)?(w=ue,t++):(w=e,0===g&&C(oe)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e){if(_=[],(F=Rn())!==e)for(;F!==e;)_.push(F),F=Rn();else _=e;if(_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(41===a.charCodeAt(t)?(R=m,t++):(R=e,0===g&&C(L)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e?A=y=_:(t=A,A=e)}else t=A,A=e;else t=A,A=e}else t=A,A=e}else t=A,A=e}else t=A,A=e;else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(zu)),A}())!==e&&(b=function(A){for(var y=[],w=[],j=null,_=0;_<A.length;_++){it++;var F=null;null==A[_].chainSubject&&null==A[_].triplesContext?F=A[_]:(F=A[_].chainSubject,y=y.concat(F.triplesContext)),j={subject:{token:"blank",value:"_:"+it},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:F},0==_&&w.push(j.subject),y.push(j),j=_===A.length-1?{subject:{token:"blank",value:"_:"+it},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+it},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(it+1)}},y.push(j)}return{token:"triplesnodecollection",triplesContext:y,chainSubject:w}}(b)),(s=b)===e&&(s=function(){var A,y,w,j,_,F,R,H,B;for(g++,A=t,y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(91===a.charCodeAt(t)?(w=nn,t++):(w=e,0===g&&C(on)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if((_=En())!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(93===a.charCodeAt(t)?(R=sn,t++):(R=e,0===g&&C(an)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e?A=y=function(W){for(var ee={token:"blank",value:"_:"+ ++it},te=[],pe=0;pe<W.pairs.length;pe++){var ye=W.pairs[pe],me={};me.subject=ee,me.predicate=ye[0],null!=ye[1].length&&(ye[1]=ye[1][0]),me.object=ye[1],te.push(me)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:W.triplesContext.concat(te),chainSubject:ee}}(_):(t=A,A=e)}else t=A,A=e;else t=A,A=e}else t=A,A=e;else t=A,A=e}else t=A,A=e;else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(Hu)),A}()),g--,s===e&&(b=e,0===g&&C(Gu)),s}function Cn(){var s,b,A,y,w,j;for(g++,t,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=Dr())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?b=A=[A,y,w]:(t=b,b=e)}else t=b,b=e;else t=b,b=e;if(b===e){for(b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=sa())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?b=A=[A,y,w]:(t=b,b=e)}else t=b,b=e;else t=b,b=e}return b!==e&&(b=Hi(b)),g--,(s=b)===e&&(b=e,0===g&&C(Vu)),s}function Rn(){var s,b,A,y,w,j;for(g++,t,b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=Dr())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?b=A=[A,y,w]:(t=b,b=e)}else t=b,b=e;else t=b,b=e;if(b===e){for(b=t,A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=aa())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?b=A=[A,y,w]:(t=b,b=e)}else t=b,b=e;else t=b,b=e}return b!==e&&(b=Hi(b)),g--,(s=b)===e&&(b=e,0===g&&C(Wu)),s}function Dr(){var s,b,A,y,w,j,_;return g++,(s=$e())===e&&(g++,(b=Ze())===e&&(b=Mr())===e&&(b=Br())===e&&(b=Ur())===e&&(g++,A=t,g++,w=t,a.substr(t,2)===ss?(j=ss,t+=2):(j=e,0===g&&C(Lf)),j!==e&&(_=fa())!==e?w=j=_:(t=w,w=e),g--,w===e&&(j=e,0===g&&C(Of)),(y=w)!==e&&(y={token:"blank",value:y}),(A=y)===e&&(A=t,y=function(){var w,j,_,F;if(g++,w=t,91===a.charCodeAt(t)?(j=nn,t++):(j=e,0===g&&C(on)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(93===a.charCodeAt(t)?(F=sn,t++):(F=e,0===g&&C(an)),F!==e?w=j=[j,_,F]:(t=w,w=e)):(t=w,w=e)}else t=w,w=e;return g--,w===e&&(j=e,0===g&&C(xp)),w}(),y!==e&&(y={token:"blank",value:"_:"+ ++it}),A=y),g--,A===e&&(y=e,0===g&&C(If)),(b=A)===e&&(b=yt())),g--,b===e&&0===g&&C(Zu),s=b),g--,s===e&&0===g&&C(Xu),s}function Ut(){var s;return g++,(s=$e())===e&&(s=Ze()),g--,s===e&&0===g&&C(Ku),s}function $e(){var s,b,A,y,w,j,_,F,R;for(g++,s=t,b=[],A=E();A!==e;)b.push(A),A=E();if(b!==e)if(g++,_=t,63===a.charCodeAt(t)?(F=Yr,t++):(F=e,0===g&&C(en)),F!==e&&(R=ca())!==e?_=F=R:(t=_,_=e),g--,_===e&&(F=e,0===g&&C(Pf)),(A=_)===e&&(A=function(){var _,F,R;return g++,_=t,36===a.charCodeAt(t)?(F="$",t++):(F=e,0===g&&C(as)),F!==e&&(R=ca())!==e?_=F=R:(t=_,_=e),g--,_===e&&(F=e,0===g&&C(Df)),_}()),A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();y!==e?((j={token:"var"}).value=A,s=b=j):(t=s,s=e)}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C($u)),s}function Be(){var s;return g++,s=function(){var b,A,y,w,j,_,F,R;if(g++,b=t,(A=Nn())!==e){for(y=[],w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===hr?(_=hr,t+=2):(_=e,0===g&&C(Ji)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=Nn())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;for(;w!==e;){for(y.push(w),w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===hr?(_=hr,t+=2):(_=e,0===g&&C(Ji)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=Nn())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e}y!==e?b=A=function(H,B){if(0===B.length)return H;for(var W={token:"expression",expressionType:"conditionalor"},ee=[H],te=0;te<B.length;te++)ee.push(B[te][3]);return W.operands=ee,W}(A,y):(t=b,b=e)}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(ec)),b}(),g--,s===e&&0===g&&C(Yu),s}function Nn(){var s,b,A,y,w,j,_,F;if(g++,s=t,(b=On())!==e){for(A=[],y=t,w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(a.substr(t,2)===yr?(j=yr,t+=2):(j=e,0===g&&C(zi)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=On())!==e?y=w=[w,j,_,F]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;for(;y!==e;){for(A.push(y),y=t,w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(a.substr(t,2)===yr?(j=yr,t+=2):(j=e,0===g&&C(zi)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=On())!==e?y=w=[w,j,_,F]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}A!==e?s=b=function(R,H){if(0===H.length)return R;for(var B={token:"expression",expressionType:"conditionaland"},W=[R],ee=0;ee<H.length;ee++)W.push(H[ee][3]);return B.operands=W,B}(b,A):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(tc)),s}function On(){var s;return g++,s=function(){var b,A,y,w,j,_,F,R,H,B,W,ee,te;if(g++,b=t,(A=nt())!==e){for(y=[],w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(61===a.charCodeAt(t)?(_=vr,t++):(_=e,0===g&&C(gr)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===br?(_=br,t+=2):(_=e,0===g&&C(Vi)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(60===a.charCodeAt(t)?(_=ln,t++):(_=e,0===g&&C(un)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(62===a.charCodeAt(t)?(_=cn,t++):(_=e,0===g&&C(fn)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===mr?(_=mr,t+=2):(_=e,0===g&&C(Wi)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===xr?(_=xr,t+=2):(_=e,0===g&&C(Xi)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(73===a.charCodeAt(t)?(_=wr,t++):(_=e,0===g&&C(_r)),_===e&&(105===a.charCodeAt(t)?(_=kr,t++):(_=e,0===g&&C(Er))),_!==e)if(78===a.charCodeAt(t)?(F=Nt,t++):(F=e,0===g&&C(Ot)),F===e&&(110===a.charCodeAt(t)?(F=Lt,t++):(F=e,0===g&&C(Pt))),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e&&(H=Wt())!==e?w=j=[j,_,F,R,H]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(78===a.charCodeAt(t)?(_=Nt,t++):(_=e,0===g&&C(Ot)),_===e&&(110===a.charCodeAt(t)?(_=Lt,t++):(_=e,0===g&&C(Pt))),_!==e)if(79===a.charCodeAt(t)?(F=Ki,t++):(F=e,0===g&&C($i)),F===e&&(111===a.charCodeAt(t)?(F=Zi,t++):(F=e,0===g&&C(Yi))),F!==e)if(84===a.charCodeAt(t)?(R=eo,t++):(R=e,0===g&&C(to)),R===e&&(116===a.charCodeAt(t)?(R=ro,t++):(R=e,0===g&&C(no))),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if(73===a.charCodeAt(t)?(B=wr,t++):(B=e,0===g&&C(_r)),B===e&&(105===a.charCodeAt(t)?(B=kr,t++):(B=e,0===g&&C(Er))),B!==e)if(78===a.charCodeAt(t)?(W=Nt,t++):(W=e,0===g&&C(Ot)),W===e&&(110===a.charCodeAt(t)?(W=Lt,t++):(W=e,0===g&&C(Pt))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();ee!==e&&(te=Wt())!==e?w=j=[j,_,F,R,H,B,W,ee,te]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;else t=w,w=e;else t=w,w=e}}}}}}}for(;w!==e;){for(y.push(w),w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(61===a.charCodeAt(t)?(_=vr,t++):(_=e,0===g&&C(gr)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===br?(_=br,t+=2):(_=e,0===g&&C(Vi)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(60===a.charCodeAt(t)?(_=ln,t++):(_=e,0===g&&C(un)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(62===a.charCodeAt(t)?(_=cn,t++):(_=e,0===g&&C(fn)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===mr?(_=mr,t+=2):(_=e,0===g&&C(Wi)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(a.substr(t,2)===xr?(_=xr,t+=2):(_=e,0===g&&C(Xi)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=nt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(73===a.charCodeAt(t)?(_=wr,t++):(_=e,0===g&&C(_r)),_===e&&(105===a.charCodeAt(t)?(_=kr,t++):(_=e,0===g&&C(Er))),_!==e)if(78===a.charCodeAt(t)?(F=Nt,t++):(F=e,0===g&&C(Ot)),F===e&&(110===a.charCodeAt(t)?(F=Lt,t++):(F=e,0===g&&C(Pt))),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e&&(H=Wt())!==e?w=j=[j,_,F,R,H]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(78===a.charCodeAt(t)?(_=Nt,t++):(_=e,0===g&&C(Ot)),_===e&&(110===a.charCodeAt(t)?(_=Lt,t++):(_=e,0===g&&C(Pt))),_!==e)if(79===a.charCodeAt(t)?(F=Ki,t++):(F=e,0===g&&C($i)),F===e&&(111===a.charCodeAt(t)?(F=Zi,t++):(F=e,0===g&&C(Yi))),F!==e)if(84===a.charCodeAt(t)?(R=eo,t++):(R=e,0===g&&C(to)),R===e&&(116===a.charCodeAt(t)?(R=ro,t++):(R=e,0===g&&C(no))),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if(73===a.charCodeAt(t)?(B=wr,t++):(B=e,0===g&&C(_r)),B===e&&(105===a.charCodeAt(t)?(B=kr,t++):(B=e,0===g&&C(Er))),B!==e)if(78===a.charCodeAt(t)?(W=Nt,t++):(W=e,0===g&&C(Ot)),W===e&&(110===a.charCodeAt(t)?(W=Lt,t++):(W=e,0===g&&C(Pt))),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();ee!==e&&(te=Wt())!==e?w=j=[j,_,F,R,H,B,W,ee,te]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;else t=w,w=e}else t=w,w=e;else t=w,w=e;else t=w,w=e;else t=w,w=e}}}}}}}}y!==e?b=A=function(pe,ye){if(0===ye.length)return pe;if("i"===ye[0][1]||"I"===ye[0][1]||"n"===ye[0][1]||"N"===ye[0][1]){var me={};if("i"===ye[0][1]||"I"===ye[0][1]){var ge="=";me.expressionType="conditionalor"}else ge="!=",me.expressionType="conditionaland";for(var xe=pe,ke=[],Te=0;Te<ye[0].length;Te++)if("args"===ye[0][Te].token){ke=ye[0][Te].value;break}me.token="expression",me.operands=[];for(var Fe=0;Fe<ke.length;Fe++){var Ce={token:"expression",expressionType:"relationalexpression"};Ce.operator=ge,Ce.op1=xe,Ce.op2=ke[Fe],me.operands.push(Ce)}return me}return(me={expressionType:"relationalexpression"}).operator=ye[0][1],me.op1=pe,me.op2=ye[0][3],me.token="expression",me}(A,y):(t=b,b=e)}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(nc)),b}(),g--,s===e&&0===g&&C(rc),s}function nt(){var s;return g++,s=function(){var b,A,y,w,j,_,F,R,H,B;if(g++,b=t,(A=Xt())!==e){for(y=[],w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(43===a.charCodeAt(t)?(_=gt,t++):(_=e,0===g&&C(bt)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=Xt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(45===a.charCodeAt(t)?(_=lt,t++):(_=e,0===g&&C(ut)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=Xt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e)if(w=t,(j=Kt())===e&&(j=Kt()),j!==e){for(_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(42===a.charCodeAt(t)?(R=q,t++):(R=e,0===g&&C(re)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e&&(B=ht())!==e?_=F=[F,R,H,B]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(47===a.charCodeAt(t)?(R=wt,t++):(R=e,0===g&&C(_t)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e&&(B=ht())!==e?_=F=[F,R,H,B]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}_===e&&(_=null),_!==e?w=j=[j,_]:(t=w,w=e)}else t=w,w=e}for(;w!==e;){for(y.push(w),w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(43===a.charCodeAt(t)?(_=gt,t++):(_=e,0===g&&C(bt)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=Xt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e){for(w=t,j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(45===a.charCodeAt(t)?(_=lt,t++):(_=e,0===g&&C(ut)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=Xt())!==e?w=j=[j,_,F,R]:(t=w,w=e)}else t=w,w=e;else t=w,w=e;if(w===e)if(w=t,(j=Kt())===e&&(j=Kt()),j!==e){for(_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(42===a.charCodeAt(t)?(R=q,t++):(R=e,0===g&&C(re)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e&&(B=ht())!==e?_=F=[F,R,H,B]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(47===a.charCodeAt(t)?(R=wt,t++):(R=e,0===g&&C(_t)),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();H!==e&&(B=ht())!==e?_=F=[F,R,H,B]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}_===e&&(_=null),_!==e?w=j=[j,_]:(t=w,w=e)}else t=w,w=e}}y!==e?b=A=function(W,ee){if(0===ee.length)return W;var te={token:"expression",expressionType:"additiveexpression"};te.summand=W,te.summands=[];for(var pe=0;pe<ee.length;pe++){var ye=ee[pe],me={};if(4==ye.length&&"string"==typeof ye[1])me.operator=ye[1],me.expression=ye[3];else{var ge={},xe=me[0],ke=(me[1][1],me[1][3]);xe.value<0?(me.operator="-",xe.value=-xe.value):me.operator="+",ge.token="expression",ge.expressionType="multiplicativeexpression",ge.operator=xe,ge.factors=[{operator:null,expression:ke}],me.expression=ge}te.summands.push(me)}return te}(A,y):(t=b,b=e)}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(oc)),b}(),g--,s===e&&0===g&&C(ic),s}function Xt(){var s,b,A,y,w,j,_,F;if(g++,s=t,(b=ht())!==e){for(A=[],y=t,w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(42===a.charCodeAt(t)?(j=q,t++):(j=e,0===g&&C(re)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=ht())!==e?y=w=[w,j,_,F]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;if(y===e){for(y=t,w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(47===a.charCodeAt(t)?(j=wt,t++):(j=e,0===g&&C(_t)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=ht())!==e?y=w=[w,j,_,F]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}for(;y!==e;){for(A.push(y),y=t,w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(42===a.charCodeAt(t)?(j=q,t++):(j=e,0===g&&C(re)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=ht())!==e?y=w=[w,j,_,F]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;if(y===e){for(y=t,w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if(47===a.charCodeAt(t)?(j=wt,t++):(j=e,0===g&&C(_t)),j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e&&(F=ht())!==e?y=w=[w,j,_,F]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}}A!==e?s=b=function(R,H){if(0===H.length)return R;var B={token:"expression",expressionType:"multiplicativeexpression"};B.factor=R,B.factors=[];for(var W=0;W<H.length;W++){var ee=H[W],te={};te.operator=ee[1],te.expression=ee[3],B.factors.push(te)}return B}(b,A):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(sc)),s}function ht(){var s,b,A,y,w,j,_;if(g++,s=t,33===a.charCodeAt(t)?(b=tn,t++):(b=e,0===g&&C(rn)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e&&(y=Qr())!==e?((w={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"}).expression=y,s=b=w):(t=s,s=e)}else t=s,s=e;if(s===e){if(s=t,43===a.charCodeAt(t)?(b=gt,t++):(b=e,0===g&&C(bt)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e&&(y=Qr())!==e?(j=y,(_={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"}).expression=j,s=b=_):(t=s,s=e)}else t=s,s=e;if(s===e){if(s=t,45===a.charCodeAt(t)?(b=lt,t++):(b=e,0===g&&C(ut)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e&&(y=Qr())!==e?(b=function(j){var _={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return _.expression=j,_}(y),s=b):(t=s,s=e)}else t=s,s=e;s===e&&(s=Qr())}}return g--,s===e&&(b=e,0===g&&C(ac)),s}function Qr(){var s,b,A,y,w;return g++,(s=Ln())===e&&(s=Pn())===e&&(s=function(){var y,w,j,_,F,R;if(g++,y=t,(w=Ze())!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();j!==e?((_=Ys())===e&&(_=null),_!==e?(F=_,(R={token:"expression",expressionType:"irireforfunction"}).iriref=w,R.args=null!=F?F.value:F,y=w=R):(t=y,y=e)):(t=y,y=e)}else t=y,y=e;return g--,y===e&&(w=e,0===g&&C(yf)),y}(),s===e&&(s=t,(b=Mr())!==e&&((A={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"}).value=b,b=A),(s=b)===e&&(s=t,(b=Br())!==e&&(y=b,(w={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"}).value=y,b=w),(s=b)===e&&(s=t,(b=Ur())!==e&&(b=function(y){var w={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return w.value=y,w}(b)),(s=b)===e&&(s=function(){var y,w,j,_,F,R,H,B,W,ee,te,pe,ye,me,ge,xe,ke,Te,Fe,Ce,Ie,Re,Pe,Le,Ve;if(g++,y=t,a.substr(t,5)===Uo?(w=Uo,t+=5):(w=e,0===g&&C(tf)),w===e&&(a.substr(t,5)===Go?(w=Go,t+=5):(w=e,0===g&&C(rf))),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(40===a.charCodeAt(t)?(_=ue,t++):(_=e,0===g&&C(oe)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,8)===ve?(R=ve,t+=8):(R=e,0===g&&C(fe)),R===e&&(a.substr(t,8)===Y?(R=Y,t+=8):(R=e,0===g&&C(M))),R===e&&(R=null),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if(42===a.charCodeAt(t)?(B=q,t++):(B=e,0===g&&C(re)),B===e&&(B=Be()),B!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(41===a.charCodeAt(t)?(ee=m,t++):(ee=e,0===g&&C(L)),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();te!==e?(Ce=B,(Ie={token:"expression",expressionType:"aggregate",aggregateType:"count"}).distinct=""!=(Fe=R)&&null!=Fe?"DISTINCT":Fe,Ie.expression=Ce,y=w=Ie):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;if(y===e){if(y=t,a.substr(t,12)===qo?(w=qo,t+=12):(w=e,0===g&&C(nf)),w===e&&(a.substr(t,12)===Ho?(w=Ho,t+=12):(w=e,0===g&&C(of))),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(40===a.charCodeAt(t)?(_=ue,t++):(_=e,0===g&&C(oe)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,8)===ve?(R=ve,t+=8):(R=e,0===g&&C(fe)),R===e&&(a.substr(t,8)===Y?(R=Y,t+=8):(R=e,0===g&&C(M))),R===e&&(R=null),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=Be())!==e){if(W=t,59===a.charCodeAt(t)?(ee=pt,t++):(ee=e,0===g&&C(dt)),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();if(te!==e)if(a.substr(t,9)===Jo?(pe=Jo,t+=9):(pe=e,0===g&&C(sf)),pe!==e){for(ye=[],me=E();me!==e;)ye.push(me),me=E();if(ye!==e)if(61===a.charCodeAt(t)?(me=vr,t++):(me=e,0===g&&C(gr)),me!==e){for(ge=[],xe=E();xe!==e;)ge.push(xe),xe=E();if(ge!==e)if((xe=la())!==e){for(ke=[],Te=E();Te!==e;)ke.push(Te),Te=E();ke!==e?W=ee=[ee,te,pe,ye,me,ge,xe,ke]:(t=W,W=e)}else t=W,W=e;else t=W,W=e}else t=W,W=e;else t=W,W=e}else t=W,W=e;else t=W,W=e}else t=W,W=e;if(W===e&&(W=null),W!==e)if(41===a.charCodeAt(t)?(ee=m,t++):(ee=e,0===g&&C(L)),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();te!==e?(Re=R,Pe=B,Le=W,(Ve={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"}).distinct=""!=Re&&null!=Re?"DISTINCT":Re,Ve.expression=Pe,Ve.separator=Le,y=w=Ve):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;if(y===e){if(y=t,a.substr(t,3)===zo?(w=zo,t+=3):(w=e,0===g&&C(af)),w===e&&(a.substr(t,3)===Vo?(w=Vo,t+=3):(w=e,0===g&&C(lf))),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(40===a.charCodeAt(t)?(_=ue,t++):(_=e,0===g&&C(oe)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,8)===ve?(R=ve,t+=8):(R=e,0===g&&C(fe)),R===e&&(a.substr(t,8)===Y?(R=Y,t+=8):(R=e,0===g&&C(M))),R===e&&(R=null),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=Be())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(41===a.charCodeAt(t)?(ee=m,t++):(ee=e,0===g&&C(L)),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();te!==e?(w=function(Re,Pe){var Le={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return Le.distinct=""!=Re&&null!=Re?"DISTINCT":Re,Le.expression=Pe,Le}(R,B),y=w):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;if(y===e){if(y=t,a.substr(t,3)===Wo?(w=Wo,t+=3):(w=e,0===g&&C(uf)),w===e&&(a.substr(t,3)===Xo?(w=Xo,t+=3):(w=e,0===g&&C(cf))),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(40===a.charCodeAt(t)?(_=ue,t++):(_=e,0===g&&C(oe)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,8)===ve?(R=ve,t+=8):(R=e,0===g&&C(fe)),R===e&&(a.substr(t,8)===Y?(R=Y,t+=8):(R=e,0===g&&C(M))),R===e&&(R=null),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=Be())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(41===a.charCodeAt(t)?(ee=m,t++):(ee=e,0===g&&C(L)),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();te!==e?(w=function(Re,Pe){var Le={token:"expression",expressionType:"aggregate",aggregateType:"min"};return Le.distinct=""!=Re&&null!=Re?"DISTINCT":Re,Le.expression=Pe,Le}(R,B),y=w):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;if(y===e){if(y=t,a.substr(t,3)===Ko?(w=Ko,t+=3):(w=e,0===g&&C(ff)),w===e&&(a.substr(t,3)===$o?(w=$o,t+=3):(w=e,0===g&&C(pf))),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(40===a.charCodeAt(t)?(_=ue,t++):(_=e,0===g&&C(oe)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,8)===ve?(R=ve,t+=8):(R=e,0===g&&C(fe)),R===e&&(a.substr(t,8)===Y?(R=Y,t+=8):(R=e,0===g&&C(M))),R===e&&(R=null),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=Be())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(41===a.charCodeAt(t)?(ee=m,t++):(ee=e,0===g&&C(L)),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();te!==e?(w=function(Re,Pe){var Le={token:"expression",expressionType:"aggregate",aggregateType:"max"};return Le.distinct=""!=Re&&null!=Re?"DISTINCT":Re,Le.expression=Pe,Le}(R,B),y=w):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;if(y===e)if(y=t,a.substr(t,3)===Zo?(w=Zo,t+=3):(w=e,0===g&&C(df)),w===e&&(a.substr(t,3)===Yo?(w=Yo,t+=3):(w=e,0===g&&C(hf))),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if(40===a.charCodeAt(t)?(_=ue,t++):(_=e,0===g&&C(oe)),_!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();if(F!==e)if(a.substr(t,8)===ve?(R=ve,t+=8):(R=e,0===g&&C(fe)),R===e&&(a.substr(t,8)===Y?(R=Y,t+=8):(R=e,0===g&&C(M))),R===e&&(R=null),R!==e){for(H=[],B=E();B!==e;)H.push(B),B=E();if(H!==e)if((B=Be())!==e){for(W=[],ee=E();ee!==e;)W.push(ee),ee=E();if(W!==e)if(41===a.charCodeAt(t)?(ee=m,t++):(ee=e,0===g&&C(L)),ee!==e){for(te=[],pe=E();pe!==e;)te.push(pe),pe=E();te!==e?(w=function(Re,Pe){var Le={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return Le.distinct=""!=Re&&null!=Re?"DISTINCT":Re,Le.expression=Pe,Le}(R,B),y=w):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e;else t=y,y=e}else t=y,y=e}}}}return g--,y===e&&(w=e,0===g&&C(ef)),y}(),s===e&&(s=t,(b=$e())!==e&&(b=function(y){var w={token:"expression",expressionType:"atomic",primaryexpression:"var"};return w.value=y,w}(b)),s=b)))))),g--,s===e&&(b=e,0===g&&C(lc)),s}function Ln(){var s,b,A,y,w,j;if(g++,s=t,40===a.charCodeAt(t)?(b=ue,t++):(b=e,0===g&&C(oe)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if((y=Be())!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();w!==e?(41===a.charCodeAt(t)?(j=m,t++):(j=e,0===g&&C(L)),j!==e?s=b=y:(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(uc)),s}function Pn(){var s,b,A,y,w,j,_,F,R,H,B,W,ee,te,pe,ye,me,ge,xe;if(g++,s=t,"STR"===a.substr(t,3)?(b="STR",t+=3):(b=e,0===g&&C(fc)),b===e&&("str"===a.substr(t,3)?(b="str",t+=3):(b=e,0===g&&C(pc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?((me={token:"expression",expressionType:"builtincall",builtincall:"str"}).args=[j],s=b=me):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,4)===io?(b=io,t+=4):(b=e,0===g&&C(dc)),b===e&&(a.substr(t,4)===oo?(b=oo,t+=4):(b=e,0===g&&C(hc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(ge=j,(xe={token:"expression",expressionType:"builtincall",builtincall:"lang"}).args=[ge],s=b=xe):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,11)===so?(b=so,t+=11):(b=e,0===g&&C(yc)),b===e&&(a.substr(t,11)===ao?(b=ao,t+=11):(b=e,0===g&&C(vc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(44===a.charCodeAt(t)?(F=We,t++):(F=e,0===g&&C(Xe)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if((H=Be())!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();B!==e?(41===a.charCodeAt(t)?(W=m,t++):(W=e,0===g&&C(L)),W!==e?(b=function(ge,xe){var ke={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return ke.args=[ge,xe],ke}(j,H),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,8)===lo?(b=lo,t+=8):(b=e,0===g&&C(gc)),b===e&&(a.substr(t,8)===uo?(b=uo,t+=8):(b=e,0===g&&C(bc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return xe.args=[ge],xe}(j),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,5)===co?(b=co,t+=5):(b=e,0===g&&C(mc)),b===e&&(a.substr(t,5)===fo?(b=fo,t+=5):(b=e,0===g&&C(xc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=$e())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"bound"};return xe.args=[ge],xe}(j),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,"IRI"===a.substr(t,3)?(b="IRI",t+=3):(b=e,0===g&&C(wc)),b===e&&("iri"===a.substr(t,3)?(b="iri",t+=3):(b=e,0===g&&C(_c))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"iri"};return xe.args=[ge],xe}(j),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,"URI"===a.substr(t,3)?(b="URI",t+=3):(b=e,0===g&&C(kc)),b===e&&("uri"===a.substr(t,3)?(b="uri",t+=3):(b=e,0===g&&C(Ec))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"uri"};return xe.args=[ge],xe}(j),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,5)===po?(b=po,t+=5):(b=e,0===g&&C(Ac)),b===e&&(a.substr(t,5)===ho?(b=ho,t+=5):(b=e,0===g&&C(Sc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e){if(y=t,40===a.charCodeAt(t)?(w=ue,t++):(w=e,0===g&&C(oe)),w!==e){for(j=[],_=E();_!==e;)j.push(_),_=E();if(j!==e)if((_=Be())!==e){for(F=[],R=E();R!==e;)F.push(R),R=E();F!==e?(41===a.charCodeAt(t)?(R=m,t++):(R=e,0===g&&C(L)),R!==e?y=w=[w,j,_,F,R]:(t=y,y=e)):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;y===e&&(y=yt()),y!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===ge.length?xe.args=[ge[2]]:xe.args=null,xe}(y),s=b):(t=s,s=e)}else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,8)===yo?(b=yo,t+=8):(b=e,0===g&&C(jc)),b===e&&(a.substr(t,8)===vo?(b=vo,t+=8):(b=e,0===g&&C(Fc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e&&(y=Wt())!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return xe.args=ge,xe}(y),s=b):(t=s,s=e)}else t=s,s=e;if(s===e){if(s=t,"IF"===a.substr(t,2)?(b="IF",t+=2):(b=e,0===g&&C(Tc)),b===e&&("if"===a.substr(t,2)?(b="if",t+=2):(b=e,0===g&&C(Ic))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(44===a.charCodeAt(t)?(F=We,t++):(F=e,0===g&&C(Xe)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if((H=Be())!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();if(B!==e)if(44===a.charCodeAt(t)?(W=We,t++):(W=e,0===g&&C(Xe)),W!==e){for(ee=[],te=E();te!==e;)ee.push(te),te=E();if(ee!==e)if((te=Be())!==e){for(pe=[],ye=E();ye!==e;)pe.push(ye),ye=E();pe!==e?(41===a.charCodeAt(t)?(ye=m,t++):(ye=e,0===g&&C(L)),ye!==e?(b=function(ge,xe,ke){var Te={token:"expression",expressionType:"builtincall",builtincall:"if"};return Te.args=[ge,xe,ke],Te}(j,H,te),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,9)===go?(b=go,t+=9):(b=e,0===g&&C(Cc)),b===e&&(a.substr(t,9)===bo?(b=bo,t+=9):(b=e,0===g&&C(Rc)),b===e&&(a.substr(t,9)===mo?(b=mo,t+=9):(b=e,0===g&&C(Nc)))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return xe.args=[ge],xe}(j),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,7)===xo?(b=xo,t+=7):(b=e,0===g&&C(Oc)),b===e&&(a.substr(t,7)===wo?(b=wo,t+=7):(b=e,0===g&&C(Lc)),b===e&&(a.substr(t,7)===_o?(b=_o,t+=7):(b=e,0===g&&C(Pc)))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return xe.args=[ge],xe}(j),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,8)===ko?(b=ko,t+=8):(b=e,0===g&&C(Dc)),b===e&&(a.substr(t,8)===Eo?(b=Eo,t+=8):(b=e,0===g&&C(Qc))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if(44===a.charCodeAt(t)?(F=We,t++):(F=e,0===g&&C(Xe)),F!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();if(R!==e)if((H=Be())!==e){for(B=[],W=E();W!==e;)B.push(W),W=E();B!==e?(41===a.charCodeAt(t)?(W=m,t++):(W=e,0===g&&C(L)),W!==e?(b=function(ge,xe){var ke={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return ke.args=[ge,xe],ke}(j,H),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,5)===Ao?(b=Ao,t+=5):(b=e,0===g&&C(Mc)),b===e&&(a.substr(t,5)===So?(b=So,t+=5):(b=e,0===g&&C(Bc)),b===e&&(a.substr(t,5)===jo?(b=jo,t+=5):(b=e,0===g&&C(Uc)),b===e&&(a.substr(t,5)===Fo?(b=Fo,t+=5):(b=e,0===g&&C(Gc)),b===e&&(a.substr(t,5)===To?(b=To,t+=5):(b=e,0===g&&C(qc)),b===e&&(a.substr(t,5)===Io?(b=Io,t+=5):(b=e,0===g&&C(Hc))))))),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();if(A!==e)if(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y!==e){for(w=[],j=E();j!==e;)w.push(j),j=E();if(w!==e)if((j=Be())!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();_!==e?(41===a.charCodeAt(t)?(F=m,t++):(F=e,0===g&&C(L)),F!==e?(b=function(ge){var xe={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return xe.args=[ge],xe}(j),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e;if(s===e){if(s=t,a.substr(t,7)===Co?(b=Co,t+=7):(b=e,0===g&&C(Jc)),b===e&&(a.substr(t,7)===Ro?(b=Ro,t+=7):(b=e,0===g&&C(zc))),b!==e){if(A=[],No.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(Oo)),y!==e)for(;y!==e;)A.push(y),No.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(Oo));else A=e;if(A!==e){for(y=[],w=E();w!==e;)y.push(w),w=E();if(y!==e)if(40===a.charCodeAt(t)?(w=ue,t++):(w=e,0===g&&C(oe)),w!==e){for(j=[],_=t,F=[],R=E();R!==e;)F.push(R),R=E();for(F!==e&&(R=Be())!==e?(44===a.charCodeAt(t)?(H=We,t++):(H=e,0===g&&C(Xe)),H!==e?_=F=[F,R,H]:(t=_,_=e)):(t=_,_=e);_!==e;){for(j.push(_),_=t,F=[],R=E();R!==e;)F.push(R),R=E();F!==e&&(R=Be())!==e?(44===a.charCodeAt(t)?(H=We,t++):(H=e,0===g&&C(Xe)),H!==e?_=F=[F,R,H]:(t=_,_=e)):(t=_,_=e)}if(j!==e){for(_=[],F=E();F!==e;)_.push(F),F=E();if(_!==e)if((F=Be())!==e){for(R=[],H=E();H!==e;)R.push(H),H=E();R!==e?(41===a.charCodeAt(t)?(H=m,t++):(H=e,0===g&&C(L)),H!==e?(b=function(ge,xe,ke){var Te={token:"expression",expressionType:"custom"};Te.name=ge.join("");for(var Fe=[],Ce=0;Ce<xe.length;Ce++)Fe.push(xe[Ce][1]);return Fe.push(ke),Te.args=Fe,Te}(A,j,F),s=b):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;else t=s,s=e}else t=s,s=e}else t=s,s=e;else t=s,s=e}else t=s,s=e}else t=s,s=e;s===e&&(s=function(){var ge,xe,ke,Te,Fe,Ce,Ie,Re,Pe,Le,Ve,Ge,at,rt,st,vt,Ye,Et;if(g++,ge=t,a.substr(t,5)===Lo?(xe=Lo,t+=5):(xe=e,0===g&&C(Wc)),xe===e&&(a.substr(t,5)===Po?(xe=Po,t+=5):(xe=e,0===g&&C(Xc))),xe!==e){for(ke=[],Te=E();Te!==e;)ke.push(Te),Te=E();if(ke!==e)if(40===a.charCodeAt(t)?(Te=ue,t++):(Te=e,0===g&&C(oe)),Te!==e){for(Fe=[],Ce=E();Ce!==e;)Fe.push(Ce),Ce=E();if(Fe!==e)if((Ce=Be())!==e){for(Ie=[],Re=E();Re!==e;)Ie.push(Re),Re=E();if(Ie!==e)if(44===a.charCodeAt(t)?(Re=We,t++):(Re=e,0===g&&C(Xe)),Re!==e){for(Pe=[],Le=E();Le!==e;)Pe.push(Le),Le=E();if(Pe!==e)if((Le=Be())!==e){for(Ve=[],Ge=E();Ge!==e;)Ve.push(Ge),Ge=E();if(Ve!==e){if(Ge=t,44===a.charCodeAt(t)?(at=We,t++):(at=e,0===g&&C(Xe)),at!==e){for(rt=[],st=E();st!==e;)rt.push(st),st=E();rt!==e&&(st=Be())!==e?Ge=at=[at,rt,st]:(t=Ge,Ge=e)}else t=Ge,Ge=e;if(Ge===e&&(Ge=null),Ge!==e){for(at=[],rt=E();rt!==e;)at.push(rt),rt=E();at!==e?(41===a.charCodeAt(t)?(rt=m,t++):(rt=e,0===g&&C(L)),rt!==e?(vt=Le,Ye=Ge,(Et={token:"expression",expressionType:"regex"}).text=Ce,Et.pattern=vt,null!=Ye&&(Et.flags=Ye[2]),ge=xe=Et):(t=ge,ge=e)):(t=ge,ge=e)}else t=ge,ge=e}else t=ge,ge=e}else t=ge,ge=e;else t=ge,ge=e}else t=ge,ge=e;else t=ge,ge=e}else t=ge,ge=e;else t=ge,ge=e}else t=ge,ge=e;else t=ge,ge=e}else t=ge,ge=e;return g--,ge===e&&(xe=e,0===g&&C(Vc)),ge}(),s===e&&(s=function(){var ge,xe,ke,Te,Fe,Ce;if(g++,ge=t,a.substr(t,6)===Ar?(xe=Ar,t+=6):(xe=e,0===g&&C(Do)),xe===e&&(a.substr(t,6)===Sr?(xe=Sr,t+=6):(xe=e,0===g&&C(Qo))),xe!==e){for(ke=[],Te=E();Te!==e;)ke.push(Te),Te=E();ke!==e&&(Te=ot())!==e?(Fe=Te,(Ce={token:"expression",expressionType:"builtincall",builtincall:"exists"}).args=[Fe],ge=xe=Ce):(t=ge,ge=e)}else t=ge,ge=e;return g--,ge===e&&(xe=e,0===g&&C(Kc)),ge}(),s===e&&(s=function(){var ge,xe,ke,Te,Fe,Ce,Ie,Re;if(g++,ge=t,a.substr(t,3)===Mo?(xe=Mo,t+=3):(xe=e,0===g&&C(Zc)),xe===e&&(a.substr(t,3)===Bo?(xe=Bo,t+=3):(xe=e,0===g&&C(Yc))),xe!==e){for(ke=[],Te=E();Te!==e;)ke.push(Te),Te=E();if(ke!==e)if(a.substr(t,6)===Ar?(Te=Ar,t+=6):(Te=e,0===g&&C(Do)),Te===e&&(a.substr(t,6)===Sr?(Te=Sr,t+=6):(Te=e,0===g&&C(Qo))),Te!==e){for(Fe=[],Ce=E();Ce!==e;)Fe.push(Ce),Ce=E();Fe!==e&&(Ce=ot())!==e?(Ie=Ce,(Re={token:"expression",expressionType:"builtincall",builtincall:"notexists"}).args=[Ie],ge=xe=Re):(t=ge,ge=e)}else t=ge,ge=e;else t=ge,ge=e}else t=ge,ge=e;return g--,ge===e&&(xe=e,0===g&&C($c)),ge}())))}}}}}}}}}}}}}}return g--,s===e&&(b=e,0===g&&C(cc)),s}function Mr(){var s,b,A,y,w,j,_;return g++,s=t,(b=la())!==e?((A=function(){var F,R,H,B,W,ee,te,pe,ye,me;if(g++,F=t,64===a.charCodeAt(t)?(R="@",t++):(R=e,0===g&&C(ls)),R!==e){if(H=[],us.test(a.charAt(t))?(B=a.charAt(t),t++):(B=e,0===g&&C(cs)),B!==e)for(;B!==e;)H.push(B),us.test(a.charAt(t))?(B=a.charAt(t),t++):(B=e,0===g&&C(cs));else H=e;if(H!==e){if(B=[],W=t,45===a.charCodeAt(t)?(ee=lt,t++):(ee=e,0===g&&C(ut)),ee!==e){if(te=[],Fr.test(a.charAt(t))?(pe=a.charAt(t),t++):(pe=e,0===g&&C(Tr)),pe!==e)for(;pe!==e;)te.push(pe),Fr.test(a.charAt(t))?(pe=a.charAt(t),t++):(pe=e,0===g&&C(Tr));else te=e;te!==e?W=ee=[ee,te]:(t=W,W=e)}else t=W,W=e;for(;W!==e;)if(B.push(W),W=t,45===a.charCodeAt(t)?(ee=lt,t++):(ee=e,0===g&&C(ut)),ee!==e){if(te=[],Fr.test(a.charAt(t))?(pe=a.charAt(t),t++):(pe=e,0===g&&C(Tr)),pe!==e)for(;pe!==e;)te.push(pe),Fr.test(a.charAt(t))?(pe=a.charAt(t),t++):(pe=e,0===g&&C(Tr));else te=e;te!==e?W=ee=[ee,te]:(t=W,W=e)}else t=W,W=e;B!==e?(ye=H,F=R=0===(me=B).length?("@"+ye.join("")).toLowerCase():("@"+ye.join("")+"-"+me[0][1].join("")).toLowerCase()):(t=F,F=e)}else t=F,F=e}else t=F,F=e;return g--,F===e&&(R=e,0===g&&C(Mf)),F}())===e&&(A=t,"^^"===a.substr(t,2)?(y="^^",t+=2):(y=e,0===g&&C(gf)),y!==e&&(w=Ze())!==e?A=y=[y,w]:(t=A,A=e)),A===e&&(A=null),A!==e?(j=b,s=b="string"==typeof(_=A)&&_.length>0?{token:"literal",value:j.value,lang:_.slice(1),type:null}:null!=_&&"object"==typeof _?(_.shift(),{token:"literal",value:j.value,lang:null,type:_[0]}):{token:"literal",value:j.value,lang:null,type:null}):(t=s,s=e)):(t=s,s=e),g--,s===e&&(b=e,0===g&&C(vf)),s}function Br(){var s,b;return g++,g++,(b=Mn())===e&&(b=Qn())===e&&(b=Gt()),g--,b===e&&0===g&&C(mf),(s=b)===e&&(s=function(){var b,A,y,w;return g++,g++,A=t,43===a.charCodeAt(t)?(y=gt,t++):(y=e,0===g&&C(bt)),y!==e&&(w=Mn())!==e?A=y=fs(w):(t=A,A=e),g--,A===e&&(y=e,0===g&&C(zf)),(b=A)===e&&(b=function(){var A,y,w;return g++,A=t,43===a.charCodeAt(t)?(y=gt,t++):(y=e,0===g&&C(bt)),y!==e&&(w=Qn())!==e?A=y=fs(w):(t=A,A=e),g--,A===e&&(y=e,0===g&&C(Jf)),A}(),b===e&&(b=function(){var A,y,w,j;return g++,A=t,43===a.charCodeAt(t)?(y=gt,t++):(y=e,0===g&&C(bt)),y!==e&&(w=Gt())!==e?((j=w).value="+"+j.value,A=y=j):(t=A,A=e),g--,A===e&&(y=e,0===g&&C(Hf)),A}())),g--,b===e&&0===g&&C(xf),b}(),s===e&&(s=Kt())),g--,s===e&&0===g&&C(bf),s}function Kt(){var s,b,A,y;return g++,g++,b=t,45===a.charCodeAt(t)?(A=lt,t++):(A=e,0===g&&C(ut)),A!==e&&(y=Mn())!==e?b=A=pn(y):(t=b,b=e),g--,b===e&&(A=e,0===g&&C(Xf)),(s=b)===e&&(s=function(){var b,A,y;return g++,b=t,45===a.charCodeAt(t)?(A=lt,t++):(A=e,0===g&&C(ut)),A!==e&&(y=Qn())!==e?b=A=pn(y):(t=b,b=e),g--,b===e&&(A=e,0===g&&C(Wf)),b}(),s===e&&(s=function(){var b,A,y;return g++,b=t,45===a.charCodeAt(t)?(A=lt,t++):(A=e,0===g&&C(ut)),A!==e&&(y=Gt())!==e?b=A=pn(y):(t=b,b=e),g--,b===e&&(A=e,0===g&&C(Vf)),b}())),g--,s===e&&0===g&&C(wf),s}function Ur(){var s,b;return g++,s=t,a.substr(t,4)===es?(b=es,t+=4):(b=e,0===g&&C(kf)),b===e&&(a.substr(t,4)===ts?(b=ts,t+=4):(b=e,0===g&&C(Ef))),b!==e&&(b={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(s=b)===e&&(s=t,a.substr(t,5)===rs?(b=rs,t+=5):(b=e,0===g&&C(Af)),b===e&&(a.substr(t,5)===ns?(b=ns,t+=5):(b=e,0===g&&C(Sf))),b!==e&&(b={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),s=b),g--,s===e&&(b=e,0===g&&C(_f)),s}function la(){var s,b;return g++,s=t,(b=function(){var A,y,w,j;if(g++,A=t,a.substr(t,3)===Cr?(y=Cr,t+=3):(y=e,0===g&&C(bs)),y!==e){for(w=[],ms.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(xs)),j===e&&(j=mt());j!==e;)w.push(j),ms.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(xs)),j===e&&(j=mt());w!==e?(a.substr(t,3)===Cr?(j=Cr,t+=3):(j=e,0===g&&C(bs)),j!==e?A=y=Ir(w):(t=A,A=e)):(t=A,A=e)}else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(np)),A}())!==e&&(b=jr(b)),(s=b)===e&&(s=t,(b=function(){var A,y,w,j;if(g++,A=t,a.substr(t,3)===Rr?(y=Rr,t+=3):(y=e,0===g&&C(ws)),y!==e){for(w=[],_s.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(ks)),j===e&&(j=mt());j!==e;)w.push(j),_s.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(ks)),j===e&&(j=mt());w!==e?(a.substr(t,3)===Rr?(j=Rr,t+=3):(j=e,0===g&&C(ws)),j!==e?A=y=Ir(w):(t=A,A=e)):(t=A,A=e)}else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(ip)),A}())!==e&&(b=jr(b)),(s=b)===e&&(s=t,(b=function(){var A,y,w,j;if(g++,A=t,39===a.charCodeAt(t)?(y=dn,t++):(y=e,0===g&&C(hn)),y!==e){for(w=[],ps.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(ds)),j===e&&(j=mt());j!==e;)w.push(j),ps.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(ds)),j===e&&(j=mt());w!==e?(39===a.charCodeAt(t)?(j=dn,t++):(j=e,0===g&&C(hn)),j!==e?A=y=Ir(w):(t=A,A=e)):(t=A,A=e)}else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(tp)),A}())!==e&&(b=jr(b)),(s=b)===e&&(s=t,(b=function(){var A,y,w,j;if(g++,A=t,34===a.charCodeAt(t)?(y=hs,t++):(y=e,0===g&&C(ys)),y!==e){for(w=[],vs.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(gs)),j===e&&(j=mt());j!==e;)w.push(j),vs.test(a.charAt(t))?(j=a.charAt(t),t++):(j=e,0===g&&C(gs)),j===e&&(j=mt());w!==e?(34===a.charCodeAt(t)?(j=hs,t++):(j=e,0===g&&C(ys)),j!==e?A=y=Ir(w):(t=A,A=e)):(t=A,A=e)}else t=A,A=e;return g--,A===e&&(y=e,0===g&&C(rp)),A}())!==e&&(b=jr(b)),s=b))),g--,s===e&&(b=e,0===g&&C(jf)),s}function Ze(){var s,b,A,y,w,j,_;return g++,s=t,(b=Gr())!==e&&(b={token:"uri",prefix:null,suffix:null,value:b}),(s=b)===e&&(s=t,g++,A=t,g++,w=t,(j=Dn())!==e&&(_=fa())!==e?w=j=function(F,R){return[F,R]}(j,_):(t=w,w=e),g--,w===e&&(j=e,0===g&&C(Nf)),(y=w)!==e&&(y=function(w){return{token:"uri",prefix:w[0],suffix:w[1],value:null}}(y)),(A=y)===e&&(A=t,(y=Dn())!==e&&(y=function(w){return{token:"uri",prefix:w,suffix:"",value:null}}(y)),A=y),g--,A===e&&(y=e,0===g&&C(Tf)),s=b=A),g--,s===e&&(b=e,0===g&&C(Ff)),s}function Gr(){var s,b,A,y;if(g++,s=t,60===a.charCodeAt(t)?(b=ln,t++):(b=e,0===g&&C(un)),b!==e){for(A=[],is.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(os));y!==e;)A.push(y),is.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(os));A!==e?(62===a.charCodeAt(t)?(y=cn,t++):(y=e,0===g&&C(fn)),y!==e?s=b=A.join(""):(t=s,s=e)):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Cf)),s}function Dn(){var s,b,A;return g++,s=t,(b=function(){var y,w,j,_;if(g++,y=t,(w=ua())!==e){for(j=[],(_=qr())===e&&(46===a.charCodeAt(t)?(_=et,t++):(_=e,0===g&&C(tt)));_!==e;)j.push(_),(_=qr())===e&&(46===a.charCodeAt(t)?(_=et,t++):(_=e,0===g&&C(tt)));j!==e?y=w=function(F,R){if("."==R[R.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return F+R.join("")}(w,j):(t=y,y=e)}else t=y,y=e;return g--,y===e&&(w=e,0===g&&C(Yp)),y}())===e&&(b=null),b!==e?(58===a.charCodeAt(t)?(A=Ht,t++):(A=e,0===g&&C(Jt)),A!==e?s=b:(t=s,s=e)):(t=s,s=e),g--,s===e&&(b=e,0===g&&C(Rf)),s}function Gt(){var s,b,A,y;if(g++,t,b=[],Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze)),A!==e)for(;A!==e;)b.push(A),Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze));else b=e;return b!==e&&((y={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"}).value=xt(b),b=y),g--,(s=b)===e&&(b=e,0===g&&C(Uf)),s}function Qn(){var s,b,A,y,w,j,_,F,R;if(g++,s=t,b=[],Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze)),A!==e)for(;A!==e;)b.push(A),Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze));else b=e;if(b!==e)if(46===a.charCodeAt(t)?(A=et,t++):(A=e,0===g&&C(tt)),A!==e){for(y=[],Je.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(ze));w!==e;)y.push(w),Je.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(ze));y!==e?((j={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=xt([b,A,y]),s=b=j):(t=s,s=e)}else t=s,s=e;else t=s,s=e;if(s===e)if(s=t,46===a.charCodeAt(t)?(b=et,t++):(b=e,0===g&&C(tt)),b!==e){if(A=[],Je.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(ze)),y!==e)for(;y!==e;)A.push(y),Je.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(ze));else A=e;A!==e?(_=b,F=A,(R={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=xt([_,F]),s=b=R):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Gf)),s}function Mn(){var s,b,A,y,w,j,_,F,R,H;if(g++,s=t,b=[],Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze)),A!==e)for(;A!==e;)b.push(A),Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze));else b=e;if(b!==e)if(46===a.charCodeAt(t)?(A=et,t++):(A=e,0===g&&C(tt)),A!==e){for(y=[],Je.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(ze));w!==e;)y.push(w),Je.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(ze));y!==e&&(w=Bn())!==e?((j={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=xt([b,A,y,w]),s=b=j):(t=s,s=e)}else t=s,s=e;else t=s,s=e;if(s===e){if(s=t,46===a.charCodeAt(t)?(b=et,t++):(b=e,0===g&&C(tt)),b!==e){if(A=[],Je.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(ze)),y!==e)for(;y!==e;)A.push(y),Je.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(ze));else A=e;A!==e&&(y=Bn())!==e?(_=b,F=A,R=y,(H={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=xt([_,F,R]),s=b=H):(t=s,s=e)}else t=s,s=e;if(s===e){if(s=t,b=[],Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze)),A!==e)for(;A!==e;)b.push(A),Je.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ze));else b=e;b!==e&&(A=Bn())!==e?(b=function(_,F){var R={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return R.value=xt([_,F]),R}(b,A),s=b):(t=s,s=e)}}return g--,s===e&&(b=e,0===g&&C(qf)),s}function Bn(){var s,b,A,y,w;if(g++,s=t,$f.test(a.charAt(t))?(b=a.charAt(t),t++):(b=e,0===g&&C(Zf)),b!==e)if(Yf.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ep)),A===e&&(A=null),A!==e){if(y=[],Je.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(ze)),w!==e)for(;w!==e;)y.push(w),Je.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(ze));else y=e;y!==e?s=b=xt([b,A,y]):(t=s,s=e)}else t=s,s=e;else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(Kf)),s}function mt(){var s,b,A;return g++,s=t,92===a.charCodeAt(t)?(b="\\",t++):(b=e,0===g&&C(Es)),b!==e?(sp.test(a.charAt(t))?(A=a.charAt(t),t++):(A=e,0===g&&C(ap)),A!==e?s=b=[b,A]:(t=s,s=e)):(t=s,s=e),g--,s===e&&(b=e,0===g&&C(op)),s}function yt(){var s,b,A,y;if(g++,s=t,40===a.charCodeAt(t)?(b=ue,t++):(b=e,0===g&&C(oe)),b!==e){for(A=[],y=E();y!==e;)A.push(y),y=E();A!==e?(41===a.charCodeAt(t)?(y=m,t++):(y=e,0===g&&C(L)),y!==e?s=b={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(t=s,s=e)):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(lp)),s}function E(){var s;return g++,cp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(fp)),s===e&&(pp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(dp)),s===e&&(hp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(yp)),s===e&&(vp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(gp)),s===e&&(s=function(){var b,A,y,w;if(g++,b=t,35===a.charCodeAt(t)?(A="#",t++):(A=e,0===g&&C(As)),A!==e){for(y=[],Ss.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(js));w!==e;)y.push(w),Ss.test(a.charAt(t))?(w=a.charAt(t),t++):(w=e,0===g&&C(js));y!==e?b=A=[A,y]:(t=b,b=e)}else t=b,b=e;return g--,b===e&&(A=e,0===g&&C(bp)),b}())))),g--,s===e&&0===g&&C(up),s}function ua(){var s;return g++,_p.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(kp)),s===e&&(Ep.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Ap)),s===e&&(Sp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(jp)),s===e&&(Fp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Tp)),s===e&&(Ip.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Cp)),s===e&&(Rp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Np)),s===e&&(Op.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Lp)),s===e&&(Pp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Dp)),s===e&&(Qp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Mp)),s===e&&(Bp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Up)),s===e&&(Gp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(qp)),s===e&&(Hp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Jp)),s===e&&(zp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Vp)),s===e&&(Wp.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(Xp))))))))))))))),g--,s===e&&0===g&&C(wp),s}function $t(){var s;return g++,(s=ua())===e&&(95===a.charCodeAt(t)?(s="_",t++):(s=e,0===g&&C(Fs))),g--,s===e&&0===g&&C(Kp),s}function ca(){var s,b,A,y;if(g++,s=t,(b=$t())===e&&(Je.test(a.charAt(t))?(b=a.charAt(t),t++):(b=e,0===g&&C(ze))),b!==e){for(A=[],(y=$t())===e&&(Je.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(ze)),y===e&&(yn.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(vn)),y===e&&(gn.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(bn)),y===e&&(mn.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(xn))))));y!==e;)A.push(y),(y=$t())===e&&(Je.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(ze)),y===e&&(yn.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(vn)),y===e&&(gn.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(bn)),y===e&&(mn.test(a.charAt(t))?(y=a.charAt(t),t++):(y=e,0===g&&C(xn))))));A!==e?s=b+=A.join(""):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C($p)),s}function qr(){var s;return g++,(s=$t())===e&&(45===a.charCodeAt(t)?(s=lt,t++):(s=e,0===g&&C(ut)),s===e&&(Je.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(ze)),s===e&&(yn.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(vn)),s===e&&(gn.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(bn)),s===e&&(mn.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(xn))))))),g--,s===e&&0===g&&C(Zp),s}function fa(){var s,b,A,y;if(g++,s=t,(b=$t())===e&&(Je.test(a.charAt(t))?(b=a.charAt(t),t++):(b=e,0===g&&C(ze)),b===e&&(58===a.charCodeAt(t)?(b=Ht,t++):(b=e,0===g&&C(Jt)),b===e&&(b=Un()))),b!==e){for(A=[],(y=qr())===e&&(46===a.charCodeAt(t)?(y=et,t++):(y=e,0===g&&C(tt)),y===e&&(58===a.charCodeAt(t)?(y=Ht,t++):(y=e,0===g&&C(Jt)),y===e&&(y=Un())));y!==e;)A.push(y),(y=qr())===e&&(46===a.charCodeAt(t)?(y=et,t++):(y=e,0===g&&C(tt)),y===e&&(58===a.charCodeAt(t)?(y=Ht,t++):(y=e,0===g&&C(Jt)),y===e&&(y=Un())));A!==e?s=b+=(A||[]).join(""):(t=s,s=e)}else t=s,s=e;return g--,s===e&&(b=e,0===g&&C(ed)),s}function Un(){var s,b,A,y,w,j;return g++,g++,A=t,37===a.charCodeAt(t)?(y="%",t++):(y=e,0===g&&C(Ts)),y!==e&&(w=pa())!==e&&(j=pa())!==e?A=y=[y,w,j]:(t=A,A=e),A!==e&&(A=A.join("")),g--,(b=A)===e&&(A=e,0===g&&C(rd)),(s=b)===e&&(s=function(){var b,A,y;return g++,b=t,92===a.charCodeAt(t)?(A="\\",t++):(A=e,0===g&&C(Es)),A!==e?(95===a.charCodeAt(t)?(y="_",t++):(y=e,0===g&&C(Fs)),y===e&&(126===a.charCodeAt(t)?(y="~",t++):(y=e,0===g&&C(cd)),y===e&&(46===a.charCodeAt(t)?(y=et,t++):(y=e,0===g&&C(tt)),y===e&&(45===a.charCodeAt(t)?(y=lt,t++):(y=e,0===g&&C(ut)),y===e&&(33===a.charCodeAt(t)?(y=tn,t++):(y=e,0===g&&C(rn)),y===e&&(36===a.charCodeAt(t)?(y=Qf,t++):(y=e,0===g&&C(as)),y===e&&(38===a.charCodeAt(t)?(y="&",t++):(y=e,0===g&&C(fd)),y===e&&(39===a.charCodeAt(t)?(y=dn,t++):(y=e,0===g&&C(hn)),y===e&&(40===a.charCodeAt(t)?(y=ue,t++):(y=e,0===g&&C(oe)),y===e&&(41===a.charCodeAt(t)?(y=m,t++):(y=e,0===g&&C(L)),y===e&&(42===a.charCodeAt(t)?(y=q,t++):(y=e,0===g&&C(re)),y===e&&(43===a.charCodeAt(t)?(y=gt,t++):(y=e,0===g&&C(bt)),y===e&&(44===a.charCodeAt(t)?(y=We,t++):(y=e,0===g&&C(Xe)),y===e&&(59===a.charCodeAt(t)?(y=pt,t++):(y=e,0===g&&C(dt)),y===e&&(58===a.charCodeAt(t)?(y=Ht,t++):(y=e,0===g&&C(Jt)),y===e&&(61===a.charCodeAt(t)?(y=vr,t++):(y=e,0===g&&C(gr)),y===e&&(47===a.charCodeAt(t)?(y=wt,t++):(y=e,0===g&&C(_t)),y===e&&(63===a.charCodeAt(t)?(y=Yr,t++):(y=e,0===g&&C(en)),y===e&&(35===a.charCodeAt(t)?(y=mp,t++):(y=e,0===g&&C(As)),y===e&&(64===a.charCodeAt(t)?(y=Bf,t++):(y=e,0===g&&C(ls)),y===e&&(37===a.charCodeAt(t)?(y=nd,t++):(y=e,0===g&&C(Ts)))))))))))))))))))))),y!==e?b=A="\\"+y:(t=b,b=e)):(t=b,b=e),g--,b===e&&(A=e,0===g&&C(ud)),b}()),g--,s===e&&0===g&&C(td),s}function pa(){var s;return g++,Je.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(ze)),s===e&&(od.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(sd)),s===e&&(ad.test(a.charAt(t))?(s=a.charAt(t),t++):(s=e,0===g&&C(ld)))),g--,s===e&&0===g&&C(id),s}var xt=function(s){for(var b="",A=0;A<s.length;A++)"string"==typeof s[A]?b+=s[A]:b+=s[A].join("");return b},it=0,da={},dd=function(s,b){da[s]=b},hd=function(s){da.null=s},ha=function(s){var b="";if(null==s)return null;for(var A=0;A<s.length;A++)b+=s[A];return b.toUpperCase()};if((l=n())!==e&&t===a.length)return l;throw l!==e&&t<a.length&&C({type:"end"}),function pd(s,b,A){return new N(N.buildMessage(s,b),s,b,A)}(wn,ct<a.length?a.charAt(ct):null,ct<a.length?Cs(ct,ct+1):Cs(ct,ct))}}}()},{}],129:[function(D,ne,V){D("./btree").Tree;var N=D("./utils"),a=N,x=D("./lexicon").Lexicon;PersistentLexicon=function(l,e){var r=this;N.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=e||"rdfstorejs";var n=r.indexedDB.open(this.dbName+"_lexicon",1);n.onerror=function(o){l(null,new Error("Error opening IndexedDB: "+o.target.errorCode))},n.onsuccess=function(o){r.db=o.target.result,l(r)},n.onupgradeneeded=function(o){r.db=o.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(l,e,r){if(l!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(u){r(null,new Error(u.target.statusCode))};var o=n.objectStore("knownGraphs");o.get(e).onsuccess=function(u){u.target.result?r(!0):o.add({oid:l,uriToken:e}).onsuccess=function(d){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(l,e){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();n.onsuccess=function(o){var u=o.target.result;u?(!0===l?r.push(u.value.uriToken):r.push(u.value.oid),u.continue()):e(r)},n.onerror=function(o){e(null,new Error("Error retrieving data from the cursor: "+o.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(l,e){if(l===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"],"readwrite").objectStore("components"),n=r.index("value").get("_u:"+l);n.onsuccess=function(o){var u=o.target.result;if(u){u.counter++;var d=u.id,v=r.put(u);v.onsuccess=function(h){e(d)},v.onerror=function(h){e(null,new Error("Error updating the URI data"+h.target.errorCode))}}else{var c=r.add({value:"_u:"+l,counter:0,uri:!0});c.onsuccess=function(h){e(h.target.result)},c.onerror=function(h){e(null,new Error("Error inserting the URI data"+h.target.errorCode))}}},n.onerror=function(o){e(null,new Error("Error retrieving the URI data"+o.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(l,e){if(l===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+l);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.id):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving uri data "+n.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(l,e){if(l===this.defaultGraphUri)e(0);else{var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+l);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.cost):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving uri data "+n.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(l){var e=guid(),r=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});r.onsuccess=function(n){l(n.target.result)},r.onerror=function(n){l(null,new Error("Error inserting the URI data"+n.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(l,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(l,e){var r=this.db.transaction(["components"],"readwrite").objectStore("components"),n=r.index("value").get("_l:"+l);n.onsuccess=function(o){var u=o.target.result;if(u){u.counter++;var d=u.id,v=r.put(u);v.onsuccess=function(h){e(d)},v.onerror=function(h){e(null,new Error("Error updating the literal data"+h.target.errorCode))}}else{var c=r.add({value:"_l:"+l,counter:0,literal:!0});c.onsuccess=function(h){e(h.target.result)},c.onerror=function(h){e(null,new Error("Error inserting the literal data"+h.target.errorCode))}}},n.onerror=function(o){e(null,new Error("Error retrieving the literal data"+o.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(l,e){var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+l);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.id):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving literal data "+n.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(l,e){var r=that.db.transaction(["components"]).objectStore("components").index("components").get(l);r.onsuccess=function(n){null!=n.target.result?e(n.target.result.cost):e(-1)},r.onerror=function(n){e(null,new Error("Error retrieving literal data "+n.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(l){return x.prototype.parseLiteral(l)},PersistentLexicon.prototype.parseUri=function(l){return x.prototype.parseUri(l)},PersistentLexicon.prototype.retrieve=function(l,e){var r,n=this;l===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((r=n.db.transaction(["components"]).objectStore("components").get(l)).onsuccess=function(o){if(null!=o.target.result)if(null!=o.target.result.label){var u="_:"+o.target.result.id;e({token:"blank",value:u})}else null!=o.target.result.uri?e(n.parseUri(o.target.result.value.slice(3,o.target.result.value.length))):null!=o.target.result.literal?e(n.parseLiteral(o.target.result.value.slice(3,o.target.result.value.length))):(console.log(o.target.result),e(null,new Error("Unknown type of component "+o.target.result)));else e(null,null)},r.onerror=function(o){e(null,new Error("Error searching in blanks data "+o.target.errorCode))})},PersistentLexicon.prototype.clear=function(l){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,r=function(){l?.()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=r,e.onerror=r},PersistentLexicon.prototype.unregister=function(l,e,r){var n=this;a.seq(function(o){n._unregisterTerm(l.subject.token,e.subject,o)},function(o){n._unregisterTerm(l.predicate.token,e.predicate,o)},function(o){n._unregisterTerm(l.object.token,e.object,o)},function(o){null!=l.graph?n._unregisterTerm(l.graph.token,e.graph,o):o()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(l,e,r){var n=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===l?e!=this.defaultGraphOid?n.objectStore("components").delete(e).onsuccess=void(n.objectStore("knownGraphs").delete(e).onsuccess=function(){r()}):r():n.objectStore("components").delete(e).onsuccess=function(){r()}},ne.exports={PersistentLexicon}},{"./btree":123,"./lexicon":126,"./utils":140}],130:[function(D,ne,V){var N=D("./utils");PersistentQuadBackend=function(a,x){var l=this;if(0!==arguments){for(var e in N.registerIndexedDB(l),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var n=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[n]=e}l.dbName=a.name||"rdfstorejs";var o=l.indexedDB.open(this.dbName+"_db",1);o.onerror=function(u){x(null,new Error("Error opening IndexedDB: "+u.target.errorCode))},o.onsuccess=function(u){l.db=u.target.result,x(l)},o.onupgradeneeded=function(u){var d=u.target.result.createObjectStore(l.dbName,{keyPath:"SPOG"});N.each(l.indices,function(v){"SPOG"!==v&&d.createIndex(v,v,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(a,x){var l=this;N.each(this.indices,function(r){a[r]=l._genMinIndexKey(a,r)});var e=l.db.transaction([l.dbName],"readwrite");e.oncomplete=function(r){},e.onerror=function(r){x(null,new Error(r.target.statusCode))},e.objectStore(l.dbName).add(a).onsuccess=function(r){x(!0)}},PersistentQuadBackend.prototype.range=function(a,x){var l=this,e=l.db.transaction([l.dbName]).objectStore(l.dbName),r=this._indexForPattern(a),n=this._genMinIndexKey(a,r),o=this._genMaxIndexKey(a,r),u=l.IDBKeyRange.bound(n,o,!1,!1),d=[];("SPOG"===r?e:e.index(r)).openCursor(u).onsuccess=function(v){var c=v.target.result;c?(d.push(c.value),c.continue()):x(d)}},PersistentQuadBackend.prototype.search=function(a,x){var l=this,e=l.db.transaction([l.dbName]).objectStore(l.dbName),r=this._genMinIndexKey(a,"SPOG"),n=e.get(r);n.onerror=function(o){x(null,new Error(o.target.statusCode))},n.onsuccess=function(o){x(null!=o.target.result)}},PersistentQuadBackend.prototype.delete=function(a,x){var l=this,e=l._genMinIndexKey(a,"SPOG"),r=l.db.transaction([l.dbName],"readwrite").objectStore(l.dbName).delete(e);r.onsuccess=function(){x(!0)},r.onerror=function(n){x(null,new Error(n.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(a,x){var l=this.componentOrders[x];return N.map(l,function(e){return"string"==typeof a[e]||null==a[e]?"0":a[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(a,x){for(var l=this.componentOrders[x],e=[],r=0;r<l.length;r++){var n=a[l[r]];e[r]="string"==typeof n?"z":n}return N.map(e,function(o){return""+o}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(a){var x=a.indexKey.sort().join("."),l=this.componentOrdersMap[x];if(null==l)throw new Error("Error, cannot find index for indexKey "+x);return l},PersistentQuadBackend.prototype.clear=function(a){var x,l=this;(x=l.db.transaction([l.dbName],"readwrite").objectStore(l.dbName).clear()).onsuccess=function(){a()},x.onerror=function(){a()}},ne.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":140}],131:[function(D,ne,V){var N=D("./quad_index").QuadIndex,a=D("./utils");QuadBackend=function(x,l){this.indexMap={},this.treeOrder=x.treeOrder,this.indices=x.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;a.eachSeries(this.indices,function(r,n){new N({order:e.treeOrder,componentOrder:e.componentOrders[r]},function(o){e.indexMap[r]=o,n()})},function(){l(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(x){for(var l=x.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var r=QuadBackend.allIndices[e],n=QuadBackend.componentOrders[r],o=0;o<n.length&&!1!==a.include(l,n[o]);o++)if(o==l.length-1)return r;return"SPOG"},QuadBackend.prototype.index=function(x,l){var e=this;a.eachSeries(this.indices,function(r,n){e.indexMap[r].insert(x,function(){n()})},function(){l(!0)})},QuadBackend.prototype.range=function(x,l){var e=this._indexForPattern(x),r=this.indexMap[e];r?.range(x,function(n){l(n)})},QuadBackend.prototype.search=function(x,l){var e=this.indexMap.SPOG;e?.search(x,function(r){l(null!=r)})},QuadBackend.prototype.delete=function(x,l){var e=this;a.eachSeries(this.indices,function(r,n){e.indexMap[r].delete(x,function(){n()})},function(){l(!0)})},QuadBackend.prototype.clear=function(x){var l=this;a.eachSeries(this.indices,function(e,r){new N({order:l.treeOrder,componentOrder:l.componentOrders[e]},function(n){l.indexMap[e]=n,r()})},function(){x(!0)})},ne.exports.QuadBackend=QuadBackend},{"./quad_index":132,"./utils":140}],132:[function(D,ne,V){var N=D("./btree").Tree,a=D("./utils"),x=D("./utils");NodeKey=function(l,e){this.subject=l.subject,this.predicate=l.predicate,this.object=l.object,this.graph=l.graph,this.order=e},NodeKey.prototype.comparator=function(l){for(var e=0;e<this.order.length;e++){var r=this.order[e];if(null==l[r])return 0;if(this[r]<l[r])return-1;if(this[r]>l[r])return 1}return 0},Pattern=function(l){this.subject=l.subject,this.predicate=l.predicate,this.object=l.object,this.graph=l.graph,this.indexKey=[],this.keyComponents={};var e=[],r=[],n=this;a.forEach(["subject","predicate","object","graph"],function(o){"string"==typeof n[o]?(r.push(o),n.keyComponents[o]=null):(e.push(o),n.keyComponents[o]=n[o],n.indexKey.push(o))}),this.order=e.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(l,e){0!=arguments&&(this.componentOrder=l.componentOrder,N.call(this,l.order,function(r){r.comparator=function(n,o){for(var u=0;u<r.componentOrder.length;u++){var d=r.componentOrder[u],v=n[d],c=o[d];if(v<c)return-1;if(v>c)return 1}return 0},r.rangeComparator=function(n,o){for(var u=0;u<r.componentOrder.length;u++){var d=r.componentOrder[u];if(null==o[d]||null==n[d])return 0;if(n[d]<o[d])return-1;if(n[d]>o[d])return 1}return 0},e(r)}))},QuadIndex.prototype=a.create(N.prototype,{constructor:N}),QuadIndex.prototype.insert=function(l,e){N.prototype.insert.call(this,l,null,function(r){e(r)})},QuadIndex.prototype.search=function(l,e){N.prototype.search.call(this,l,function(r){e(r)},!0)},QuadIndex.prototype.range=function(l,e){this._rangeTraverse(this,this.root,l,e)},QuadIndex.prototype._rangeTraverse=function(l,e,r,n){var o=r.key,u=[],d=[e];x.whilst(function(){return d.length>0},function(v){for(var c=d.shift(),h=0;h<c.numberActives&&-1===l.rangeComparator(c.keys[h].key,o);)h++;if(!0===c.isLeaf){for(var f=h;f<c.numberActives&&0===l.rangeComparator(c.keys[f].key,o);)u.push(c.keys[f].key),f++;v()}else l._diskRead(c.children[h],function(O){d.push(O);var T=h;x.whilst(function(){return T<c.numberActives&&0===l.rangeComparator(c.keys[T].key,o)},function(P){u.push(c.keys[T].key),T++,l._diskRead(c.children[T],function(Q){d.push(Q),P()})},function(){v()})})},function(){n(u)})},ne.exports={QuadIndex,Pattern,NodeKey}},{"./btree":123,"./utils":140}],133:[function(D,ne,V){var N=D("./abstract_query_tree").AbstractQueryTree,a=D("./abstract_query_tree").NonSupportedSparqlFeatureError,x=D("./utils"),l=D("./quad_index"),e=D("./query_plan").QueryPlan,r=D("./query_filters").QueryFilters,n=D("./rdf_model"),o=D("./rdf_loader").RDFLoader,u=D("./graph_callbacks").CallbacksBackend,d=D("./utils"),v=D("./utils");function c(h,f,O){this.name="BindExpressionError",this.bind=f,this.error=O,this.message=h}c.prototype=new Error,c.constructor=c,QueryEngine=function(h){0!=arguments.length&&(this.backend=h.backend,this.lexicon=h.lexicon,this.eventsOnBatchLoad=h.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new N,this.rdfLoader=new o(h.communication),this.callbacksBackend=new u(this),this.customFns=h.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(h){this.customFns=h},QueryEngine.prototype.registerNsInEnvironment=function(h,f){var O=[];null!=h&&null!=h.prefixes&&(O=h.prefixes);var T={};for(var P in this.defaultPrefixes)T[P]=this.defaultPrefixes[P];for(var Q=0;Q<O.length;Q++){var I=O[Q];"prefix"===I.token&&(T[I.prefix]=I.local)}f.namespaces=T,null!=h&&h.base&&"object"==typeof h.base?f.base=h.base.value:f.base=null},QueryEngine.prototype.applyModifier=function(h,f){if("DISTINCT"==h){for(var O={},T=[],P=0;P<f.length;P++){var Q=f[P],I="";for(var k in Q){var G=Q[k];null==G?I=I+k+"null":"literal"==G.token?(null!=G.value&&(I+=G.value),null!=G.lang&&(I+=G.lang),null!=G.type&&(I+=G.type)):I=G.value?I+k+G.value:I+k+G}null==O[I]&&(T.push(Q),O[I]=!0)}return T}return f},QueryEngine.prototype.applyLimitOffset=function(h,f,O){return null==f&&null==h?O:(null==h&&(h=0),f=null==f?O.length:h+f,O.slice(h,f))},QueryEngine.prototype.applySingleOrderBy=function(h,f,O,T,P){var Q=[],I=this;d.eachSeries(h,function(k,G){r.collect(k.expression,[f],O,T,I,function(J){Q.push(J[0].value),G()})},function(){P({binding:f,value:Q})})},QueryEngine.prototype.applyOrderBy=function(h,f,O,T,P){var Q=this,I=[];null!=h&&h.length>0?d.eachSeries(f,function(k,G){Q.applySingleOrderBy(h,k,O,T,function(J){I.push(J),G()})},function(){I.sort(function(J,X){return Q.compareFilteredBindings(J,X,h,T)});for(var k=[],G=0;G<I.length;G++)k.push(I[G].binding);P(k)}):P(f)},QueryEngine.prototype.compareFilteredBindings=function(h,f,O,T){for(var P=0;;){if(P==h.value.length)return 0;var Q,I=O[P].direction;if(null!=h.value[P]||null!=f.value[P]){if(null==h.value[P])Q={value:!1};else if(null==f.value[P])Q={value:!0};else{if("blank"===h.value[P].token&&"blank"===f.value[P].token){P++;continue}if("blank"===h.value[P].token)Q={value:!1};else if("blank"===f.value[P].token)Q={value:!0};else if("uri"===h.value[P].token&&"uri"===f.value[P].token){if(1==r.runEqualityFunction(h.value[P],f.value[P],[],this,T).value){P++;continue}Q=r.runTotalGtFunction(h.value[P],f.value[P],[])}else if("uri"===h.value[P].token)Q={value:!1};else if("uri"===f.value[P].token)Q={value:!0};else if("literal"===h.value[P].token&&"literal"===f.value[P].token&&null==h.value[P].type&&null==f.value[P].type){if(1==r.runEqualityFunction(h.value[P],f.value[P],[],this,T).value){P++;continue}Q=r.runTotalGtFunction(h.value[P],f.value[P],[])}else if("literal"===h.value[P].token&&null==h.value[P].type)Q={value:!1};else if("literal"===f.value[P].token&&null==f.value[P].type)Q={value:!0};else{if(1==r.runEqualityFunction(h.value[P],f.value[P],[],this,T).value){P++;continue}Q=r.runTotalGtFunction(h.value[P],f.value[P],[])}}return 1==Q.value?"ASC"===I?1:-1:"ASC"===I?-1:1}P++}},QueryEngine.prototype.removeDefaultGraphBindings=function(h,f){for(var O=[],T={},P=0;P<f.named.length;P++)T[f.named[P].oid]=!0;for(P=0;P<f.implicit.length;P++)null==T[f.implicit[P].oid]&&O.push(f.implicit[P].oid);var Q=[];for(P=0;P<h.length;P++){var I=h[P],k=!1;for(var G in I){for(var J=0;J<T.length;J++)if(I[G]===T[J]){k=!0;break}if(k)break}k||Q.push(I)}return Q},QueryEngine.prototype.aggregateBindings=function(h,f,O,T,P){this.copyDenormalizedBindings(f,T.outCache,function(Q){for(var I={},k=0;k<h.length;k++){var G=r.runAggregator(h[k],Q,this,O,T);h[k].alias?I[h[k].alias.value]=G:I[h[k].value.value]=G}P(I)})},QueryEngine.prototype.projectBindings=function(h,f,O){if("*"===h[0].kind)return f;for(var T=[],P=0;P<f.length;P++){for(var Q=f[P],I={},k=!0,G=0;G<h.length;G++)if("variable"==h[G].token&&"aliased"!=h[G].kind)I[h[G].value.value]=Q[h[G].value.value];else if("variable"==h[G].token&&"aliased"==h[G].kind){var J=r.runFilter(h[G].expression,Q,this,O,{blanks:{},outCache:{}});if(r.isEbvError(J)){k=!1;break}I[h[G].alias.value]=J}!0===k&&T.push(I)}return T},QueryEngine.prototype.resolveNsInEnvironment=function(h,f){return f.namespaces[h]},QueryEngine.prototype.normalizeTerm=function(h,f,O,T){if("uri"===h.token){var P=x.lexicalFormBaseUri(h,f);null==P?T(null):O?this.lexicon.registerUri(P,T):this.lexicon.resolveUri(P,T)}else if("literal"===h.token){var Q=x.lexicalFormLiteral(h,f);O?this.lexicon.registerLiteral(Q,T):this.lexicon.resolveLiteral(Q,T)}else if("blank"===h.token){var I=h.value,k=f.blanks[I];null!=k?T(k):O?this.lexicon.registerBlank(function(G){f.blanks[I]=G,T(G)}):this.lexicon.resolveBlank(function(G){f.blanks[I]=G,T(G)})}else"var"===h.token?T(h.value):T(null)},QueryEngine.prototype.normalizeDatasets=function(h,f,O){var T=this;d.eachSeries(h,function(P,Q){P.value===T.lexicon.defaultGraphUri?(P.oid=T.lexicon.defaultGraphOid,Q()):T.normalizeTerm(P,f,!1,function(I){null!=I&&(P.oid=I),Q()})},function(){O(!0)})},QueryEngine.prototype.normalizeQuad=function(h,f,O,T){var P=null,Q=null,I=null,k=null,G=this,J=!1;d.seq(function(X){if(null==h.graph||h.graph.value===G.lexicon.defaultGraphUri)k=0,X();else{var U=x.lexicalFormBaseUri(h.graph,f);G.normalizeTerm(h.graph,f,O,function(K){null!=K?(k=K,!0===O&&"var"!=h.graph.token?G.lexicon.registerGraph(K,U,function(){X()}):X()):(J=!0,X())})}},function(X){!1===J?G.normalizeTerm(h.subject,f,O,function(U){null!=U?(P=U,X()):(J=!0,X())}):X()},function(X){!1===J?G.normalizeTerm(h.predicate,f,O,function(U){null!=U?(Q=U,X()):(J=!0,X())}):X()},function(X){!1===J?G.normalizeTerm(h.object,f,O,function(U){null!=U?(I=U,X()):(J=!0,X())}):X()})(function(){T(!0===J?null:{subject:P,predicate:Q,object:I,graph:k})})},QueryEngine.prototype.denormalizeBindingsList=function(h,f,O){var T=this,P=[];d.eachSeries(h,function(Q,I){T.denormalizeBindings(Q,f,function(k){P.push(k),I()})},function(){O(P)})},QueryEngine.prototype.copyDenormalizedBindings=function(h,f,O){var T=this,P=[];d.eachSeries(h,function(Q,I){var k={},G=v.keys(Q);d.eachSeries(G,function(J,X){var U=Q[J];if(null==U)k[J]=null,X();else if("object"==typeof U)k[J]=U,X();else{var K=f[U];null!=K?(k[J]=K,X()):T.lexicon.retrieve(U,function(ie){f[U]=ie,k[J]=ie,X()})}},function(){P.push(k),I()})},function(){O(P)})},QueryEngine.prototype.denormalizeBindings=function(h,f,O){var T=v.keys(h),P=f.outCache,Q=this;d.eachSeries(T,function(I,k){var G=h[I];null==G?(h[I]=null,k()):"object"==typeof G?k():null!=P[G]?(h[I]=P[G],k()):Q.lexicon.retrieve(G,function(J){h[I]=J,"blank"===J.token&&(f.blanks[J.value]=G),k()})},function(){O(h)})},QueryEngine.prototype.execute=function(h,f,O,T){h=x.normalizeUnicodeLiterals(h);var P=this.abstractQueryTree.parseQueryString(h);if(null==P)f(!1,"Error parsing query string");else if("query"===P.token&&"update"==P.kind){this.callbacksBackend.startGraphModification();var Q=this;this.executeUpdate(P,function(I,k){Q.lexicon.updateAfterWrite&&Q.lexicon.updateAfterWrite(),I?(Q.callbacksBackend.cancelGraphModification(),f(I,k)):Q.callbacksBackend.endGraphModification(function(){f(I,k)})})}else"query"===P.token&&"query"==P.kind&&this.executeQuery(P,f,O,T)},QueryEngine.prototype.executeQuery=function(h,f,O,T){var P=h.prologue,Q=h.units,I=this,k={blanks:{},outCache:{}};this.registerNsInEnvironment(P,k);var G=I.abstractQueryTree.parseExecutableUnit(Q[0]);"select"===G.kind?this.executeSelect(G,k,O,T,function(J,X){null==J?"object"==typeof X&&!0===X.denorm?f(null,X.bindings):I.denormalizeBindingsList(X,k,function(U){f(null,U)}):f(J)}):"ask"===G.kind?(G.projection=[{token:"variable",kind:"*"}],this.executeSelect(G,k,O,T,function(J,X){null==J?X.length>0?f(null,!0):f(null,!1):f(J)})):"construct"===G.kind&&(G.projection=[{token:"variable",kind:"*"}],I=this,this.executeSelect(G,k,O,T,function(J,X){null==J?I.denormalizeBindingsList(X,k,function(U){if(null!=U){var K=new n.Graph;null==G.template&&(G.template={triplesContext:G.pattern});for(var ie=1,ce=[],ve=0;ve<U.length;ve++){for(var fe=U[ve],Y=0;Y<ce.length;Y++)delete ce[Y].valuetmp;for(Y=0;Y<G.template.triplesContext.length;Y++){for(var M=["subject","predicate","object"],z=G.template.triplesContext[Y],Z=0;Z<M.length;Z++){var ae=M[Z];if("blank"===z[ae].token&&(!z[ae].valuetmp||null==z[ae].valuetmp)){var de="_:b"+ie;ie++,z[ae].valuetmp=de,ce.push(z[ae])}}var ue=n.buildRDFResource(z.subject,fe,I,k),oe=(Z=n.buildRDFResource(z.predicate,fe,I,k),n.buildRDFResource(z.object,fe,I,k));if(null!=ue&&null!=Z&&null!=oe){var he=new n.Triple(ue,Z,oe);K.add(he)}}}f(null,K)}else f(new Error("Error denormalizing bindings."))}):f(J)}))},QueryEngine.prototype.executeSelect=function(h,f,O,T,P){if("select"===h.kind||"ask"===h.kind||"construct"===h.kind||"modify"===h.kind){var Q=h.projection,I=h.dataset,k=h.modifier,G=h.limit,J=h.offset,X=h.order,U=this;null==O&&null==T||(I.implicit=O||[],I.named=T||[]),null!=I.implicit&&0===I.implicit.length&&null!=I.named&&0===I.named.length&&I.implicit.push(this.lexicon.defaultGraphUriTerm),U.normalizeDatasets(I.implicit.concat(I.named),f,function(){try{U.executeSelectUnit(Q,I,h.pattern,f,function(K){if(null!=K){if(null!=h.group&&""===h.group){for(var ie=!1,ce=0;ce<h.projection.length;ce++)if(null!=h.projection[ce].expression&&"aggregate"===h.projection[ce].expression.expressionType){ie=!0;break}!0===ie&&(h.group="singleGroup")}h.group&&""!=h.group?U.checkGroupSemantics(h.group,Q)?U.groupSolution(K,h.group,I,f,function(ve){var fe=[];d.eachSeries(ve,function(Y,M){U.aggregateBindings(Q,Y,I,f,function(z){fe.push(z),M()})},function(){P(null,{bindings:fe,denorm:!0})})}):P(new Error("Incompatible Group and Projection variables")):U.applyOrderBy(X,K,I,f,function(ve){var fe=U.projectBindings(Q,ve,I),Y=U.applyModifier(k,fe),M=U.applyLimitOffset(J,G,Y),z=U.removeDefaultGraphBindings(M,I);P(null,z)})}else P(new Error("Error executing SELECT query."))})}catch(K){P(K)}})}else P(new Error("Cannot execute "+h.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(h,f,O,T,P){var Q=[],I=[],k=!1,G=this;"singleGroup"===f?P([h]):d.eachSeries(h,function(J,X){var U=!0;d.eachSeries(f,function(K,ie){var ce=null;if("var"===K.token)ce=K.value,0==k&&Q.push(ce),ie();else if("aliased_expression"===K.token){if(ce=K.alias.value,0==k&&Q.push(ce),"var"===K.expression.primaryexpression)J[K.alias.value]=J[K.expression.value.value];else{var ve=G.copyDenormalizedBindings([J],T.outCache),fe=r.runFilter(K.expression,ve[0],G,O,T);r.isEbvError(fe)?U=!1:(null!=fe.value&&(fe.value=""+fe.value),J[K.alias.value]=fe)}ie()}else G.copyDenormalizedBindings([J],T.outCache,function(Y){var M=r.runFilter(K,Y[0],G,T);r.isEbvError(M)?U=!1:(J["groupCondition"+env._i]=M,ce="groupCondition"+env._i,0==k&&Q.push(ce)),ie()})},function(){0==k&&(k=!0),!0===U&&I.push(J),X()})},function(){for(var J={},X={},U=0;U<I.length;U++){for(var K=I[U],ie="",ce=0;ce<Q.length;ce++){var ve=K[Q[ce]];ie+="object"==typeof ve?ve.value:ve}null==J[ie]?(X[ie]=0,J[ie]=[K]):J[ie].push(K)}var fe=[];for(var Y in J)fe.push(J[Y]);P(fe)})},QueryEngine.prototype.executeSelectUnit=function(h,f,O,T,P){if("BGP"===O.kind)this.executeAndBGP(h,f,O,T,P);else if("UNION"===O.kind)this.executeUNION(h,f,O.value,T,P);else if("JOIN"===O.kind)this.executeJOIN(h,f,O,T,P);else if("LEFT_JOIN"===O.kind)this.executeLEFT_JOIN(h,f,O,T,P);else if("FILTER"===O.kind){var Q=this;this.executeSelectUnit(h,f,O.value,T,function(I){null!=I?r.checkFilters(O,I,!1,f,T,Q,P):P([])})}else{if("EMPTY_PATTERN"!==O.kind)throw new a(O.kind);P([])}},QueryEngine.prototype.executeUNION=function(h,f,O,T,P){var Q,I,k=O[0],G=O[1],J=null;if(2!=O.length)throw"SPARQL algebra UNION with more than two components";var X=this;d.seq(function(U){try{X.executeSelectUnit(h,f,k,T,function(K){Q=K,U()})}catch(K){J=K,U()}},function(U){if(null==J)try{X.executeSelectUnit(h,f,G,T,function(K){I=K,U()})}catch(K){J=K,U()}else U()})(function(){if(null!=J)P(J);else{var U=e.unionBindings(Q,I);X.runBinds(O.binds,U,f,T,function(K,ie){if(null!=K)throw new c("Error processing bind expressions",O.binds,K);r.checkFilters(O,ie,!1,f,T,X,P)})}})},QueryEngine.prototype.executeAndBGP=function(h,f,O,T,P){var Q=this;e.executeAndBGPsDPSize(O.value,f,this,T,function(I){null!=I?Q.runBinds(O.binds,I,f,T,function(k,G){if(null!=k)throw new c("Error processing bind expressions",O.binds,k);r.checkFilters(O,G,!1,f,T,Q,P)}):P(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(h,f,O,T,P){var Q=O.lvalue,I=O.rvalue;if("EMPTY_PATTERN"===Q.kind)this.executeSelectUnit(h,f,I,T,P);else{var k,G,J=null,X=null,U=null,K=this;d.seq(function(ie){try{K.executeSelectUnit(h,f,Q,T,function(ce){J=ce,ie()})}catch(ce){U=ce,ie()}},function(ie){if(null!=U)ie();else try{K.executeSelectUnit(h,f,I,T,function(ce){X=ce,ie()})}catch(ce){U=ce,ie()}})(function(){if(null!=U)P(U);else{var ie=e.leftOuterJoinBindings(J,X);K.runBinds(O.binds,ie,f,T,function(ce,ve){if(null!=ce)throw new c("Error processing bind expressions",O.binds,ce);r.checkFilters(O,ie,!0,f,T,K,function(fe){if(J.length>1&&X.length>1){var Y=[],M={};for(var z in J[0])M[z]=!0;for(z in X[0])1!=M[z]&&Y.push(z);k=[],G={};for(var Z=0;Z<fe.length;Z++)if(!0===fe[Z].__nullify__){for(var ae=0;ae<Y.length;ae++)fe[Z].bindings[Y[ae]]=null;var de=[],ue=[];for(var z in fe[Z].bindings)null!=fe[Z].bindings[z]&&(de.push(z+fe[Z].bindings[z]),de.sort(),ue.push(de.join("")));if(null==G[de.join("")]){for(ae=0;ae<ue.length;ae++)G[ue[ae]]=!0;k.push(fe[Z].bindings)}}else for(var z in k.push(fe[Z]),de=[],ue=[],fe[Z])de.push(z+fe[Z][z]),de.sort(),G[de.join("")]=!0;P(k)}else P(fe)})})}})}},QueryEngine.prototype.executeJOIN=function(h,f,O,T,P){var Q=O.lvalue,I=O.rvalue,k=null,G=null,J=null,X=this;d.seq(function(U){try{X.executeSelectUnit(h,f,Q,T,function(K){k=K,U()})}catch(K){J=K,U()}},function(U){if(null!=J)U();else try{X.executeSelectUnit(h,f,I,T,function(K){G=K,U()})}catch(K){J=K,U()}})(function(){var U=null;if(null!=J)P(J);else if(0===k.length||0===G.length)P([]);else{var K={},ie=[];for(var ce in k[0])K[ce]=!1;for(var ce in G[0])!1===K[ce]&&ie.push(ce);U=0==ie.length||X.abstractQueryTree.treeWithUnion(Q)||X.abstractQueryTree.treeWithUnion(I)?e.joinBindings(k,G):e.joinBindings2(ie,k,G),X.runBinds(O.binds,U,f,T,function(ve,fe){if(null!=ve)throw new c("Error processing bind expressions",O.binds,ve);r.checkFilters(O,fe,!1,f,T,X,P)})}})},QueryEngine.prototype.rangeQuery=function(h,f,O){var T=this;T.normalizeQuad(h,f,!1,function(P){null!=P?T.backend.range(new l.Pattern(P),function(Q){null==Q||0==Q.length?O([]):O(Q)}):O(null)})},QueryEngine.prototype.executeUpdate=function(h,f){var O=h.prologue,T=h.units,P=this,Q={blanks:{},outCache:{}};this.registerNsInEnvironment(O,Q);for(var I=0;I<T.length;I++){var k=P.abstractQueryTree.parseExecutableUnit(T[I]);if("insertdata"===k.kind){var G=null;d.eachSeries(k.quads,function(X,U){null===G?P._executeQuadInsert(X,Q,function(K){null!=K&&(G=K),U()}):U()},function(){null===G?f(null,!0):f(G)})}else if("deletedata"===k.kind)G=null,d.eachSeries(k.quads,function(X,U){null===G?P._executeQuadDelete(X,Q,function(K){null!=K&&(G=K),U()}):U()},function(){null===G?f(null,!0):f(G)});else if("modify"===k.kind)this._executeModifyQuery(k,Q,f);else if("create"===k.kind)f(!0);else if("load"===k.kind){var J={uri:x.lexicalFormBaseUri(k.sourceGraph,Q)};null!=k.destinyGraph&&(J={uri:x.lexicalFormBaseUri(k.destinyGraph,Q)}),P=this,this.rdfLoader.load(k.sourceGraph.value,J,function(X,U){X?f(new Error("error batch loading quads")):P.batchLoad(U,function(K){null!==K?f(null,K):f(new Error("Error batch loading quads"))})})}else if("drop"===k.kind)this._executeClearGraph(k.destinyGraph,Q,f);else{if("clear"!==k.kind)throw new Error("not supported execution unit");this._executeClearGraph(k.destinyGraph,Q,f)}}},QueryEngine.prototype.batchLoad=function(h,f){var O=0,T={},P=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),d.eachSeries(h,function(Q,I){var k={};d.eachSeries(["subject","predicate","object","graph"],function(G,J){!function(X,U,K,ie){var ce;if(X[U].uri||"uri"===X[U].token){var ve=X[U].uri||X[U].value;P.lexicon.registerUri(ve,function(fe){var Y=function(){null!=X[U].uri&&(X[U]={token:"uri",value:X[U].uri},delete X[U].uri),K[U]=fe,ie()};"graph"===U?P.lexicon.registerGraph(fe,ve,function(){Y()}):Y()})}else X[U].literal||"literal"===X[U].token?P.lexicon.registerLiteral(X[U].literal||X[U].value,function(fe){null!=X[U].literal&&(X[U]=P.lexicon.parseLiteral(X[U].literal),delete X[U].literal),K[U]=fe,ie()}):null==(ce=T[X[U].blank||X[U].value])?P.lexicon.registerBlank(function(fe){T[X[U].blank||X[U].value]=fe,null==X[U].token&&(X[U].token="blank",X[U].value=X[U].blank,delete X[U].blank),K[U]=fe,ie()}):(null==X[U].token&&(X[U].token="blank",X[U].value=X[U].blank,delete X[U].blank),K[U]=ce,ie())}(Q,G,k,J)},function(){var G=Q;Q=k;var J=new l.NodeKey(Q);P.backend.search(J,function(X){X?I():P.backend.index(J,function(U){U&&(P.eventsOnBatchLoad&&P.callbacksBackend.nextGraphModification(u.added,[G,Q]),O+=1),I()})})})},function(){null!=P.lexicon.updateAfterWrite&&P.lexicon.updateAfterWrite();var Q=function(){f(O)};P.eventsOnBatchLoad?P.callbacksBackend.endGraphModification(Q()):Q()})},QueryEngine.prototype._executeModifyQuery=function(h,f,O){var T=this,P=!0,Q=new Error("Error executing modify query"),I=null,k=["subject","predicate","object","graph"];h.insert=null==h.insert?[]:h.insert,h.delete=null==h.delete?[]:h.delete,d.seq(function(G){var J=[],X=[];if(null!=h.with&&J.push(h.with),null!=h.using){X=[];for(var U=0;U<h.using.length;U++){var K=h.using[U];"named"===K.kind?X.push(K.uri):J.push(K.uri)}}h.dataset={},h.projection=[{token:"variable",kind:"*"}],T.executeSelect(h,f,J,X,function(ie,ce){if(ie)return Q=ie,P=!1,G();T.denormalizeBindingsList(ce,f,function(ve){null!=ve?I=ve:(Q=new Error("Error denormalizing bindings list"),P=!1),G()})})},function(G){var J=h.with;if(P){for(var X=[],U=0;U<h.delete.length;U++)for(var K=h.delete[U],ie=0;ie<I.length;ie++){for(var ce={},ve=I[ie],fe=0;fe<k.length;fe++){var Y=k[fe];"graph"==Y&&null==K[Y]?ce.graph=J:"var"===K[Y].token?ce[Y]=ve[K[Y].value]:ce[Y]=K[Y]}X.push(ce)}d.eachSeries(X,function(M,z){T._executeQuadDelete(M,f,function(){z()})},function(){G()})}else G()},function(G){var J=h.with;if(P){for(var X=[],U=0;U<h.insert.length;U++)for(var K=h.insert[U],ie=0;ie<I.length;ie++){for(var ce={},ve=I[ie],fe=0;fe<k.length;fe++){var Y=k[fe];"graph"==Y&&null==K[Y]?ce.graph=J:"var"===K[Y].token?ce[Y]=ve[K[Y].value]:ce[Y]=K[Y]}X.push(ce)}d.eachSeries(X,function(M,z){T._executeQuadInsert(M,f,function(){z()})},function(){G()})}else G()})(function(){O(P?null:Q)})},QueryEngine.prototype._executeQuadInsert=function(h,f,O){var T,P=this,Q=!1,I=null;d.seq(function(k){P.normalizeQuad(h,f,!0,function(G){null!=G?T=G:(Q=!0,I="Error normalizing quad."),k()})},function(k){if(!1===Q){var G=new l.NodeKey(T);P.backend.search(G,function(J){!0===J?k():P.backend.index(G,function(){P.callbacksBackend.nextGraphModification(u.added,[h,T]),k()})})}else k()})(function(){Q?O(new Error(I)):O(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(h,f,O){var T,P,Q,I=this,k=!1;d.seq(function(G){I.normalizeQuad(h,f,!0,function(J){null!=J?T=J:(k=!0,P="Error normalizing quad."),G()})},function(G){!1===k?(Q=new l.NodeKey(T),I.backend.delete(Q,function(){G()})):G()},function(G){!1===k?I.lexicon.unregister(h,Q,function(){I.callbacksBackend.nextGraphModification(u.deleted,[h,T]),G()}):G()})(function(){k?O(new Error(P)):O(null,!0)})},QueryEngine.prototype._executeClearGraph=function(h,f,O){var T=this;if("default"===h)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",O);else if("named"===h)T.lexicon.registeredGraphs(!0,function(Q){if(null!=Q){var I=!1;d.eachSeries(Q,function(k,G){I?G():T.execute("DELETE { GRAPH <"+k+"> { ?s ?p ?o } } WHERE { GRAPH <"+k+"> { ?s ?p ?o } }",function(J,X){J?(I=J,G()):T.lexicon.resolveUri(k,function(U){-1!=U?T.lexicon.knownGraphs.delete(U,function(){G()}):(I="Cannot find graph "+k+" to clear it",G())})})},function(){O(!I)})}else O(!1,"Error deleting named graphs")});else if("all"===h)T=this,this.execute("CLEAR DEFAULT",function(Q,I){Q?O(!1,I):T.execute("CLEAR NAMED",O)});else if("uri"==h.token){var P=x.lexicalFormBaseUri(h,f);null!=P?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+P+"> { ?s ?p ?o } } WHERE { GRAPH <"+P+"> { ?s ?p ?o } }",function(Q){T.callbacksBackend.ongoingModification=!1,O(Q)})):O(!1,"wrong graph URI")}else O(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(h,f){if("singleGroup"===h)return!0;for(var O={},T=0;T<h.length;T++){var P=h[T];"var"===P.token?O[P.value]=!0:"aliased_expression"===P.token&&(O[P.alias.value]=!0)}for(T=0;T<f.length;T++){var Q=f[T];if("var"===Q.kind){if(null==O[Q.value.value])return!1}else if("aliased"===Q.kind&&Q.expression&&"var"===Q.expression.primaryexpression&&null==O[Q.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(h,f,O,T,P){var Q=this,I=f;null!=h&&h.length>0?Q.copyDenormalizedBindings(f,T.outCache,function(k){for(var G=0;G<f.length;G++)for(var J=0;J<h.length;J++){var X=h[J],U=k[G],K=r.runFilter(X.expression,U,Q,O,T);r.isEbvError(K)?P(K):I[G][X.as.value]=K}P(null,f)}):P(null,f)},QueryEngine.prototype.computeCosts=function(h,f,O){for(var T=0;T<h.length;T++)h[T]._cost=this.quadCost(h[T],f);O(h)},QueryEngine.prototype.quadCost=function(h,f){return 1},QueryEngine.prototype.registerDefaultNamespace=function(h,f){this.defaultPrefixes[h]=f},ne.exports={QueryEngine}},{"./abstract_query_tree":122,"./graph_callbacks":124,"./quad_index":132,"./query_filters":134,"./query_plan":135,"./rdf_loader":136,"./rdf_model":137,"./utils":140}],134:[function(D,ne,V){var N=D("./utils"),a=N,x=D("./utils");QueryFilters={};var l="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,r,n,o,u,d,v){var c=[];e.filter&&"function"!=typeof e.filter&&(c=e.filter);var h=[];if(null==c||0===c.length||null!=e.length)return v(r);QueryFilters.preprocessExistentialFilters(c,r,d,o,u,function(f){x.eachSeries(f,function(O,T){QueryFilters.run(O.value,r,n,o,u,d,function(P){for(var Q=[],I=0;I<P.length;I++){var k=P[I];null!=k.__nullify__?h.push(k):Q.push(k)}r=Q,T()})},function(){v(r.concat(h))})})},QueryFilters.preprocessExistentialFilters=function(e,r,n,o,u,d){var v=[];x.eachSeries(e,function(c,h){if("builtincall"!==c.value.expressionType||"exists"!==c.value.builtincall&&"notexists"!==c.value.builtincall)if("conditionalor"===c.value.expressionType||"conditionaland"===c.value.expressionType){var f=a.map(c.value.operands,function(Q){return{value:Q}});QueryFilters.preprocessExistentialFilters(f,r,n,o,u,function(Q){c.value.operands=Q.map(function(I){return I.value}),v.push(c),h()})}else"multiplicativeexpression"===c.value.expressionType?(f=a.map(c.value.factors,function(Q){return{value:Q}}),QueryFilters.preprocessExistentialFilters(f,r,n,o,u,function(Q){c.value.factors=Q.map(function(I){return I.value}),v.push(c),h()})):"additiveexpression"===c.value.expressionType?(f=a.map(c.value.summands,function(Q){return{value:Q}}),QueryFilters.preprocessExistentialFilters(f,r,n,o,u,function(Q){c.value.summands=Q.map(function(I){return I.value}),v.push(c),h()})):"relationalexpression"===c.value.expressionType?(f=[{value:c.value.op1},{value:c.value.op2}],QueryFilters.preprocessExistentialFilters(f,r,n,o,u,function(Q){c.value.op1=Q[0].value,c.value.op2=Q[1].value,v.push(c),h()})):"irireforfunction"!==c.value.expressionType&&"custom"!==c.value.expressionType||null==c.value.args?(v.push(c),h()):(f=a.map(c.value.args,function(Q){return{value:Q}}),QueryFilters.preprocessExistentialFilters(f,r,n,o,u,function(Q){c.value.args=Q.map(function(I){return I.value}),v.push(c),h()}));else{var O=c.value.builtincall,T=c.value.args,P={};n.copyDenormalizedBindings(r,u.outCache,function(Q){x.eachSeries(Q,function(I,k){var G=a.clone(T[0],!0),J=n.abstractQueryTree.parseSelect({pattern:G},I);J=n.abstractQueryTree.bind(J.pattern,I),n.executeSelectUnit([{kind:"*"}],o,J,u,function(X){var U;U="exists"===O?QueryFilters.ebvBoolean(0!==X.length):QueryFilters.ebvBoolean(0===X.length);var K=[];for(var ie in I)K.push(JSON.stringify(I[ie]));K=K.sort().join(""),P[K]=U,k()})},function(){c.value.origArgs=c.value.args,c.value.args=P,v.push(c),h()})})}},function(){d(v)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var r=e.expressionType;if("relationalexpression"==r){var n=e.op1,o=e.op2;return QueryFilters.boundVars(n)+QueryFilters.boundVars(o)}if("conditionalor"==r||"conditionaland"==r){for(var u=[],d=0;d<e.operands;d++)u=u.concat(QueryFilters.boundVars(e.operands[d]));return u}if("builtincall"==r){if(null==e.args)return[];var v=[];for(d=0;d<e.args.length;d++)v=v.concat(QueryFilters.boundVars(e.args[d]));return v}if("multiplicativeexpression"==r){v=QueryFilters.boundVars(e.factor);for(d=0;d<e.factors.length;d++)v=v.concat(QueryFilters.boundVars(e.factors[d].expression));return v}if("additiveexpression"==r){for(v=QueryFilters.boundVars(e.summand),d=0;d<e.summands.length;d++)v=v.concat(QueryFilters.boundVars(e.summands[d].expression));return v}return"regex"==r?(v=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==r?QueryFilters.boundVars(e.expression):"atomic"==r?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,r,n,o,u,d,v){d.copyDenormalizedBindings(r,u.outCache,function(c){for(var h=[],f=0;f<r.length;f++){var O=c[f],T=QueryFilters.runFilter(e,O,d,o,u);if(T=QueryFilters.ebv(T),QueryFilters.isEbvError(T)){if(n){var P={__nullify__:!0,bindings:r[f]};h.push(P)}}else!0===T?h.push(r[f]):n&&(P={__nullify__:!0,bindings:r[f]},h.push(P))}v(h)})},QueryFilters.collect=function(e,r,n,o,u,d){u.copyDenormalizedBindings(r,o.outCache,function(v){for(var c=[],h=0;h<v.length;h++){var f=v[h],O=QueryFilters.runFilter(e,f,u,n,o);c.push({binding:r[h],value:O})}return d(c)})},QueryFilters.runDistinct=function(e,r){},QueryFilters.runAggregator=function(e,r,n,o,u){if(null==r||0===r.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return r[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return r[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var d=null,v=0;v<r.length;v++){var c=r[v],h=QueryFilters.runFilter(e.expression.expression,c,n,o,u);QueryFilters.isEbvError(h)||(null===d||!0===QueryFilters.runLtFunction(d,h).value)&&(d=h)}return null===d?QueryFilters.ebvError():d}if("min"===e.expression.aggregateType){var f=null;for(v=0;v<r.length;v++)c=r[v],h=QueryFilters.runFilter(e.expression.expression,c,n,o,u),QueryFilters.isEbvError(h)||(null===f||!0===QueryFilters.runGtFunction(f,h).value)&&(f=h);return null===f?QueryFilters.ebvError():f}if("count"===e.expression.aggregateType){var O={},T=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(v=0;v<r.length;v++)c=r[v],null==O[I=N.hashTerm(c)]&&(O[I]=!0,T++);else T=r.length;else for(v=0;v<r.length;v++)c=r[v],h=QueryFilters.runFilter(e.expression.expression,c,n,o,u),QueryFilters.isEbvError(h)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==O[I=N.hashTerm(h)]&&(O[I]=!0,T++):T++);return{token:"literal",type:l+"integer",value:""+T}}if("avg"===e.expression.aggregateType){O={};var P={token:"literal",type:l+"integer",value:"0"};for(T=0,v=0;v<r.length;v++)c=r[v],h=QueryFilters.runFilter(e.expression.expression,c,n,o,u),QueryFilters.isEbvError(h)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==O[I=N.hashTerm(h)]&&(O[I]=!0,QueryFilters.isNumeric(h)&&(P=QueryFilters.runSumFunction(P,h),T++)):QueryFilters.isNumeric(h)&&(P=QueryFilters.runSumFunction(P,h),T++));var Q=QueryFilters.runDivFunction(P,{token:"literal",type:l+"integer",value:""+T});return Q.value=""+Q.value,Q}if("sum"===e.expression.aggregateType){for(O={},P={token:"literal",type:l+"integer",value:"0"},v=0;v<r.length;v++){var I;c=r[v],h=QueryFilters.runFilter(e.expression.expression,c,n,o,u),QueryFilters.isEbvError(h)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==O[I=N.hashTerm(h)]&&(O[I]=!0,QueryFilters.isNumeric(h)&&(P=QueryFilters.runSumFunction(P,h))):QueryFilters.isNumeric(h)&&(P=QueryFilters.runSumFunction(P,h)))}return P.value=""+P.value,P}return QueryFilters.runFilter(aggregate.expression,r[0],o,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,r,n,o,u){if(null!=e.expressionType){var d=e.expressionType;if("relationalexpression"==d){var v=QueryFilters.runFilter(e.op1,r,n,o,u),c=QueryFilters.runFilter(e.op2,r,n,o,u);return QueryFilters.runRelationalFilter(e,v,c,r,n,o,u)}if("conditionalor"==d)return QueryFilters.runOrFunction(e,r,n,o,u);if("conditionaland"==d)return QueryFilters.runAndFunction(e,r,n,o,u);if("additiveexpression"==d)return QueryFilters.runAddition(e.summand,e.summands,r,n,o,u);if("builtincall"==d)return QueryFilters.runBuiltInCall(e.builtincall,e.args,r,n,o,u);if("multiplicativeexpression"==d)return QueryFilters.runMultiplication(e.factor,e.factors,r,n,o,u);if("unaryexpression"==d)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,r,n,o,u);if("irireforfunction"==d)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,r,n,o,u);if("regex"==d)return QueryFilters.runRegex(e.text,e.pattern,e.flags,r,n,o,u);if("custom"==d)return QueryFilters.runBuiltInCall(e.name,e.args,r,n,o,u);if("atomic"==d)return"var"==e.primaryexpression?r[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=N.lexicalFormBaseUri(e.value.type,u)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,r,n,o){return"literal"===e.token&&"literal"===r.token?e.lang==r.lang&&e.type==r.type&&e.value==r.value||(null!=e.type&&null!=r.type||QueryFilters.isSimpleLiteral(e)&&null!=r.type||!(!QueryFilters.isSimpleLiteral(r)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===r.token?N.lexicalFormBaseUri(e,o)==N.lexicalFormBaseUri(r,o):"blank"===e.token&&"blank"===r.token&&e.value==r.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==l+"integer"||e.type==l+"decimal"||e.type==l+"double"||e.type==l+"nonPositiveInteger"||e.type==l+"negativeInteger"||e.type==l+"long"||e.type==l+"int"||e.type==l+"short"||e.type==l+"byte"||e.type==l+"nonNegativeInteger"||e.type==l+"unsignedLong"||e.type==l+"unsignedInt"||e.type==l+"unsignedShort"||e.type==l+"unsignedByte"||e.type==l+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==l+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==l+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==l+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==l+"integer"||e.type==l+"decimal"||e.type==l+"float"||e.type==l+"double"||e.type==l+"nonPositiveInteger"||e.type==l+"negativeInteger"||e.type==l+"long"||e.type==l+"int"||e.type==l+"short"||e.type==l+"byte"||e.type==l+"nonNegativeInteger"||e.type==l+"unsignedLong"||e.type==l+"unsignedInt"||e.type==l+"unsignedShort"||e.type==l+"unsignedByte"||e.type==l+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,r){return!(!r||"literal"!=r.token)&&r.type==l+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==l+"integer"||e.type==l+"decimal"||e.type==l+"double"||e.type==l+"nonPositiveInteger"||e.type==l+"negativeInteger"||e.type==l+"long"||e.type==l+"int"||e.type==l+"short"||e.type==l+"byte"||e.type==l+"nonNegativeInteger"||e.type==l+"unsignedLong"||e.type==l+"unsignedInt"||e.type==l+"unsignedShort"||e.type==l+"unsignedByte"||e.type==l+"positiveInteger"){var r=parseFloat(e.value);return!isNaN(r)&&0!=parseFloat(e.value)}return e.type===l+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===l+"string"?""!=e.value:e.type===l+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:l+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:l+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,r,n,o,u,d,v){var c=e.operator;if("="===c)return QueryFilters.runEqualityFunction(r,n,o,u,d,v);if("!="===c){var h=QueryFilters.runEqualityFunction(r,n,o,u,d,v);return QueryFilters.isEbvError(h)||(h.value=!h.value),h}if("<"===c)return QueryFilters.runLtFunction(r,n,o);if(">"===c)return QueryFilters.runGtFunction(r,n,o);if("<="===c)return QueryFilters.runLtEqFunction(r,n,o);if(">="===c)return QueryFilters.runGtEqFunction(r,n,o);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==l+"integer")return parseInt(e.value);if(e.type==l+"decimal"||e.type==l+"float"||e.type==l+"double"||e.type==l+"nonPositiveInteger")return parseFloat(e.value);if(e.type==l+"negativeInteger"||e.type==l+"long"||e.type==l+"int"||e.type==l+"short"||e.type==l+"byte"||e.type==l+"nonNegativeInteger"||e.type==l+"unsignedLong"||e.type==l+"unsignedInt"||e.type==l+"unsignedShort"||e.type==l+"unsignedByte"||e.type==l+"positiveInteger")return parseInt(e.value);if(e.type!=l+"date"&&e.type!=l+"dateTime")return e.type==l+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==l+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return N.parseISO8601(e.value)}catch{return null}},QueryFilters.runOrFunction=function(e,r,n,o,u){for(var d=null,v=0;v<e.operands.length;v++){var c=QueryFilters.runFilter(e.operands[v],r,n,o,u);0==QueryFilters.isEbvError(c)&&(c=QueryFilters.ebv(c)),null==d?d=c:QueryFilters.isEbvError(c)?d=QueryFilters.isEbvError(d)?QueryFilters.ebvError():!0===d||QueryFilters.ebvError():!0===c?d=!0:QueryFilters.isEbvError(d)&&(d=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(d)},QueryFilters.runAndFunction=function(e,r,n,o,u){for(var d=null,v=0;v<e.operands.length;v++){var c=QueryFilters.runFilter(e.operands[v],r,n,o,u);0==QueryFilters.isEbvError(c)&&(c=QueryFilters.ebv(c)),null==d?d=c:QueryFilters.isEbvError(c)?d=(QueryFilters.isEbvError(d)||!0===d)&&QueryFilters.ebvError():!0===c?QueryFilters.isEbvError(d)&&(d=QueryFilters.ebvError()):d=!1}return QueryFilters.ebvBoolean(d)},QueryFilters.runEqualityFunction=function(e,r,n,o,u,d){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)){var v=QueryFilters.effectiveTypeValue(e),c=QueryFilters.effectiveTypeValue(r);return isNaN(v)||isNaN(c)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,o,d)):QueryFilters.ebvBoolean(v==c)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",r))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var h=N.compareDateComponents(e.value,r.value);return null!=h?0==h?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(r)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,o,d)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var o=N.compareDateComponents(e.value,r.value);return null!=o?1==o?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,r){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",r)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",r)?QueryFilters.runGtFunction(e,r,[]):e.token&&"uri"===e.token&&r.token&&"uri"===r.token?QueryFilters.ebvBoolean(e.value>r.value):e.token&&"literal"===e.token&&r.token&&"literal"===r.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+r.value+r.type+r.lang):e.token&&"blank"===e.token&&r.token&&"blank"===r.token||e.value&&r.value?QueryFilters.ebvBoolean(e.value>r.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var o=N.compareDateComponents(e.value,r.value);return null!=o?-1==o?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var o=N.compareDateComponents(e.value,r.value);return null!=o?-1!=o?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,r,n){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var o=N.compareDateComponents(e.value,r.value);return null!=o?1!=o?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,r,n,o,u,d){var v=QueryFilters.runFilter(e,n,o,u,d);if(QueryFilters.isEbvError(v))return QueryFilters.ebvError();var c=v;if(QueryFilters.isNumeric(v)){for(var h=0;h<r.length;h++){var f=QueryFilters.runFilter(r[h].expression,n,o,u,d);if(!QueryFilters.isNumeric(f))return QueryFilters.ebvFalse();"+"===r[h].operator?c=QueryFilters.runSumFunction(c,f):"-"===r[h].operator&&(c=QueryFilters.runSubFunction(c,f))}return c}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:l+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:l+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:l+"decimal",value:n}:{token:"literal",type:l+"integer",value:n}},QueryFilters.runSubFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:l+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:l+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:l+"decimal",value:n}:{token:"literal",type:l+"integer",value:n}},QueryFilters.runMultiplication=function(e,r,n,o,u,d){var v=QueryFilters.runFilter(e,n,o,u,d);if(QueryFilters.isEbvError(v))return v;var c=v;if(QueryFilters.isNumeric(v)){for(var h=0;h<r.length;h++){var f=QueryFilters.runFilter(r[h].expression,n,o,u,d);if(QueryFilters.isEbvError(f))return v;if(!QueryFilters.isNumeric(f))return QueryFilters.ebvFalse();"*"===r[h].operator?c=QueryFilters.runMulFunction(c,f):"/"===r[h].operator&&(c=QueryFilters.runDivFunction(c,f))}return c}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:l+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:l+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:l+"decimal",value:n}:{token:"literal",type:l+"integer",value:n}},QueryFilters.runDivFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:l+"double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:l+"float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:l+"decimal",value:n}:{token:"literal",type:l+"integer",value:n}},QueryFilters.runBuiltInCall=function(e,r,n,o,u,d){if("notexists"===e||"exists"===e){var v=[];for(var c in n)v.push(JSON.stringify(n[c]));return r[v=v.sort().join("")]}for(var h=[],f=0;f<r.length;f++)if("var"===r[f].token)h.push(r[f]);else{var O=QueryFilters.runFilter(r[f],n,o,u,d);if(QueryFilters.isEbvError(O))return O;h.push(O)}if("str"===e)return"literal"===h[0].token?{token:"literal",type:null,value:""+h[0].value}:"uri"===h[0].token?{token:"literal",type:null,value:h[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===h[0].token?null!=h[0].lang?{token:"literal",value:""+h[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===h[0].token){var T=h[0];return null!=T.type?"string"==typeof T.type?{token:"uri",value:T.type,prefix:null,suffix:null}:T.type:null==T.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===h[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===h[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===h[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var P=h[0],Q=h[1],I=QueryFilters.RDFTermEquality(P,Q,o,d);return QueryFilters.isEbvError(I)&&(I=!1),QueryFilters.ebvBoolean(I)}if("langmatches"===e){var k=h[0],G=h[1];return"literal"===k.token&&"literal"===G.token?"*"===G.value&&""!=k.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===k.value.toLowerCase().indexOf(G.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var J=h[0].value;return null==J?QueryFilters.ebvError():null!=n[J]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=o.customFns[e])return o.customFns[e](QueryFilters,h);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,r,n,o,u,d){var v=QueryFilters.runFilter(r,n,o,u,d);if(QueryFilters.isEbvError(v))return v;if("!"===e){var c=QueryFilters.ebv(v);return QueryFilters.isEbvError(c)?QueryFilters.ebvFalse():(c=!c,QueryFilters.ebvBoolean(c))}if("+"===e)return QueryFilters.isNumeric(v)?v:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(v)){var h={};for(var f in v)h[f]=v[f];return h.value=-h.value,h}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,r,n,o,u,d,v){if(null==e||(e=QueryFilters.runFilter(e,o,u,d,v),null==r)||(r=QueryFilters.runFilter(r,o,u,d,v),null!=n&&(n=QueryFilters.runFilter(n,o,u,d,v)),null==r||"literal"!==r.token||null!=n&&"literal"!==n.token))return QueryFilters.ebvError();if(r=r.value,n=null==n?null:n.value,null!=e&&"var"==e.token){if(null==o[e.value])return QueryFilters.ebvError();e=o[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==n?new RegExp(r):new RegExp(r,n.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,r,n){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=N.lexicalFormBaseUri(e.value.type,n)),e},QueryFilters.runIriRefOrFunction=function(e,r,n,o,u,d){if(null==r)return e;for(var v=[],c=0;c<r.length;c++)v.push(QueryFilters.runFilter(r[c],n,o,u,d));var h=N.lexicalFormBaseUri(e,d);if(h==l+"integer"||h==l+"decimal"||h==l+"double"||h==l+"nonPositiveInteger"||h==l+"negativeInteger"||h==l+"long"||h==l+"int"||h==l+"short"||h==l+"byte"||h==l+"nonNegativeInteger"||h==l+"unsignedLong"||h==l+"unsignedInt"||h==l+"unsignedShort"||h==l+"unsignedByte"||h==l+"positiveInteger"){if("literal"!==(f=v[0]).token)return QueryFilters.ebvError();if((f=QueryFilters.normalizeLiteralDatatype(f,o,d)).type==l+"integer"||f.type==l+"decimal"||f.type==l+"double"||f.type==l+"nonPositiveInteger"||f.type==l+"negativeInteger"||f.type==l+"long"||f.type==l+"int"||f.type==l+"short"||f.type==l+"byte"||f.type==l+"nonNegativeInteger"||f.type==l+"unsignedLong"||f.type==l+"unsignedInt"||f.type==l+"unsignedShort"||f.type==l+"unsignedByte"||f.type==l+"positiveInteger")return f.type=h,f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=h,f.value=1):(f.type=h,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=h,f.value=parseInt(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"!=f.type&&null!=f.type||f.value.split(".").length>2||f.value.split("-").length>2||f.value.split("/").length>2||f.value.split("+").length>2||h==l+"decimal"&&(-1!=f.value.indexOf("e")||-1!=f.value.indexOf("E"))||!(h!=l+"int"&&h!=l+"integer"||-1==f.value.indexOf("e")&&-1==f.value.indexOf("E")&&-1==f.value.indexOf(".")))return QueryFilters.ebvError();try{return f.value=parseInt(parseFloat(f.value)),isNaN(f.value)?QueryFilters.ebvError():(f.type=h,f)}catch{return QueryFilters.ebvError()}}else{if(h==l+"boolean")return"literal"===(f=v[0]).token&&null==f.type?"true"===f.value||"1"===f.value?QueryFilters.ebvTrue():"false"===f.value||"0"===f.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===f.token?QueryFilters.isEbvError(f)?f:QueryFilters.ebvBoolean(f):QueryFilters.ebvError();if(h==l+"string")return"literal"===(f=v[0]).token?(f=QueryFilters.normalizeLiteralDatatype(f,o,d)).type==l+"integer"||f.type==l+"decimal"||f.type==l+"double"||f.type==l+"nonPositiveInteger"||f.type==l+"negativeInteger"||f.type==l+"long"||f.type==l+"int"||f.type==l+"short"||f.type==l+"byte"||f.type==l+"nonNegativeInteger"||f.type==l+"unsignedLong"||f.type==l+"unsignedInt"||f.type==l+"unsignedShort"||f.type==l+"unsignedByte"||f.type==l+"positiveInteger"||f.type==l+"float"?(f.type=h,f.value=""+f.value,f):f.type==l+"string"?f:f.type==l+"boolean"?(QueryFilters.ebv(f)?(f.type=h,f.value="true"):(f.type=h,f.value="false"),f):f.type==l+"dateTime"||f.type==l+"date"?(f.type=h,"string"!=typeof f.value&&(f.value=N.iso8601(f.value)),f):null==f.type?(f.value=""+f.value,f.type=h,f):QueryFilters.ebvError():"uri"===f.token?{token:"literal",value:N.lexicalFormBaseUri(f,d),type:h,lang:null}:QueryFilters.ebvError();if(h==l+"dateTime"||h==l+"date"){if((f=v[0]).type==l+"dateTime"||f.type==l+"date")return f;if(f.type!=l+"string"&&null!=f.type)return QueryFilters.ebvError();try{return f.value=N.iso8601(N.parseISO8601(f.value)),f.type=h,f}catch{return QueryFilters.ebvError()}}else{if(h!=l+"float")return null!=o.customFns[h]?o.customFns[h](QueryFilters,v):QueryFilters.ebvError();var f;if("literal"!==(f=v[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(f=QueryFilters.normalizeLiteralDatatype(f,o,d)).type||"http://www.w3.org/2001/XMLSchema#int"==f.type)return f.type=h,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=h,f.value=1):(f.type=h,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=h,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"==f.type)try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=h,f)}catch{return QueryFilters.ebvError()}else{if(null!=f.type||f.value.split(".").length>2||f.value.split("-").length>2||f.value.split("/").length>2||f.value.split("+").length>2)return QueryFilters.ebvError();try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=h,f)}catch{return QueryFilters.ebvError()}}}}},ne.exports={QueryFilters}},{"./utils":140}],135:[function(D,ne,V){var N=D("./utils"),a=D("./utils"),x={variablesInBGP:function(l){var e=l.variables;if(e)return e;var r=l.value||l;for(var n in e=[],r)r[n]&&"var"===r[n].token?e.push(r[n].value):r[n]&&"blank"===r[n].token&&e.push("blank:"+r[n].value);return l.variables=e,e},connected:function(l,e){for(var r="/"+l.vars.join("/")+"/",n=0;n<e.vars.length;n++)if(-1!=r.indexOf("/"+e.vars[n]+"/"))return!0;return!1},variablesIntersectionBGP:function(l,e){return function(r,n){for(var o={},u=0;u<r.lenght;u++)o[r[u]]=1;for(u=0;u<n.length;u++){var d=o[n[u]]||0;d++,o[n[u]]=d}var v=[];for(var c in o)2==o[c]&&v.push(o[c]);return v}(x.variablesInBGP(l),x.variablesInBGP(e))},executeAndBGPsGroups:function(l){for(var e={},r={},n=0,o=function(P,Q){for(var I=0;I<P.length;I++){var k="/"+P[I]+"/";if(-1!=Q.indexOf(k))return!0}return!1},u=function(P,Q,I,k){var G=[],J="",X="";for(var U in Q)J+=U,G=G.concat(e[U]),X+=r[U];X=X+f.join("/")+"/",G.push(P),I[J]=G,k[J]=X},d=0;d<l.length;d++){var v=l[d],c={},h={},f=x.variablesInBGP(v),O={};for(var T in r)o(f,r[T])?O[T]=!0:(c[T]=e[T],h[T]=r[T]);0===N.size(O)?(c["g"+n]=[v],h["g"+n]="/"+f.join("/")+"/",n++):u(v,O,c,h),e=c,r=h}return N.values(e)},intersectionSize:function(l,e){for(var r=e.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&-1!=l.i.indexOf("_"+r[n]+"_"))return 1;return 0},createJoinTree:function(l,e){for(var r="/"+l.vars.join("/")+"/",n=l.vars.concat([]),o=[],u=0;u<e.vars.length;u++)-1!=r.indexOf("/"+e.vars[u]+"/")?0==e.vars[u].indexOf("_:")?o.push("blank:"+e.vars[u]):o.push(e.vars[u]):n.push(e.vars[u]);var d=e.i.split("_"),v=l.i.split("_"),c={};for(u=0;u<d.length;u++)""!=d[u]&&(c[d[u]]=!0);for(u=0;u<v.length;u++)""!=v[u]&&(c[v[u]]=!0);var h=N.keys(c);return{left:l,right:e,cost:l.cost+e.cost,i:"_"+h.sort().join("_")+"_",vars:n,join:o}},executeBushyTree:function(l,e,r,n,o){null==l.left?x.executeEmptyJoinBGP(l.right,e,r,n,o):null==l.right?x.executeEmptyJoinBGP(l.left,e,r,n,o):x.executeBushyTree(l.left,e,r,n,function(u){null!=u?x.executeBushyTree(l.right,e,r,n,function(d){o(null!=d?x.joinBindings2(l.join,u,d):null)}):o(null)})},executeAndBGPsDPSize:function(l,e,r,n,o){var u=x.executeAndBGPsGroups(l),d=[];a.eachSeries(u,function(v,c){r.computeCosts(v,n,function(h){var f={},O={},T={},P=1,Q=null,I={};T[1]=[];for(var k=0;k<h.length;k++){var G=[];for(var J in delete h[k].variables,h[k])"_cost"!=J&&("var"===h[k][J].token||"blank"===h[k][J].token)&&G.push(h[k][J].value);O["_"+k+"_"]={left:h[k],right:null,cost:h[k]._cost,i:"_"+k+"_",vars:G};var X={left:h[k],right:null,cost:h[k]._cost,i:"_"+k+"_",vars:G};f["_"+k+"_"]=X,delete h[k]._cost,I["_"+k+"_"]=!0,T[1].push("_"+k+"_"),(null==Q||Q.cost>X.cost)&&(Q=X)}for(var U=2;U<=h.length;U++)for(var K=1;K<U;K++){var ie=U-K,ce=T[""+K]||[],ve=T[""+ie]||[];for(k=0;k<ce.length;k++)for(var fe=0;fe<ve.length;fe++)if(ce[k]!==ve[fe]){var Y=O[ce[k]],M=O[ve[fe]];if(0==x.intersectionSize(Y,M)&&x.connected(Y,M)){P=U;var z=f[Y.i],Z=f[M.i],ae=x.createJoinTree(z,Z);if(!I[ae.i]){I[ae.i]=!0;var de=ae.cost+1;null!=f[ae.i]&&(de=f[ae.i].cost);var ue=T[U]||[];ue.push(ae.i),O[ae.i]=ae,T[U]=ue,de>ae.cost&&(P===U&&(Q=ae),f[ae.i]=ae)}}}}d.push(Q),c()})},function(){var v=null;a.eachSeries(d,function(c,h){x.executeBushyTree(c,e,r,n,function(f){f?null==v?(v=f,h()):(v=x.crossProductBindings(v,f),h()):h("Error executing bushy tree")})},function(c){c?o(null,c):o(v)})})},executeEmptyJoinBGP:function(l,e,r,n,o){return x.executeBGPDatasets(l,e,r,n,o)},executeBGPDatasets:function(l,e,r,n,o){var u={};if(null==l.graph){var d=[];a.eachSeries(e.implicit,function(c,h){null==u[c.oid]?(u[c.oid]=!0,l.graph=c,r.rangeQuery(l,n,function(f){f=x.buildBindingsFromRange(f,l),d.push(f),h()})):h()},function(){var c=x.unionManyBindings(d);o(c)})}else if("var"===l.graph.token){var v=l.graph.value;d=[],a.eachSeries(e.named,function(c,h){null==u[c.oid]?(u[c.oid]=!0,l.graph=c,null!=d?r.rangeQuery(l,n,function(f){if(null!=f){f=x.buildBindingsFromRange(f,l);for(var O=0;O<f.length;O++)f[O][v]=c.oid;d.push(f)}else d=null;h()}):h()):h()},function(){if(null==d)o(null);else{var c=x.unionManyBindings(d);o(c)}})}else r.rangeQuery(l,n,function(c){null!=c?(c=x.buildBindingsFromRange(c,l),o(c)):o(null)})},buildBindingsFromRange:function(l,e){x.variablesInBGP(e);var r=e.value||e,n={};for(h in r)r[h]&&"var"===r[h].token?n[h]=r[h].value:r[h]&&"blank"===r[h].token&&(n[h]="blank:"+r[h].value);var o=[];if(null!=l)for(var u=0;u<l.length;u++){var d={},v=l[u],c=!1;for(var h in n){var f=v[h];if(null!=d[n[h]]&&d[n[h]]!==f){c=!0;break}d[n[h]]=f}c||o.push(d)}return o},areCompatibleBindings:function(l,e){for(var r in l)if(null!=e[r]&&e[r]!=l[r])return!1;return!0},mergeBindings:function(l,e){var r={};for(var n in l)r[n]=l[n];for(var n in e)r[n]=e[n];return r},joinBindings2:function(l,e,r){for(var n,o,u,d,v={},c=[],h=0;h<e.length;h++){n=e[h],d=v;for(var f=0;f<l.length;f++)o=n[l[f]],f==l.length-1?((u=d[o]||[]).push(n),d[o]=u):(u=d[o]||{},d[o]=u,d=u)}for(h=0;h<r.length;h++)for(n=r[h],d=v,f=0;f<l.length;f++)if(null!=d[o=n[l[f]]])if(f==l.length-1)for(var O=0;O<d[o].length;O++)c.push(x.mergeBindings(d[o][O],n));else d=d[o];return c},joinBindings:function(l,e){for(var r=[],n=0;n<l.length;n++)for(var o=l[n],u=0;u<e.length;u++){var d=e[u];x.areCompatibleBindings(o,d)&&r.push(x.mergeBindings(o,d))}return r},augmentMissingBindings:function(l,e){for(var r in e)null==l[r]&&(l[r]=null);return l},leftOuterJoinBindings:function(l,e){for(var r=[],n=0;n<l.length;n++){for(var o=l[n],u=!1,d=0;d<e.length;d++){var v=e[d];x.areCompatibleBindings(o,v)&&(u=!0,r.push(x.mergeBindings(o,v)))}!1===u&&(x.augmentMissingBindings(o,v),r.push(o))}return r},crossProductBindings:function(l,e){for(var r=[],n=0;n<l.length;n++)for(var o=l[n],u=0;u<e.length;u++){var d=e[u];r.push(x.mergeBindings(o,d))}return r},unionBindings:function(l,e){return l.concat(e)},unionManyBindings:function(l){for(var e=[],r=0;r<l.length;r++){var n=l[r];e=x.unionBindings(e,n)}return e}};ne.exports={QueryPlan:x}},{"./utils":140}],136:[function(D,ne,V){var N=D("./network_transport").NetworkTransport,a=D("./rvn3_parser").RVN3Parser,x=D("./jsonld_parser").JSONLDParser,l=D("./utils"),e=function(r){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":a.parser,"text/n3":a.parser,"application/ld+json":x.parser,"application/json":x.parser},typeof RDFXMLParser<"u"&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=r)for(var n in r.parsers)this.parsers[n]=r.parsers[n];if(r&&null!=r.precedences)for(var n in this.precedences=r.precedences,r.parsers)l.include(this.precedences,n)||this.precedences.push(n);this.acceptHeaderValue="";for(var o=0;o<this.precedences.length;o++)this.acceptHeaderValue=0!=o?this.acceptHeaderValue+","+this.precedences[o]:this.acceptHeaderValue+this.precedences[o]};e.prototype.registerParser=function(r,n){this.parsers[r]=n,this.precedences.push(r)},e.prototype.unregisterParser=function(r){delete this.parsers[r];for(var n=[],o=0;o<this.precedences.length;o++)this.precedences[o]!=r&&n.push(this.precedences[o]);this.precedences=n},e.prototype.setAcceptHeaderPrecedence=function(r){this.precedences=r},e.prototype.load=function(r,n,o){var u=this;N.load(r,this.acceptHeaderValue,function(d,v){if(d)o(d);else{var c=v.headers["Content-Type"]||v.headers["content-type"],h=v.data;if(null!=c){for(var f in c=c.split(";")[0],u.parsers)if(-1!=f.indexOf("/")){var O=f.split("/");if("*"===O[1]){if(-1!=c.indexOf(O[0]))return u.tryToParse(u.parsers[f],n,h,{documentURI:r},o)}else{if(-1!=c.indexOf(f))return u.tryToParse(u.parsers[f],n,h,{documentURI:r},o);if(-1!=c.indexOf(O[1]))return u.tryToParse(u.parsers[f],n,h,{documentURI:r},o)}}else if(-1!=c.indexOf(f))return u.tryToParse(u.parsers[f],n,h,{documentURI:r},o);o(new Error("Unknown media type : "+c))}else o(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(r,n,o,u){try{var d=this;D("fs").readFile(o.split("file:/")[1],function(v,c){v?u(v):(c=c.toString("utf8"),d.tryToParse(r,n,c,{documentURI:o},u))})}catch(v){u(v)}},e.prototype.tryToParse=function(r,n,o,u,d){try{"string"==typeof o&&(o=l.normalizeUnicodeLiterals(o)),r.parse(o,n,u,d)}catch(v){console.log(v.message),console.log(v.stack),d(v)}},ne.exports={RDFLoader:e}},{"./jsonld_parser":125,"./network_transport":127,"./rvn3_parser":138,"./utils":140,fs:4}],137:[function(D,ne,V){var N=D("./utils"),a=D("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var x={};for(var l in this)N.include(this.interfaceProperties,l)||"function"==typeof this[l]||"defaultNs"===l||"interfaceProperties"===l||(x[l]=this[l]);return x},RDFModel.UrisMap.prototype.get=function(x){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[x]},RDFModel.UrisMap.prototype.remove=function(x){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[x],null},RDFModel.UrisMap.prototype.set=function(x,l){if(-1!=x.indexOf(" "))throw"Prefix must not contain any whitespaces";this[x]=l},RDFModel.UrisMap.prototype.setDefault=function(x){this.defaultNs=x},RDFModel.UrisMap.prototype.addAll=function(x,l){for(var e in x)N.include(this.interfaceProperties,e)||(null!=this[e]?!0===l&&(this[e]=x[e]):this[e]=x[e]);return this},RDFModel.UrisMap.prototype.resolve=function(x){var l=x.split(":"),e=l[0],r=l[1];return""===e?null==this.defaultNs?null:this.defaultNs+r:null!=this[e]?this[e]+r:null},RDFModel.UrisMap.prototype.shrink=function(x){for(var l in this){var e=this[l];if(0===x.indexOf(e)&&""!==e&&"defaultNs"!=l)return l+":"+x.split(e)[1]}return x},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(x,l){this.prefixes.addAll(x.prefixes,l),this.terms.addAll(x.terms,l)},RDFModel.Profile.prototype.resolve=function(x){return-1!=x.indexOf(":")?this.prefixes.resolve(x):null!=this.terms[x]?this.terms.resolve(x):null},RDFModel.Profile.prototype.setDefaultPrefix=function(x){this.prefixes.setDefault(x)},RDFModel.Profile.prototype.setDefaultVocabulary=function(x){this.terms.setDefault(x)},RDFModel.Profile.prototype.setPrefix=function(x,l){this.prefixes.set(x,l)},RDFModel.Profile.prototype.setTerm=function(x,l){this.terms.set(x,l)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var x=this;for(var l in this.filters={s:function(e){return function(r){return r.subject.equals(e)}},p:function(e){return function(r){return r.predicate.equals(e)}},o:function(e){return function(r){return r.object.equals(e)}},sp:function(e,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(r)}},so:function(e,r){return function(n){return n.subject.equals(e)&&n.object.equals(r)}},po:function(e,r){return function(n){return n.predicate.equals(e)&&n.object.equals(r)}},spo:function(e,r,n){return function(o){return o.subject.equals(e)&&o.predicate.equals(r)&&o.object.equals(n)}},describes:function(e){return function(r){return r.subject.equals(e)||r.object.equals(e)}},type:function(e){var r=x.resolve("rdf:type");return function(n){return n.predicate.equals(r)&&n.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(l,RDFModel.defaultContext[l])},RDFModel.RDFEnvironment.prototype=N.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var x=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,x},RDFModel.RDFEnvironment.prototype.createNamedNode=function(x){var l=this.resolve(x);return null!=l?new RDFModel.NamedNode(l):new RDFModel.NamedNode(x)},RDFModel.RDFEnvironment.prototype.createLiteral=function(x,l,e){return null!=e?new RDFModel.Literal(x,l,e.toString()):new RDFModel.Literal(x,l,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(x,l,e){return new RDFModel.Triple(x,l,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(x){var l=new RDFModel.Graph;if(null!=x)for(var e=0;e<x.length;e++)l.add(x[e]);return l},RDFModel.RDFEnvironment.prototype.createAction=function(x,l){return function(e){return x(e)?l(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(x){if(!0===x)return new RDFModel.RDFEnvironment.Profile;var l=new RDFModel.RDFEnvironment.Profile;return l.importProfile(this),l},RDFModel.RDFEnvironment.prototype.createTermMap=function(x){if(!0===x)return new RDFModel.UrisMap;var l=this.terms.values(),e=new RDFModel.UrisMap;for(var r in l)e[r]=l[r];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(x){if(!0===x)return new RDFModel.UrisMap;var l=this.prefixes.values(),e=new RDFModel.UrisMap;for(var r in l)e[r]=l[r];return e},RDFModel.RDFNode=function(x){this.interfaceName=x,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(x){if(null==x.interfaceName)return this.valueOf()==x;for(var l in this.attributes){var e=this.attributes[l];if(this[e]!=x[e])return!1}return!0},RDFModel.BlankNode=function(x){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+x,this.bnodeId=x},RDFModel.BlankNode.prototype=N.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(x,l,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=x,null!=l?this.language=l:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=N.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var x='"'+this.nominalValue+'"';return null!=this.language?x=x+"@"+this.language:(null!=this.datatype||this.type)&&(x=x+"^^<"+(this.datatype||this.type)+">"),x},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return a.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(x){RDFModel.RDFNode.call(this,"NamedNode"),null!=x.value?this.nominalValue=x.value:this.nominalValue=x},RDFModel.NamedNode.prototype=N.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(x,l,e){this.subject=x,this.predicate=l,this.object=e},RDFModel.Triple.prototype.equals=function(x){return this.subject.equals(x.subject)&&this.predicate.equals(x.predicate)&&this.object.equals(x.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(x){for(var l=0;l<this.actions.length;l++)x=this.actions[l](x);var e=x.subject.toString()+x.predicate.toString()+x.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(x)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(x,l){if(this.actions.push(x),1==l)for(var e=0;e<this.triples.length;e++)this.triples[e]=x(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(x){for(var l=x.toArray(),e=0;e<l.length;e++)this.add(l[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(x){for(var l=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(x)){var r=x.subject.toString()+x.predicate.toString()+x.object.toString();delete this.duplicates[r],l=e;break}return null!=l&&this.triples.splice(l,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(x){for(var l=0;l<this.triples.length;l++)if(!0===x(this.triples[l],this))return!0;return!1},RDFModel.Graph.prototype.every=function(x){for(var l=0;l<this.triples.length;l++)if(!1===x(this.triples[l],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(x){for(var l=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===x(this.triples[e],this)&&l.add(this.triples[e]);return l},RDFModel.Graph.prototype.forEach=function(x){for(var l=0;l<this.triples.length;l++)x(this.triples[l],this)},RDFModel.Graph.prototype.merge=function(x){for(var l=new RDFModel.Graph,e=0;e<this.triples.length;e++)l.add(this.triples[e]);return l},RDFModel.Graph.prototype.match=function(x,l,e,r){for(var n=new RDFModel.Graph,o=0,u=0;u<this.triples.length;u++){var d=this.triples[u];if((null==x||d.subject.equals(x))&&(null==l||d.predicate.equals(l))&&(null==e||d.object.equals(e))){if(!(null==r||o<r))return n;o++,n.add(d)}}return n},RDFModel.Graph.prototype.removeMatches=function(x,l,e){for(var r=[],n=0;n<this.triples.length;n++){var o=this.triples[n];(null==x||o.subject.equals(x))&&(null==l||o.predicate.equals(l))&&(null==e||o.object.equals(e))&&r.push(o)}for(n=0;n<r.length;n++)this.remove(r[n]);return this},RDFModel.Graph.prototype.toNT=function(){var x="";return this.forEach(function(l){x+=l.toString()}),x},RDFModel.buildRDFResource=function(x,l,e,r){if("blank"===x.token)return RDFModel.buildBlankNode(x,l,e,r);if("literal"===x.token)return RDFModel.buildLiteral(x,l,e,r);if("uri"===x.token)return RDFModel.buildNamedNode(x,l,e,r);if("var"===x.token){var n=l[x.value];return null!=n?RDFModel.buildRDFResource(n,l,e,r):null}return null},RDFModel.buildBlankNode=function(x,l,e,r){return null!=x.valuetmp&&(x.value=x.valuetmp),0===x.value.indexOf("_:")&&(x.value=x.value.split("_:")[1]),new RDFModel.BlankNode(x.value)},RDFModel.buildLiteral=function(x,l,e,r){return new RDFModel.Literal(x.value,x.lang,x.type)},RDFModel.buildNamedNode=function(x,l,e,r){if(null!=x.value)return new RDFModel.NamedNode(x);if(null!=x.prefix){var n=e.resolveNsInEnvironment(x.prefix,r);return x.value=n+x.suffix,new RDFModel.NamedNode(x)}return new RDFModel.NamedNode(x)},RDFModel.rdf=new RDFModel.RDFEnvironment,ne.exports=RDFModel},{"./query_filters":134,"./utils":140}],138:[function(D,ne,V){var N=D("n3").Parser,a={};function x(l){switch(l[0]){case'"':if(l.indexOf("^^")>0){var e=l.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:l};case"_":return{blank:l.replace("b","")};default:return{token:"uri",value:l,prefix:null,suffix:null}}}a.parser={async:!0,parse:function(l,e,r,n){n||(n=r,r=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var o=[];new N(r).parse(l,function(u,d){u?n(u):d?o.push({subject:x(d.subject),predicate:x(d.predicate),object:x(d.object),graph:e}):n(!1,o)})},resetBlankNodeIds:function(){N._resetBlankNodeIds()}},ne.exports={RVN3Parser:a}},{n3:51}],139:[function(D,ne,V){var N=D("./query_engine").QueryEngine,a=D("./quad_backend").QuadBackend,x=D("./persistent_quad_backend").PersistentQuadBackend,l=D("./lexicon").Lexicon,e=D("./persistent_lexicon").PersistentLexicon,r=D("./rdf_model"),n=D("./utils");Store=function(o,u){var d=null,v=null;if(0==arguments.length)v={};else if(1==arguments.length)v={},d=o;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";v=o,d=u}null==v.treeOrder&&(v.treeOrder=15);var c=l,h=a;!0===v.persistent&&(c=e,h=x),this.functionMap={};var f=this;this.customFns={},new c(function(O){var T=function(){new h(v,function(P){var Q=function(){v.backend=P,v.lexicon=O,f.engine=new N(v),d(null,f)};v.overwrite?P.clear(Q):Q()})};!0===v.overwrite?O.clear(T):T()},v.name)},Store.prototype.rdf=r.rdf,Store.prototype.rdf.api=r,Store.prototype.registerCustomFunction=function(o,u){this.customFns[o]=u,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var o;if(1===arguments.length){o=arguments[0];var u=function(){}}else 2===arguments.length&&(o=arguments[0],u=arguments[1]);this.engine.execute(o,u)}},Store.prototype.executeWithEnvironment=function(){var o,u,d;if(3===arguments.length){o=arguments[0];var v=function(){};u=arguments[1],d=arguments[2]}else 4===arguments.length&&(o=arguments[0],v=arguments[3],u=arguments[1],d=arguments[2]);u=n.map(u,function(c){return{token:"uri",value:c}}),d=n.map(d,function(c){return{token:"uri",value:c}}),this.engine.execute(o,v,u,d)},Store.prototype.graph=function(){var o=null,u=null;if(1===arguments.length)u=arguments[0]||function(){},o=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";u=arguments[1]||function(){},o=arguments[0]}null!=this.rdf.resolve(o)&&(o=this.rdf.resolve(o)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+o+"> { ?s ?p ?o } }",u)},Store.prototype.node=function(){var o=null,u=null,d=null;if(2===arguments.length)d=arguments[0],u=arguments[1]||function(){},o=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";d=arguments[0],o=arguments[1],u=arguments[2]||function(){}}null!=this.rdf.resolve(o)&&(o=this.rdf.resolve(o)),null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d)),this.engine.execute("CONSTRUCT { <"+d+"> ?p ?o } WHERE { GRAPH <"+o+"> { <"+d+"> ?p ?o } }",u)},Store.prototype.startObservingNode=function(){var o,u,d;2===arguments.length?(o=arguments[0],d=arguments[1],this.engine.callbacksBackend.observeNode(o,d,function(){})):3===arguments.length&&(o=arguments[0],u=arguments[1],d=arguments[2],this.engine.callbacksBackend.observeNode(o,u,d,function(){}))},Store.prototype.stopObservingNode=function(o){this.engine.callbacksBackend.stopObservingNode(o)},Store.prototype.startObservingQuery=function(){var o=arguments[0],u=arguments[1],d=arguments[2];null!=d?this.engine.callbacksBackend.observeQuery(o,u,d):this.engine.callbacksBackend.observeQuery(o,u,function(){})},Store.prototype.stopObservingQuery=function(o){this.engine.callbacksBackend.stopObservingQuery(o)},Store.prototype.subscribe=function(o,u,d,v,c){var h=this,f=function(O,T){var P=[],Q={blanks:{},outCache:{}},I=[];n.each(T,function(k){var G=r.buildRDFResource(k.subject,I,h.engine,Q),J=r.buildRDFResource(k.predicate,I,h.engine,Q),X=r.buildRDFResource(k.object,I,h.engine,Q);null!=G&&null!=J&&null!=X&&(k=new r.Triple(G,J,X),P.push(k))}),c(O,P)};this.functionMap[c]=f,this.engine.callbacksBackend.subscribe(o,u,d,v,f,function(){})},Store.prototype.unsubscribe=function(o){var u=this.functionMap[o];this.engine.callbacksBackend.unsubscribe(u),delete this.functionMap[o]},Store.prototype.setPrefix=function(o,u){this.rdf.setPrefix(o,u)},Store.prototype.setDefaultPrefix=function(o){this.rdf.setDefaultPrefix(o)},Store.prototype.insert=function(){var o,u,d;if(1===arguments.length)u=arguments[0],d=function(){};else if(2===arguments.length)u=arguments[0],d=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";u=arguments[0],o=this.rdf.createNamedNode(arguments[1]),d=arguments[2]||function(){}}var v="",c=this;u.forEach(function(h){v=v+c._nodeToQuery(h.subject)+c._nodeToQuery(h.predicate)+c._nodeToQuery(h.object)+"."}),v=null!=o?"INSERT DATA { GRAPH "+this._nodeToQuery(o)+" { "+v+" } }":"INSERT DATA { "+v+" }",this.engine.execute(v,d)},Store.prototype._nodeToQuery=function(o){if("NamedNode"===o.interfaceName){var u=this.rdf.resolve(o.valueOf());return null!=u?"<"+u+">":"<"+o.valueOf()+">"}return o.toString()},Store.prototype.delete=function(){var o,u,d;if(1===arguments.length)u=arguments[0],d=function(){};else if(2===arguments.length)u=arguments[0],d=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";u=arguments[0],o=this.rdf.createNamedNode(arguments[1]),d=arguments[2]||function(){}}var v="",c=this;u.forEach(function(h){v=v+c._nodeToQuery(h.subject)+c._nodeToQuery(h.predicate)+c._nodeToQuery(h.object)+"."}),v=null!=o?"DELETE DATA { GRAPH "+this._nodeToQuery(o)+" { "+v+" } }":"DELETE DATA { "+v+" }",this.engine.execute(v,d)},Store.prototype.clear=function(){var o;if(0===arguments.length){o=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var u=function(){}}else if(1===arguments.length)o=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),u=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";o=this.rdf.createNamedNode(arguments[0]),u=arguments[1]||function(){}}var d="CLEAR GRAPH "+this._nodeToQuery(o);this.engine.execute(d,u)},Store.prototype.setBatchLoadEvents=function(o){this.engine.eventsOnBatchLoad=o},Store.prototype.registerDefaultNamespace=function(o,u){this.rdf.prefixes.set(o,u),this.engine.registerDefaultNamespace(o,u)},Store.prototype.registerDefaultProfileNamespaces=function(){var o=this.rdf.prefixes.values();for(var u in o)this.registerDefaultNamespace(u,o[u])},Store.prototype.load=function(){var o,u,d,v,c={};if(3===arguments.length)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),o=arguments[0],u=arguments[1],v=arguments[2]||function(){};else if(4===arguments.length)o=arguments[0],u=arguments[1],"string"==typeof(c=arguments[2])?(d=this.rdf.createNamedNode(c),c={}):(d=this.rdf.createNamedNode(c.graph||this.engine.lexicon.defaultGraphUri),delete c.graph),v=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===o){var h="LOAD <"+(u=this.rdf.createNamedNode(u)).valueOf()+"> INTO GRAPH <"+d.valueOf()+">";this.engine.execute(h,v)}else{var f=this,O=this.engine.rdfLoader.parsers[o];if(!O)return v(new Error("Cannot find parser for the provided media type:"+o));var P=[O,{token:"uri",value:d.valueOf()},u,c,function(Q,I){Q?v(Q,I):f.engine.batchLoad(I,function(k){null!=k?v(null,k):v(new Error("Error batch-loading triples."))})}];u&&"string"==typeof u&&0===u.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,P):this.engine.rdfLoader.tryToParse.apply(null,P)}},Store.prototype.registerParser=function(o,u){this.engine.rdfLoader.registerParser(o,u)},Store.prototype.registeredGraphs=function(o){this.engine.lexicon.registeredGraphs(!0,function(u){var d=n.map(u,function(v){return new r.NamedNode(v)});o(null,d)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(o){NetworkTransport=o},Store.prototype.close=function(o){null==o&&(o=function(){}),this.engine.close?this.engine.close(o):o()},Store.VERSION="0.9.18-alpha.15",Store.yieldFrequency=function(o){n.yieldFrequency(o)},ne.exports.Store=Store,ne.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},ne.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":126,"./persistent_lexicon":129,"./persistent_quad_backend":130,"./quad_backend":131,"./query_engine":133,"./rdf_model":137,"./utils":140}],140:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:typeof window<"u"&&window.setImmediate?window.setImmediate:function(D){setTimeout(D,0)},spin=0,yieldFrequency=100,nextTick=function(D){++spin<yieldFrequency?D():(spin=0,slowNextTick(D))},hashTerm=function(D){try{if(null==D)return"";if("uri"===D.token)return"u"+D.value;if("blank"===D.token)return"b"+D.value;if("literal"===D.token){var ne="l"+D.value;return ne+=D.type||"",ne+=D.lang||""}}catch{if("object"==typeof D){var V="";for(p in D)V=V+p+D[p];return V}return D}},lexicalFormBaseUri=function(D,ne){var V=null;if(ne=ne||{},null==D.value){var N=D.prefix,a=D.suffix,x=ne.namespaces[N];V=null!=x?x+a:N+":"+a}else V=D.value;return null===V?null:(-1==V.indexOf(":")&&(V=(ne.base||"")+V),V)};parseISO8601=function(D){return Date.parse(D)},Date.prototype.toISOString||function(){function D(ne){return ne<10?"0"+ne:ne}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+D(this.getUTCMonth()+1)+"-"+D(this.getUTCDate())+"T"+D(this.getUTCHours())+":"+D(this.getUTCMinutes())+":"+D(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(D){return D.toISOString()},compareDateComponents=function(D,ne){var V=parseISO8601(D),N=parseISO8601(ne);return V==N?0:V<N?-1:1},lexicalFormLiteral=function(D,ne){var V=D.value,N=D.lang,a=D.type,x=null;if(null!=V&&null!=a&&"string"!=typeof a){var l=a.value;if(null==l){var e=a.prefix,r=a.suffix,n=ne.namespaces[e];D.type=n+r,l=n+r}x=-1!=l.indexOf("hexBinary")?'"'+D.value.toLowerCase()+'"^^<'+l+">":'"'+D.value+'"^^<'+l+">"}else x=null==N&&null==a?'"'+V+'"':null==a?'"'+V+'"@'+N:-1!=a.indexOf("hexBinary")?'"'+D.value.toLowerCase()+'"^^<'+a+">":'"'+D.value+'"^^<'+a+">";return x},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(D){if(typeof window>"u"&&void 0!==process&&!1===process.browser){var ne=_dereq_("sqlite3"),V=_dereq_("indexeddb-js"),N=new ne.Database(":memory:"),a=V.makeScope("sqlite3",N);D.indexedDB=a.indexedDB,D.IDBKeyRange=a.IDBKeyRange}else{var x;(x=typeof window>"u"?self:window).indexedDB=x.indexedDB||x.mozIndexedDB||x.webkitIndexedDB||x.msIndexedDB,x.IDBKeyRange=x.IDBKeyRange||x.webkitIDBKeyRange||x.msIDBKeyRange,x.indexedDB?(D.indexedDB=x.indexedDB,D.IDBKeyRange=x.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function D(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return D()+D()+"-"+D()+"-"+D()+"-"+D()+"-"+D()+D()+D()},hashTerm=function(D){try{if(null==D)return"";if("uri"===D.token)return"u"+D.value;if("blank"===D.token)return"b"+D.value;if("literal"===D.token){var ne="l"+D.value;return ne+=D.type||"",ne+=D.lang||""}}catch{if("object"==typeof D){var V="";for(p in D)V=V+p+D[p];return V}return D}};var reject=function(D,ne){for(var V=[],N=0;N<D.length;N++)ne(D[N])&&V.push(D[N]);return V},include=function(D,ne){for(var V=0;V<D.length;V++)if(D[V]===ne)return!0;return!1},each=function(D,ne){if(D.forEach)D.forEach(ne);else for(var V=0;V<D.length;V++)ne(D[V])},map=function(D,ne){if(D.map)return D.map(ne);for(var V=[],N=0;N<D.length;N++)V[N]=ne(D[N]);return V},keys=function(D){var ne=[];for(var V in D)ne.push(V);return ne},values=function(D){var ne=[];for(var V in D)ne.push(D[V]);return ne},size=function(D){if(D.length)return D.length;var ne=0;for(var V in D)ne++;return ne};clone=function(D){return JSON.parse(JSON.stringify(D))};var isObject=function(D){var ne=typeof D;return"function"==ne||D&&"object"==ne||!1},create=function(){function D(){}return function(ne){if(isObject(ne)){D.prototype=ne;var V=new D;D.prototype=null}return V||void 0}}(),whilst=function(D,ne,V){D()?ne(function(N){if(N)return V(N);whilst(D,ne,V)}):V()},eachSeries=function(D,ne,V){if(V=V||function(){},!D.length)return V();var N=0,a=function(){ne(D[N],function(x){x?(V(x),V=function(){}):(N+=1)>=D.length?V():nextTick(a)})};a()},eachParallel=function(D,ne,V){if(V=V||function(){},!D.length)return V();for(var N=!1,a=0,x=function(e){if(e)throw N=!0,new Error(e);N||++a===D.length&&V()},l=0;l<D.length;l++)!function(e,r,n,o){nextTick(function(){try{o(e[r],function(){n()})}catch(u){n(u)}})}(D,l,x,ne)},reduce=function(D,ne,V,N){eachSeries(D,function(a,x){V(ne,a,function(l,e){ne=e,x(l)})},function(a){N(a,ne)})},seq=function(){var D=arguments;return function(){var ne=this,V=Array.prototype.slice.call(arguments),N=V.pop();reduce(D,V,function(a,x,l){x.apply(ne,a.concat([function(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1);l(e,r)}]))},function(a,x){N.apply(ne,[a].concat(x))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&typeof window>"u"};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(D){yieldFrequency=D}}}).call(this)}).call(this,require("_process"))},{_process:59}]},{},[139])(139)});