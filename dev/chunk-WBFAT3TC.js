import{Ca as g,L as S,a as G,b as ce,f as Ue,j as T,m as Ze,q as ge,t as qe,ta as Qe,v as b,w as y}from"./chunk-LY2JR32L.js";var H=class H{};H.OPUS={route:"/op",short:"op.",full:"Opus"},H.MNR={route:"/m",short:"M",full:"Moldenhauer-Nr."},H.MNR_PLUS={route:"/m_plus",short:"M*",full:"Moldenhauer-Nr. (AWG-ID)"};var ue=H,V=class V{};V.WORK_EDITION={route:"work-edition",short:"WE",full:"Werkedition"},V.TEXT_EDITION={route:"text-edition",short:"TE",full:"Textedition"},V.SKETCH_EDITION={route:"sketch-edition",short:"SE",full:"Skizzenedition"};var et=V,p=class p{};p.EDITION={route:"/edition",short:"AWG",full:"Anton Webern Gesamtausgabe"},p.PREFACE={route:"preface",short:"Vorwort",full:"Vorwort / Preface"},p.ROWTABLES={route:"row-tables",short:"Reihentabellen",full:"Reihentabellen"},p.COMPLEX={route:"/complex",short:"Editionskomplex",full:"Editionskomplex"},p.SERIES={route:"series",short:"Serien",full:"Editions\xFCbersicht"},p.SERIES_1={route:"1",short:"I",full:"Serie I (Werke mit Opuszahlen)"},p.SERIES_2={route:"2",short:"II",full:"Serie II (Nachgelassene Kompositionen und Fragmente)"},p.SERIES_3={route:"3",short:"III",full:"Serie III (Bearbeitungen von Werken anderer Komponisten)"},p.SECTION={route:"section",short:"Abteilung",full:"Abteilungs\xFCbersicht"},p.SECTION_1={route:"1",short:"1",full:"Abteilung 1 (Orchestermusik)"},p.SECTION_2={route:"2",short:"2",full:"Abteilung 2 (Kammer- und Klaviermusik)"},p.SECTION_2A={route:"2a",short:"2a",full:"Abteilung 2a (Kammer- und Klaviermusik: Klaviermusik)"},p.SECTION_2B={route:"2b",short:"2b",full:"Abteilung 2b (Kammer- und Klaviermusik: Kammermusik)"},p.SECTION_3={route:"3",short:"3",full:"Abteilung 3 (Chormusik)"},p.SECTION_4={route:"4",short:"4",full:"Abteilung 4 (Vokalmusik mit Ensemblebegleitung)"},p.SECTION_5={route:"5",short:"5",full:"Abteilung 5 (Klavierlieder)"},p.SERIES_3_SECTION_5={route:"5",short:"5",full:"Abteilung 5 (Klavierausz\xFCge)"},p.EDITION_GRAPH={route:"graph",short:"Graph",full:"Graph"},p.EDITION_INTRO={route:"intro",short:"Einleitung",full:"Einleitung\xA0/\xA0Introduction"},p.EDITION_SHEETS={route:"sheets",short:"Edierte Notentexte",full:"Edierte Notentexte"},p.EDITION_REPORT={route:"report",short:"Kritischer Bericht",full:"Kritischer Bericht"};var f=p;var $=class{};var xe=class{};var J=class{constructor(e,i,n){if(!e?.catalogueType||!e?.catalogueNumber)return;let r="/",s="&nbsp;";this.titleStatement=ce(G({},e),{catalogueType:this._mapCatalogueType(e.catalogueType)}),this.respStatement=i??new xe,this.pubStatement={series:this._mapPubStatement("SERIES_",n?.series),section:this._mapPubStatement("SECTION_",n?.section)},this.complexId=new $,this.complexId.route=this.titleStatement.catalogueType.route,this.complexId.route+=this.titleStatement.catalogueNumber.replace(/\//g,"_"),this.complexId.short=`${this.titleStatement.catalogueType.short}${s}${this.titleStatement.catalogueNumber}`,this.complexId.full=`${this.titleStatement.title} ${this.complexId.short}`;let o=`${f.EDITION.route}${f.COMPLEX.route}`;this.baseRoute=`${o}${this.complexId.route}${r}`}_mapCatalogueType(e){return ue[e.toUpperCase()]}_mapPubStatement(e,i){return f[`${e}${i?.toUpperCase()}`]}};var d={BASE_ROUTE:"assets/data/edition",FILES:{complexesFile:"edition-complexes.json",folioConvoluteFile:"folio-convolute.json",graphFile:"graph.json",introFile:"intro.json",prefaceFile:"preface.json",rowTablesFile:"row-tables.json",sourceListFile:"source-list.json",sourceDescriptionListFile:"source-description.json",sourceEvaluationListFile:"source-evaluation.json",svgSheetsFile:"svg-sheets.json",textcriticsFile:"textcritics.json"}};var Kt={FIRM_JE_NO_2_LIN_12:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_2_LIN_12_B:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12_b.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_2_LIN_12_C:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12_c.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_3_LIN_14:{route:"assets/img/edition/firm-signs/je/no3_lin14/firm_je_no3_lin14.png",short:"[JE] | No. 3 | 14 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 3 | 14 linig."},FIRM_JE_NO_5_LIN_18_B:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_b.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_5_LIN_18_C:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_c.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_5_LIN_18_D:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_d.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_6_LIN_20:{route:"assets/img/edition/firm-signs/je/no6_lin20/firm_je_no6_lin20.png",short:"[JE] | No. 6 | 20 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 6 | 20 linig."},FIRM_JE_NO_7_LIN_22:{route:"assets/img/edition/firm-signs/je/no7_lin22/firm_je_no7_lin22.png",short:"[JE] | No. 7 | 22 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 7 | 22 linig."},FIRM_JE_NO_9_LIN_28:{route:"assets/img/edition/firm-signs/je/no9_lin28/firm_je_no9_lin28.png",short:"[JE] | No. 9 | 28 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 9 | 28 linig."},FIRM_JE_NO_15_LIN_16:{route:"assets/img/edition/firm-signs/je/no15_lin16/firm_je_no15_lin16.png",short:"[JE] | No. 15 | 16 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 15 | 16 linig."}};var Wt={DOUBLE_FLAT:{alt:"[bb]",hex:"\u{1D12B}"},DOUBLE_SHARP:{alt:"[x]",hex:"\u{1D12A}"},FLAT:{alt:"[b]",hex:"\u266D"},NATURAL:{alt:"[a]",hex:"\u266E"},SHARP:{alt:"[#]",hex:"\u266F"},FORTE:{alt:"[f]",hex:"\u{1D191}"},FORTISSIMO:{alt:"[ff]",hex:"\u{1D191}\u{1D191}"},FORTISSIMO3:{alt:"[fff]",hex:"\u{1D191}\u{1D191}\u{1D191}"},NOTE_EIGHTH:{alt:"[Achtelnote]",hex:"\u{1D160}"},NOTE_HALF:{alt:"[Halbe Note]",hex:"\u{1D15E}"},NOTE_QUARTER:{alt:"[Viertelnote]",hex:"\u{1D15F}"},NOTE_SIXTEENTH:{alt:"[Sechzehntelnote]",hex:"\u{1D161}"},NOTE_WHOLE:{alt:"[Ganze Note]",hex:"\u{1D15D}"},MEZZOFORTE:{alt:"[mf]",hex:"\u{1D190}\u{1D191}"},MEZZOPIANO:{alt:"[mp]",hex:"\u{1D190}\u{1D18F}"},PEDAL:{alt:"[ped]",hex:"\u{1D1AE}"},PIANISSIMO:{alt:"[pp]",hex:"\u{1D18F}\u{1D18F}"},PIANISSIMO3:{alt:"[ppp]",hex:"\u{1D18F}\u{1D18F}\u{1D18F}"},PIANO:{alt:"[p]",hex:"\u{1D18F}"},SUBITO_FORTE:{alt:"[sf]",hex:"\u{1D18D}\u{1D191}"},SUBITO_PIANO:{alt:"[sp]",hex:"\u{1D18D}\u{1D18F}"}};var Ut={GRAPH_IMAGE_OP25:{route:"assets/img/edition/series/1/section/5/op25/graph_op25_1.png",short:"Statischer Graph op. 25/I",full:"Statischer Graph der Skizzen von Opus 25/I."}};var D,Ee=(D=class{constructor(e){this.http=e,this._assetPath=""}getEditionGraphData(e){return this._assetPath=this._setAssetPathForEditionComplex(e),this._getGraphData().pipe(b(new j),y(1))}getEditionComplexIntroData(e){return this._assetPath=this._setAssetPathForEditionComplex(e),this._getIntroData().pipe(b(new L),y(1))}getEditionSectionIntroData(e,i){return this._assetPath=this._setAssetPathForSectionIntro(e,i),this._getIntroData().pipe(b(new L),y(1))}getEditionPrefaceData(){return this._assetPath=d.BASE_ROUTE,this._getPrefaceData().pipe(b(new K),y(1))}getEditionReportData(e){this._assetPath=this._setAssetPathForEditionComplex(e);let i=this._getSourceListData(),n=this._getSourceDescriptionListData(),r=this._getSourceEvaluationListData(),s=this._getTextcriticsListData();return ge([i,n,r,s]).pipe(b([new Z,new W,new U,new P]),y(1))}getEditionRowTablesData(){return this._assetPath=d.BASE_ROUTE,this._getRowTablesData().pipe(b(new Y),y(1))}getEditionSheetsData(e){this._assetPath=this._setAssetPathForEditionComplex(e);let i=this._getFolioConvoluteData(),n=this._getSvgSheetsData(),r=this._getTextcriticsListData();return ge([i,n,r]).pipe(b([new X,new z,new P]),y(1))}_generateAssetPath(e,i,n){let r="/",s=r+f.SERIES.route+r+e+r+f.SECTION.route+r+i;return n&&(s+=n),d.BASE_ROUTE+s}_setAssetPathForEditionComplex(e){return this._generateAssetPath(e.pubStatement.series.route,e.pubStatement.section.route,e.complexId.route)}_setAssetPathForSectionIntro(e,i){return this._generateAssetPath(e,i)}_getFolioConvoluteData(){let e=d.FILES.folioConvoluteFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getGraphData(){let e=d.FILES.graphFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getIntroData(){let e=d.FILES.introFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getPrefaceData(){let e=d.FILES.prefaceFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getRowTablesData(){let e=d.FILES.rowTablesFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSourceListData(){let e=d.FILES.sourceListFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSourceDescriptionListData(){let e=d.FILES.sourceDescriptionListFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSourceEvaluationListData(){let e=d.FILES.sourceEvaluationListFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSvgSheetsData(){let e=d.FILES.svgSheetsFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getTextcriticsListData(){let e=d.FILES.textcriticsFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getJsonData(e){return this.http.get(e).pipe(qe(this._handleError("_getJsonData",[])))}_handleError(e,i){return n=>(this._logError(`${e} failed: ${n.message}`),Ze(i))}_logError(e){console.error(e)}},D.ctorParameters=()=>[{type:Qe}],D);Ee=g([S({providedIn:"root"})],Ee);var tt={editionOutline:[{series:"1",sections:[{section:"1",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"2",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"3",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"4",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"5",disabled:!1,content:{intro:{disabled:!1,preview:"Die in Serie I Abteilung 5 versammelten Klavierlieder beinhalten die erkennbaren Textfassungen der zu Lebzeiten Anton Weberns mit Opuszahlen versehenen und gedruckten oder zum Druck vorgesehenen Klavierlieder (op.\xA03, 4, 12, 23 und 25) sowie verschiedene dem Entstehungsprozess einiger dieser Editionskomplexe zuzuordnende Einzellieder (George-Lieder M\xA0143\u2013146). Weitere zu Lebzeiten Weberns nicht publizierte Lied-Komplexe, auch wenn sie mit sp\xE4ter obsolet gewordenen Opuszahlen versehen wurden (z.\xA0B. Dehmel-Lieder M\xA083, 119, 130\u2013131), werden in Serie II Abteilung 5 ediert."},complexTypes:{opus:[{complex:"OP3",disabled:!1},{complex:"OP4",disabled:!1},{complex:"OP12",disabled:!1},{complex:"OP23",disabled:!1},{complex:"OP25",disabled:!1}],mnr:[{complex:"M133",disabled:!0},{complex:"M134",disabled:!0},{complex:"M135",disabled:!0},{complex:"M136",disabled:!0},{complex:"M137",disabled:!0},{complex:"M138",disabled:!0},{complex:"M139",disabled:!0},{complex:"M140",disabled:!0},{complex:"M141",disabled:!0},{complex:"M142",disabled:!0},{complex:"M143",disabled:!1},{complex:"M144",disabled:!1},{complex:"M145",disabled:!1},{complex:"M146",disabled:!1},{complex:"M213",disabled:!0},{complex:"M212",disabled:!0},{complex:"M216",disabled:!0},{complex:"M217",disabled:!0}]}}}]},{series:"2",sections:[{section:"1",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"2A",disabled:!1,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[{complex:"M22",disabled:!1},{complex:"M30",disabled:!1},{complex:"M31",disabled:!1},{complex:"M34",disabled:!1},{complex:"M35_42",disabled:!1},{complex:"M36",disabled:!1},{complex:"M37",disabled:!1},{complex:"M38",disabled:!1}]}}},{section:"2B",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"3",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"4",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"5",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}}]},{series:"3",sections:[{section:"1",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"2",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"3",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"4",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}},{section:"5",disabled:!0,content:{intro:{disabled:!0},complexTypes:{opus:[],mnr:[]}}}]}]};var I,M,we=(M=class{static initializeEditionOutline(){let e=I._fetchEditionOutlineData();I.setEditionOutline(e.outline)}static getEditionOutline(){return I._editionOutline}static getEditionSeriesById(e){return I.getEditionOutline().find(i=>i.series.route===e)}static getEditionSectionById(e,i){return I.getEditionSeriesById(e).sections.find(r=>r.section.route===i)}static setEditionOutline(e){I._editionOutline=e}static _fetchEditionOutlineData(){let e=tt;return new q(e.editionOutline)}},I=M,M._editionOutline=[],M);we=I=g([S({providedIn:"root"})],we);var be=class{findTextcritics(e,i){return!e||!i?new F:e.find(r=>r.id===i.id)||new F}getCurrentEditionType(e,i){let r=e?.content?.[0]?.partial,s=r?e.id+r:e.id;return Object.keys(i).find(a=>this._findSvgSheetIndexById(i[a],s)>=0)}getNextSheetId(e,i,n){let r=i?.content?.[0]?.partial,s=i.id+(r||""),o=this._findSvgSheetIndexById(n,i.id);return r?this._findNextSheetIdForPartialSheet(e,n,o,s,r):this._findNextSheetIdForNonPartialSheet(e,n,o,s)}getTextcriticalCommentsForOverlays(e,i){return!e||!i?[]:e.map(n=>ce(G({},n),{blockComments:n.blockComments.filter(s=>i.some(o=>s.svgGroupId===o.id))})).filter(n=>n.blockComments.length>0)}selectConvolute(e,i,n){if(!e||!i||!n)return;let s=this.getCurrentEditionType(n,i)==="sketchEditions"?n.content[0].convolute:"";return this._findConvoluteById(e,s)}selectSvgSheetById(e,i){if(!e||!i)return new O;let n={workEditions:this._findSvgSheetIndexById(e.workEditions,i),textEditions:this._findSvgSheetIndexById(e.textEditions,i),sketchEditions:this._findSvgSheetIndexById(e.sketchEditions,i)};for(let[r,s]of Object.entries(n)){if(s<0)continue;return this._getSheetWithPartialContentById(e[r],s,i)}return new O}_findConvoluteById(e,i){return e.find(r=>r.convoluteId===i)}_findNextSheetIdForPartialSheet(e,i,n,r,s){let o=i[n],l=o.content.findIndex(c=>c.partial===s)+e;return l>=0&&l<o.content?.length?o.id+o.content[l].partial:this._findNextSheetIdForNonPartialSheet(e,i,n,r)}_findNextSheetIdForNonPartialSheet(e,i,n,r){let s=n+e;if(s>=0&&s<i.length){let o=i[s],a=e>0?0:o.content.length-1;return o.id+(o.content[a]?.partial||"")}else return r}_findSvgSheetIndexById(e,i){return e.findIndex(n=>{let r=n.id;if(n.content.length>1){let s=this._findSvgSheetPartialIndexById(n,i);s>=0&&(r+=n.content[s].partial)}return r===i})}_findSvgSheetPartialIndexById(e,i){return e.content.findIndex(n=>e.id+n.partial===i)}_getSheetWithPartialContentById(e,i,n){let r=G({},e[i]),s=this._findSvgSheetPartialIndexById(r,n);return s>=0&&(r.content=[r.content[s]]),r}};be=g([S({providedIn:"root"})],be);var ye=class{constructor(){this._bufferSize=1,this._isIntroViewSubject=new T(this._bufferSize),this._isIntroViewStream$=this._isIntroViewSubject.asObservable(),this._isPrefaceViewSubject=new T(this._bufferSize),this._isPrefaceViewStream$=this._isPrefaceViewSubject.asObservable(),this._isRowTableViewSubject=new T(this._bufferSize),this._isRowTableViewStream$=this._isRowTableViewSubject.asObservable(),this._selectedEditionComplexSubject=new T(this._bufferSize),this._selectedEditionComplexStream$=this._selectedEditionComplexSubject.asObservable(),this._selectedEditionSeriesSubject=new T(this._bufferSize),this._selectedEditionSeriesStream$=this._selectedEditionSeriesSubject.asObservable(),this._selectedEditionSectionSubject=new T(this._bufferSize),this._selectedEditionSectionStream$=this._selectedEditionSectionSubject.asObservable()}getSelectedEditionComplex(){return this._selectedEditionComplexStream$}updateSelectedEditionComplex(e){this._selectedEditionComplexSubject.next(e)}clearSelectedEditionComplex(){this._selectedEditionComplexSubject.next(null)}getSelectedEditionSeries(){return this._selectedEditionSeriesStream$}updateSelectedEditionSeries(e){this._selectedEditionSeriesSubject.next(e)}clearSelectedEditionSeries(){this._selectedEditionSeriesSubject.next(null)}getSelectedEditionSection(){return this._selectedEditionSectionStream$}updateSelectedEditionSection(e){this._selectedEditionSectionSubject.next(e)}clearSelectedEditionSection(){this._selectedEditionSectionSubject.next(null)}getIsIntroView(){return this._isIntroViewStream$}updateIsIntroView(e){this._isIntroViewSubject.next(e)}clearIsIntroView(){this._isIntroViewSubject.next(null)}getIsPrefaceView(){return this._isPrefaceViewStream$}updateIsPrefaceView(e){this._isPrefaceViewSubject.next(e)}clearIsPrefaceView(){this._isPrefaceViewSubject.next(null)}getIsRowTableView(){return this._isRowTableViewStream$}updateIsRowTableView(e){this._isRowTableViewSubject.next(e)}clearIsRowTableView(){this._isRowTableViewSubject.next(null)}};ye=g([S({providedIn:"root"})],ye);function Qt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function it(t,e){return fetch(t,e).then(Qt)}function Ie(t){return(e,i)=>it(e,i).then(n=>new DOMParser().parseFromString(n,t))}var ei=Ie("application/xml"),ti=Ie("text/html"),Te=Ie("image/svg+xml");var he="http://www.w3.org/1999/xhtml",Me={svg:"http://www.w3.org/2000/svg",xhtml:he,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),Me.hasOwnProperty(e)?{space:Me[e],local:t}:t}function ni(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===he&&e.documentElement.namespaceURI===he?e.createElement(t):e.createElementNS(i,t)}}function ri(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function pe(t){var e=Q(t);return(e.local?ri:ni)(e)}function si(){}function ee(t){return t==null?si:function(){return this.querySelector(t)}}function nt(t){typeof t!="function"&&(t=ee(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var s=e[r],o=s.length,a=n[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new h(n,this._parents)}function te(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function oi(){return[]}function ve(t){return t==null?oi:function(){return this.querySelectorAll(t)}}function ai(t){return function(){return te(t.apply(this,arguments))}}function rt(t){typeof t=="function"?t=ai(t):t=ve(t);for(var e=this._groups,i=e.length,n=[],r=[],s=0;s<i;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(n.push(t.call(l,l.__data__,c,o)),r.push(l));return new h(n,r)}function Ae(t){return function(){return this.matches(t)}}function de(t){return function(e){return e.matches(t)}}var li=Array.prototype.find;function ci(t){return function(){return li.call(this.children,t)}}function ui(){return this.firstElementChild}function st(t){return this.select(t==null?ui:ci(typeof t=="function"?t:de(t)))}var hi=Array.prototype.filter;function pi(){return Array.from(this.children)}function di(t){return function(){return hi.call(this.children,t)}}function ot(t){return this.selectAll(t==null?pi:di(typeof t=="function"?t:de(t)))}function at(t){typeof t!="function"&&(t=Ae(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var s=e[r],o=s.length,a=n[r]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new h(n,this._parents)}function me(t){return new Array(t.length)}function lt(){return new h(this._enter||this._groups.map(me),this._parents)}function ie(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ie.prototype={constructor:ie,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ct(t){return function(){return t}}function mi(t,e,i,n,r,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],n[o]=a):i[o]=new ie(t,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function fi(t,e,i,n,r,s,o){var a,l,c=new Map,u=e.length,m=s.length,E=new Array(u),_;for(a=0;a<u;++a)(l=e[a])&&(E[a]=_=o.call(l,l.__data__,a,e)+"",c.has(_)?r[a]=l:c.set(_,l));for(a=0;a<m;++a)_=o.call(t,s[a],a,s)+"",(l=c.get(_))?(n[a]=l,l.__data__=s[a],c.delete(_)):i[a]=new ie(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(E[a])===l&&(r[a]=l)}function _i(t){return t.__data__}function ut(t,e){if(!arguments.length)return Array.from(this,_i);var i=e?fi:mi,n=this._parents,r=this._groups;typeof t!="function"&&(t=ct(t));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=n[c],m=r[c],E=m.length,_=Si(t.call(u,u&&u.__data__,c,n)),w=_.length,Xe=a[c]=new Array(w),je=o[c]=new Array(w),jt=l[c]=new Array(E);i(u,m,Xe,je,jt,_,e);for(var k=0,le=0,Ke,We;k<w;++k)if(Ke=Xe[k]){for(k>=le&&(le=k+1);!(We=je[le])&&++le<w;);Ke._next=We||null}}return o=new h(o,n),o._enter=a,o._exit=l,o}function Si(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ht(){return new h(this._exit||this._groups.map(me),this._parents)}function pt(t,e,i){var n=this.enter(),r=this,s=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),i==null?s.remove():i(s),n&&r?n.merge(r).order():r}function dt(t){for(var e=t.selection?t.selection():t,i=this._groups,n=e._groups,r=i.length,s=n.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=i[l],u=n[l],m=c.length,E=a[l]=new Array(m),_,w=0;w<m;++w)(_=c[w]||u[w])&&(E[w]=_);for(;l<r;++l)a[l]=i[l];return new h(a,this._parents)}function mt(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n=t[e],r=n.length-1,s=n[r],o;--r>=0;)(o=n[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function ft(t){t||(t=gi);function e(m,E){return m&&E?t(m.__data__,E.__data__):!m-!E}for(var i=this._groups,n=i.length,r=new Array(n),s=0;s<n;++s){for(var o=i[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new h(r,this._parents).order()}function gi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _t(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function St(){return Array.from(this)}function gt(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null}function xt(){let t=0;for(let e of this)++t;return t}function Et(){return!this.node()}function wt(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var r=e[i],s=0,o=r.length,a;s<o;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}function xi(t){return function(){this.removeAttribute(t)}}function Ei(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wi(t,e){return function(){this.setAttribute(t,e)}}function bi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function yi(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function Ii(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function bt(t,e){var i=Q(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((e==null?i.local?Ei:xi:typeof e=="function"?i.local?Ii:yi:i.local?bi:wi)(i,e))}function fe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ti(t){return function(){this.style.removeProperty(t)}}function Mi(t,e,i){return function(){this.style.setProperty(t,e,i)}}function vi(t,e,i){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function yt(t,e,i){return arguments.length>1?this.each((e==null?Ti:typeof e=="function"?vi:Mi)(t,e,i??"")):It(this.node(),t)}function It(t,e){return t.style.getPropertyValue(e)||fe(t).getComputedStyle(t,null).getPropertyValue(e)}function Ai(t){return function(){delete this[t]}}function Ni(t,e){return function(){this[t]=e}}function Ri(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function Tt(t,e){return arguments.length>1?this.each((e==null?Ai:typeof e=="function"?Ri:Ni)(t,e)):this.node()[t]}function Mt(t){return t.trim().split(/^|\s+/)}function Ne(t){return t.classList||new vt(t)}function vt(t){this._node=t,this._names=Mt(t.getAttribute("class")||"")}vt.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function At(t,e){for(var i=Ne(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function Nt(t,e){for(var i=Ne(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function Di(t){return function(){At(this,t)}}function Li(t){return function(){Nt(this,t)}}function Pi(t,e){return function(){(e.apply(this,arguments)?At:Nt)(this,t)}}function Rt(t,e){var i=Mt(t+"");if(arguments.length<2){for(var n=Ne(this.node()),r=-1,s=i.length;++r<s;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof e=="function"?Pi:e?Di:Li)(i,e))}function Oi(){this.textContent=""}function Fi(t){return function(){this.textContent=t}}function Ci(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Dt(t){return arguments.length?this.each(t==null?Oi:(typeof t=="function"?Ci:Fi)(t)):this.node().textContent}function Bi(){this.innerHTML=""}function ki(t){return function(){this.innerHTML=t}}function Gi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Lt(t){return arguments.length?this.each(t==null?Bi:(typeof t=="function"?Gi:ki)(t)):this.node().innerHTML}function Hi(){this.nextSibling&&this.parentNode.appendChild(this)}function Pt(){return this.each(Hi)}function Vi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ot(){return this.each(Vi)}function Ft(t){var e=typeof t=="function"?t:pe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function $i(){return null}function Ct(t,e){var i=typeof t=="function"?t:pe(t),n=e==null?$i:typeof e=="function"?e:ee(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function Ji(){var t=this.parentNode;t&&t.removeChild(this)}function Bt(){return this.each(Ji)}function Yi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function kt(t){return this.select(t?zi:Yi)}function Gt(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xi(t){return function(e){t.call(this,e,this.__data__)}}function ji(t){return t.trim().split(/^|\s+/).map(function(e){var i="",n=e.indexOf(".");return n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),{type:e,name:i}})}function Ki(t){return function(){var e=this.__on;if(e){for(var i=0,n=-1,r=e.length,s;i<r;++i)s=e[i],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function Wi(t,e,i){return function(){var n=this.__on,r,s=Xi(e);if(n){for(var o=0,a=n.length;o<a;++o)if((r=n[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=i),r.value=e;return}}this.addEventListener(t.type,s,i),r={type:t.type,name:t.name,value:e,listener:s,options:i},n?n.push(r):this.__on=[r]}}function Ht(t,e,i){var n=ji(t+""),r,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=n[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?Wi:Ki,r=0;r<s;++r)this.each(a(n[r],e,i));return this}function Vt(t,e,i){var n=fe(t),r=n.CustomEvent;typeof r=="function"?r=new r(e,i):(r=n.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ui(t,e){return function(){return Vt(this,t,e)}}function Zi(t,e){return function(){return Vt(this,t,e.apply(this,arguments))}}function $t(t,e){return this.each((typeof e=="function"?Zi:Ui)(t,e))}function*Jt(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,s=n.length,o;r<s;++r)(o=n[r])&&(yield o)}var ne=[null];function h(t,e){this._groups=t,this._parents=e}function Yt(){return new h([[document.documentElement]],ne)}function qi(){return this}h.prototype=Yt.prototype={constructor:h,select:nt,selectAll:rt,selectChild:st,selectChildren:ot,filter:at,data:ut,enter:lt,exit:ht,join:pt,merge:dt,selection:qi,order:mt,sort:ft,call:_t,nodes:St,node:gt,size:xt,empty:Et,each:wt,attr:bt,style:yt,property:Tt,classed:Rt,text:Dt,html:Lt,raise:Pt,lower:Ot,append:Ft,insert:Ct,remove:Bt,clone:kt,datum:Gt,on:Ht,dispatch:$t,[Symbol.iterator]:Jt};var Qi=Yt;function re(t){return typeof t=="string"?new h([[document.querySelector(t)]],[document.documentElement]):new h([[t]],ne)}function zt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function en(t,e){if(t=zt(t),e===void 0&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function tn(t){return typeof t=="string"?new h([document.querySelectorAll(t)],[document.documentElement]):new h([te(t)],ne)}var Re=class{constructor(){this.overlayFillColor="orange",this.overlayHoverFillColor="tomato",this.overlayTransparentFillColor="transparent",this.overlaySelectionFillColor="green",this.linkBoxFillColor="#dddddd",this.linkBoxHoverFillColor="#eeeeee",this._overlayBoxesOpacity=.3,this._overlayBoxAdditionalSpace=5.5,this._overlayBoxCornerRadius=2,this._suppliedClasses=new Map,this._suppliedClassesLabelLookup=new Map([["foliation","Blattangabe"],["staffN","Systemangabe"],["measureN","Taktzahlen"],["clef","Schl\xFCssel"],["clef_key","Schl\xFCssel mit Tonart"],["key","Tonart"],["accid","Akzidenzien"],["hyphen","Silbentrennung"]])}createSvg(e,i,n){return Ue(this,null,function*(){if(!e||!i||!n)return;let s=(yield this._fetchSvgFile(e)).getElementsByTagName("svg")[0],o=this._getViewBox(s);for(;s.firstChild;)n.appendChild(s.firstChild);return i.appendChild(n),re(i).attr("width",o.svgWidth).attr("height",o.svgHeight).attr("viewBox",o.viewBox).attr("preserveAspectRatio","xMidYMid meet").attr("version","1.1").attr("xmlns","https://www.w3.org/2000/svg").attr("xlink","https://www.w3.org/1999/xlink")})}createOverlayGroup(e,i,n,r){if(!e||!i)return;let s=this.getD3SelectionById(e,i);return s.append("g").attr("class",`${r}-overlay-group`),s.select(`g.${r}-overlay-group`).append("rect").attr("width",n.width+this._overlayBoxAdditionalSpace*2).attr("height",n.height+this._overlayBoxAdditionalSpace*2).attr("x",n.x-this._overlayBoxAdditionalSpace).attr("y",n.y-this._overlayBoxAdditionalSpace).attr("rx",this._overlayBoxCornerRadius).attr("fill",this.overlayFillColor).attr("opacity",this._overlayBoxesOpacity).attr("class",`${r}-overlay-group-box`)}fillD3SelectionWithColor(e,i){!e||!i||e.attr("fill",i)}getContainerDimensions(e){if(!e)return{width:void 0,height:void 0};let i=e.nativeElement.clientWidth,n=e.nativeElement.clientHeight;return{width:i,height:n}}getD3SelectionById(e,i){if(!(!e||!i))return e.select("#"+i)}getGroupsBySelector(e,i){if(e)return e.selectAll("g."+i)}getOverlayGroupRectSelection(e,i,n){return!e||!i||!n?void 0:this.getD3SelectionById(e,i).select(`rect.${n}-overlay-group-box`)}getSuppliedClasses(e){return e?(this._suppliedClasses=new Map,this.getGroupsBySelector(e,"supplied").each((n,r,s)=>{let a=re(s[r]).attr("class").split(" "),l=a[a.indexOf("supplied")+1];if(l){let c=this._suppliedClassesLabelLookup.get(l)||l;this._suppliedClasses.has(c)||this._suppliedClasses.set(c,!0)}}),this._suppliedClasses):void 0}toggleSuppliedClassOpacity(e,i,n){if(!e)return;let r=Array.from(this._suppliedClassesLabelLookup.entries()).find(([l,c])=>c===i)?.[0]||i,s=r?`supplied.${r}`:"supplied",o=this.getGroupsBySelector(e,s),a=n?0:1;o.style("opacity",a)}updateTkkOverlayColor(e,i,n){let r=this._getTkkOverlayColor(e,n);this.fillD3SelectionWithColor(i,r)}_fetchSvgFile(e){return Te(e)}_getTkkOverlayColor(e,i){return e?i===C.transparent?this.overlayTransparentFillColor:e.isSelected?this.overlaySelectionFillColor:i===C.hover?this.overlayHoverFillColor:this.overlayFillColor:this.overlayFillColor}_getViewBox(e){let n=re(e).attr("viewBox").split(" "),r=+n[2],s=+n[3];return new se(r,s)}};Re=g([S({providedIn:"root"})],Re);var q=class{constructor(e){this._mapSeries=({series:i,sections:n})=>{let r=f["SERIES_"+i];return{series:r,sections:n.map(s=>this._mapSection(s,r))}},this._mapSection=({section:i,disabled:n,content:r},s)=>{let o=s.route==="3"&&i==="5"?f.SERIES_3_SECTION_5:f["SECTION_"+i];return{seriesParent:s,section:o,content:this._mapSectionContent(r),disabled:n}},this._mapSectionContent=i=>({intro:{disabled:i.intro.disabled,preview:i.intro.preview||""},complexTypes:{opus:this._mapComplexItems(i.complexTypes.opus),mnr:this._mapComplexItems(i.complexTypes.mnr)}}),this._mapComplexItems=i=>i.map(({complex:n,disabled:r})=>({complex:oe.getEditionComplexById(n),disabled:r})),e&&(this.outline=e.map(this._mapSeries))}};var Y=class{};var ae;(function(t){t.measure="Takt",t.system="System",t.tka="Anmerkung"})(ae||(ae={}));var C;(function(t){t.hover="hover",t.fill="fill",t.transparent="transparent"})(C||(C={}));var De=class{constructor(e,i,n){this.type=e,this.id=i,this.typeKey=this._getEnumKeyFromValue(e),this.isSelected=n||!1}_getEnumKeyFromValue(e){return Object.keys(ae).find(n=>ae[n]===e)}};var O=class{},z=class{};function A(t,e){if(!Number.isNaN(t))return+(Math.round(+(t+"e"+e))+"e-"+e)}var x=class{constructor(e,i){this.x=e,this.y=i}},_e=class{constructor(e,i){this.START_POINT=e,this.END_POINT=i}},Le=class{constructor(e,i,n){let{UPPER_LEFT_VERTEX:r,LOWER_RIGHT_VERTEX:s}=e;this.CENTERED_X_POSITION=(r.x+s.x)/2;let o=n?-i:i;this.CENTERED_Y_POSITION=(r.y+s.y)/2-o}},Pe=class{constructor(e,i){this.SEGMENT_LABEL_ARRAY=[e,i?` ${i}`:""],this.SEGMENT_LABEL=this.SEGMENT_LABEL_ARRAY.join(" "),this.SEGMENT_LABEL_OFFSET=i?5:0}},Oe=class{constructor(e,i,n,r){this.systems=i,this.sectionPartition=n,this.segmentOffsetCorrection=r;let{startX:s,startY:o,endX:a,endY:l}=this._calculateVertices(e);this.UPPER_LEFT_VERTEX=new x(s,o),this.UPPER_RIGHT_VERTEX=new x(a,o),this.LOWER_RIGHT_VERTEX=new x(a,l),this.LOWER_LEFT_VERTEX=new x(s,l),this.VERTICES_AS_STRING=this._getSegmentVerticesAsString()}_calculateVertices(e){let i=this._calculateX(e,!0),n=this._calculateX(e,!1),r=this._calculateY(e,!0),s=this._calculateY(e,!1);return{startX:i,startY:r,endX:n,endY:s}}_calculateX(e,i){let n=A(this.systems.SYSTEMS_DIMENSIONS.SYSTEMS_WIDTH/this.sectionPartition,2),r=e.position&&e.position<=this.sectionPartition?e.position-1:0,s=this.systems.SYSTEMS_DIMENSIONS.START_X,o=this.segmentOffsetCorrection/2,a=s+r*n+o,l=i?0:n-this.segmentOffsetCorrection;return A(a+l,2)}_calculateY(e,i){let n=i?e.startSystem-1:e.endSystem-1,r=this.systems.SYSTEMS_LINES.SYSTEMS_ARRAYS[n],s=0;switch(e.relativeToSystem){case"below":s=20;break;case"above":s=-20;break;default:s=0}let o=i?r.at(0).START_POINT.y:r.at(-1).END_POINT.y,a=this.segmentOffsetCorrection*(i?-1:1)+s;return A(o+a,2)}_getSegmentVerticesAsString(){return[this.UPPER_LEFT_VERTEX,this.UPPER_RIGHT_VERTEX,this.LOWER_RIGHT_VERTEX,this.LOWER_LEFT_VERTEX,this.UPPER_LEFT_VERTEX].map(i=>`${i.x} ${i.y}`).join(" ")}},Fe=class{constructor(e,i,n){this.systems=i,this.segmentOffsetCorrection=n,this.sectionPartition=e.sectionPartition??1,this._getContentSections(e)}_getContentSections(e){if(!e.sections){console.error("No sections array in content",e);return}if(e.sections.length>this.sectionPartition){console.error("Sections array is bigger than sectionPartition");return}if(this.systems.NUMBER_OF_SYSTEMS===0){console.error("No systems in folio");return}e.sections.forEach((i,n)=>{this._setProperties(e,i)})}_setProperties(e,i){let{complexId:n,sheetId:r,selectable:s=!0,reversed:o=!1,linkTo:a="",sigle:l,sigleAddendum:c}=e;this.section=i;let u=new Pe(l,c);this.vertices=new Oe(i,this.systems,this.sectionPartition,this.segmentOffsetCorrection);let m=new Le(this.vertices,u.SEGMENT_LABEL_OFFSET,o);Object.assign(this,{complexId:n,sheetId:r,sigle:l,sigleAddendum:c,selectable:s,reversed:o,linkTo:a,segmentLabelArray:u.SEGMENT_LABEL_ARRAY,segmentLabel:u.SEGMENT_LABEL,centeredXPosition:m.CENTERED_X_POSITION,centeredYPosition:m.CENTERED_Y_POSITION})}},Ce=class{constructor({initialOffsetX:e,initialOffsetY:i,formatX:n,formatY:r,factor:s},o){this.FOLIO_ID=o,this.SHEET_WIDTH=n*s,this.SHEET_HEIGHT=r*s,this.OFFSET=new x(e,i),this.UPPER_LEFT_CORNER=this.OFFSET,this.LOWER_RIGHT_CORNER=new x(this.SHEET_WIDTH,this.SHEET_HEIGHT)}},v=class v{constructor(e){this.sheet=e,this.UPPER_MARGIN=this._calculateSheetMargin(this.sheet.SHEET_HEIGHT,v.VERTICAL_MARGIN_FACTOR),this.LOWER_MARGIN=this.UPPER_MARGIN,this.LEFT_MARGIN=this._calculateSheetMargin(this.sheet.SHEET_WIDTH,v.HORIZONTAL_MARGIN_FACTOR),this.RIGHT_MARGIN=this._calculateSheetMargin(this.sheet.SHEET_WIDTH,v.HORIZONTAL_MARGIN_FACTOR/2),this.HORIZONTAL_MARGINS=this.LEFT_MARGIN+this.RIGHT_MARGIN,this.VERTICAL_MARGINS=this.UPPER_MARGIN+this.LOWER_MARGIN}_calculateSheetMargin(e,i){return A(e*i,2)}};v.HORIZONTAL_MARGIN_FACTOR=1/6,v.VERTICAL_MARGIN_FACTOR=.05;var Be=v,ke=class{constructor(e,i){this.sheet=e,this.systemsMargins=i;let{SHEET_WIDTH:n,SHEET_HEIGHT:r,UPPER_LEFT_CORNER:s}=this.sheet,{HORIZONTAL_MARGINS:o,VERTICAL_MARGINS:a,LEFT_MARGIN:l,UPPER_MARGIN:c}=this.systemsMargins;this.SYSTEMS_WIDTH=n-o,this.SYSTEMS_HEIGHT=r-a,this.START_X=s.x+l,this.START_Y=s.y+c,this.END_X=this.START_X+this.SYSTEMS_WIDTH,this.END_Y=this.START_Y+this.SYSTEMS_HEIGHT}},Ge=class{constructor(e,i){this.yArray=e,this.systemsDimensions=i,this._calculateSystemLine=n=>{let{START_X:r,END_X:s}=this.systemsDimensions;return new _e(new x(r,n),new x(s,n))},this.SYSTEMS_ARRAYS=this._calculateSystemsArrays()}_calculateSystemsArrays(){return this.yArray.map(e=>e.map(this._calculateSystemLine))}},B=class B{constructor(e,i,n,r){this.yArray=e,this.systemsMargins=i,this.systemsDimensions=n,this.zoomFactor=r,this.SYSTEMS_LABELS_ARRAY=this._calculateSystemsLabelArray()}_calculateSystemsLabelArray(){let e=A(this.systemsDimensions.START_X-this.systemsMargins.LEFT_MARGIN*B.LABEL_START_X_OFFSET_FACTOR,2),i=A(B.LABEL_START_Y_OFFSET_FACTOR/this.zoomFactor,2);return this.yArray.map(n=>{let r=n[0]-i;return new x(e,r)})}};B.LABEL_START_X_OFFSET_FACTOR=.6,B.LABEL_START_Y_OFFSET_FACTOR=3;var He=B,Ve=class{constructor(e,i,n){this.lineSpaceFactor=1.5,this.NUMBER_OF_SYSTEMS=i?parseInt(i,10):0,this.ZOOM_FACTOR=n,this.SYSTEMS_MARGINS=new Be(e),this.SYSTEMS_DIMENSIONS=new ke(e,this.SYSTEMS_MARGINS);let r=this._calculateSystemYArray();this.SYSTEMS_LINES=new Ge(r,this.SYSTEMS_DIMENSIONS),this.SYSTEMS_LABELS=new He(r,this.SYSTEMS_MARGINS,this.SYSTEMS_DIMENSIONS,this.ZOOM_FACTOR)}_calculateSystemYArray(){let e=this.SYSTEMS_DIMENSIONS.SYSTEMS_HEIGHT/this.NUMBER_OF_SYSTEMS;return Array.from({length:this.NUMBER_OF_SYSTEMS},(n,r)=>{let s=A(this.SYSTEMS_DIMENSIONS.START_Y+r*e,2);return this._calculateSystemLineArray(s)})}_calculateSystemLineArray(e){return Array.from({length:5},(n,r)=>e+r*this.lineSpaceFactor*this.ZOOM_FACTOR)}},$e=class{constructor(e,i,n=0){this.SHEET=new Ce(e,i.folioId),this.SYSTEMS=new Ve(this.SHEET,i.systems,e.factor),this.CONTENT_SEGMENTS=i.content.map(r=>new Fe(r,this.SYSTEMS,n))}};var Je=class{constructor(e){this.folioId=e.FOLIO_ID,this.upperLeftCorner=e.UPPER_LEFT_CORNER,this.lowerRightCorner=e.LOWER_RIGHT_CORNER}},Ye=class{constructor(e){this.systemsLabelPositions=e.SYSTEMS_LABELS.SYSTEMS_LABELS_ARRAY,this.systemsLines=e.SYSTEMS_LINES.SYSTEMS_ARRAYS}},Se=class{constructor(e){this.complexId=e.complexId,this.sheetId=e.sheetId,this.linkTo=e.linkTo,this.selectable=e.selectable,this.reversed=e.reversed,this.segmentVertices=e.vertices?.VERTICES_AS_STRING,this.segmentLabelArray=e.segmentLabelArray,this.segmentLabel=e.segmentLabel,this.centeredXPosition=e.centeredXPosition,this.centeredYPosition=e.centeredYPosition}},ze=class{constructor(e){this.sheet=new Je(e.SHEET),this.systems=new Ye(e.SYSTEMS),this.contentSegments=e.CONTENT_SEGMENTS.map(i=>new Se(i))}};var X=class{};var j=class{};var L=class{};var K=class{};var W=class{};var U=class{};var Z=class{};var F=class{},P=class{};var se=class{constructor(e,i){this.svgWidth="100%",this.svgHeight="100%",this.viewBox="0 0 "+e+" "+i}};var Xt={editionComplexes:[{M22:{titleStatement:{title:"Studienkomposition f\xFCr Klavier/Streichquartett",catalogueType:"MNR",catalogueNumber:"22"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"21. M\xE4rz 2024"},pubStatement:{series:"2",section:"2a"}}},{M30:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"30"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"19. Januar 2024"},pubStatement:{series:"2",section:"2a"}}},{M31:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"31"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"19. Januar 2024"},pubStatement:{series:"2",section:"2a"}}},{M34:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"34"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Mai 2023"},pubStatement:{series:"2",section:"2a"}}},{M35_42:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"35/42"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"8. Februar 2024"},pubStatement:{series:"2",section:"2a"}}},{M36:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"36"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"14. August 2024"},pubStatement:{series:"2",section:"2a"}}},{M37:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"37"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"19. Januar 2024"},pubStatement:{series:"2",section:"2a"}}},{M38:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"38"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"15. August 2024"},pubStatement:{series:"2",section:"2a"}}},{M133:{titleStatement:{title:"\u201EDies ist ein Lied\u201C",catalogueType:"MNR",catalogueNumber:"133"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M134:{titleStatement:{title:"\u201EIm Windesweben\u201C",catalogueType:"MNR",catalogueNumber:"134"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M135:{titleStatement:{title:"\u201EAn Bachesranft\u201C",catalogueType:"MNR",catalogueNumber:"135"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M136:{titleStatement:{title:"\u201EIm Morgentaun\u201C",catalogueType:"MNR",catalogueNumber:"136"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M137:{titleStatement:{title:"\u201EKahl reckt der Baum\u201C",catalogueType:"MNR",catalogueNumber:"137"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M138:{titleStatement:{title:"<em>Eingang</em> (\u201EWelt der Gestalten\u201C)",catalogueType:"MNR",catalogueNumber:"138"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M139:{titleStatement:{title:"\u201ENoch zwingt mich Treue\u201C",catalogueType:"MNR",catalogueNumber:"139"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M140:{titleStatement:{title:"\u201EJa Heil und Dank dir\u201C",catalogueType:"MNR",catalogueNumber:"140"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M141:{titleStatement:{title:"\u201ESo ich traurig bin\u201C",catalogueType:"MNR",catalogueNumber:"141"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M142:{titleStatement:{title:"\u201EIhr tratet zu dem Herde\u201C",catalogueType:"MNR",catalogueNumber:"142"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M143:{titleStatement:{title:"\u201EErwachen aus dem tiefsten Traumesscho\xDFe\u201C",catalogueType:"MNR",catalogueNumber:"143"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M144:{titleStatement:{title:"<em>Kunfttag I</em> (\u201EDem bist du Kind\u201C)",catalogueType:"MNR",catalogueNumber:"144"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M145:{titleStatement:{title:"<em>Trauer I</em> (\u201ESo wart bis ich dies dir noch k\xFCnde\u201C)",catalogueType:"MNR",catalogueNumber:"145"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M146:{titleStatement:{title:"\u201EDas lockere Saatgefilde\u201C",catalogueType:"MNR",catalogueNumber:"146"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M212:{titleStatement:{title:"\u201EDer Tag ist vergangen\u201C",catalogueType:"MNR",catalogueNumber:"212"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{M213:{titleStatement:{title:"\u201ESchien mir\u2019s, als ich sah die Sonne\u201C",catalogueType:"MNR",catalogueNumber:"213"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{M216:{titleStatement:{title:"Gleich und Gleich (\u201EEin Blumengl\xF6ckchen\u201C)",catalogueType:"MNR",catalogueNumber:"216"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{M217:{titleStatement:{title:"Die geheimnisvolle Fl\xF6te (\u201EAn einem Abend\u201C)",catalogueType:"MNR",catalogueNumber:"217"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{OP3:{titleStatement:{title:"<em>F\xFCnf Lieder aus</em> Der siebente Ring <em>von Stefan George</em>",catalogueType:"OPUS",catalogueNumber:"3"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{OP4:{titleStatement:{title:"<em>F\xFCnf Lieder nach Gedichten von Stefan George</em>",catalogueType:"OPUS",catalogueNumber:"4"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{OP12:{titleStatement:{title:"<em>Vier Lieder</em>",catalogueType:"OPUS",catalogueNumber:"12"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"9. April 2024"},pubStatement:{series:"1",section:"5"}}},{OP19:{titleStatement:{title:"<em>Zwei Lieder f\xFCr gemischten Chor und Ensemble</em>",catalogueType:"OPUS",catalogueNumber:"19"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"3"}}},{OP22:{titleStatement:{title:"Quartett f\xFCr Geige, Klarinette, Tenorsaxophon und Klavier",catalogueType:"OPUS",catalogueNumber:"22"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"2"}}},{OP23:{titleStatement:{title:"<em>Drei Ges\xE4nge aus</em> Viae Inviae <em>von Hildegard Jone</em>",catalogueType:"OPUS",catalogueNumber:"23"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"17. April 2024"},pubStatement:{series:"1",section:"5"}}},{OP24:{titleStatement:{title:"<em>Konzert f\xFCr neun Instrumente</em>",catalogueType:"OPUS",catalogueNumber:"24"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"1"}}},{OP25:{titleStatement:{title:"<em>Drei Lieder nach Gedichten von Hildegard Jone</em>",catalogueType:"OPUS",catalogueNumber:"25"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"17. April 2024"},pubStatement:{series:"1",section:"5"}}},{OP27:{titleStatement:{title:"Variationen f\xFCr Klavier",catalogueType:"OPUS",catalogueNumber:"27"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"2"}}}]};var N,R,oe=(R=class{static initializeEditionComplexesList(){let e=N._fetchEditionComplexesData();N.setEditionComplexesList(e)}static getEditionComplexById(e){return N._editionComplexesList[e.toUpperCase()]}static getEditionComplexesList(){return N._editionComplexesList}static setEditionComplexesList(e){N._editionComplexesList=e}static _fetchEditionComplexesData(){let e=Xt,i={};return e.editionComplexes.forEach(n=>{Object.entries(n).forEach(([r,s])=>{i[r]=new J(s.titleStatement,s.respStatement,s.pubStatement)})}),i}},N=R,R._editionComplexesList={},R);oe=N=g([S({providedIn:"root"})],oe);export{f as a,ae as b,C as c,De as d,$e as e,ze as f,se as g,oe as h,Kt as i,Wt as j,Ut as k,Ee as l,we as m,be as n,ye as o,Q as p,ee as q,ve as r,Ae as s,It as t,Qi as u,re as v,en as w,tn as x,Re as y};
