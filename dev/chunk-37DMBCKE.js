import{b as _,c as h,d as he,f as W,h as V,i as fe,l as pe,m as me,n as _e,o as ge,p as xe,q as Se,r as ve,s as z,t as j,u as ye}from"./chunk-UW47QA52.js";import{a as d}from"./chunk-X2KOEZSE.js";import{J as T,a as ae,f as le,j as E,l as w,n as ce,r as $,ra as de,t as ue,v as b,w as A}from"./chunk-I7PFRKPI.js";var ft={FIRM_JE_NO_2_LIN_12:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_2_LIN_12_B:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12_b.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_2_LIN_12_C:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12_c.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_3_LIN_14:{route:"assets/img/edition/firm-signs/je/no3_lin14/firm_je_no3_lin14.png",short:"[JE] | No. 3 | 14 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 3 | 14 linig."},FIRM_JE_NO_5_LIN_18_B:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_b.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_5_LIN_18_C:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_c.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_5_LIN_18_D:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_d.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_6_LIN_20:{route:"assets/img/edition/firm-signs/je/no6_lin20/firm_je_no6_lin20.png",short:"[JE] | No. 6 | 20 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 6 | 20 linig."},FIRM_JE_NO_7_LIN_22:{route:"assets/img/edition/firm-signs/je/no7_lin22/firm_je_no7_lin22.png",short:"[JE] | No. 7 | 22 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 7 | 22 linig."},FIRM_JE_NO_9_LIN_28:{route:"assets/img/edition/firm-signs/je/no9_lin28/firm_je_no9_lin28.png",short:"[JE] | No. 9 | 28 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 9 | 28 linig."},FIRM_JE_NO_15_LIN_16:{route:"assets/img/edition/firm-signs/je/no15_lin16/firm_je_no15_lin16.png",short:"[JE] | No. 15 | 16 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 15 | 16 linig."}};var pt={DOUBLE_FLAT:{alt:"[bb]",hex:"\u{1D12B}"},DOUBLE_SHARP:{alt:"[x]",hex:"\u{1D12A}"},FLAT:{alt:"[b]",hex:"\u266D"},NATURAL:{alt:"[a]",hex:"\u266E"},SHARP:{alt:"[#]",hex:"\u266F"},FORTE:{alt:"[f]",hex:"\u{1D191}"},FORTISSIMO:{alt:"[ff]",hex:"\u{1D191}\u{1D191}"},FORTISSIMO3:{alt:"[fff]",hex:"\u{1D191}\u{1D191}\u{1D191}"},PEADL:{alt:"[ped]",hex:"\u{1D1AE}"},PIANISSIMO:{alt:"[pp]",hex:"\u{1D18F}\u{1D18F}"},PIANISSIMO3:{alt:"[ppp]",hex:"\u{1D18F}\u{1D18F}\u{1D18F}"},PIANO:{alt:"[p]",hex:"\u{1D18F}"}};var mt={GRAPH_IMAGE_OP25:{route:"assets/img/edition/series/1/section/5/op25/graph_op25_1.png",short:"Statischer Graph op. 25/I",full:"Statischer Graph der Skizzen von Opus 25/I."}};var g={BASE_ROUTE:"assets/data/edition",FILES:{complexesFile:"edition-complexes.json",folioConvoluteFile:"folio-convolute.json",graphFile:"graph.json",introFile:"intro.json",prefaceFile:"preface.json",rowTablesFile:"row-tables.json",sourceListFile:"source-list.json",sourceDescriptionListFile:"source-description.json",sourceEvaluationListFile:"source-evaluation.json",svgSheetsFile:"svg-sheets.json",textcriticsFile:"textcritics.json"}};var u=class u{};u.M22=new h({title:"Studienkomposition f\xFCr Klavier / Streichquartett",catalogueType:"MNR",catalogueNumber:"22"},{editors:[{name:"Michael Matter",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"21. M\xE4rz 2024"},{series:"2",section:"2a"}),u.M30=new h({title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"30"},{editors:[{name:"Michael Matter",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"19. Januar 2024"},{series:"2",section:"2a"}),u.M31=new h({title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"31"},{editors:[{name:"Michael Matter",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"19. Januar 2024"},{series:"2",section:"2a"}),u.M34=new h({title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"34"},{editors:[{name:"Michael Matter",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Mai 2023"},{series:"2",section:"2a"}),u.M35_42=new h({title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"35/42"},{editors:[{name:"Michael Matter",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"8. Februar 2024"},{series:"2",section:"2a"}),u.M37=new h({title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"37"},{editors:[{name:"Michael Matter",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"19. Januar 2024"},{series:"2",section:"2a"}),u.M133=new h({title:"\u201EDies ist ein Lied\u201C",catalogueType:"MNR",catalogueNumber:"133"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M134=new h({title:"\u201EIm Windesweben\u201C",catalogueType:"MNR",catalogueNumber:"134"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M135=new h({title:"\u201EAn Bachesranft\u201C",catalogueType:"MNR",catalogueNumber:"135"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M136=new h({title:"\u201EIm Morgentaun\u201C",catalogueType:"MNR",catalogueNumber:"136"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M137=new h({title:"\u201EKahl reckt der Baum\u201C",catalogueType:"MNR",catalogueNumber:"137"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M138=new h({title:"<em>Eingang</em> (\u201EWelt der Gestalten\u201C)",catalogueType:"MNR",catalogueNumber:"138"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M139=new h({title:"\u201ENoch zwingt mich Treue\u201C",catalogueType:"MNR",catalogueNumber:"139"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M140=new h({title:"\u201EJa Heil und Dank dir\u201C",catalogueType:"MNR",catalogueNumber:"140"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M141=new h({title:"\u201ESo ich traurig bin\u201C",catalogueType:"MNR",catalogueNumber:"141"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M142=new h({title:"\u201EIhr tratet zu dem Herde\u201C",catalogueType:"MNR",catalogueNumber:"142"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M143=new h({title:"\u201EErwachen aus dem tiefsten Traumesscho\xDFe\u201C",catalogueType:"MNR",catalogueNumber:"143"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M144=new h({title:"<em>Kunfttag I</em> (\u201EDem bist du Kind\u201C)",catalogueType:"MNR",catalogueNumber:"144"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M145=new h({title:"<em>Trauer I</em> (\u201ESo wart bis ich dies dir noch k\xFCnde\u201C)",catalogueType:"MNR",catalogueNumber:"145"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M146=new h({title:"\u201EDas lockere Saatgefilde\u201C",catalogueType:"MNR",catalogueNumber:"146"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.M212=new h({title:"\u201EDer Tag ist vergangen\u201C",catalogueType:"MNR",catalogueNumber:"212"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"---"},{series:"1",section:"5"}),u.M213=new h({title:"\u201ESchien mir\u2019s, als ich sah die Sonne\u201C",catalogueType:"MNR",catalogueNumber:"213"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"---"},{series:"1",section:"5"}),u.M216=new h({title:"Gleich und Gleich (\u201EEin Blumengl\xF6ckchen\u201C)",catalogueType:"MNR",catalogueNumber:"216"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"---"},{series:"1",section:"5"}),u.M217=new h({title:"Die geheimnisvolle Fl\xF6te (\u201EAn einem Abend\u201C)",catalogueType:"MNR",catalogueNumber:"217"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"---"},{series:"1",section:"5"}),u.OP3=new h({title:"<em>F\xFCnf Lieder aus</em> Der siebente Ring <em>von Stefan George</em>",catalogueType:"OPUS",catalogueNumber:"3"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.OP4=new h({title:"<em>F\xFCnf Lieder nach Gedichten von Stefan George</em>",catalogueType:"OPUS",catalogueNumber:"4"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Juni 2024"},{series:"1",section:"5"}),u.OP12=new h({title:"<em>Vier Lieder</em>",catalogueType:"OPUS",catalogueNumber:"12"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"9. April 2024"},{series:"1",section:"5"}),u.OP19=new h({title:"<em>Zwei Lieder f\xFCr gemischten Chor und Ensemble</em>",catalogueType:"OPUS",catalogueNumber:"19"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Mai 2023"},{series:"1",section:"3"}),u.OP22=new h({title:"Quartett f\xFCr Geige, Klarinette, Tenorsaxophon und Klavier",catalogueType:"OPUS",catalogueNumber:"22"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Mai 2023"},{series:"1",section:"2"}),u.OP23=new h({title:"<em>Drei Ges\xE4nge aus</em> Viae Inviae <em>von Hildegard Jone</em>",catalogueType:"OPUS",catalogueNumber:"23"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"17. April 2024"},{series:"1",section:"5"}),u.OP24=new h({title:"<em>Konzert f\xFCr neun Instrumente</em>",catalogueType:"OPUS",catalogueNumber:"24"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Mai 2023"},{series:"1",section:"1"}),u.OP25=new h({title:"<em>Drei Lieder nach Gedichten von Hildegard Jone</em>",catalogueType:"OPUS",catalogueNumber:"25"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"17. April 2024"},{series:"1",section:"5"}),u.OP27=new h({title:"Variationen f\xFCr Klavier",catalogueType:"OPUS",catalogueNumber:"27"},{editors:[{name:"Thomas Ahrend",homepage:d.AWG_PROJECT_URL+"index.php?id=3"}],lastModified:"6. Mai 2023"},{series:"1",section:"2"});var f=u;var J=[{series:_.SERIES_1,sections:[{section:_.SECTION_1,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_2,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_3,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_4,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_5,complexes:{opus:[{complex:f.OP3,disabled:!1},{complex:f.OP4,disabled:!1},{complex:f.OP12,disabled:!1},{complex:f.OP23,disabled:!1},{complex:f.OP25,disabled:!1}],mnr:[{complex:f.M133,disabled:!0},{complex:f.M134,disabled:!0},{complex:f.M135,disabled:!0},{complex:f.M136,disabled:!0},{complex:f.M137,disabled:!0},{complex:f.M138,disabled:!0},{complex:f.M139,disabled:!0},{complex:f.M140,disabled:!0},{complex:f.M141,disabled:!0},{complex:f.M142,disabled:!0},{complex:f.M143,disabled:!1},{complex:f.M144,disabled:!1},{complex:f.M145,disabled:!1},{complex:f.M146,disabled:!1},{complex:f.M213,disabled:!0},{complex:f.M212,disabled:!0},{complex:f.M216,disabled:!0},{complex:f.M217,disabled:!0}]},disabled:!1}]},{series:_.SERIES_2,sections:[{section:_.SECTION_1,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_2A,complexes:{opus:[],mnr:[{complex:f.M22,disabled:!1},{complex:f.M30,disabled:!1},{complex:f.M31,disabled:!1},{complex:f.M34,disabled:!1},{complex:f.M35_42,disabled:!1},{complex:f.M37,disabled:!1}]},disabled:!1},{section:_.SECTION_2B,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_3,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_4,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_5,complexes:{opus:[],mnr:[]},disabled:!0}]},{series:_.SERIES_3,sections:[{section:_.SECTION_1,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_2,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_3,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SECTION_4,complexes:{opus:[],mnr:[]},disabled:!0},{section:_.SERIES_3_SECTION_5,complexes:{opus:[],mnr:[]},disabled:!0}]}];var N,H=(N=class{constructor(e){this.http=e,this._assetPath=""}getEditionGraphData(e){return this._assetPath=this._setAssetPathForEditionComplex(e),this._getGraphData().pipe(b(new me),A(1))}getEditionIntroData(e){return this._assetPath=this._setAssetPathForEditionComplex(e),this._getIntroData().pipe(b(new _e),A(1))}getEditionPrefaceData(){return this._assetPath=g.BASE_ROUTE,this._getPrefaceData().pipe(b(new ge),A(1))}getEditionReportData(e){this._assetPath=this._setAssetPathForEditionComplex(e);let i=this._getSourceListData(),n=this._getSourceDescriptionListData(),r=this._getSourceEvaluationListData(),o=this._getTextcriticsListData();return $([i,n,r,o]).pipe(b([new ve,new xe,new Se,new j]),A(1))}getEditionRowTablesData(){return this._assetPath=g.BASE_ROUTE,this._getRowTablesData().pipe(b(new he),A(1))}getEditionSheetsData(e){this._assetPath=this._setAssetPathForEditionComplex(e);let i=this._getFolioConvoluteData(),n=this._getSvgSheetsData(),r=this._getTextcriticsListData();return $([i,n,r]).pipe(b([new pe,new fe,new j]),A(1))}_setAssetPathForEditionComplex(e){let i="/",n=i+_.SERIES.route+i+e.pubStatement.series.route+_.SECTION.route+e.pubStatement.section.route+e.complexId.route;return g.BASE_ROUTE+n}_getFolioConvoluteData(){let e=g.FILES.folioConvoluteFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getGraphData(){let e=g.FILES.graphFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getIntroData(){let e=g.FILES.introFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getPrefaceData(){let e=g.FILES.prefaceFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getRowTablesData(){let e=g.FILES.rowTablesFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSourceListData(){let e=g.FILES.sourceListFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSourceDescriptionListData(){let e=g.FILES.sourceDescriptionListFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSourceEvaluationListData(){let e=g.FILES.sourceEvaluationListFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getSvgSheetsData(){let e=g.FILES.svgSheetsFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getTextcriticsListData(){let e=g.FILES.textcriticsFile,i=`${this._assetPath}/${e}`;return this._getJsonData(i)}_getJsonData(e){return this.http.get(e).pipe(ue(this._handleError("_getJsonData",[])))}_handleError(e,i){return n=>(this._logError(`${e} failed: ${n.message}`),ce(i))}_logError(e){console.error(e)}},N.ctorParameters=()=>[{type:de}],N);H=w([T({providedIn:"root"})],H);var K=class{findTextcritics(e,i){return!e||!i?new z:e.find(r=>r.id===i.id)||new z}getCurrentEditionType(e,i){let r=e?.content?.[0]?.partial,o=r?e.id+r:e.id;return Object.keys(i).find(a=>this._findSvgSheetIndexById(i[a],o)>=0)}getNextSheetId(e,i,n){let r=i?.content?.[0]?.partial,o=i.id+(r||""),s=this._findSvgSheetIndexById(n,i.id);return r?this._findNextSheetIdForPartialSheet(e,n,s,o,r):this._findNextSheetIdForNonPartialSheet(e,n,s,o)}getTextcriticalCommentsForOverlays(e,i){return!e||!i?[]:e.filter(n=>i.some(r=>n.svgGroupId===r.id))}selectConvolute(e,i,n){if(!e||!i||!n)return;let o=this.getCurrentEditionType(n,i)==="sketchEditions"?n.content[0].convolute:"";return this._findConvoluteById(e,o)}selectSvgSheetById(e,i){if(!e||!i)return new V;let n={workEditions:this._findSvgSheetIndexById(e.workEditions,i),textEditions:this._findSvgSheetIndexById(e.textEditions,i),sketchEditions:this._findSvgSheetIndexById(e.sketchEditions,i)};for(let[r,o]of Object.entries(n)){if(o<0)continue;return this._getSheetWithPartialContentById(e[r],o,i)}return new V}_findConvoluteById(e,i){return e.find(r=>r.convoluteId===i)}_findNextSheetIdForPartialSheet(e,i,n,r,o){let s=i[n],l=s.content.findIndex(c=>c.partial===o)+e;return l>=0&&l<s.content?.length?s.id+s.content[l].partial:this._findNextSheetIdForNonPartialSheet(e,i,n,r)}_findNextSheetIdForNonPartialSheet(e,i,n,r){let o=n+e;if(o>=0&&o<i.length){let s=i[o],a=e>0?0:s.content.length-1;return s.id+(s.content[a]?.partial||"")}else return r}_findSvgSheetIndexById(e,i){return e.findIndex(n=>{let r=n.id;if(n.content.length>1){let o=this._findSvgSheetPartialIndexById(n,i);o>=0&&(r+=n.content[o].partial)}return r===i})}_findSvgSheetPartialIndexById(e,i){return e.content.findIndex(n=>e.id+n.partial===i)}_getSheetWithPartialContentById(e,i,n){let r=ae({},e[i]),o=this._findSvgSheetPartialIndexById(r,n);return o>=0&&(r.content=[r.content[o]]),r}};K=w([T({providedIn:"root"})],K);function _t(){}function D(t){return t==null?_t:function(){return this.querySelector(t)}}function we(t){typeof t!="function"&&(t=D(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var o=e[r],s=o.length,a=n[r]=new Array(s),l,c,p=0;p<s;++p)(l=o[p])&&(c=t.call(l,l.__data__,p,o))&&("__data__"in l&&(c.__data__=l.__data__),a[p]=c);return new m(n,this._parents)}function I(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function gt(){return[]}function q(t){return t==null?gt:function(){return this.querySelectorAll(t)}}function xt(t){return function(){return I(t.apply(this,arguments))}}function Te(t){typeof t=="function"?t=xt(t):t=q(t);for(var e=this._groups,i=e.length,n=[],r=[],o=0;o<i;++o)for(var s=e[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(n.push(t.call(l,l.__data__,c,s)),r.push(l));return new m(n,r)}function Y(t){return function(){return this.matches(t)}}function O(t){return function(e){return e.matches(t)}}var St=Array.prototype.find;function vt(t){return function(){return St.call(this.children,t)}}function yt(){return this.firstElementChild}function be(t){return this.select(t==null?yt:vt(typeof t=="function"?t:O(t)))}var wt=Array.prototype.filter;function Tt(){return Array.from(this.children)}function bt(t){return function(){return wt.call(this.children,t)}}function Ae(t){return this.selectAll(t==null?Tt:bt(typeof t=="function"?t:O(t)))}function Ee(t){typeof t!="function"&&(t=Y(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var o=e[r],s=o.length,a=n[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new m(n,this._parents)}function B(t){return new Array(t.length)}function Ne(){return new m(this._enter||this._groups.map(B),this._parents)}function C(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}C.prototype={constructor:C,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Re(t){return function(){return t}}function At(t,e,i,n,r,o){for(var s=0,a,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],n[s]=a):i[s]=new C(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function Et(t,e,i,n,r,o,s){var a,l,c=new Map,p=e.length,S=o.length,v=new Array(p),x;for(a=0;a<p;++a)(l=e[a])&&(v[a]=x=s.call(l,l.__data__,a,e)+"",c.has(x)?r[a]=l:c.set(x,l));for(a=0;a<S;++a)x=s.call(t,o[a],a,o)+"",(l=c.get(x))?(n[a]=l,l.__data__=o[a],c.delete(x)):i[a]=new C(t,o[a]);for(a=0;a<p;++a)(l=e[a])&&c.get(v[a])===l&&(r[a]=l)}function Nt(t){return t.__data__}function De(t,e){if(!arguments.length)return Array.from(this,Nt);var i=e?Et:At,n=this._parents,r=this._groups;typeof t!="function"&&(t=Re(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var p=n[c],S=r[c],v=S.length,x=Rt(t.call(p,p&&p.__data__,c,n)),y=x.length,ne=a[c]=new Array(y),re=s[c]=new Array(y),ht=l[c]=new Array(v);i(p,S,ne,re,ht,x,e);for(var R=0,F=0,oe,se;R<y;++R)if(oe=ne[R]){for(R>=F&&(F=R+1);!(se=re[F])&&++F<y;);oe._next=se||null}}return s=new m(s,n),s._enter=a,s._exit=l,s}function Rt(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ie(){return new m(this._exit||this._groups.map(B),this._parents)}function Ce(t,e,i){var n=this.enter(),r=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),i==null?o.remove():i(o),n&&r?n.merge(r).order():r}function Me(t){for(var e=t.selection?t.selection():t,i=this._groups,n=e._groups,r=i.length,o=n.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c=i[l],p=n[l],S=c.length,v=a[l]=new Array(S),x,y=0;y<S;++y)(x=c[y]||p[y])&&(v[y]=x);for(;l<r;++l)a[l]=i[l];return new m(a,this._parents)}function Pe(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n=t[e],r=n.length-1,o=n[r],s;--r>=0;)(s=n[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Le(t){t||(t=Dt);function e(S,v){return S&&v?t(S.__data__,v.__data__):!S-!v}for(var i=this._groups,n=i.length,r=new Array(n),o=0;o<n;++o){for(var s=i[o],a=s.length,l=r[o]=new Array(a),c,p=0;p<a;++p)(c=s[p])&&(l[p]=c);l.sort(e)}return new m(r,this._parents).order()}function Dt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Fe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Je(){return Array.from(this)}function Oe(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,o=n.length;r<o;++r){var s=n[r];if(s)return s}return null}function Be(){let t=0;for(let e of this)++t;return t}function ke(){return!this.node()}function Ge(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var r=e[i],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}var k="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:k,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function M(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),Q.hasOwnProperty(e)?{space:Q[e],local:t}:t}function It(t){return function(){this.removeAttribute(t)}}function Ct(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mt(t,e){return function(){this.setAttribute(t,e)}}function Pt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Lt(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function Ft(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function Ue(t,e){var i=M(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((e==null?i.local?Ct:It:typeof e=="function"?i.local?Ft:Lt:i.local?Pt:Mt)(i,e))}function G(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Jt(t){return function(){this.style.removeProperty(t)}}function Ot(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Bt(t,e,i){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function $e(t,e,i){return arguments.length>1?this.each((e==null?Jt:typeof e=="function"?Bt:Ot)(t,e,i??"")):We(this.node(),t)}function We(t,e){return t.style.getPropertyValue(e)||G(t).getComputedStyle(t,null).getPropertyValue(e)}function kt(t){return function(){delete this[t]}}function Gt(t,e){return function(){this[t]=e}}function Ut(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function Ve(t,e){return arguments.length>1?this.each((e==null?kt:typeof e=="function"?Ut:Gt)(t,e)):this.node()[t]}function ze(t){return t.trim().split(/^|\s+/)}function Z(t){return t.classList||new je(t)}function je(t){this._node=t,this._names=ze(t.getAttribute("class")||"")}je.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function He(t,e){for(var i=Z(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function Ke(t,e){for(var i=Z(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function $t(t){return function(){He(this,t)}}function Wt(t){return function(){Ke(this,t)}}function Vt(t,e){return function(){(e.apply(this,arguments)?He:Ke)(this,t)}}function qe(t,e){var i=ze(t+"");if(arguments.length<2){for(var n=Z(this.node()),r=-1,o=i.length;++r<o;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof e=="function"?Vt:e?$t:Wt)(i,e))}function zt(){this.textContent=""}function jt(t){return function(){this.textContent=t}}function Ht(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ye(t){return arguments.length?this.each(t==null?zt:(typeof t=="function"?Ht:jt)(t)):this.node().textContent}function Kt(){this.innerHTML=""}function qt(t){return function(){this.innerHTML=t}}function Yt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Qe(t){return arguments.length?this.each(t==null?Kt:(typeof t=="function"?Yt:qt)(t)):this.node().innerHTML}function Qt(){this.nextSibling&&this.parentNode.appendChild(this)}function Ze(){return this.each(Qt)}function Zt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xe(){return this.each(Zt)}function Xt(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===k&&e.documentElement.namespaceURI===k?e.createElement(t):e.createElementNS(i,t)}}function ei(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function U(t){var e=M(t);return(e.local?ei:Xt)(e)}function et(t){var e=typeof t=="function"?t:U(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ti(){return null}function tt(t,e){var i=typeof t=="function"?t:U(t),n=e==null?ti:typeof e=="function"?e:D(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function ii(){var t=this.parentNode;t&&t.removeChild(this)}function it(){return this.each(ii)}function ni(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ri(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nt(t){return this.select(t?ri:ni)}function rt(t){return arguments.length?this.property("__data__",t):this.node().__data__}function oi(t){return function(e){t.call(this,e,this.__data__)}}function si(t){return t.trim().split(/^|\s+/).map(function(e){var i="",n=e.indexOf(".");return n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),{type:e,name:i}})}function ai(t){return function(){var e=this.__on;if(e){for(var i=0,n=-1,r=e.length,o;i<r;++i)o=e[i],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function li(t,e,i){return function(){var n=this.__on,r,o=oi(e);if(n){for(var s=0,a=n.length;s<a;++s)if((r=n[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=i),r.value=e;return}}this.addEventListener(t.type,o,i),r={type:t.type,name:t.name,value:e,listener:o,options:i},n?n.push(r):this.__on=[r]}}function ot(t,e,i){var n=si(t+""),r,o=n.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,p;l<c;++l)for(r=0,p=a[l];r<o;++r)if((s=n[r]).type===p.type&&s.name===p.name)return p.value}return}for(a=e?li:ai,r=0;r<o;++r)this.each(a(n[r],e,i));return this}function st(t,e,i){var n=G(t),r=n.CustomEvent;typeof r=="function"?r=new r(e,i):(r=n.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ci(t,e){return function(){return st(this,t,e)}}function ui(t,e){return function(){return st(this,t,e.apply(this,arguments))}}function at(t,e){return this.each((typeof e=="function"?ui:ci)(t,e))}function*lt(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,o=n.length,s;r<o;++r)(s=n[r])&&(yield s)}var P=[null];function m(t,e){this._groups=t,this._parents=e}function ct(){return new m([[document.documentElement]],P)}function di(){return this}m.prototype=ct.prototype={constructor:m,select:we,selectAll:Te,selectChild:be,selectChildren:Ae,filter:Ee,data:De,enter:Ne,exit:Ie,join:Ce,merge:Me,selection:di,order:Pe,sort:Le,call:Fe,nodes:Je,node:Oe,size:Be,empty:ke,each:Ge,attr:Ue,style:$e,property:Ve,classed:qe,text:Ye,html:Qe,raise:Ze,lower:Xe,append:et,insert:tt,remove:it,clone:nt,datum:rt,on:ot,dispatch:at,[Symbol.iterator]:lt};var hi=ct;function L(t){return typeof t=="string"?new m([[document.querySelector(t)]],[document.documentElement]):new m([[t]],P)}function fi(t){return typeof t=="string"?new m([document.querySelectorAll(t)],[document.documentElement]):new m([I(t)],P)}function ut(t){let e;for(;e=t.sourceEvent;)t=e;return t}function pi(t,e){if(t=ut(t),e===void 0&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}var X=class{constructor(){this._bufferSize=1,this._isPrefaceViewSubject=new E(this._bufferSize),this._isPrefaceViewStream$=this._isPrefaceViewSubject.asObservable(),this._isRowTableViewSubject=new E(this._bufferSize),this._isRowTableViewStream$=this._isRowTableViewSubject.asObservable(),this._selectedEditionComplexSubject=new E(this._bufferSize),this._selectedEditionComplexStream$=this._selectedEditionComplexSubject.asObservable(),this._selectedEditionSeriesSubject=new E(this._bufferSize),this._selectedEditionSeriesStream$=this._selectedEditionSeriesSubject.asObservable(),this._selectedEditionSectionSubject=new E(this._bufferSize),this._selectedEditionSectionStream$=this._selectedEditionSectionSubject.asObservable()}getSelectedEditionComplex(){return this._selectedEditionComplexStream$}updateSelectedEditionComplex(e){this._selectedEditionComplexSubject.next(e)}clearSelectedEditionComplex(){this._selectedEditionComplexSubject.next(null)}getEditionOutline(){return J}getEditionSeriesById(e){return J.find(i=>i.series.route===e)}getEditionSectionById(e,i){return this.getEditionSeriesById(e).sections.find(r=>r.section.route===i)}getSelectedEditionSeries(){return this._selectedEditionSeriesStream$}updateSelectedEditionSeries(e){this._selectedEditionSeriesSubject.next(e)}clearSelectedEditionSeries(){this._selectedEditionSeriesSubject.next(null)}getSelectedEditionSection(){return this._selectedEditionSectionStream$}updateSelectedEditionSection(e){this._selectedEditionSectionSubject.next(e)}clearSelectedEditionSection(){this._selectedEditionSectionSubject.next(null)}getIsPrefaceView(){return this._isPrefaceViewStream$}updateIsPrefaceView(e){this._isPrefaceViewSubject.next(e)}clearIsPrefaceView(){this._isPrefaceViewSubject.next(null)}getIsRowTableView(){return this._isRowTableViewStream$}updateIsRowTableView(e){this._isRowTableViewSubject.next(e)}clearIsRowTableView(){this._isRowTableViewSubject.next(null)}};X=w([T({providedIn:"root"})],X);function _i(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function dt(t,e){return fetch(t,e).then(_i)}function ee(t){return(e,i)=>dt(e,i).then(n=>new DOMParser().parseFromString(n,t))}var gi=ee("application/xml"),xi=ee("text/html"),te=ee("image/svg+xml");var ie=class{constructor(){this.overlayFillColor="orange",this.overlayHoverFillColor="tomato",this.overlayTransparentFillColor="transparent",this.overlaySelectionFillColor="green",this.linkBoxFillColor="#dddddd",this.linkBoxHoverFillColor="#eeeeee",this._overlayBoxesOpacity=.3,this._overlayBoxAdditionalSpace=5.5,this._overlayBoxCornerRadius=2,this._suppliedClasses=new Map,this._suppliedClassesLabelLookup=new Map([["foliation","Blattangabe"],["staffN","Systemangabe"],["measureN","Taktzahlen"],["clef","Schl\xFCssel"],["clef_key","Schl\xFCssel mit Tonart"],["key","Tonart"],["accid","Akzidenzien"],["hyphen","Silbentrennung"]])}createSvg(e,i,n){return le(this,null,function*(){if(!e||!i||!n)return;let o=(yield this._fetchSvgFile(e)).getElementsByTagName("svg")[0],s=this._getViewBox(o);for(;o.firstChild;)n.appendChild(o.firstChild);return i.appendChild(n),L(i).attr("width",s.svgWidth).attr("height",s.svgHeight).attr("viewBox",s.viewBox).attr("preserveAspectRatio","xMidYMid meet").attr("version","1.1").attr("xmlns","https://www.w3.org/2000/svg").attr("xlink","https://www.w3.org/1999/xlink")})}createOverlayGroup(e,i,n,r){if(!e||!i)return;let o=this.getD3SelectionById(e,i);return o.append("g").attr("class",`${r}-overlay-group`),o.select(`g.${r}-overlay-group`).append("rect").attr("width",n.width+this._overlayBoxAdditionalSpace*2).attr("height",n.height+this._overlayBoxAdditionalSpace*2).attr("x",n.x-this._overlayBoxAdditionalSpace).attr("y",n.y-this._overlayBoxAdditionalSpace).attr("rx",this._overlayBoxCornerRadius).attr("fill",this.overlayFillColor).attr("opacity",this._overlayBoxesOpacity).attr("class",`${r}-overlay-group-box`)}fillD3SelectionWithColor(e,i){!e||!i||e.attr("fill",i)}getContainerDimensions(e){if(!e)return{width:void 0,height:void 0};let i=e.nativeElement.clientWidth,n=e.nativeElement.clientHeight;return{width:i,height:n}}getD3SelectionById(e,i){if(!(!e||!i))return e.select("#"+i)}getGroupsBySelector(e,i){if(e)return e.selectAll("g."+i)}getOverlayGroupRectSelection(e,i,n){return!e||!i||!n?void 0:this.getD3SelectionById(e,i).select(`rect.${n}-overlay-group-box`)}getSuppliedClasses(e){return e?(this._suppliedClasses=new Map,this.getGroupsBySelector(e,"supplied").each((n,r,o)=>{let a=L(o[r]).attr("class").split(" "),l=a[a.indexOf("supplied")+1];if(l){let c=this._suppliedClassesLabelLookup.get(l)||l;this._suppliedClasses.has(c)||this._suppliedClasses.set(c,!0)}}),this._suppliedClasses):void 0}toggleSuppliedClassOpacity(e,i,n){if(!e)return;let r=Array.from(this._suppliedClassesLabelLookup.entries()).find(([l,c])=>c===i)?.[0]||i,o=r?`supplied.${r}`:"supplied",s=this.getGroupsBySelector(e,o),a=n?0:1;s.style("opacity",a)}updateTkkOverlayColor(e,i,n){let r=this._getTkkOverlayColor(e,n);this.fillD3SelectionWithColor(i,r)}_fetchSvgFile(e){return te(e)}_getTkkOverlayColor(e,i){return e?i===W.transparent?this.overlayTransparentFillColor:e.isSelected?this.overlaySelectionFillColor:i===W.hover?this.overlayHoverFillColor:this.overlayFillColor:this.overlayFillColor}_getViewBox(e){let n=L(e).attr("viewBox").split(" "),r=+n[2],o=+n[3];return new ye(r,o)}};ie=w([T({providedIn:"root"})],ie);export{ft as a,pt as b,mt as c,H as d,K as e,M as f,D as g,q as h,Y as i,We as j,hi as k,L as l,pi as m,fi as n,ie as o,X as p};
