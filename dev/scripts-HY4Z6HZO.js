(function(P){typeof exports=="object"&&typeof module<"u"?module.exports=P():typeof define=="function"&&define.amd?define([],P):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).rdfstore=P()})(function(){var define,module,exports;return function P(ee,X,N){function l(e,r){if(!X[e]){if(!ee[e]){var o=typeof require=="function"&&require;if(!r&&o)return o(e,!0);if(E)return E(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var c=X[e]={exports:{}};ee[e][0].call(c.exports,function(v){return l(ee[e][1][v]||v)},c,c.exports,P,ee,X,N)}return X[e].exports}for(var E=typeof require=="function"&&require,u=0;u<N.length;u++)l(N[u]);return l}({1:[function(P,ee,X){(function(N){(function(){"use strict";var l=P("possible-typed-array-names"),E=typeof globalThis>"u"?N:globalThis;ee.exports=function(){for(var u=[],e=0;e<l.length;e++)typeof E[l[e]]=="function"&&(u[u.length]=l[e]);return u}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"possible-typed-array-names":74}],2:[function(P,ee,X){"use strict";X.byteLength=function(s){var c=r(s),v=c[0],b=c[1];return 3*(v+b)/4-b},X.toByteArray=function(s){var c,v,b=r(s),d=b[0],g=b[1],f=new E(function(j,D,A){return 3*(D+A)/4-A}(0,d,g)),O=0,I=g>0?d-4:d;for(v=0;v<I;v+=4)c=l[s.charCodeAt(v)]<<18|l[s.charCodeAt(v+1)]<<12|l[s.charCodeAt(v+2)]<<6|l[s.charCodeAt(v+3)],f[O++]=c>>16&255,f[O++]=c>>8&255,f[O++]=255&c;return g===2&&(c=l[s.charCodeAt(v)]<<2|l[s.charCodeAt(v+1)]>>4,f[O++]=255&c),g===1&&(c=l[s.charCodeAt(v)]<<10|l[s.charCodeAt(v+1)]<<4|l[s.charCodeAt(v+2)]>>2,f[O++]=c>>8&255,f[O++]=255&c),f},X.fromByteArray=function(s){for(var c,v=s.length,b=v%3,d=[],g=16383,f=0,O=v-b;f<O;f+=g)d.push(o(s,f,f+g>O?O:f+g));return b===1?(c=s[v-1],d.push(N[c>>2]+N[c<<4&63]+"==")):b===2&&(c=(s[v-2]<<8)+s[v-1],d.push(N[c>>10]+N[c>>4&63]+N[c<<2&63]+"=")),d.join("")};for(var N=[],l=[],E=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)N[e]=u[e],l[u.charCodeAt(e)]=e;function r(s){var c=s.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=s.indexOf("=");return v===-1&&(v=c),[v,v===c?0:4-v%4]}function o(s,c,v){for(var b,d,g=[],f=c;f<v;f+=3)b=(s[f]<<16&16711680)+(s[f+1]<<8&65280)+(255&s[f+2]),g.push(N[(d=b)>>18&63]+N[d>>12&63]+N[d>>6&63]+N[63&d]);return g.join("")}l[45]=62,l[95]=63},{}],3:[function(P,ee,X){},{}],4:[function(P,ee,X){arguments[4][3][0].apply(X,arguments)},{dup:3}],5:[function(P,ee,X){ee.exports=function(N){return N&&typeof N=="object"&&typeof N.copy=="function"&&typeof N.fill=="function"&&typeof N.readUInt8=="function"}},{}],6:[function(P,ee,X){"use strict";var N=P("is-arguments"),l=P("is-generator-function"),E=P("which-typed-array"),u=P("is-typed-array");function e(U){return U.call.bind(U)}var r=typeof BigInt<"u",o=typeof Symbol<"u",s=e(Object.prototype.toString),c=e(Number.prototype.valueOf),v=e(String.prototype.valueOf),b=e(Boolean.prototype.valueOf);if(r)var d=e(BigInt.prototype.valueOf);if(o)var g=e(Symbol.prototype.valueOf);function f(U,W){if(typeof U!="object")return!1;try{return W(U),!0}catch{return!1}}function O(U){return s(U)==="[object Map]"}function I(U){return s(U)==="[object Set]"}function j(U){return s(U)==="[object WeakMap]"}function D(U){return s(U)==="[object WeakSet]"}function A(U){return s(U)==="[object ArrayBuffer]"}function C(U){return typeof ArrayBuffer<"u"&&(A.working?A(U):U instanceof ArrayBuffer)}function Q(U){return s(U)==="[object DataView]"}function q(U){return typeof DataView<"u"&&(Q.working?Q(U):U instanceof DataView)}X.isArgumentsObject=N,X.isGeneratorFunction=l,X.isTypedArray=u,X.isPromise=function(U){return typeof Promise<"u"&&U instanceof Promise||U!==null&&typeof U=="object"&&typeof U.then=="function"&&typeof U.catch=="function"},X.isArrayBufferView=function(U){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(U):u(U)||q(U)},X.isUint8Array=function(U){return E(U)==="Uint8Array"},X.isUint8ClampedArray=function(U){return E(U)==="Uint8ClampedArray"},X.isUint16Array=function(U){return E(U)==="Uint16Array"},X.isUint32Array=function(U){return E(U)==="Uint32Array"},X.isInt8Array=function(U){return E(U)==="Int8Array"},X.isInt16Array=function(U){return E(U)==="Int16Array"},X.isInt32Array=function(U){return E(U)==="Int32Array"},X.isFloat32Array=function(U){return E(U)==="Float32Array"},X.isFloat64Array=function(U){return E(U)==="Float64Array"},X.isBigInt64Array=function(U){return E(U)==="BigInt64Array"},X.isBigUint64Array=function(U){return E(U)==="BigUint64Array"},O.working=typeof Map<"u"&&O(new Map),X.isMap=function(U){return typeof Map<"u"&&(O.working?O(U):U instanceof Map)},I.working=typeof Set<"u"&&I(new Set),X.isSet=function(U){return typeof Set<"u"&&(I.working?I(U):U instanceof Set)},j.working=typeof WeakMap<"u"&&j(new WeakMap),X.isWeakMap=function(U){return typeof WeakMap<"u"&&(j.working?j(U):U instanceof WeakMap)},D.working=typeof WeakSet<"u"&&D(new WeakSet),X.isWeakSet=function(U){return D(U)},A.working=typeof ArrayBuffer<"u"&&A(new ArrayBuffer),X.isArrayBuffer=C,Q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Q(new DataView(new ArrayBuffer(1),0,1)),X.isDataView=q;var H=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function B(U){return s(U)==="[object SharedArrayBuffer]"}function Z(U){return H!==void 0&&(B.working===void 0&&(B.working=B(new H)),B.working?B(U):U instanceof H)}function se(U){return f(U,c)}function ae(U){return f(U,v)}function ye(U){return f(U,b)}function fe(U){return r&&f(U,d)}function z(U){return o&&f(U,g)}X.isSharedArrayBuffer=Z,X.isAsyncFunction=function(U){return s(U)==="[object AsyncFunction]"},X.isMapIterator=function(U){return s(U)==="[object Map Iterator]"},X.isSetIterator=function(U){return s(U)==="[object Set Iterator]"},X.isGeneratorObject=function(U){return s(U)==="[object Generator]"},X.isWebAssemblyCompiledModule=function(U){return s(U)==="[object WebAssembly.Module]"},X.isNumberObject=se,X.isStringObject=ae,X.isBooleanObject=ye,X.isBigIntObject=fe,X.isSymbolObject=z,X.isBoxedPrimitive=function(U){return se(U)||ae(U)||ye(U)||fe(U)||z(U)},X.isAnyArrayBuffer=function(U){return typeof Uint8Array<"u"&&(C(U)||Z(U))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(U){Object.defineProperty(X,U,{enumerable:!1,value:function(){throw new Error(U+" is not supported in userland")}})})},{"is-arguments":37,"is-generator-function":39,"is-typed-array":40,"which-typed-array":134}],7:[function(P,ee,X){(function(N){(function(){var l=Object.getOwnPropertyDescriptors||function(z){for(var U=Object.keys(z),W={},K=0;K<U.length;K++)W[U[K]]=Object.getOwnPropertyDescriptor(z,U[K]);return W},E=/%[sdj%]/g;X.format=function(z){if(!j(z)){for(var U=[],W=0;W<arguments.length;W++)U.push(o(arguments[W]));return U.join(" ")}W=1;for(var K=arguments,Y=K.length,le=String(z).replace(E,function(ue){if(ue==="%%")return"%";if(W>=Y)return ue;switch(ue){case"%s":return String(K[W++]);case"%d":return Number(K[W++]);case"%j":try{return JSON.stringify(K[W++])}catch{return"[Circular]"}default:return ue}}),re=K[W];W<Y;re=K[++W])O(re)||!C(re)?le+=" "+re:le+=" "+o(re);return le},X.deprecate=function(z,U){if(N!==void 0&&N.noDeprecation===!0)return z;if(N===void 0)return function(){return X.deprecate(z,U).apply(this,arguments)};var W=!1;return function(){if(!W){if(N.throwDeprecation)throw new Error(U);N.traceDeprecation?console.trace(U):console.error(U),W=!0}return z.apply(this,arguments)}};var u={},e=/^$/;if(N.env.NODE_DEBUG){var r=N.env.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+r+"$","i")}function o(z,U){var W={seen:[],stylize:c};return arguments.length>=3&&(W.depth=arguments[2]),arguments.length>=4&&(W.colors=arguments[3]),f(U)?W.showHidden=U:U&&X._extend(W,U),D(W.showHidden)&&(W.showHidden=!1),D(W.depth)&&(W.depth=2),D(W.colors)&&(W.colors=!1),D(W.customInspect)&&(W.customInspect=!0),W.colors&&(W.stylize=s),v(W,z,W.depth)}function s(z,U){var W=o.styles[U];return W?"\x1B["+o.colors[W][0]+"m"+z+"\x1B["+o.colors[W][1]+"m":z}function c(z,U){return z}function v(z,U,W){if(z.customInspect&&U&&H(U.inspect)&&U.inspect!==X.inspect&&(!U.constructor||U.constructor.prototype!==U)){var K=U.inspect(W,z);return j(K)||(K=v(z,K,W)),K}var Y=function(w,L){if(D(L))return w.stylize("undefined","undefined");if(j(L)){var G="'"+JSON.stringify(L).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return w.stylize(G,"string")}if(I(L))return w.stylize(""+L,"number");if(f(L))return w.stylize(""+L,"boolean");if(O(L))return w.stylize("null","null")}(z,U);if(Y)return Y;var le=Object.keys(U),re=function(w){var L={};return w.forEach(function(G,te){L[G]=!0}),L}(le);if(z.showHidden&&(le=Object.getOwnPropertyNames(U)),q(U)&&(le.indexOf("message")>=0||le.indexOf("description")>=0))return b(U);if(le.length===0){if(H(U)){var ue=U.name?": "+U.name:"";return z.stylize("[Function"+ue+"]","special")}if(A(U))return z.stylize(RegExp.prototype.toString.call(U),"regexp");if(Q(U))return z.stylize(Date.prototype.toString.call(U),"date");if(q(U))return b(U)}var pe,ge="",we=!1,$=["{","}"];return g(U)&&(we=!0,$=["[","]"]),H(U)&&(ge=" [Function"+(U.name?": "+U.name:"")+"]"),A(U)&&(ge=" "+RegExp.prototype.toString.call(U)),Q(U)&&(ge=" "+Date.prototype.toUTCString.call(U)),q(U)&&(ge=" "+b(U)),le.length!==0||we&&U.length!=0?W<0?A(U)?z.stylize(RegExp.prototype.toString.call(U),"regexp"):z.stylize("[Object]","special"):(z.seen.push(U),pe=we?function(w,L,G,te,ne){for(var ie=[],he=0,be=L.length;he<be;++he)ae(L,String(he))?ie.push(d(w,L,G,te,String(he),!0)):ie.push("");return ne.forEach(function(_e){_e.match(/^\d+$/)||ie.push(d(w,L,G,te,_e,!0))}),ie}(z,U,W,re,le):le.map(function(w){return d(z,U,W,re,w,we)}),z.seen.pop(),function(w,L,G){var te=w.reduce(function(ne,ie){return ie.indexOf(`
`)>=0,ne+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0);return te>60?G[0]+(L===""?"":L+`
 `)+" "+w.join(`,
  `)+" "+G[1]:G[0]+L+" "+w.join(", ")+" "+G[1]}(pe,ge,$)):$[0]+ge+$[1]}function b(z){return"["+Error.prototype.toString.call(z)+"]"}function d(z,U,W,K,Y,le){var re,ue,pe;if((pe=Object.getOwnPropertyDescriptor(U,Y)||{value:U[Y]}).get?ue=pe.set?z.stylize("[Getter/Setter]","special"):z.stylize("[Getter]","special"):pe.set&&(ue=z.stylize("[Setter]","special")),ae(K,Y)||(re="["+Y+"]"),ue||(z.seen.indexOf(pe.value)<0?(ue=O(W)?v(z,pe.value,null):v(z,pe.value,W-1)).indexOf(`
`)>-1&&(ue=le?ue.split(`
`).map(function(ge){return"  "+ge}).join(`
`).slice(2):`
`+ue.split(`
`).map(function(ge){return"   "+ge}).join(`
`)):ue=z.stylize("[Circular]","special")),D(re)){if(le&&Y.match(/^\d+$/))return ue;(re=JSON.stringify(""+Y)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.slice(1,-1),re=z.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=z.stylize(re,"string"))}return re+": "+ue}function g(z){return Array.isArray(z)}function f(z){return typeof z=="boolean"}function O(z){return z===null}function I(z){return typeof z=="number"}function j(z){return typeof z=="string"}function D(z){return z===void 0}function A(z){return C(z)&&B(z)==="[object RegExp]"}function C(z){return typeof z=="object"&&z!==null}function Q(z){return C(z)&&B(z)==="[object Date]"}function q(z){return C(z)&&(B(z)==="[object Error]"||z instanceof Error)}function H(z){return typeof z=="function"}function B(z){return Object.prototype.toString.call(z)}function Z(z){return z<10?"0"+z.toString(10):z.toString(10)}X.debuglog=function(z){if(z=z.toUpperCase(),!u[z])if(e.test(z)){var U=N.pid;u[z]=function(){var W=X.format.apply(X,arguments);console.error("%s %d: %s",z,U,W)}}else u[z]=function(){};return u[z]},X.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},X.types=P("./support/types"),X.isArray=g,X.isBoolean=f,X.isNull=O,X.isNullOrUndefined=function(z){return z==null},X.isNumber=I,X.isString=j,X.isSymbol=function(z){return typeof z=="symbol"},X.isUndefined=D,X.isRegExp=A,X.types.isRegExp=A,X.isObject=C,X.isDate=Q,X.types.isDate=Q,X.isError=q,X.types.isNativeError=q,X.isFunction=H,X.isPrimitive=function(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||z===void 0},X.isBuffer=P("./support/isBuffer");var se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ae(z,U){return Object.prototype.hasOwnProperty.call(z,U)}X.log=function(){var z,U;console.log("%s - %s",(z=new Date,U=[Z(z.getHours()),Z(z.getMinutes()),Z(z.getSeconds())].join(":"),[z.getDate(),se[z.getMonth()],U].join(" ")),X.format.apply(X,arguments))},X.inherits=P("inherits"),X._extend=function(z,U){if(!U||!C(U))return z;for(var W=Object.keys(U),K=W.length;K--;)z[W[K]]=U[W[K]];return z};var ye=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function fe(z,U){if(!z){var W=new Error("Promise was rejected with a falsy value");W.reason=z,z=W}return U(z)}X.promisify=function(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');if(ye&&z[ye]){var U;if(typeof(U=z[ye])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,ye,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var W,K,Y=new Promise(function(ue,pe){W=ue,K=pe}),le=[],re=0;re<arguments.length;re++)le.push(arguments[re]);le.push(function(ue,pe){ue?K(ue):W(pe)});try{z.apply(this,le)}catch(ue){K(ue)}return Y}return Object.setPrototypeOf(U,Object.getPrototypeOf(z)),ye&&Object.defineProperty(U,ye,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,l(z))},X.promisify.custom=ye,X.callbackify=function(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var W=[],K=0;K<arguments.length;K++)W.push(arguments[K]);var Y=W.pop();if(typeof Y!="function")throw new TypeError("The last argument must be of type Function");var le=this,re=function(){return Y.apply(le,arguments)};z.apply(this,W).then(function(ue){N.nextTick(re.bind(null,null,ue))},function(ue){N.nextTick(fe.bind(null,ue,re))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(z)),Object.defineProperties(U,l(z)),U}}).call(this)}).call(this,P("_process"))},{"./support/isBuffer":5,"./support/types":6,_process:75,inherits:36}],8:[function(P,ee,X){(function(N){(function(){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */"use strict";var l=P("base64-js"),E=P("ieee754");X.Buffer=r,X.SlowBuffer=function(w){return+w!=w&&(w=0),r.alloc(+w)},X.INSPECT_MAX_BYTES=50;var u=2147483647;function e(w){if(w>u)throw new RangeError('The value "'+w+'" is invalid for option "size"');var L=new Uint8Array(w);return L.__proto__=r.prototype,L}function r(w,L,G){if(typeof w=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(w)}return o(w,L,G)}function o(w,L,G){if(typeof w=="string")return function(ie,he){if(typeof he=="string"&&he!==""||(he="utf8"),!r.isEncoding(he))throw new TypeError("Unknown encoding: "+he);var be=0|d(ie,he),_e=e(be),je=_e.write(ie,he);return je!==be&&(_e=_e.slice(0,je)),_e}(w,L);if(ArrayBuffer.isView(w))return v(w);if(w==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(we(w,ArrayBuffer)||w&&we(w.buffer,ArrayBuffer))return function(ie,he,be){if(he<0||ie.byteLength<he)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<he+(be||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return _e=he===void 0&&be===void 0?new Uint8Array(ie):be===void 0?new Uint8Array(ie,he):new Uint8Array(ie,he,be),_e.__proto__=r.prototype,_e}(w,L,G);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var te=w.valueOf&&w.valueOf();if(te!=null&&te!==w)return r.from(te,L,G);var ne=function(ie){if(r.isBuffer(ie)){var he=0|b(ie.length),be=e(he);return be.length===0||ie.copy(be,0,0,he),be}if(ie.length!==void 0)return typeof ie.length!="number"||$(ie.length)?e(0):v(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return v(ie.data)}(w);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return r.from(w[Symbol.toPrimitive]("string"),L,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}function s(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function c(w){return s(w),e(w<0?0:0|b(w))}function v(w){for(var L=w.length<0?0:0|b(w.length),G=e(L),te=0;te<L;te+=1)G[te]=255&w[te];return G}function b(w){if(w>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|w}function d(w,L){if(r.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||we(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);var G=w.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&G===0)return 0;for(var ne=!1;;)switch(L){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return ue(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return pe(w).length;default:if(ne)return te?-1:ue(w).length;L=(""+L).toLowerCase(),ne=!0}}function g(w,L,G){var te=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(L>>>=0))return"";for(w||(w="utf8");;)switch(w){case"hex":return ye(this,L,G);case"utf8":case"utf-8":return B(this,L,G);case"ascii":return se(this,L,G);case"latin1":case"binary":return ae(this,L,G);case"base64":return H(this,L,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,L,G);default:if(te)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),te=!0}}function f(w,L,G){var te=w[L];w[L]=w[G],w[G]=te}function O(w,L,G,te,ne){if(w.length===0)return-1;if(typeof G=="string"?(te=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),$(G=+G)&&(G=ne?0:w.length-1),G<0&&(G=w.length+G),G>=w.length){if(ne)return-1;G=w.length-1}else if(G<0){if(!ne)return-1;G=0}if(typeof L=="string"&&(L=r.from(L,te)),r.isBuffer(L))return L.length===0?-1:I(w,L,G,te,ne);if(typeof L=="number")return L&=255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(w,L,G):Uint8Array.prototype.lastIndexOf.call(w,L,G):I(w,[L],G,te,ne);throw new TypeError("val must be string, number or Buffer")}function I(w,L,G,te,ne){var ie,he=1,be=w.length,_e=L.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(w.length<2||L.length<2)return-1;he=2,be/=2,_e/=2,G/=2}function je(Ne,Oe){return he===1?Ne[Oe]:Ne.readUInt16BE(Oe*he)}if(ne){var Re=-1;for(ie=G;ie<be;ie++)if(je(w,ie)===je(L,Re===-1?0:ie-Re)){if(Re===-1&&(Re=ie),ie-Re+1===_e)return Re*he}else Re!==-1&&(ie-=ie-Re),Re=-1}else for(G+_e>be&&(G=be-_e),ie=G;ie>=0;ie--){for(var Ae=!0,xe=0;xe<_e;xe++)if(je(w,ie+xe)!==je(L,xe)){Ae=!1;break}if(Ae)return ie}return-1}function j(w,L,G,te){G=Number(G)||0;var ne=w.length-G;te?(te=Number(te))>ne&&(te=ne):te=ne;var ie=L.length;te>ie/2&&(te=ie/2);for(var he=0;he<te;++he){var be=parseInt(L.substr(2*he,2),16);if($(be))return he;w[G+he]=be}return he}function D(w,L,G,te){return ge(ue(L,w.length-G),w,G,te)}function A(w,L,G,te){return ge(function(ne){for(var ie=[],he=0;he<ne.length;++he)ie.push(255&ne.charCodeAt(he));return ie}(L),w,G,te)}function C(w,L,G,te){return A(w,L,G,te)}function Q(w,L,G,te){return ge(pe(L),w,G,te)}function q(w,L,G,te){return ge(function(ne,ie){for(var he,be,_e,je=[],Re=0;Re<ne.length&&!((ie-=2)<0);++Re)be=(he=ne.charCodeAt(Re))>>8,_e=he%256,je.push(_e),je.push(be);return je}(L,w.length-G),w,G,te)}function H(w,L,G){return L===0&&G===w.length?l.fromByteArray(w):l.fromByteArray(w.slice(L,G))}function B(w,L,G){G=Math.min(w.length,G);for(var te=[],ne=L;ne<G;){var ie,he,be,_e,je=w[ne],Re=null,Ae=je>239?4:je>223?3:je>191?2:1;if(ne+Ae<=G)switch(Ae){case 1:je<128&&(Re=je);break;case 2:(192&(ie=w[ne+1]))==128&&(_e=(31&je)<<6|63&ie)>127&&(Re=_e);break;case 3:ie=w[ne+1],he=w[ne+2],(192&ie)==128&&(192&he)==128&&(_e=(15&je)<<12|(63&ie)<<6|63&he)>2047&&(_e<55296||_e>57343)&&(Re=_e);break;case 4:ie=w[ne+1],he=w[ne+2],be=w[ne+3],(192&ie)==128&&(192&he)==128&&(192&be)==128&&(_e=(15&je)<<18|(63&ie)<<12|(63&he)<<6|63&be)>65535&&_e<1114112&&(Re=_e)}Re===null?(Re=65533,Ae=1):Re>65535&&(Re-=65536,te.push(Re>>>10&1023|55296),Re=56320|1023&Re),te.push(Re),ne+=Ae}return function(xe){var Ne=xe.length;if(Ne<=Z)return String.fromCharCode.apply(String,xe);for(var Oe="",Ge=0;Ge<Ne;)Oe+=String.fromCharCode.apply(String,xe.slice(Ge,Ge+=Z));return Oe}(te)}X.kMaxLength=u,r.TYPED_ARRAY_SUPPORT=function(){try{var w=new Uint8Array(1);return w.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},w.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(w,L,G){return o(w,L,G)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(w,L,G){return function(te,ne,ie){return s(te),te<=0?e(te):ne!==void 0?typeof ie=="string"?e(te).fill(ne,ie):e(te).fill(ne):e(te)}(w,L,G)},r.allocUnsafe=function(w){return c(w)},r.allocUnsafeSlow=function(w){return c(w)},r.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==r.prototype},r.compare=function(w,L){if(we(w,Uint8Array)&&(w=r.from(w,w.offset,w.byteLength)),we(L,Uint8Array)&&(L=r.from(L,L.offset,L.byteLength)),!r.isBuffer(w)||!r.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===L)return 0;for(var G=w.length,te=L.length,ne=0,ie=Math.min(G,te);ne<ie;++ne)if(w[ne]!==L[ne]){G=w[ne],te=L[ne];break}return G<te?-1:te<G?1:0},r.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(w,L){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return r.alloc(0);var G;if(L===void 0)for(L=0,G=0;G<w.length;++G)L+=w[G].length;var te=r.allocUnsafe(L),ne=0;for(G=0;G<w.length;++G){var ie=w[G];if(we(ie,Uint8Array)&&(ie=r.from(ie)),!r.isBuffer(ie))throw new TypeError('"list" argument must be an Array of Buffers');ie.copy(te,ne),ne+=ie.length}return te},r.byteLength=d,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var w=this.length;if(w%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<w;L+=2)f(this,L,L+1);return this},r.prototype.swap32=function(){var w=this.length;if(w%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<w;L+=4)f(this,L,L+3),f(this,L+1,L+2);return this},r.prototype.swap64=function(){var w=this.length;if(w%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<w;L+=8)f(this,L,L+7),f(this,L+1,L+6),f(this,L+2,L+5),f(this,L+3,L+4);return this},r.prototype.toString=function(){var w=this.length;return w===0?"":arguments.length===0?B(this,0,w):g.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(w){if(!r.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||r.compare(this,w)===0},r.prototype.inspect=function(){var w="",L=X.INSPECT_MAX_BYTES;return w=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(w+=" ... "),"<Buffer "+w+">"},r.prototype.compare=function(w,L,G,te,ne){if(we(w,Uint8Array)&&(w=r.from(w,w.offset,w.byteLength)),!r.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(L===void 0&&(L=0),G===void 0&&(G=w?w.length:0),te===void 0&&(te=0),ne===void 0&&(ne=this.length),L<0||G>w.length||te<0||ne>this.length)throw new RangeError("out of range index");if(te>=ne&&L>=G)return 0;if(te>=ne)return-1;if(L>=G)return 1;if(this===w)return 0;for(var ie=(ne>>>=0)-(te>>>=0),he=(G>>>=0)-(L>>>=0),be=Math.min(ie,he),_e=this.slice(te,ne),je=w.slice(L,G),Re=0;Re<be;++Re)if(_e[Re]!==je[Re]){ie=_e[Re],he=je[Re];break}return ie<he?-1:he<ie?1:0},r.prototype.includes=function(w,L,G){return this.indexOf(w,L,G)!==-1},r.prototype.indexOf=function(w,L,G){return O(this,w,L,G,!0)},r.prototype.lastIndexOf=function(w,L,G){return O(this,w,L,G,!1)},r.prototype.write=function(w,L,G,te){if(L===void 0)te="utf8",G=this.length,L=0;else if(G===void 0&&typeof L=="string")te=L,G=this.length,L=0;else{if(!isFinite(L))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");L>>>=0,isFinite(G)?(G>>>=0,te===void 0&&(te="utf8")):(te=G,G=void 0)}var ne=this.length-L;if((G===void 0||G>ne)&&(G=ne),w.length>0&&(G<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var ie=!1;;)switch(te){case"hex":return j(this,w,L,G);case"utf8":case"utf-8":return D(this,w,L,G);case"ascii":return A(this,w,L,G);case"latin1":case"binary":return C(this,w,L,G);case"base64":return Q(this,w,L,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,w,L,G);default:if(ie)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ie=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;function se(w,L,G){var te="";G=Math.min(w.length,G);for(var ne=L;ne<G;++ne)te+=String.fromCharCode(127&w[ne]);return te}function ae(w,L,G){var te="";G=Math.min(w.length,G);for(var ne=L;ne<G;++ne)te+=String.fromCharCode(w[ne]);return te}function ye(w,L,G){var te=w.length;(!L||L<0)&&(L=0),(!G||G<0||G>te)&&(G=te);for(var ne="",ie=L;ie<G;++ie)ne+=re(w[ie]);return ne}function fe(w,L,G){for(var te=w.slice(L,G),ne="",ie=0;ie<te.length;ie+=2)ne+=String.fromCharCode(te[ie]+256*te[ie+1]);return ne}function z(w,L,G){if(w%1!=0||w<0)throw new RangeError("offset is not uint");if(w+L>G)throw new RangeError("Trying to access beyond buffer length")}function U(w,L,G,te,ne,ie){if(!r.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>ne||L<ie)throw new RangeError('"value" argument is out of bounds');if(G+te>w.length)throw new RangeError("Index out of range")}function W(w,L,G,te,ne,ie){if(G+te>w.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function K(w,L,G,te,ne){return L=+L,G>>>=0,ne||W(w,0,G,4),E.write(w,L,G,te,23,4),G+4}function Y(w,L,G,te,ne){return L=+L,G>>>=0,ne||W(w,0,G,8),E.write(w,L,G,te,52,8),G+8}r.prototype.slice=function(w,L){var G=this.length;(w=~~w)<0?(w+=G)<0&&(w=0):w>G&&(w=G),(L=L===void 0?G:~~L)<0?(L+=G)<0&&(L=0):L>G&&(L=G),L<w&&(L=w);var te=this.subarray(w,L);return te.__proto__=r.prototype,te},r.prototype.readUIntLE=function(w,L,G){w>>>=0,L>>>=0,G||z(w,L,this.length);for(var te=this[w],ne=1,ie=0;++ie<L&&(ne*=256);)te+=this[w+ie]*ne;return te},r.prototype.readUIntBE=function(w,L,G){w>>>=0,L>>>=0,G||z(w,L,this.length);for(var te=this[w+--L],ne=1;L>0&&(ne*=256);)te+=this[w+--L]*ne;return te},r.prototype.readUInt8=function(w,L){return w>>>=0,L||z(w,1,this.length),this[w]},r.prototype.readUInt16LE=function(w,L){return w>>>=0,L||z(w,2,this.length),this[w]|this[w+1]<<8},r.prototype.readUInt16BE=function(w,L){return w>>>=0,L||z(w,2,this.length),this[w]<<8|this[w+1]},r.prototype.readUInt32LE=function(w,L){return w>>>=0,L||z(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},r.prototype.readUInt32BE=function(w,L){return w>>>=0,L||z(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},r.prototype.readIntLE=function(w,L,G){w>>>=0,L>>>=0,G||z(w,L,this.length);for(var te=this[w],ne=1,ie=0;++ie<L&&(ne*=256);)te+=this[w+ie]*ne;return te>=(ne*=128)&&(te-=Math.pow(2,8*L)),te},r.prototype.readIntBE=function(w,L,G){w>>>=0,L>>>=0,G||z(w,L,this.length);for(var te=L,ne=1,ie=this[w+--te];te>0&&(ne*=256);)ie+=this[w+--te]*ne;return ie>=(ne*=128)&&(ie-=Math.pow(2,8*L)),ie},r.prototype.readInt8=function(w,L){return w>>>=0,L||z(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},r.prototype.readInt16LE=function(w,L){w>>>=0,L||z(w,2,this.length);var G=this[w]|this[w+1]<<8;return 32768&G?4294901760|G:G},r.prototype.readInt16BE=function(w,L){w>>>=0,L||z(w,2,this.length);var G=this[w+1]|this[w]<<8;return 32768&G?4294901760|G:G},r.prototype.readInt32LE=function(w,L){return w>>>=0,L||z(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},r.prototype.readInt32BE=function(w,L){return w>>>=0,L||z(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},r.prototype.readFloatLE=function(w,L){return w>>>=0,L||z(w,4,this.length),E.read(this,w,!0,23,4)},r.prototype.readFloatBE=function(w,L){return w>>>=0,L||z(w,4,this.length),E.read(this,w,!1,23,4)},r.prototype.readDoubleLE=function(w,L){return w>>>=0,L||z(w,8,this.length),E.read(this,w,!0,52,8)},r.prototype.readDoubleBE=function(w,L){return w>>>=0,L||z(w,8,this.length),E.read(this,w,!1,52,8)},r.prototype.writeUIntLE=function(w,L,G,te){w=+w,L>>>=0,G>>>=0,te||U(this,w,L,G,Math.pow(2,8*G)-1,0);var ne=1,ie=0;for(this[L]=255&w;++ie<G&&(ne*=256);)this[L+ie]=w/ne&255;return L+G},r.prototype.writeUIntBE=function(w,L,G,te){w=+w,L>>>=0,G>>>=0,te||U(this,w,L,G,Math.pow(2,8*G)-1,0);var ne=G-1,ie=1;for(this[L+ne]=255&w;--ne>=0&&(ie*=256);)this[L+ne]=w/ie&255;return L+G},r.prototype.writeUInt8=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,1,255,0),this[L]=255&w,L+1},r.prototype.writeUInt16LE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,2,65535,0),this[L]=255&w,this[L+1]=w>>>8,L+2},r.prototype.writeUInt16BE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,2,65535,0),this[L]=w>>>8,this[L+1]=255&w,L+2},r.prototype.writeUInt32LE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,4,4294967295,0),this[L+3]=w>>>24,this[L+2]=w>>>16,this[L+1]=w>>>8,this[L]=255&w,L+4},r.prototype.writeUInt32BE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,4,4294967295,0),this[L]=w>>>24,this[L+1]=w>>>16,this[L+2]=w>>>8,this[L+3]=255&w,L+4},r.prototype.writeIntLE=function(w,L,G,te){if(w=+w,L>>>=0,!te){var ne=Math.pow(2,8*G-1);U(this,w,L,G,ne-1,-ne)}var ie=0,he=1,be=0;for(this[L]=255&w;++ie<G&&(he*=256);)w<0&&be===0&&this[L+ie-1]!==0&&(be=1),this[L+ie]=(w/he|0)-be&255;return L+G},r.prototype.writeIntBE=function(w,L,G,te){if(w=+w,L>>>=0,!te){var ne=Math.pow(2,8*G-1);U(this,w,L,G,ne-1,-ne)}var ie=G-1,he=1,be=0;for(this[L+ie]=255&w;--ie>=0&&(he*=256);)w<0&&be===0&&this[L+ie+1]!==0&&(be=1),this[L+ie]=(w/he|0)-be&255;return L+G},r.prototype.writeInt8=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,1,127,-128),w<0&&(w=255+w+1),this[L]=255&w,L+1},r.prototype.writeInt16LE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,2,32767,-32768),this[L]=255&w,this[L+1]=w>>>8,L+2},r.prototype.writeInt16BE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,2,32767,-32768),this[L]=w>>>8,this[L+1]=255&w,L+2},r.prototype.writeInt32LE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,4,2147483647,-2147483648),this[L]=255&w,this[L+1]=w>>>8,this[L+2]=w>>>16,this[L+3]=w>>>24,L+4},r.prototype.writeInt32BE=function(w,L,G){return w=+w,L>>>=0,G||U(this,w,L,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[L]=w>>>24,this[L+1]=w>>>16,this[L+2]=w>>>8,this[L+3]=255&w,L+4},r.prototype.writeFloatLE=function(w,L,G){return K(this,w,L,!0,G)},r.prototype.writeFloatBE=function(w,L,G){return K(this,w,L,!1,G)},r.prototype.writeDoubleLE=function(w,L,G){return Y(this,w,L,!0,G)},r.prototype.writeDoubleBE=function(w,L,G){return Y(this,w,L,!1,G)},r.prototype.copy=function(w,L,G,te){if(!r.isBuffer(w))throw new TypeError("argument should be a Buffer");if(G||(G=0),te||te===0||(te=this.length),L>=w.length&&(L=w.length),L||(L=0),te>0&&te<G&&(te=G),te===G||w.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),w.length-L<te-G&&(te=w.length-L+G);var ne=te-G;if(this===w&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(L,G,te);else if(this===w&&G<L&&L<te)for(var ie=ne-1;ie>=0;--ie)w[ie+L]=this[ie+G];else Uint8Array.prototype.set.call(w,this.subarray(G,te),L);return ne},r.prototype.fill=function(w,L,G,te){if(typeof w=="string"){if(typeof L=="string"?(te=L,L=0,G=this.length):typeof G=="string"&&(te=G,G=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!r.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(w.length===1){var ne=w.charCodeAt(0);(te==="utf8"&&ne<128||te==="latin1")&&(w=ne)}}else typeof w=="number"&&(w&=255);if(L<0||this.length<L||this.length<G)throw new RangeError("Out of range index");if(G<=L)return this;var ie;if(L>>>=0,G=G===void 0?this.length:G>>>0,w||(w=0),typeof w=="number")for(ie=L;ie<G;++ie)this[ie]=w;else{var he=r.isBuffer(w)?w:r.from(w,te),be=he.length;if(be===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(ie=0;ie<G-L;++ie)this[ie+L]=he[ie%be]}return this};var le=/[^+/0-9A-Za-z-_]/g;function re(w){return w<16?"0"+w.toString(16):w.toString(16)}function ue(w,L){var G;L=L||1/0;for(var te=w.length,ne=null,ie=[],he=0;he<te;++he){if((G=w.charCodeAt(he))>55295&&G<57344){if(!ne){if(G>56319){(L-=3)>-1&&ie.push(239,191,189);continue}if(he+1===te){(L-=3)>-1&&ie.push(239,191,189);continue}ne=G;continue}if(G<56320){(L-=3)>-1&&ie.push(239,191,189),ne=G;continue}G=65536+(ne-55296<<10|G-56320)}else ne&&(L-=3)>-1&&ie.push(239,191,189);if(ne=null,G<128){if((L-=1)<0)break;ie.push(G)}else if(G<2048){if((L-=2)<0)break;ie.push(G>>6|192,63&G|128)}else if(G<65536){if((L-=3)<0)break;ie.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;ie.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return ie}function pe(w){return l.toByteArray(function(L){if((L=(L=L.split("=")[0]).trim().replace(le,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L}(w))}function ge(w,L,G,te){for(var ne=0;ne<te&&!(ne+G>=L.length||ne>=w.length);++ne)L[ne+G]=w[ne];return ne}function we(w,L){return w instanceof L||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===L.name}function $(w){return w!=w}}).call(this)}).call(this,P("buffer").Buffer)},{"base64-js":2,buffer:8,ieee754:35}],9:[function(P,ee,X){ee.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],10:[function(P,ee,X){"use strict";var N=P("get-intrinsic"),l=P("./"),E=l(N("String.prototype.indexOf"));ee.exports=function(u,e){var r=N(u,!!e);return typeof r=="function"&&E(u,".prototype.")>-1?l(r):r}},{"./":11,"get-intrinsic":26}],11:[function(P,ee,X){"use strict";var N=P("function-bind"),l=P("get-intrinsic"),E=P("set-function-length"),u=P("es-errors/type"),e=l("%Function.prototype.apply%"),r=l("%Function.prototype.call%"),o=l("%Reflect.apply%",!0)||N.call(r,e),s=P("es-define-property"),c=l("%Math.max%");ee.exports=function(b){if(typeof b!="function")throw new u("a function is required");var d=o(N,r,arguments);return E(d,1+c(0,b.length-(arguments.length-1)),!0)};var v=function(){return o(N,e,arguments)};s?s(ee.exports,"apply",{value:v}):ee.exports.apply=v},{"es-define-property":14,"es-errors/type":20,"function-bind":25,"get-intrinsic":26,"set-function-length":93}],12:[function(P,ee,X){"use strict";ee.exports=function N(l){return l===null||typeof l!="object"||l.toJSON!=null?JSON.stringify(l):Array.isArray(l)?"["+l.reduce((E,u,e)=>E+(e===0?"":",")+N(u===void 0||typeof u=="symbol"?null:u),"")+"]":"{"+Object.keys(l).sort().reduce((E,u,e)=>l[u]===void 0||typeof l[u]=="symbol"?E:E+(E.length===0?"":",")+N(u)+":"+N(l[u]),"")+"}"}},{}],13:[function(P,ee,X){"use strict";var N=P("es-define-property"),l=P("es-errors/syntax"),E=P("es-errors/type"),u=P("gopd");ee.exports=function(e,r,o){if(!e||typeof e!="object"&&typeof e!="function")throw new E("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new E("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new E("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new E("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new E("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new E("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,v=arguments.length>5?arguments[5]:null,b=arguments.length>6&&arguments[6],d=!!u&&u(e,r);if(N)N(e,r,{configurable:v===null&&d?d.configurable:!v,enumerable:s===null&&d?d.enumerable:!s,value:o,writable:c===null&&d?d.writable:!c});else{if(!b&&(s||c||v))throw new l("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[r]=o}}},{"es-define-property":14,"es-errors/syntax":19,"es-errors/type":20,gopd:27}],14:[function(P,ee,X){"use strict";var N=P("get-intrinsic")("%Object.defineProperty%",!0)||!1;if(N)try{N({},"a",{value:1})}catch{N=!1}ee.exports=N},{"get-intrinsic":26}],15:[function(P,ee,X){"use strict";ee.exports=EvalError},{}],16:[function(P,ee,X){"use strict";ee.exports=Error},{}],17:[function(P,ee,X){"use strict";ee.exports=RangeError},{}],18:[function(P,ee,X){"use strict";ee.exports=ReferenceError},{}],19:[function(P,ee,X){"use strict";ee.exports=SyntaxError},{}],20:[function(P,ee,X){"use strict";ee.exports=TypeError},{}],21:[function(P,ee,X){"use strict";ee.exports=URIError},{}],22:[function(P,ee,X){"use strict";var N,l=typeof Reflect=="object"?Reflect:null,E=l&&typeof l.apply=="function"?l.apply:function(I,j,D){return Function.prototype.apply.call(I,j,D)};N=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var u=Number.isNaN||function(I){return I!=I};function e(){e.init.call(this)}ee.exports=e,ee.exports.once=function(I,j){return new Promise(function(D,A){function C(q){I.removeListener(j,Q),A(q)}function Q(){typeof I.removeListener=="function"&&I.removeListener("error",C),D([].slice.call(arguments))}O(I,j,Q,{once:!0}),j!=="error"&&function(q,H,B){typeof q.on=="function"&&O(q,"error",H,B)}(I,C,{once:!0})})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function o(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}function s(I){return I._maxListeners===void 0?e.defaultMaxListeners:I._maxListeners}function c(I,j,D,A){var C,Q,q,H;if(o(D),(Q=I._events)===void 0?(Q=I._events=Object.create(null),I._eventsCount=0):(Q.newListener!==void 0&&(I.emit("newListener",j,D.listener?D.listener:D),Q=I._events),q=Q[j]),q===void 0)q=Q[j]=D,++I._eventsCount;else if(typeof q=="function"?q=Q[j]=A?[D,q]:[q,D]:A?q.unshift(D):q.push(D),(C=s(I))>0&&q.length>C&&!q.warned){q.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=I,B.type=j,B.count=q.length,H=B,console&&console.warn&&console.warn(H)}return I}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(I,j,D){var A={fired:!1,wrapFn:void 0,target:I,type:j,listener:D},C=v.bind(A);return C.listener=D,A.wrapFn=C,C}function d(I,j,D){var A=I._events;if(A===void 0)return[];var C=A[j];return C===void 0?[]:typeof C=="function"?D?[C.listener||C]:[C]:D?function(Q){for(var q=new Array(Q.length),H=0;H<q.length;++H)q[H]=Q[H].listener||Q[H];return q}(C):f(C,C.length)}function g(I){var j=this._events;if(j!==void 0){var D=j[I];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}function f(I,j){for(var D=new Array(j),A=0;A<j;++A)D[A]=I[A];return D}function O(I,j,D,A){if(typeof I.on=="function")A.once?I.once(j,D):I.on(j,D);else{if(typeof I.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I);I.addEventListener(j,function C(Q){A.once&&I.removeEventListener(j,C),D(Q)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(I){if(typeof I!="number"||I<0||u(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");r=I}}),e.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||u(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},e.prototype.getMaxListeners=function(){return s(this)},e.prototype.emit=function(I){for(var j=[],D=1;D<arguments.length;D++)j.push(arguments[D]);var A=I==="error",C=this._events;if(C!==void 0)A=A&&C.error===void 0;else if(!A)return!1;if(A){var Q;if(j.length>0&&(Q=j[0]),Q instanceof Error)throw Q;var q=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw q.context=Q,q}var H=C[I];if(H===void 0)return!1;if(typeof H=="function")E(H,this,j);else{var B=H.length,Z=f(H,B);for(D=0;D<B;++D)E(Z[D],this,j)}return!0},e.prototype.addListener=function(I,j){return c(this,I,j,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(I,j){return c(this,I,j,!0)},e.prototype.once=function(I,j){return o(j),this.on(I,b(this,I,j)),this},e.prototype.prependOnceListener=function(I,j){return o(j),this.prependListener(I,b(this,I,j)),this},e.prototype.removeListener=function(I,j){var D,A,C,Q,q;if(o(j),(A=this._events)===void 0)return this;if((D=A[I])===void 0)return this;if(D===j||D.listener===j)--this._eventsCount==0?this._events=Object.create(null):(delete A[I],A.removeListener&&this.emit("removeListener",I,D.listener||j));else if(typeof D!="function"){for(C=-1,Q=D.length-1;Q>=0;Q--)if(D[Q]===j||D[Q].listener===j){q=D[Q].listener,C=Q;break}if(C<0)return this;C===0?D.shift():function(H,B){for(;B+1<H.length;B++)H[B]=H[B+1];H.pop()}(D,C),D.length===1&&(A[I]=D[0]),A.removeListener!==void 0&&this.emit("removeListener",I,q||j)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(I){var j,D,A;if((D=this._events)===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[I]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete D[I]),this;if(arguments.length===0){var C,Q=Object.keys(D);for(A=0;A<Q.length;++A)(C=Q[A])!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(j=D[I])=="function")this.removeListener(I,j);else if(j!==void 0)for(A=j.length-1;A>=0;A--)this.removeListener(I,j[A]);return this},e.prototype.listeners=function(I){return d(this,I,!0)},e.prototype.rawListeners=function(I){return d(this,I,!1)},e.listenerCount=function(I,j){return typeof I.listenerCount=="function"?I.listenerCount(j):g.call(I,j)},e.prototype.listenerCount=g,e.prototype.eventNames=function(){return this._eventsCount>0?N(this._events):[]}},{}],23:[function(P,ee,X){"use strict";var N=P("is-callable"),l=Object.prototype.toString,E=Object.prototype.hasOwnProperty;ee.exports=function(u,e,r){if(!N(e))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),l.call(u)==="[object Array]"?function(s,c,v){for(var b=0,d=s.length;b<d;b++)E.call(s,b)&&(v==null?c(s[b],b,s):c.call(v,s[b],b,s))}(u,e,o):typeof u=="string"?function(s,c,v){for(var b=0,d=s.length;b<d;b++)v==null?c(s.charAt(b),b,s):c.call(v,s.charAt(b),b,s)}(u,e,o):function(s,c,v){for(var b in s)E.call(s,b)&&(v==null?c(s[b],b,s):c.call(v,s[b],b,s))}(u,e,o)}},{"is-callable":38}],24:[function(P,ee,X){"use strict";var N=Object.prototype.toString,l=Math.max,E=function(u,e){for(var r=[],o=0;o<u.length;o+=1)r[o]=u[o];for(var s=0;s<e.length;s+=1)r[s+u.length]=e[s];return r};ee.exports=function(u){var e=this;if(typeof e!="function"||N.apply(e)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,o=function(d,g){for(var f=[],O=g||0,I=0;O<d.length;O+=1,I+=1)f[I]=d[O];return f}(arguments,1),s=l(0,e.length-o.length),c=[],v=0;v<s;v++)c[v]="$"+v;if(r=Function("binder","return function ("+function(d,g){for(var f="",O=0;O<d.length;O+=1)f+=d[O],O+1<d.length&&(f+=g);return f}(c,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var d=e.apply(this,E(o,arguments));return Object(d)===d?d:this}return e.apply(u,E(o,arguments))}),e.prototype){var b=function(){};b.prototype=e.prototype,r.prototype=new b,b.prototype=null}return r}},{}],25:[function(P,ee,X){"use strict";var N=P("./implementation");ee.exports=Function.prototype.bind||N},{"./implementation":24}],26:[function(P,ee,X){"use strict";var N,l=P("es-errors"),E=P("es-errors/eval"),u=P("es-errors/range"),e=P("es-errors/ref"),r=P("es-errors/syntax"),o=P("es-errors/type"),s=P("es-errors/uri"),c=Function,v=function(K){try{return c('"use strict"; return ('+K+").constructor;")()}catch{}},b=Object.getOwnPropertyDescriptor;if(b)try{b({},"")}catch{b=null}var d=function(){throw new o},g=b?function(){try{return d}catch{try{return b(arguments,"callee").get}catch{return d}}}():d,f=P("has-symbols")(),O=P("has-proto")(),I=Object.getPrototypeOf||(O?function(K){return K.__proto__}:null),j={},D=typeof Uint8Array<"u"&&I?I(Uint8Array):N,A={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?N:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?N:ArrayBuffer,"%ArrayIteratorPrototype%":f&&I?I([][Symbol.iterator]()):N,"%AsyncFromSyncIteratorPrototype%":N,"%AsyncFunction%":j,"%AsyncGenerator%":j,"%AsyncGeneratorFunction%":j,"%AsyncIteratorPrototype%":j,"%Atomics%":typeof Atomics>"u"?N:Atomics,"%BigInt%":typeof BigInt>"u"?N:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?N:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?N:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?N:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":l,"%eval%":eval,"%EvalError%":E,"%Float32Array%":typeof Float32Array>"u"?N:Float32Array,"%Float64Array%":typeof Float64Array>"u"?N:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?N:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":j,"%Int8Array%":typeof Int8Array>"u"?N:Int8Array,"%Int16Array%":typeof Int16Array>"u"?N:Int16Array,"%Int32Array%":typeof Int32Array>"u"?N:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&I?I(I([][Symbol.iterator]())):N,"%JSON%":typeof JSON=="object"?JSON:N,"%Map%":typeof Map>"u"?N:Map,"%MapIteratorPrototype%":typeof Map<"u"&&f&&I?I(new Map()[Symbol.iterator]()):N,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?N:Promise,"%Proxy%":typeof Proxy>"u"?N:Proxy,"%RangeError%":u,"%ReferenceError%":e,"%Reflect%":typeof Reflect>"u"?N:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?N:Set,"%SetIteratorPrototype%":typeof Set<"u"&&f&&I?I(new Set()[Symbol.iterator]()):N,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?N:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&I?I(""[Symbol.iterator]()):N,"%Symbol%":f?Symbol:N,"%SyntaxError%":r,"%ThrowTypeError%":g,"%TypedArray%":D,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?N:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?N:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?N:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?N:Uint32Array,"%URIError%":s,"%WeakMap%":typeof WeakMap>"u"?N:WeakMap,"%WeakRef%":typeof WeakRef>"u"?N:WeakRef,"%WeakSet%":typeof WeakSet>"u"?N:WeakSet};if(I)try{null.error}catch(K){var C=I(I(K));A["%Error.prototype%"]=C}var Q=function K(Y){var le;if(Y==="%AsyncFunction%")le=v("async function () {}");else if(Y==="%GeneratorFunction%")le=v("function* () {}");else if(Y==="%AsyncGeneratorFunction%")le=v("async function* () {}");else if(Y==="%AsyncGenerator%"){var re=K("%AsyncGeneratorFunction%");re&&(le=re.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var ue=K("%AsyncGenerator%");ue&&I&&(le=I(ue.prototype))}return A[Y]=le,le},q={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},H=P("function-bind"),B=P("hasown"),Z=H.call(Function.call,Array.prototype.concat),se=H.call(Function.apply,Array.prototype.splice),ae=H.call(Function.call,String.prototype.replace),ye=H.call(Function.call,String.prototype.slice),fe=H.call(Function.call,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,W=function(K,Y){var le,re=K;if(B(q,re)&&(re="%"+(le=q[re])[0]+"%"),B(A,re)){var ue=A[re];if(ue===j&&(ue=Q(re)),ue===void 0&&!Y)throw new o("intrinsic "+K+" exists, but is not available. Please file an issue!");return{alias:le,name:re,value:ue}}throw new r("intrinsic "+K+" does not exist!")};ee.exports=function(K,Y){if(typeof K!="string"||K.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Y!="boolean")throw new o('"allowMissing" argument must be a boolean');if(fe(/^%?[^%]*%?$/,K)===null)throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var le=function(he){var be=ye(he,0,1),_e=ye(he,-1);if(be==="%"&&_e!=="%")throw new r("invalid intrinsic syntax, expected closing `%`");if(_e==="%"&&be!=="%")throw new r("invalid intrinsic syntax, expected opening `%`");var je=[];return ae(he,z,function(Re,Ae,xe,Ne){je[je.length]=xe?ae(Ne,U,"$1"):Ae||Re}),je}(K),re=le.length>0?le[0]:"",ue=W("%"+re+"%",Y),pe=ue.name,ge=ue.value,we=!1,$=ue.alias;$&&(re=$[0],se(le,Z([0,1],$)));for(var w=1,L=!0;w<le.length;w+=1){var G=le[w],te=ye(G,0,1),ne=ye(G,-1);if((te==='"'||te==="'"||te==="`"||ne==='"'||ne==="'"||ne==="`")&&te!==ne)throw new r("property names with quotes must have matching quotes");if(G!=="constructor"&&L||(we=!0),B(A,pe="%"+(re+="."+G)+"%"))ge=A[pe];else if(ge!=null){if(!(G in ge)){if(!Y)throw new o("base intrinsic for "+K+" exists, but the property is not available.");return}if(b&&w+1>=le.length){var ie=b(ge,G);ge=(L=!!ie)&&"get"in ie&&!("originalValue"in ie.get)?ie.get:ge[G]}else L=B(ge,G),ge=ge[G];L&&!we&&(A[pe]=ge)}}return ge}},{"es-errors":16,"es-errors/eval":15,"es-errors/range":17,"es-errors/ref":18,"es-errors/syntax":19,"es-errors/type":20,"es-errors/uri":21,"function-bind":25,"has-proto":29,"has-symbols":30,hasown:33}],27:[function(P,ee,X){"use strict";var N=P("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(N)try{N([],"length")}catch{N=null}ee.exports=N},{"get-intrinsic":26}],28:[function(P,ee,X){"use strict";var N=P("es-define-property"),l=function(){return!!N};l.hasArrayLengthDefineBug=function(){if(!N)return null;try{return N([],"length",{value:1}).length!==1}catch{return!0}},ee.exports=l},{"es-define-property":14}],29:[function(P,ee,X){"use strict";var N={__proto__:null,foo:{}},l=Object;ee.exports=function(){return{__proto__:N}.foo===N.foo&&!(N instanceof l)}},{}],30:[function(P,ee,X){"use strict";var N=typeof Symbol<"u"&&Symbol,l=P("./shams");ee.exports=function(){return typeof N=="function"&&typeof Symbol=="function"&&typeof N("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&l()}},{"./shams":31}],31:[function(P,ee,X){"use strict";ee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var N={},l=Symbol("test"),E=Object(l);if(typeof l=="string"||Object.prototype.toString.call(l)!=="[object Symbol]"||Object.prototype.toString.call(E)!=="[object Symbol]")return!1;for(l in N[l]=42,N)return!1;if(typeof Object.keys=="function"&&Object.keys(N).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(N).length!==0)return!1;var u=Object.getOwnPropertySymbols(N);if(u.length!==1||u[0]!==l||!Object.prototype.propertyIsEnumerable.call(N,l))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var e=Object.getOwnPropertyDescriptor(N,l);if(e.value!==42||e.enumerable!==!0)return!1}return!0}},{}],32:[function(P,ee,X){"use strict";var N=P("has-symbols/shams");ee.exports=function(){return N()&&!!Symbol.toStringTag}},{"has-symbols/shams":31}],33:[function(P,ee,X){"use strict";var N=Function.prototype.call,l=Object.prototype.hasOwnProperty,E=P("function-bind");ee.exports=E.call(N,l)},{"function-bind":25}],34:[function(P,ee,X){var N=P("http"),l=P("url"),E=ee.exports;for(var u in N)N.hasOwnProperty(u)&&(E[u]=N[u]);function e(r){if(typeof r=="string"&&(r=l.parse(r)),r.protocol||(r.protocol="https:"),r.protocol!=="https:")throw new Error('Protocol "'+r.protocol+'" not supported. Expected "https:"');return r}E.request=function(r,o){return r=e(r),N.request.call(this,r,o)},E.get=function(r,o){return r=e(r),N.get.call(this,r,o)}},{http:111,url:132}],35:[function(P,ee,X){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */X.read=function(N,l,E,u,e){var r,o,s=8*e-u-1,c=(1<<s)-1,v=c>>1,b=-7,d=E?e-1:0,g=E?-1:1,f=N[l+d];for(d+=g,r=f&(1<<-b)-1,f>>=-b,b+=s;b>0;r=256*r+N[l+d],d+=g,b-=8);for(o=r&(1<<-b)-1,r>>=-b,b+=u;b>0;o=256*o+N[l+d],d+=g,b-=8);if(r===0)r=1-v;else{if(r===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,u),r-=v}return(f?-1:1)*o*Math.pow(2,r-u)},X.write=function(N,l,E,u,e,r){var o,s,c,v=8*r-e-1,b=(1<<v)-1,d=b>>1,g=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=u?0:r-1,O=u?1:-1,I=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(s=isNaN(l)?1:0,o=b):(o=Math.floor(Math.log(l)/Math.LN2),l*(c=Math.pow(2,-o))<1&&(o--,c*=2),(l+=o+d>=1?g/c:g*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=b?(s=0,o=b):o+d>=1?(s=(l*c-1)*Math.pow(2,e),o+=d):(s=l*Math.pow(2,d-1)*Math.pow(2,e),o=0));e>=8;N[E+f]=255&s,f+=O,s/=256,e-=8);for(o=o<<e|s,v+=e;v>0;N[E+f]=255&o,f+=O,o/=256,v-=8);N[E+f-O]|=128*I}},{}],36:[function(P,ee,X){typeof Object.create=="function"?ee.exports=function(N,l){l&&(N.super_=l,N.prototype=Object.create(l.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}))}:ee.exports=function(N,l){if(l){N.super_=l;var E=function(){};E.prototype=l.prototype,N.prototype=new E,N.prototype.constructor=N}}},{}],37:[function(P,ee,X){"use strict";var N=P("has-tostringtag/shams")(),l=P("call-bind/callBound")("Object.prototype.toString"),E=function(r){return!(N&&r&&typeof r=="object"&&Symbol.toStringTag in r)&&l(r)==="[object Arguments]"},u=function(r){return!!E(r)||r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&l(r)!=="[object Array]"&&l(r.callee)==="[object Function]"},e=function(){return E(arguments)}();E.isLegacyArguments=u,ee.exports=e?E:u},{"call-bind/callBound":10,"has-tostringtag/shams":32}],38:[function(P,ee,X){"use strict";var N,l,E=Function.prototype.toString,u=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof u=="function"&&typeof Object.defineProperty=="function")try{N=Object.defineProperty({},"length",{get:function(){throw l}}),l={},u(function(){throw 42},null,N)}catch(g){g!==l&&(u=null)}else u=null;var e=/^\s*class\b/,r=function(g){try{var f=E.call(g);return e.test(f)}catch{return!1}},o=function(g){try{return!r(g)&&(E.call(g),!0)}catch{return!1}},s=Object.prototype.toString,c=typeof Symbol=="function"&&!!Symbol.toStringTag,v=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var d=document.all;s.call(d)===s.call(document.all)&&(b=function(g){if((v||!g)&&(g===void 0||typeof g=="object"))try{var f=s.call(g);return(f==="[object HTMLAllCollection]"||f==="[object HTML document.all class]"||f==="[object HTMLCollection]"||f==="[object Object]")&&g("")==null}catch{}return!1})}ee.exports=u?function(g){if(b(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;try{u(g,null,N)}catch(f){if(f!==l)return!1}return!r(g)&&o(g)}:function(g){if(b(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;if(c)return o(g);if(r(g))return!1;var f=s.call(g);return!(f!=="[object Function]"&&f!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(f))&&o(g)}},{}],39:[function(P,ee,X){"use strict";var N,l=Object.prototype.toString,E=Function.prototype.toString,u=/^\s*(?:function)?\*/,e=P("has-tostringtag/shams")(),r=Object.getPrototypeOf;ee.exports=function(o){if(typeof o!="function")return!1;if(u.test(E.call(o)))return!0;if(!e)return l.call(o)==="[object GeneratorFunction]";if(!r)return!1;if(N===void 0){var s=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch{}}();N=!!s&&r(s)}return r(o)===N}},{"has-tostringtag/shams":32}],40:[function(P,ee,X){"use strict";var N=P("which-typed-array");ee.exports=function(l){return!!N(l)}},{"which-typed-array":134}],41:[function(P,ee,X){"use strict";const{isArray:N,isObject:l,isString:E}=P("./types"),{asArray:u}=P("./util"),{prependBase:e}=P("./url"),r=P("./JsonLdError"),o=P("./ResolvedContext");function s(v){throw new r("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:v})}function c({context:v,base:b}){if(!v)return;const d=v["@context"];if(E(d))v["@context"]=e(b,d);else if(N(d))for(let g=0;g<d.length;++g){const f=d[g];E(f)?d[g]=e(b,f):l(f)&&c({context:{"@context":f},base:b})}else if(l(d))for(const g in d)c({context:d[g],base:b})}ee.exports=class{constructor({sharedCache:v}){this.perOpCache=new Map,this.sharedCache=v}async resolve({activeCtx:v,context:b,documentLoader:d,base:g,cycles:f=new Set}){b&&l(b)&&b["@context"]&&(b=b["@context"]),b=u(b);const O=[];for(const I of b){if(E(I)){let A=this._get(I);A||(A=await this._resolveRemoteContext({activeCtx:v,url:I,documentLoader:d,base:g,cycles:f})),N(A)?O.push(...A):O.push(A);continue}if(I===null){O.push(new o({document:null}));continue}l(I)||s(b);const j=JSON.stringify(I);let D=this._get(j);D||(D=new o({document:I}),this._cacheResolvedContext({key:j,resolved:D,tag:"static"})),O.push(D)}return O}_get(v){let b=this.perOpCache.get(v);if(!b){const d=this.sharedCache.get(v);d&&(b=d.get("static"),b&&this.perOpCache.set(v,b))}return b}_cacheResolvedContext({key:v,resolved:b,tag:d}){if(this.perOpCache.set(v,b),d!==void 0){let g=this.sharedCache.get(v);g||(g=new Map,this.sharedCache.set(v,g)),g.set(d,b)}return b}async _resolveRemoteContext({activeCtx:v,url:b,documentLoader:d,base:g,cycles:f}){b=e(g,b);const{context:O,remoteDoc:I}=await this._fetchContext({activeCtx:v,url:b,documentLoader:d,cycles:f});c({context:O,base:g=I.documentUrl||b});const j=await this.resolve({activeCtx:v,context:O,documentLoader:d,base:g,cycles:f});return this._cacheResolvedContext({key:b,resolved:j,tag:I.tag}),j}async _fetchContext({activeCtx:v,url:b,documentLoader:d,cycles:g}){if(g.size>10)throw new r("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:v.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:10});if(g.has(b))throw new r("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:v.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:b});let f,O;g.add(b);try{O=await d(b),f=O.document||null,E(f)&&(f=JSON.parse(f))}catch(I){throw new r("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:b,cause:I})}if(!l(f))throw new r("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:b});return f="@context"in f?{"@context":f["@context"]}:{"@context":{}},O.contextUrl&&(N(f["@context"])||(f["@context"]=[f["@context"]]),f["@context"].push(O.contextUrl)),{context:f,remoteDoc:O}}}},{"./JsonLdError":42,"./ResolvedContext":46,"./types":61,"./url":62,"./util":63}],42:[function(P,ee,X){"use strict";ee.exports=class extends Error{constructor(N="An unspecified JSON-LD error occurred.",l="jsonld.Error",E={}){super(N),this.name=l,this.message=N,this.details=E}}},{}],43:[function(P,ee,X){"use strict";ee.exports=N=>{class l{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(l,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(l.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:l}),l.compact=function(E,u){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):N.compact(E,u)},l.expand=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):N.expand(E)},l.flatten=function(E){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):N.flatten(E)},l}},{}],44:[function(P,ee,X){"use strict";ee.exports=P("rdf-canonize").NQuads},{"rdf-canonize":82}],45:[function(P,ee,X){"use strict";ee.exports=class{constructor(){this._requests={}}wrapLoader(N){const l=this;return l._loader=N,function(){return l.add.apply(l,arguments)}}async add(N){let l=this._requests[N];if(l)return Promise.resolve(l);l=this._requests[N]=this._loader(N);try{return await l}finally{delete this._requests[N]}}}},{}],46:[function(P,ee,X){"use strict";const N=P("lru-cache");ee.exports=class{constructor({document:l}){this.document=l,this.cache=new N({max:10})}getProcessed(l){return this.cache.get(l)}setProcessed(l,E){this.cache.set(l,E)}}},{"lru-cache":64}],47:[function(P,ee,X){"use strict";const N=P("./JsonLdError"),{isArray:l,isObject:E,isString:u,isUndefined:e}=P("./types"),{isList:r,isValue:o,isGraph:s,isSimpleGraph:c,isSubjectReference:v}=P("./graphTypes"),{expandIri:b,getContextValue:d,isKeyword:g,process:f,processingMode:O}=P("./context"),{removeBase:I,prependBase:j}=P("./url"),{REGEX_KEYWORD:D,addValue:A,asArray:C,compareShortestLeast:Q}=P("./util"),q={};function H(B,Z,se){if(b(B,Z,{vocab:!0},se)!=="@nest")throw new N("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ee.exports=q,q.compact=async({activeCtx:B,activeProperty:Z=null,element:se,options:ae={}})=>{if(l(se)){let fe=[];for(let z=0;z<se.length;++z){const U=await q.compact({activeCtx:B,activeProperty:Z,element:se[z],options:ae});U!==null&&fe.push(U)}return ae.compactArrays&&fe.length===1&&(d(B,Z,"@container")||[]).length===0&&(fe=fe[0]),fe}const ye=d(B,Z,"@context");if(e(ye)||(B=await f({activeCtx:B,localCtx:ye,propagate:!0,overrideProtected:!0,options:ae})),E(se)){if(ae.link&&"@id"in se&&ae.link.hasOwnProperty(se["@id"])){const re=ae.link[se["@id"]];for(let ue=0;ue<re.length;++ue)if(re[ue].expanded===se)return re[ue].compacted}if(o(se)||v(se)){const re=q.compactValue({activeCtx:B,activeProperty:Z,value:se,options:ae});return ae.link&&v(se)&&(ae.link.hasOwnProperty(se["@id"])||(ae.link[se["@id"]]=[]),ae.link[se["@id"]].push({expanded:se,compacted:re})),re}if(r(se)&&(d(B,Z,"@container")||[]).includes("@list"))return q.compact({activeCtx:B,activeProperty:Z,element:se["@list"],options:ae});const fe=Z==="@reverse",z={},U=B;o(se)||v(se)||(B=B.revertToPreviousContext());const W=d(U,Z,"@context");e(W)||(B=await f({activeCtx:B,localCtx:W,propagate:!0,overrideProtected:!0,options:ae})),ae.link&&"@id"in se&&(ae.link.hasOwnProperty(se["@id"])||(ae.link[se["@id"]]=[]),ae.link[se["@id"]].push({expanded:se,compacted:z}));let K=se["@type"]||[];K.length>1&&(K=Array.from(K).sort());const Y=B;for(const re of K){const ue=q.compactIri({activeCtx:Y,iri:re,relativeTo:{vocab:!0}}),pe=d(U,ue,"@context");e(pe)||(B=await f({activeCtx:B,localCtx:pe,options:ae,propagate:!1}))}const le=Object.keys(se).sort();for(const re of le){const ue=se[re];if(re!=="@id")if(re!=="@type")if(re!=="@reverse")if(re!=="@preserve")if(re!=="@index")if(re!=="@graph"&&re!=="@list"&&re!=="@included"&&g(re)){const pe=q.compactIri({activeCtx:B,iri:re,relativeTo:{vocab:!0}});A(z,pe,ue)}else{if(!l(ue))throw new N("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(ue.length===0){const pe=q.compactIri({activeCtx:B,iri:re,value:ue,relativeTo:{vocab:!0},reverse:fe}),ge=B.mappings.has(pe)?B.mappings.get(pe)["@nest"]:null;let we=z;ge&&(H(B,ge,ae),E(z[ge])||(z[ge]={}),we=z[ge]),A(we,pe,ue,{propertyIsArray:!0})}for(const pe of ue){const ge=q.compactIri({activeCtx:B,iri:re,value:pe,relativeTo:{vocab:!0},reverse:fe}),we=B.mappings.has(ge)?B.mappings.get(ge)["@nest"]:null;let $=z;we&&(H(B,we,ae),E(z[we])||(z[we]={}),$=z[we]);const w=d(B,ge,"@container")||[],L=s(pe),G=r(pe);let te;G?te=pe["@list"]:L&&(te=pe["@graph"]);let ne=await q.compact({activeCtx:B,activeProperty:ge,element:G||L?te:pe,options:ae});if(G){if(l(ne)||(ne=[ne]),w.includes("@list")){A($,ge,ne,{valueIsArray:!0,allowDuplicate:!0});continue}ne={[q.compactIri({activeCtx:B,iri:"@list",relativeTo:{vocab:!0}})]:ne},"@index"in pe&&(ne[q.compactIri({activeCtx:B,iri:"@index",relativeTo:{vocab:!0}})]=pe["@index"])}if(L)if(w.includes("@graph")&&(w.includes("@id")||w.includes("@index")&&c(pe))){let ie;$.hasOwnProperty(ge)?ie=$[ge]:$[ge]=ie={};const he=(w.includes("@id")?pe["@id"]:pe["@index"])||q.compactIri({activeCtx:B,iri:"@none",relativeTo:{vocab:!0}});A(ie,he,ne,{propertyIsArray:!ae.compactArrays||w.includes("@set")})}else w.includes("@graph")&&c(pe)?(l(ne)&&ne.length>1&&(ne={"@included":ne}),A($,ge,ne,{propertyIsArray:!ae.compactArrays||w.includes("@set")})):(l(ne)&&ne.length===1&&ae.compactArrays&&(ne=ne[0]),ne={[q.compactIri({activeCtx:B,iri:"@graph",relativeTo:{vocab:!0}})]:ne},"@id"in pe&&(ne[q.compactIri({activeCtx:B,iri:"@id",relativeTo:{vocab:!0}})]=pe["@id"]),"@index"in pe&&(ne[q.compactIri({activeCtx:B,iri:"@index",relativeTo:{vocab:!0}})]=pe["@index"]),A($,ge,ne,{propertyIsArray:!ae.compactArrays||w.includes("@set")}));else if(w.includes("@language")||w.includes("@index")||w.includes("@id")||w.includes("@type")){let ie,he;if($.hasOwnProperty(ge)?ie=$[ge]:$[ge]=ie={},w.includes("@language"))o(ne)&&(ne=ne["@value"]),he=pe["@language"];else if(w.includes("@index")){const be=d(B,ge,"@index")||"@index",_e=q.compactIri({activeCtx:B,iri:be,relativeTo:{vocab:!0}});if(be==="@index")he=pe["@index"],delete ne[_e];else{let je;if([he,...je]=C(ne[be]||[]),u(he))switch(je.length){case 0:delete ne[be];break;case 1:ne[be]=je[0];break;default:ne[be]=je}else he=null}}else if(w.includes("@id")){const be=q.compactIri({activeCtx:B,iri:"@id",relativeTo:{vocab:!0}});he=ne[be],delete ne[be]}else if(w.includes("@type")){const be=q.compactIri({activeCtx:B,iri:"@type",relativeTo:{vocab:!0}});let _e;switch([he,..._e]=C(ne[be]||[]),_e.length){case 0:delete ne[be];break;case 1:ne[be]=_e[0];break;default:ne[be]=_e}Object.keys(ne).length===1&&"@id"in pe&&(ne=await q.compact({activeCtx:B,activeProperty:ge,element:{"@id":pe["@id"]},options:ae}))}he||(he=q.compactIri({activeCtx:B,iri:"@none",relativeTo:{vocab:!0}})),A(ie,he,ne,{propertyIsArray:w.includes("@set")})}else{const ie=!ae.compactArrays||w.includes("@set")||w.includes("@list")||l(ne)&&ne.length===0||re==="@list"||re==="@graph";A($,ge,ne,{propertyIsArray:ie})}}}else{if((d(B,Z,"@container")||[]).includes("@index"))continue;const pe=q.compactIri({activeCtx:B,iri:re,relativeTo:{vocab:!0}});A(z,pe,ue)}else{const pe=await q.compact({activeCtx:B,activeProperty:Z,element:ue,options:ae});l(pe)&&pe.length===0||A(z,re,pe)}else{const pe=await q.compact({activeCtx:B,activeProperty:"@reverse",element:ue,options:ae});for(const ge in pe)if(B.mappings.has(ge)&&B.mappings.get(ge).reverse){const we=pe[ge],$=(d(B,ge,"@container")||[]).includes("@set")||!ae.compactArrays;A(z,ge,we,{propertyIsArray:$}),delete pe[ge]}if(Object.keys(pe).length>0){const ge=q.compactIri({activeCtx:B,iri:re,relativeTo:{vocab:!0}});A(z,ge,pe)}}else{let pe=C(ue).map($=>q.compactIri({activeCtx:U,iri:$,relativeTo:{vocab:!0}}));pe.length===1&&(pe=pe[0]);const ge=q.compactIri({activeCtx:B,iri:"@type",relativeTo:{vocab:!0}}),we=(d(B,ge,"@container")||[]).includes("@set")&&O(B,1.1)||l(pe)&&ue.length===0;A(z,ge,pe,{propertyIsArray:we})}else{let pe=C(ue).map(ge=>q.compactIri({activeCtx:B,iri:ge,relativeTo:{vocab:!1},base:ae.base}));pe.length===1&&(pe=pe[0]),z[q.compactIri({activeCtx:B,iri:"@id",relativeTo:{vocab:!0}})]=pe}}return z}return se},q.compactIri=({activeCtx:B,iri:Z,value:se=null,relativeTo:ae={vocab:!1},reverse:ye=!1,base:fe=null})=>{if(Z===null)return Z;B.isPropertyTermScoped&&B.previousContext&&(B=B.previousContext);const z=B.getInverse();if(g(Z)&&Z in z&&"@none"in z[Z]&&"@type"in z[Z]["@none"]&&"@none"in z[Z]["@none"]["@type"])return z[Z]["@none"]["@type"]["@none"];if(ae.vocab&&Z in z){const le=B["@language"]||"@none",re=[];E(se)&&"@index"in se&&!("@graph"in se)&&re.push("@index","@index@set"),E(se)&&"@preserve"in se&&(se=se["@preserve"][0]),s(se)?("@index"in se&&re.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in se&&re.push("@graph@id","@graph@id@set"),re.push("@graph","@graph@set","@set"),"@index"in se||re.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in se||re.push("@graph@id","@graph@id@set")):E(se)&&!o(se)&&re.push("@id","@id@set","@type","@set@type");let ue="@language",pe="@null";if(ye)ue="@type",pe="@reverse",re.push("@set");else if(r(se)){"@index"in se||re.push("@list");const we=se["@list"];if(we.length===0)ue="@any",pe="@none";else{let $=we.length===0?le:null,w=null;for(let L=0;L<we.length;++L){const G=we[L];let te="@none",ne="@none";if(o(G)?"@direction"in G?te=`${(G["@language"]||"").toLowerCase()}_${G["@direction"]}`:"@language"in G?te=G["@language"].toLowerCase():"@type"in G?ne=G["@type"]:te="@null":ne="@id",$===null?$=te:te!==$&&o(G)&&($="@none"),w===null?w=ne:ne!==w&&(w="@none"),$==="@none"&&w==="@none")break}$=$||"@none",w=w||"@none",w!=="@none"?(ue="@type",pe=w):pe=$}}else{if(o(se))if("@language"in se&&!("@index"in se)){re.push("@language","@language@set"),pe=se["@language"];const we=se["@direction"];we&&(pe=`${pe}_${we}`)}else"@direction"in se&&!("@index"in se)?pe=`_${se["@direction"]}`:"@type"in se&&(ue="@type",pe=se["@type"]);else ue="@type",pe="@id";re.push("@set")}re.push("@none"),E(se)&&!("@index"in se)&&re.push("@index","@index@set"),o(se)&&Object.keys(se).length===1&&re.push("@language","@language@set");const ge=function(we,$,w,L,G,te){te===null&&(te="@null");const ne=[];if((te==="@id"||te==="@reverse")&&E(w)&&"@id"in w){te==="@reverse"&&ne.push("@reverse");const he=q.compactIri({activeCtx:we,iri:w["@id"],relativeTo:{vocab:!0}});we.mappings.has(he)&&we.mappings.get(he)&&we.mappings.get(he)["@id"]===w["@id"]?ne.push.apply(ne,["@vocab","@id"]):ne.push.apply(ne,["@id","@vocab"])}else{ne.push(te);const he=ne.find(be=>be.includes("_"));he&&ne.push(he.replace(/^[^_]+_/,"_"))}ne.push("@none");const ie=we.inverse[$];for(const he of L){if(!(he in ie))continue;const be=ie[he][G];for(const _e of ne)if(_e in be)return be[_e]}return null}(B,Z,se,re,ue,pe);if(ge!==null)return ge}if(ae.vocab&&"@vocab"in B){const le=B["@vocab"];if(Z.indexOf(le)===0&&Z!==le){const re=Z.substr(le.length);if(!B.mappings.has(re))return re}}let U=null;const W=[];let K=B.fastCurieMap;const Y=Z.length-1;for(let le=0;le<Y&&Z[le]in K;++le)K=K[Z[le]],""in K&&W.push(K[""][0]);for(let le=W.length-1;le>=0;--le){const re=W[le],ue=re.terms;for(const pe of ue){const ge=pe+":"+Z.substr(re.iri.length);B.mappings.get(pe)._prefix&&(!B.mappings.has(ge)||se===null&&B.mappings.get(ge)["@id"]===Z)&&(U===null||Q(ge,U)<0)&&(U=ge)}}if(U!==null)return U;for(const[le,re]of B.mappings)if(re&&re._prefix&&Z.startsWith(le+":"))throw new N(`Absolute IRI "${Z}" confused with prefix "${le}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:B});if(!ae.vocab){if("@base"in B){if(B["@base"]){const le=I(j(fe,B["@base"]),Z);return D.test(le)?`./${le}`:le}return Z}return I(fe,Z)}return Z},q.compactValue=({activeCtx:B,activeProperty:Z,value:se,options:ae})=>{if(o(se)){const U=d(B,Z,"@type"),W=d(B,Z,"@language"),K=d(B,Z,"@direction"),Y=d(B,Z,"@container")||[],le="@index"in se&&!Y.includes("@index");if(!le&&U!=="@none"&&(se["@type"]===U||"@language"in se&&se["@language"]===W&&"@direction"in se&&se["@direction"]===K||"@language"in se&&se["@language"]===W||"@direction"in se&&se["@direction"]===K))return se["@value"];const re=Object.keys(se).length,ue=re===1||re===2&&"@index"in se&&!le,pe="@language"in B,ge=u(se["@value"]),we=B.mappings.has(Z)&&B.mappings.get(Z)["@language"]===null;if(ue&&U!=="@none"&&(!pe||!ge||we))return se["@value"];const $={};return le&&($[q.compactIri({activeCtx:B,iri:"@index",relativeTo:{vocab:!0}})]=se["@index"]),"@type"in se?$[q.compactIri({activeCtx:B,iri:"@type",relativeTo:{vocab:!0}})]=q.compactIri({activeCtx:B,iri:se["@type"],relativeTo:{vocab:!0}}):"@language"in se&&($[q.compactIri({activeCtx:B,iri:"@language",relativeTo:{vocab:!0}})]=se["@language"]),"@direction"in se&&($[q.compactIri({activeCtx:B,iri:"@direction",relativeTo:{vocab:!0}})]=se["@direction"]),$[q.compactIri({activeCtx:B,iri:"@value",relativeTo:{vocab:!0}})]=se["@value"],$}const ye=b(B,Z,{vocab:!0},ae),fe=d(B,Z,"@type"),z=q.compactIri({activeCtx:B,iri:se["@id"],relativeTo:{vocab:fe==="@vocab"},base:ae.base});return fe==="@id"||fe==="@vocab"||ye==="@graph"?z:{[q.compactIri({activeCtx:B,iri:"@id",relativeTo:{vocab:!0}})]:z}}},{"./JsonLdError":42,"./context":49,"./graphTypes":56,"./types":61,"./url":62,"./util":63}],48:[function(P,ee,X){"use strict";const N="http://www.w3.org/1999/02/22-rdf-syntax-ns#",l="http://www.w3.org/2001/XMLSchema#";ee.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:N,RDF_LIST:N+"List",RDF_FIRST:N+"first",RDF_REST:N+"rest",RDF_NIL:N+"nil",RDF_TYPE:N+"type",RDF_PLAIN_LITERAL:N+"PlainLiteral",RDF_XML_LITERAL:N+"XMLLiteral",RDF_JSON_LITERAL:N+"JSON",RDF_OBJECT:N+"object",RDF_LANGSTRING:N+"langString",XSD:l,XSD_BOOLEAN:l+"boolean",XSD_DOUBLE:l+"double",XSD_INTEGER:l+"integer",XSD_STRING:l+"string"}},{}],49:[function(P,ee,X){"use strict";const N=P("./util"),l=P("./JsonLdError"),{isArray:E,isObject:u,isString:e,isUndefined:r}=P("./types"),{isAbsolute:o,isRelative:s,prependBase:c}=P("./url"),{handleEvent:v}=P("./events"),{REGEX_BCP47:b,REGEX_KEYWORD:d,asArray:g,compareShortestLeast:f}=P("./util"),O=new Map,I={};function j(A,C,Q,q,H,B){if(C===null||!e(C)||I.isKeyword(C))return C;if(C.match(d))return null;if(q&&q.hasOwnProperty(C)&&H.get(C)!==!0&&I.createTermDefinition({activeCtx:A,localCtx:q,term:C,defined:H,options:B}),(Q=Q||{}).vocab){const se=A.mappings.get(C);if(se===null)return null;if(u(se)&&"@id"in se)return se["@id"]}const Z=C.indexOf(":");if(Z>0){const se=C.substr(0,Z),ae=C.substr(Z+1);if(se==="_"||ae.indexOf("//")===0)return C;q&&q.hasOwnProperty(se)&&I.createTermDefinition({activeCtx:A,localCtx:q,term:se,defined:H,options:B});const ye=A.mappings.get(se);if(ye&&ye._prefix)return ye["@id"]+ae;if(o(C))return C}if(Q.vocab&&"@vocab"in A)C=A["@vocab"]+C;else if(Q.base){let se,ae;"@base"in A?A["@base"]?(ae=c(B.base,A["@base"]),se=c(ae,C)):(ae=A["@base"],se=C):(ae=B.base,se=c(B.base,C)),C=se}return C}function D(A,C){if(!A||typeof A!="object"||!C||typeof C!="object")return A===C;const Q=Array.isArray(A);if(Q!==Array.isArray(C))return!1;if(Q){if(A.length!==C.length)return!1;for(let B=0;B<A.length;++B)if(!D(A[B],C[B]))return!1;return!0}const q=Object.keys(A),H=Object.keys(C);if(q.length!==H.length)return!1;for(const B in A){let Z=A[B],se=C[B];if(B==="@container"&&Array.isArray(Z)&&Array.isArray(se)&&(Z=Z.slice().sort(),se=se.slice().sort()),!D(Z,se))return!1}return!0}ee.exports=I,I.process=async({activeCtx:A,localCtx:C,options:Q,propagate:q=!0,overrideProtected:H=!1,cycles:B=new Set})=>{if(u(C)&&"@context"in C&&E(C["@context"])&&(C=C["@context"]),g(C).length===0)return A;const Z=[],se=[({event:z,next:U})=>{Z.push(z),U()}];Q.eventHandler&&se.push(Q.eventHandler);const ae=Q;Q={...Q,eventHandler:se};const ye=await Q.contextResolver.resolve({activeCtx:A,context:C,documentLoader:Q.documentLoader,base:Q.base});u(ye[0].document)&&typeof ye[0].document["@propagate"]=="boolean"&&(q=ye[0].document["@propagate"]);let fe=A;q||fe.previousContext||(fe=fe.clone(),fe.previousContext=A);for(const z of ye){let{document:U}=z;if(A=fe,U===null){if(!H&&Object.keys(A.protected).length!==0)throw new l("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});fe=A=I.getInitialContext(Q).clone();continue}const W=z.getProcessed(A);if(W){if(ae.eventHandler)for(const Y of W.events)v({event:Y,options:ae});fe=A=W.context;continue}if(u(U)&&"@context"in U&&(U=U["@context"]),!u(U))throw new l("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:U});fe=fe.clone();const K=new Map;if("@version"in U){if(U["@version"]!==1.1)throw new l("Unsupported JSON-LD version: "+U["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:U});if(A.processingMode&&A.processingMode==="json-ld-1.0")throw new l("@version: "+U["@version"]+" not compatible with "+A.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:U});fe.processingMode="json-ld-1.1",fe["@version"]=U["@version"],K.set("@version",!0)}if(fe.processingMode=fe.processingMode||A.processingMode,"@base"in U){let Y=U["@base"];if(!(Y===null||o(Y))){if(!s(Y))throw new l('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:U});Y=c(fe["@base"],Y)}fe["@base"]=Y,K.set("@base",!0)}if("@vocab"in U){const Y=U["@vocab"];if(Y===null)delete fe["@vocab"];else{if(!e(Y))throw new l('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:U});if(!o(Y)&&I.processingMode(fe,1))throw new l('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:U});{const le=j(fe,Y,{vocab:!0,base:!0},void 0,void 0,Q);o(le)||Q.eventHandler&&v({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:le}},options:Q}),fe["@vocab"]=le}}K.set("@vocab",!0)}if("@language"in U){const Y=U["@language"];if(Y===null)delete fe["@language"];else{if(!e(Y))throw new l('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:U});Y.match(b)||Q.eventHandler&&v({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Y}},options:Q}),fe["@language"]=Y.toLowerCase()}K.set("@language",!0)}if("@direction"in U){const Y=U["@direction"];if(A.processingMode==="json-ld-1.0")throw new l("Invalid JSON-LD syntax; @direction not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:U});if(Y===null)delete fe["@direction"];else{if(Y!=="ltr"&&Y!=="rtl")throw new l('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:U});fe["@direction"]=Y}K.set("@direction",!0)}if("@propagate"in U){const Y=U["@propagate"];if(A.processingMode==="json-ld-1.0")throw new l("Invalid JSON-LD syntax; @propagate not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:U});if(typeof Y!="boolean")throw new l("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:C});K.set("@propagate",!0)}if("@import"in U){const Y=U["@import"];if(A.processingMode==="json-ld-1.0")throw new l("Invalid JSON-LD syntax; @import not compatible with "+A.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:U});if(!e(Y))throw new l("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:C});const le=await Q.contextResolver.resolve({activeCtx:A,context:Y,documentLoader:Q.documentLoader,base:Q.base});if(le.length!==1)throw new l("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:C});const re=le[0].getProcessed(A);if(re)U=re;else{const ue=le[0].document;if("@import"in ue)throw new l("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:C});for(const pe in ue)U.hasOwnProperty(pe)||(U[pe]=ue[pe]);le[0].setProcessed(A,U)}K.set("@import",!0)}K.set("@protected",U["@protected"]||!1);for(const Y in U)if(I.createTermDefinition({activeCtx:fe,localCtx:U,term:Y,defined:K,options:Q,overrideProtected:H}),u(U[Y])&&"@context"in U[Y]){const le=U[Y]["@context"];let re=!0;if(e(le)){const ue=c(Q.base,le);B.has(ue)?re=!1:B.add(ue)}if(re)try{await I.process({activeCtx:fe.clone(),localCtx:U[Y]["@context"],overrideProtected:!0,options:Q,cycles:B})}catch{throw new l("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:U[Y]["@context"],term:Y})}}z.setProcessed(A,{context:fe,events:Z})}return fe},I.createTermDefinition=({activeCtx:A,localCtx:C,term:Q,defined:q,options:H,overrideProtected:B=!1})=>{if(q.has(Q)){if(q.get(Q))return;throw new l("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:C,term:Q})}let Z;if(q.set(Q,!1),C.hasOwnProperty(Q)&&(Z=C[Q]),Q==="@type"&&u(Z)&&(Z["@container"]||"@set")==="@set"&&I.processingMode(A,1.1)){const W=["@container","@id","@protected"],K=Object.keys(Z);if(K.length===0||K.some(Y=>!W.includes(Y)))throw new l("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:C,term:Q})}else{if(I.isKeyword(Q))throw new l("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:C,term:Q});if(Q.match(d))return void(H.eventHandler&&v({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:Q}},options:H}));if(Q==="")throw new l("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:C})}const se=A.mappings.get(Q);A.mappings.has(Q)&&A.mappings.delete(Q);let ae=!1;if((e(Z)||Z===null)&&(ae=!0,Z={"@id":Z}),!u(Z))throw new l("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:C});const ye={};A.mappings.set(Q,ye),ye.reverse=!1;const fe=["@container","@id","@language","@reverse","@type"];I.processingMode(A,1.1)&&fe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const W in Z)if(!fe.includes(W))throw new l("Invalid JSON-LD syntax; a term definition must not contain "+W,"jsonld.SyntaxError",{code:"invalid term definition",context:C});const z=Q.indexOf(":");if(ye._termHasColon=z>0,"@reverse"in Z){if("@id"in Z)throw new l("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:C});if("@nest"in Z)throw new l("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:C});const W=Z["@reverse"];if(!e(W))throw new l("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:C});if(W.match(d))return H.eventHandler&&v({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:W}},options:H}),void(se?A.mappings.set(Q,se):A.mappings.delete(Q));const K=j(A,W,{vocab:!0,base:!1},C,q,H);if(!o(K))throw new l("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:C});ye["@id"]=K,ye.reverse=!0}else if("@id"in Z){let W=Z["@id"];if(W&&!e(W))throw new l("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:C});if(W===null)ye["@id"]=null;else{if(!I.isKeyword(W)&&W.match(d))return H.eventHandler&&v({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:W}},options:H}),void(se?A.mappings.set(Q,se):A.mappings.delete(Q));if(W!==Q){if(W=j(A,W,{vocab:!0,base:!1},C,q,H),!o(W)&&!I.isKeyword(W))throw new l("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:C});if(Q.match(/(?::[^:])|\//)&&j(A,Q,{vocab:!0,base:!1},C,new Map(q).set(Q,!0),H)!==W)throw new l("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:C});ye["@id"]=W,ye._prefix=ae&&!ye._termHasColon&&W.match(/[:\/\?#\[\]@]$/)!==null}}}if(!("@id"in ye))if(ye._termHasColon){const W=Q.substr(0,z);if(C.hasOwnProperty(W)&&I.createTermDefinition({activeCtx:A,localCtx:C,term:W,defined:q,options:H}),A.mappings.has(W)){const K=Q.substr(z+1);ye["@id"]=A.mappings.get(W)["@id"]+K}else ye["@id"]=Q}else if(Q==="@type")ye["@id"]=Q;else{if(!("@vocab"in A))throw new l("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:C,term:Q});ye["@id"]=A["@vocab"]+Q}if((Z["@protected"]===!0||q.get("@protected")===!0&&Z["@protected"]!==!1)&&(A.protected[Q]=!0,ye.protected=!0),q.set(Q,!0),"@type"in Z){let W=Z["@type"];if(!e(W))throw new l("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:C});if(W==="@json"||W==="@none"){if(I.processingMode(A,1))throw new l(`Invalid JSON-LD syntax; an @context @type value must not be "${W}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:C})}else if(W!=="@id"&&W!=="@vocab"){if(W=j(A,W,{vocab:!0,base:!1},C,q,H),!o(W))throw new l("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:C});if(W.indexOf("_:")===0)throw new l("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:C})}ye["@type"]=W}if("@container"in Z){const W=e(Z["@container"])?[Z["@container"]]:Z["@container"]||[],K=["@list","@set","@index","@language"];let Y=!0;const le=W.includes("@set");if(I.processingMode(A,1.1)){if(K.push("@graph","@id","@type"),W.includes("@list")){if(W.length!==1)throw new l("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:C})}else if(W.includes("@graph")){if(W.some(re=>re!=="@graph"&&re!=="@id"&&re!=="@index"&&re!=="@set"))throw new l("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:C})}else Y&=W.length<=(le?2:1);if(W.includes("@type")&&(ye["@type"]=ye["@type"]||"@id",!["@id","@vocab"].includes(ye["@type"])))throw new l("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:C})}else Y&=!E(Z["@container"]),Y&=W.length<=1;if(Y&=W.every(re=>K.includes(re)),Y&=!(le&&W.includes("@list")),!Y)throw new l("Invalid JSON-LD syntax; @context @container value must be one of the following: "+K.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:C});if(ye.reverse&&!W.every(re=>["@index","@set"].includes(re)))throw new l("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:C});ye["@container"]=W}if("@index"in Z){if(!("@container"in Z)||!ye["@container"].includes("@index"))throw new l(`Invalid JSON-LD syntax; @index without @index in @container: "${Z["@index"]}" on term "${Q}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:C});if(!e(Z["@index"])||Z["@index"].indexOf("@")===0)throw new l(`Invalid JSON-LD syntax; @index must expand to an IRI: "${Z["@index"]}" on term "${Q}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:C});ye["@index"]=Z["@index"]}if("@context"in Z&&(ye["@context"]=Z["@context"]),"@language"in Z&&!("@type"in Z)){let W=Z["@language"];if(W!==null&&!e(W))throw new l("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:C});W!==null&&(W=W.toLowerCase()),ye["@language"]=W}if("@prefix"in Z){if(Q.match(/:|\//))throw new l("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:C});if(I.isKeyword(ye["@id"]))throw new l("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:C});if(typeof Z["@prefix"]!="boolean")throw new l("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:C});ye._prefix=Z["@prefix"]===!0}if("@direction"in Z){const W=Z["@direction"];if(W!==null&&W!=="ltr"&&W!=="rtl")throw new l('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:C});ye["@direction"]=W}if("@nest"in Z){const W=Z["@nest"];if(!e(W)||W!=="@nest"&&W.indexOf("@")===0)throw new l("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:C});ye["@nest"]=W}// disallow aliasing @context and @preserve
const U=ye["@id"];if(U==="@context"||U==="@preserve")throw new l("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:C});if(se&&se.protected&&!B&&(A.protected[Q]=!0,ye.protected=!0,!D(se,ye)))throw new l("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:C,term:Q})},I.expandIri=(A,C,Q,q)=>j(A,C,Q,void 0,void 0,q),I.getInitialContext=A=>{const C=JSON.stringify({processingMode:A.processingMode}),Q=O.get(C);if(Q)return Q;const q={processingMode:A.processingMode,mappings:new Map,inverse:null,getInverse:function(){const Z=this;if(Z.inverse)return Z.inverse;const se=Z.inverse={},ae=Z.fastCurieMap={},ye={},fe=(Z["@language"]||"@none").toLowerCase(),z=Z["@direction"],U=Z.mappings,W=[...U.keys()].sort(f);for(const K of W){const Y=U.get(K);if(Y===null)continue;let le=Y["@container"]||"@none";if(le=[].concat(le).sort().join(""),Y["@id"]===null)continue;const re=g(Y["@id"]);for(const ue of re){let pe=se[ue];const ge=I.isKeyword(ue);if(pe)ge||Y._termHasColon||ye[ue].push(K);else if(se[ue]=pe={},!ge&&!Y._termHasColon){ye[ue]=[K];const we={iri:ue,terms:ye[ue]};ue[0]in ae?ae[ue[0]].push(we):ae[ue[0]]=[we]}if(pe[le]||(pe[le]={"@language":{},"@type":{},"@any":{}}),pe=pe[le],B(K,pe["@any"],"@none"),Y.reverse)B(K,pe["@type"],"@reverse");else if(Y["@type"]==="@none")B(K,pe["@any"],"@none"),B(K,pe["@language"],"@none"),B(K,pe["@type"],"@none");else if("@type"in Y)B(K,pe["@type"],Y["@type"]);else if("@language"in Y&&"@direction"in Y){const we=Y["@language"],$=Y["@direction"];B(K,pe["@language"],we&&$?`${we}_${$}`.toLowerCase():we?we.toLowerCase():$?`_${$}`:"@null")}else"@language"in Y?B(K,pe["@language"],(Y["@language"]||"@null").toLowerCase()):"@direction"in Y?Y["@direction"]?B(K,pe["@language"],`_${Y["@direction"]}`):B(K,pe["@language"],"@none"):z?(B(K,pe["@language"],`_${z}`),B(K,pe["@language"],"@none"),B(K,pe["@type"],"@none")):(B(K,pe["@language"],fe),B(K,pe["@language"],"@none"),B(K,pe["@type"],"@none"))}}for(const K in ae)H(ae,K,1);return se},clone:function(){const Z={};return Z.mappings=N.clone(this.mappings),Z.clone=this.clone,Z.inverse=null,Z.getInverse=this.getInverse,Z.protected=N.clone(this.protected),this.previousContext&&(Z.previousContext=this.previousContext.clone()),Z.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(Z["@base"]=this["@base"]),"@language"in this&&(Z["@language"]=this["@language"]),"@vocab"in this&&(Z["@vocab"]=this["@vocab"]),Z},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return O.size===1e4&&O.clear(),O.set(C,q),q;function H(Z,se,ae){const ye=Z[se],fe=Z[se]={};let z,U;for(const W of ye)z=W.iri,U=ae>=z.length?"":z[ae],U in fe?fe[U].push(W):fe[U]=[W];for(const W in fe)W!==""&&H(fe,W,ae+1)}function B(Z,se,ae){se.hasOwnProperty(ae)||(se[ae]=Z)}},I.getContextValue=(A,C,Q)=>{if(C===null)return Q==="@context"?void 0:null;if(A.mappings.has(C)){const q=A.mappings.get(C);if(r(Q))return q;if(q.hasOwnProperty(Q))return q[Q]}return Q==="@language"&&Q in A||Q==="@direction"&&Q in A?A[Q]:Q!=="@context"?null:void 0},I.processingMode=(A,C)=>C.toString()>="1.1"?!A.processingMode||A.processingMode>="json-ld-"+C.toString():A.processingMode==="json-ld-1.0",I.isKeyword=A=>{if(!e(A)||A[0]!=="@")return!1;switch(A){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":42,"./events":51,"./types":61,"./url":62,"./util":63}],50:[function(P,ee,X){"use strict";const{parseLinkHeader:N,buildHeaders:l}=P("../util"),{LINK_HEADER_CONTEXT:E}=P("../constants"),u=P("../JsonLdError"),e=P("../RequestQueue"),{prependBase:r}=P("../url"),o=/(^|(\r\n))link:/i;ee.exports=({secure:s,headers:c={},xhr:v}={headers:{}})=>(c=l(c),new e().wrapLoader(async function b(d){if(d.indexOf("http:")!==0&&d.indexOf("https:")!==0)throw new u('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d});if(s&&d.indexOf("https")!==0)throw new u(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:d});let g;try{g=await function(D,A,C){D=D||XMLHttpRequest;const Q=new D;return new Promise((q,H)=>{Q.onload=()=>q(Q),Q.onerror=B=>H(B),Q.open("GET",A,!0);for(const B in C)Q.setRequestHeader(B,C[B]);Q.send()})}(v,d,c)}catch(D){throw new u("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d,cause:D})}if(g.status>=400)throw new u("URL could not be dereferenced: "+g.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:d,httpStatusCode:g.status});let f={contextUrl:null,documentUrl:d,document:g.response},O=null;const I=g.getResponseHeader("Content-Type");let j;if(o.test(g.getAllResponseHeaders())&&(j=g.getResponseHeader("Link")),j&&I!=="application/ld+json"){const D=N(j),A=D[E];if(Array.isArray(A))throw new u("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d});A&&(f.contextUrl=A.target),O=D.alternate,O&&O.type=="application/ld+json"&&!(I||"").match(/^application\/(\w*\+)?json$/)&&(f=await b(r(d,O.target)))}return f}))},{"../JsonLdError":42,"../RequestQueue":45,"../constants":48,"../url":62,"../util":63}],51:[function(P,ee,X){"use strict";const N=P("./JsonLdError"),{isArray:l}=P("./types"),{asArray:E}=P("./util"),u={};function e({event:o,handlers:s}){let c=!0;for(let v=0;c&&v<s.length;++v){c=!1;const b=s[v];if(l(b))c=e({event:o,handlers:b});else if(typeof b=="function")b({event:o,next:()=>{c=!0}});else{if(typeof b!="object")throw new N("Invalid event handler.","jsonld.InvalidEventHandler",{event:o});o.code in b?b[o.code]({event:o,next:()=>{c=!0}}):c=!0}}return c}ee.exports=u,u.defaultEventHandler=null,u.setupEventHandler=({options:o={}})=>{const s=[].concat(o.safe?u.safeEventHandler:[],o.eventHandler?E(o.eventHandler):[],u.defaultEventHandler?u.defaultEventHandler:[]);return s.length===0?null:s},u.handleEvent=({event:o,options:s})=>{e({event:o,handlers:s.eventHandler})};const r=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);u.safeEventHandler=function({event:o,next:s}){if(o.level==="warning"&&r.has(o.code))throw new N("Safe mode validation error.","jsonld.ValidationError",{event:o});s()},u.logEventHandler=function({event:o,next:s}){console.log(`EVENT: ${o.message}`,{event:o}),s()},u.logWarningEventHandler=function({event:o,next:s}){o.level==="warning"&&console.warn(`WARNING: ${o.message}`,{event:o}),s()},u.unhandledEventHandler=function({event:o}){throw new N("No handler for event.","jsonld.UnhandledEvent",{event:o})},u.setDefaultEventHandler=function({eventHandler:o}={}){u.defaultEventHandler=o?E(o):null}},{"./JsonLdError":42,"./types":61,"./util":63}],52:[function(P,ee,X){"use strict";const N=P("./JsonLdError"),{isArray:l,isObject:E,isEmptyObject:u,isString:e,isUndefined:r}=P("./types"),{isList:o,isValue:s,isGraph:c,isSubject:v}=P("./graphTypes"),{expandIri:b,getContextValue:d,isKeyword:g,process:f,processingMode:O}=P("./context"),{isAbsolute:I}=P("./url"),{REGEX_BCP47:j,REGEX_KEYWORD:D,addValue:A,asArray:C,getValues:Q,validateTypeValue:q}=P("./util"),{handleEvent:H}=P("./events"),B={};function Z({value:z,count:U,options:W}){if(U===0||"@value"in z||"@list"in z||U===1&&"@id"in z){if(W.eventHandler){let K,Y;U===0?(K="empty object",Y="Dropping empty object."):"@value"in z?(K="object with only @value",Y="Dropping object with only @value."):"@list"in z?(K="object with only @list",Y="Dropping object with only @list."):U===1&&"@id"in z&&(K="object with only @id",Y="Dropping object with only @id."),H({event:{type:["JsonLdEvent"],code:K,level:"warning",message:Y,details:{value:z}},options:W})}return null}return z}async function se({activeCtx:z,activeProperty:U,expandedActiveProperty:W,element:K,expandedParent:Y,options:le={},insideList:re,typeKey:ue,typeScopedContext:pe}){const ge=Object.keys(K).sort(),we=[];let $;const w=K[ue]&&b(z,l(K[ue])?K[ue][0]:K[ue],{vocab:!0},{...le,typeExpansion:!0})==="@json";for(const L of ge){let G,te=K[L];if(L==="@context")continue;const ne=b(z,L,{vocab:!0},le);if(ne===null||!I(ne)&&!g(ne)){le.eventHandler&&H({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:L,expandedProperty:ne}},options:le});continue}if(g(ne)){if(W==="@reverse")throw new N("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:te});if(ne in Y&&ne!=="@included"&&ne!=="@type")throw new N("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ne})}if(ne==="@id"){if(!e(te)){if(!le.isFrame)throw new N('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:te});if(E(te)){if(!u(te))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:te})}else{if(!l(te))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:te});if(!te.every(_e=>e(_e)))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:te})}}A(Y,"@id",C(te).map(_e=>{if(e(_e)){const je=b(z,_e,{base:!0},le);return le.eventHandler&&(je===null?H(_e===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:_e}},options:le}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:_e}},options:le}):I(je)||H({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:_e,expandedId:je}},options:le})),je}return _e}),{propertyIsArray:le.isFrame});continue}if(ne==="@type"){E(te)&&(te=Object.fromEntries(Object.entries(te).map(([_e,je])=>[b(pe,_e,{vocab:!0}),C(je).map(Re=>b(pe,Re,{base:!0,vocab:!0},{...le,typeExpansion:!0}))]))),q(te,le.isFrame),A(Y,"@type",C(te).map(_e=>{if(e(_e)){const je=b(pe,_e,{base:!0,vocab:!0},{...le,typeExpansion:!0});return je==="@json"||I(je)||le.eventHandler&&H({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:_e}},options:le}),je}return _e}),{propertyIsArray:!!le.isFrame});continue}if(ne==="@included"&&O(z,1.1)){const _e=C(await B.expand({activeCtx:z,activeProperty:U,element:te,options:le}));if(!_e.every(je=>v(je)))throw new N("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:te});A(Y,"@included",_e,{propertyIsArray:!0});continue}if(ne==="@graph"&&!E(te)&&!l(te))throw new N('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:te});if(ne==="@value"){$=te,w&&O(z,1.1)?Y["@value"]=te:A(Y,"@value",te,{propertyIsArray:le.isFrame});continue}if(ne==="@language"){if(te===null)continue;if(!e(te)&&!le.isFrame)throw new N('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:te});te=C(te).map(_e=>e(_e)?_e.toLowerCase():_e);for(const _e of te)e(_e)&&!_e.match(j)&&le.eventHandler&&H({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:_e}},options:le});A(Y,"@language",te,{propertyIsArray:le.isFrame});continue}if(ne==="@direction"){if(!e(te)&&!le.isFrame)throw new N('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:te});te=C(te);for(const _e of te)if(e(_e)&&_e!=="ltr"&&_e!=="rtl")throw new N('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:te});A(Y,"@direction",te,{propertyIsArray:le.isFrame});continue}if(ne==="@index"){if(!e(te))throw new N('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:te});A(Y,"@index",te);continue}if(ne==="@reverse"){if(!E(te))throw new N('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:te});if(G=await B.expand({activeCtx:z,activeProperty:"@reverse",element:te,options:le}),"@reverse"in G)for(const je in G["@reverse"])A(Y,je,G["@reverse"][je],{propertyIsArray:!0});let _e=Y["@reverse"]||null;for(const je in G){if(je==="@reverse")continue;_e===null&&(_e=Y["@reverse"]={}),A(_e,je,[],{propertyIsArray:!0});const Re=G[je];for(let Ae=0;Ae<Re.length;++Ae){const xe=Re[Ae];if(s(xe)||o(xe))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:G});A(_e,je,xe,{propertyIsArray:!0})}}continue}if(ne==="@nest"){we.push(L);continue}let ie=z;const he=d(z,L,"@context");r(he)||(ie=await f({activeCtx:z,localCtx:he,propagate:!0,overrideProtected:!0,options:le}));const be=d(z,L,"@container")||[];if(be.includes("@language")&&E(te))G=ye(ie,te,d(ie,L,"@direction"),le);else if(be.includes("@index")&&E(te)){const _e=be.includes("@graph"),je=d(ie,L,"@index")||"@index",Re=je!=="@index"&&b(z,je,{vocab:!0},le);G=await fe({activeCtx:ie,options:le,activeProperty:L,value:te,asGraph:_e,indexKey:je,propertyIndex:Re})}else if(be.includes("@id")&&E(te)){const _e=be.includes("@graph");G=await fe({activeCtx:ie,options:le,activeProperty:L,value:te,asGraph:_e,indexKey:"@id"})}else if(be.includes("@type")&&E(te))G=await fe({activeCtx:ie.revertToPreviousContext(),options:le,activeProperty:L,value:te,asGraph:!1,indexKey:"@type"});else{const _e=ne==="@list";if(_e||ne==="@set"){let je=U;_e&&W==="@graph"&&(je=null),G=await B.expand({activeCtx:ie,activeProperty:je,element:te,options:le,insideList:_e})}else G=d(z,L,"@type")==="@json"?{"@type":"@json","@value":te}:await B.expand({activeCtx:ie,activeProperty:L,element:te,options:le,insideList:!1})}if(G!==null||ne==="@value"){if(ne!=="@list"&&!o(G)&&be.includes("@list")&&(G={"@list":C(G)}),be.includes("@graph")&&!be.some(_e=>_e==="@id"||_e==="@index")){if(G=C(G),le.isFrame||(G=G.filter(_e=>Z({value:_e,count:Object.keys(_e).length,options:le})!==null)),G.length===0)continue;G=G.map(_e=>({"@graph":C(_e)}))}if(ie.mappings.has(L)&&ie.mappings.get(L).reverse){const _e=Y["@reverse"]=Y["@reverse"]||{};G=C(G);for(let je=0;je<G.length;++je){const Re=G[je];if(s(Re)||o(Re))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:G});A(_e,ne,Re,{propertyIsArray:!0})}}else A(Y,ne,G,{propertyIsArray:!0})}}if("@value"in Y&&!(Y["@type"]==="@json"&&O(z,1.1))){if((E($)||l($))&&!le.isFrame)throw new N('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:$})}for(const L of we){const G=l(K[L])?K[L]:[K[L]];for(const te of G){if(!E(te)||Object.keys(te).some(ne=>b(z,ne,{vocab:!0},le)==="@value"))throw new N("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:te});await se({activeCtx:z,activeProperty:U,expandedActiveProperty:W,element:te,expandedParent:Y,options:le,insideList:re,typeScopedContext:pe,typeKey:ue})}}}function ae({activeCtx:z,activeProperty:U,value:W,options:K}){if(W==null)return null;const Y=b(z,U,{vocab:!0},K);if(Y==="@id")return b(z,W,{base:!0},K);if(Y==="@type")return b(z,W,{vocab:!0,base:!0},{...K,typeExpansion:!0});const le=d(z,U,"@type");if((le==="@id"||Y==="@graph")&&e(W)){const ue=b(z,W,{base:!0},K);return ue===null&&W.match(D)&&K.eventHandler&&H({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:U}},options:K}),{"@id":ue}}if(le==="@vocab"&&e(W))return{"@id":b(z,W,{vocab:!0,base:!0},K)};if(g(Y))return W;const re={};if(le&&!["@id","@vocab","@none"].includes(le))re["@type"]=le;else if(e(W)){const ue=d(z,U,"@language");ue!==null&&(re["@language"]=ue);const pe=d(z,U,"@direction");pe!==null&&(re["@direction"]=pe)}return["boolean","number","string"].includes(typeof W)||(W=W.toString()),re["@value"]=W,re}function ye(z,U,W,K){const Y=[],le=Object.keys(U).sort();for(const re of le){const ue=b(z,re,{vocab:!0},K);let pe=U[re];l(pe)||(pe=[pe]);for(const ge of pe){if(ge===null)continue;if(!e(ge))throw new N("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:U});const we={"@value":ge};ue!=="@none"&&(re.match(j)||K.eventHandler&&H({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:re}},options:K}),we["@language"]=re.toLowerCase()),W&&(we["@direction"]=W),Y.push(we)}}return Y}async function fe({activeCtx:z,options:U,activeProperty:W,value:K,asGraph:Y,indexKey:le,propertyIndex:re}){const ue=[],pe=Object.keys(K).sort(),ge=le==="@type";for(let we of pe){if(ge){const L=d(z,we,"@context");r(L)||(z=await f({activeCtx:z,localCtx:L,propagate:!1,options:U}))}let $,w=K[we];l(w)||(w=[w]),w=await B.expand({activeCtx:z,activeProperty:W,element:w,options:U,insideList:!1,insideIndex:!0}),$=re?we==="@none"?"@none":ae({activeCtx:z,activeProperty:le,value:we,options:U}):b(z,we,{vocab:!0},U),le==="@id"?we=b(z,we,{base:!0},U):ge&&(we=$);for(let L of w){if(Y&&!c(L)&&(L={"@graph":[L]}),le==="@type")$==="@none"||(L["@type"]?L["@type"]=[we].concat(L["@type"]):L["@type"]=[we]);else{if(s(L)&&!["@language","@type","@index"].includes(le))throw new N(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${le}".`,"jsonld.SyntaxError",{code:"invalid value object",value:L});re?$!=="@none"&&A(L,re,$,{propertyIsArray:!0,prependValue:!0}):$==="@none"||le in L||(L[le]=we)}ue.push(L)}}return ue}ee.exports=B,B.expand=async({activeCtx:z,activeProperty:U=null,element:W,options:K={},insideList:Y=!1,insideIndex:le=!1,typeScopedContext:re=null})=>{if(W==null)return null;if(U==="@default"&&(K=Object.assign({},K,{isFrame:!1})),!l(W)&&!E(W))return Y||U!==null&&b(z,U,{vocab:!0},K)!=="@graph"?ae({activeCtx:z,activeProperty:U,value:W,options:K}):(K.eventHandler&&H({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:W}},options:K}),null);if(l(W)){let G=[];const te=d(z,U,"@container")||[];Y=Y||te.includes("@list");for(let ne=0;ne<W.length;++ne){let ie=await B.expand({activeCtx:z,activeProperty:U,element:W[ne],options:K,insideIndex:le,typeScopedContext:re});Y&&l(ie)&&(ie={"@list":ie}),ie!==null&&(l(ie)?G=G.concat(ie):G.push(ie))}return G}const ue=b(z,U,{vocab:!0},K),pe=d(z,U,"@context");re=re||(z.previousContext?z:null);let ge=Object.keys(W).sort(),we=!le;if(we&&re&&ge.length<=2&&!ge.includes("@context"))for(const G of ge){const te=b(re,G,{vocab:!0},K);if(te==="@value"){we=!1,z=re;break}if(te==="@id"&&ge.length===1){we=!1;break}}we&&(z=z.revertToPreviousContext()),r(pe)||(z=await f({activeCtx:z,localCtx:pe,propagate:!0,overrideProtected:!0,options:K})),"@context"in W&&(z=await f({activeCtx:z,localCtx:W["@context"],options:K})),re=z;let $=null;for(const G of ge)if(b(z,G,{vocab:!0},K)==="@type"){$=$||G;const te=W[G],ne=Array.isArray(te)?te.length>1?te.slice().sort():te:[te];for(const ie of ne){const he=d(re,ie,"@context");r(he)||(z=await f({activeCtx:z,localCtx:he,options:K,propagate:!1}))}}let w={};await se({activeCtx:z,activeProperty:U,expandedActiveProperty:ue,element:W,expandedParent:w,options:K,insideList:Y,typeKey:$,typeScopedContext:re}),ge=Object.keys(w);let L=ge.length;if("@value"in w){if("@type"in w&&("@language"in w||"@direction"in w))throw new N('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:w});let G=L-1;if("@type"in w&&(G-=1),"@index"in w&&(G-=1),"@language"in w&&(G-=1),"@direction"in w&&(G-=1),G!==0)throw new N('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:w});const te=w["@value"]===null?[]:C(w["@value"]),ne=Q(w,"@type");if(!(O(z,1.1)&&ne.includes("@json")&&ne.length===1))if(te.length===0)K.eventHandler&&H({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:w}},options:K}),w=null;else{if(!te.every(ie=>e(ie)||u(ie))&&"@language"in w)throw new N("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:w});if(!ne.every(ie=>I(ie)&&!(e(ie)&&ie.indexOf("_:")===0)||u(ie)))throw new N('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:w})}}else if("@type"in w&&!l(w["@type"]))w["@type"]=[w["@type"]];else if("@set"in w||"@list"in w){if(L>1&&(L!==2||!("@index"in w)))throw new N('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:w});"@set"in w&&(w=w["@set"],ge=Object.keys(w),L=ge.length)}else L===1&&"@language"in w&&(K.eventHandler&&H({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:w}},options:K}),w=null);return!E(w)||K.keepFreeFloatingNodes||Y||U!==null&&ue!=="@graph"&&!(d(z,U,"@container")||[]).includes("@graph")||(w=Z({value:w,count:L,options:K})),w}},{"./JsonLdError":42,"./context":49,"./events":51,"./graphTypes":56,"./types":61,"./url":62,"./util":63}],53:[function(P,ee,X){"use strict";const{isSubjectReference:N}=P("./graphTypes"),{createMergedNodeMap:l}=P("./nodeMap"),E={};ee.exports=E,E.flatten=u=>{const e=l(u),r=[],o=Object.keys(e).sort();for(let s=0;s<o.length;++s){const c=e[o[s]];N(c)||r.push(c)}return r}},{"./graphTypes":56,"./nodeMap":58}],54:[function(P,ee,X){"use strict";const{isKeyword:N}=P("./context"),l=P("./graphTypes"),E=P("./types"),u=P("./util"),e=P("./url"),r=P("./JsonLdError"),{createNodeMap:o,mergeNodeMapGraphs:s}=P("./nodeMap"),c={};function v(C){const Q={};for(const q in C)C[q]!==void 0&&(Q["@"+q]=[C[q]]);return[Q]}function b(C,Q,q){for(let H=q.length-1;H>=0;--H){const B=q[H];if(B.graph===Q&&B.subject["@id"]===C["@id"])return!0}return!1}function d(C,Q,q){const H="@"+q;let B=H in C?C[H][0]:Q[q];if(q==="embed"){if(B===!0)B="@once";else if(B===!1)B="@never";else if(B!=="@always"&&B!=="@never"&&B!=="@link"&&B!=="@first"&&B!=="@last"&&B!=="@once")throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:C})}return B}function g(C){if(!E.isArray(C)||C.length!==1||!E.isObject(C[0]))throw new r("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:C});if("@id"in C[0]){for(const Q of u.asArray(C[0]["@id"]))if(!E.isObject(Q)&&!e.isAbsolute(Q)||E.isString(Q)&&Q.indexOf("_:")===0)throw new r("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:C})}if("@type"in C[0]){for(const Q of u.asArray(C[0]["@type"]))if(!E.isObject(Q)&&!e.isAbsolute(Q)&&Q!=="@json"||E.isString(Q)&&Q.indexOf("_:")===0)throw new r("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:C})}}function f(C,Q,q,H){let B=!0,Z=!1;for(const se in q){let ae=!1;const ye=u.getValues(Q,se),fe=u.getValues(q,se).length===0;if(se==="@id"){if(E.isEmptyObject(q["@id"][0]||{})?ae=!0:q["@id"].length>=0&&(ae=q["@id"].includes(ye[0])),!H.requireAll)return ae}else if(se==="@type"){if(B=!1,fe){if(ye.length>0)return!1;ae=!0}else if(q["@type"].length===1&&E.isEmptyObject(q["@type"][0]))ae=ye.length>0;else for(const z of q["@type"])ae=!(!E.isObject(z)||!("@default"in z))||ae||ye.some(U=>U===z);if(!H.requireAll)return ae}else{if(N(se))continue;{const z=u.getValues(q,se)[0];let U=!1;if(z&&(g([z]),U="@default"in z),B=!1,ye.length===0&&U)continue;if(ye.length>0&&fe)return!1;if(z===void 0){if(ye.length>0)return!1;ae=!0}else if(l.isList(z)){const W=z["@list"][0];if(l.isList(ye[0])){const K=ye[0]["@list"];l.isValue(W)?ae=K.some(Y=>A(W,Y)):(l.isSubject(W)||l.isSubjectReference(W))&&(ae=K.some(Y=>D(C,W,Y,H)))}}else ae=l.isValue(z)?ye.some(W=>A(z,W)):l.isSubjectReference(z)?ye.some(W=>D(C,z,W,H)):!!E.isObject(z)&&ye.length>0}}if(!ae&&H.requireAll)return!1;Z=Z||ae}return B||Z}function O(C,Q){const q=C.uniqueEmbeds[C.graph],H=q[Q],B=H.parent,Z=H.property,se={"@id":Q};if(E.isArray(B)){for(let ye=0;ye<B.length;++ye)if(u.compareValues(B[ye],se)){B[ye]=se;break}}else{const ye=E.isArray(B[Z]);u.removeValue(B,Z,se,{propertyIsArray:ye}),u.addValue(B,Z,se,{propertyIsArray:ye})}const ae=ye=>{const fe=Object.keys(q);for(const z of fe)z in q&&E.isObject(q[z].parent)&&q[z].parent["@id"]===ye&&(delete q[z],ae(z))};ae(Q)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function I(C,Q){if(E.isArray(C))return C.map(q=>I(q,Q));if(E.isObject(C)){// remove @preserve
if("@preserve"in C)return C["@preserve"][0];if(l.isValue(C))return C;if(l.isList(C))return C["@list"]=I(C["@list"],Q),C;if("@id"in C){const q=C["@id"];if(Q.link.hasOwnProperty(q)){const H=Q.link[q].indexOf(C);if(H!==-1)return Q.link[q][H];Q.link[q].push(C)}else Q.link[q]=[C]}for(const q in C)q==="@id"&&Q.bnodesToClear.includes(C[q])?delete C["@id"]:C[q]=I(C[q],Q)}return C}function j(C,Q,q){E.isObject(C)?u.addValue(C,Q,q,{propertyIsArray:!0}):C.push(q)}function D(C,Q,q,H){if(!("@id"in q))return!1;const B=C.subjects[q["@id"]];return B&&f(C,B,Q,H)}function A(C,Q){const q=Q["@value"],H=Q["@type"],B=Q["@language"],Z=C["@value"]?E.isArray(C["@value"])?C["@value"]:[C["@value"]]:[],se=C["@type"]?E.isArray(C["@type"])?C["@type"]:[C["@type"]]:[],ae=C["@language"]?E.isArray(C["@language"])?C["@language"]:[C["@language"]]:[];return Z.length===0&&se.length===0&&ae.length===0||!(!Z.includes(q)&&!E.isEmptyObject(Z[0]))&&!!(!H&&se.length===0||se.includes(H)||H&&E.isEmptyObject(se[0]))&&!!(!B&&ae.length===0||ae.includes(B)||B&&E.isEmptyObject(ae[0]))}ee.exports=c,c.frameMergedOrDefault=(C,Q,q)=>{const H={options:q,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},B=new u.IdentifierIssuer("_:b");o(C,H.graphMap,"@default",B),q.merged&&(H.graphMap["@merged"]=s(H.graphMap),H.graph="@merged"),H.subjects=H.graphMap[H.graph];const Z=[];return c.frame(H,Object.keys(H.subjects).sort(),Q,Z),q.pruneBlankNodeIdentifiers&&(q.bnodesToClear=Object.keys(H.bnodeMap).filter(se=>H.bnodeMap[se].length===1)),q.link={},I(Z,q)},c.frame=(C,Q,q,H,B=null)=>{g(q),q=q[0];const Z=C.options,se={embed:d(q,Z,"embed"),explicit:d(q,Z,"explicit"),requireAll:d(q,Z,"requireAll")};C.link.hasOwnProperty(C.graph)||(C.link[C.graph]={});const ae=C.link[C.graph],ye=function(z,U,W,K){const Y={};for(const le of U){const re=z.graphMap[z.graph][le];f(z,re,W,K)&&(Y[le]=re)}return Y}(C,Q,q,se),fe=Object.keys(ye).sort();for(const z of fe){const U=ye[z];if(B===null?C.uniqueEmbeds={[C.graph]:{}}:C.uniqueEmbeds[C.graph]=C.uniqueEmbeds[C.graph]||{},se.embed==="@link"&&z in ae){j(H,B,ae[z]);continue}const W={"@id":z};if(z.indexOf("_:")===0&&u.addValue(C.bnodeMap,z,W,{propertyIsArray:!0}),ae[z]=W,(se.embed==="@first"||se.embed==="@last")&&C.is11)throw new r("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:q});if(C.embedded||!C.uniqueEmbeds[C.graph].hasOwnProperty(z))if(!C.embedded||se.embed!=="@never"&&!b(U,C.graph,C.subjectStack))if(!C.embedded||se.embed!="@first"&&se.embed!="@once"||!C.uniqueEmbeds[C.graph].hasOwnProperty(z)){if(se.embed==="@last"&&z in C.uniqueEmbeds[C.graph]&&O(C,z),C.uniqueEmbeds[C.graph][z]={parent:H,property:B},C.subjectStack.push({subject:U,graph:C.graph}),z in C.graphMap){let K=!1,Y=null;"@graph"in q?(Y=q["@graph"][0],K=!(z==="@merged"||z==="@default"),E.isObject(Y)||(Y={})):(K=C.graph!=="@merged",Y={}),K&&c.frame({...C,graph:z,embedded:!1},Object.keys(C.graphMap[z]).sort(),[Y],W,"@graph")}"@included"in q&&c.frame({...C,embedded:!1},Q,q["@included"],W,"@included");for(const K of Object.keys(U).sort())if(N(K)){if(W[K]=u.clone(U[K]),K==="@type")for(const Y of U["@type"])Y.indexOf("_:")===0&&u.addValue(C.bnodeMap,Y,W,{propertyIsArray:!0})}else if(!se.explicit||K in q)for(const Y of U[K]){const le=K in q?q[K]:v(se);if(l.isList(Y)){const re=q[K]&&q[K][0]&&q[K][0]["@list"]?q[K][0]["@list"]:v(se),ue={"@list":[]};j(W,K,ue);const pe=Y["@list"];for(const ge of pe)l.isSubjectReference(ge)?c.frame({...C,embedded:!0},[ge["@id"]],re,ue,"@list"):j(ue,"@list",u.clone(ge))}else l.isSubjectReference(Y)?c.frame({...C,embedded:!0},[Y["@id"]],le,W,K):A(le[0],Y)&&j(W,K,u.clone(Y))}for(const K of Object.keys(q).sort()){if(K==="@type"){if(!E.isObject(q[K][0])||!("@default"in q[K][0]))continue}else if(N(K))continue;const Y=q[K][0]||{};if(!d(Y,Z,"omitDefault")&&!(K in W)){let le="@null";"@default"in Y&&(le=u.clone(Y["@default"])),E.isArray(le)||(le=[le]),W[K]=[{"@preserve":le}]}}for(const K of Object.keys(q["@reverse"]||{}).sort()){const Y=q["@reverse"][K];for(const le of Object.keys(C.subjects))u.getValues(C.subjects[le],K).some(re=>re["@id"]===z)&&(W["@reverse"]=W["@reverse"]||{},u.addValue(W["@reverse"],K,[],{propertyIsArray:!0}),c.frame({...C,embedded:!0},[le],Y,W["@reverse"][K],B))}j(H,B,W),C.subjectStack.pop()}else j(H,B,W);else j(H,B,W)}},c.cleanupNull=(C,Q)=>{if(E.isArray(C))return C.map(q=>c.cleanupNull(q,Q)).filter(q=>q);if(C==="@null")return null;if(E.isObject(C)){if("@id"in C){const q=C["@id"];if(Q.link.hasOwnProperty(q)){const H=Q.link[q].indexOf(C);if(H!==-1)return Q.link[q][H];Q.link[q].push(C)}else Q.link[q]=[C]}for(const q in C)C[q]=c.cleanupNull(C[q],Q)}return C}},{"./JsonLdError":42,"./context":49,"./graphTypes":56,"./nodeMap":58,"./types":61,"./url":62,"./util":63}],55:[function(P,ee,X){"use strict";const N=P("./JsonLdError"),l=P("./graphTypes"),E=P("./types"),{REGEX_BCP47:u,addValue:e}=P("./util"),{handleEvent:r}=P("./events"),{RDF_LIST:o,RDF_FIRST:s,RDF_REST:c,RDF_NIL:v,RDF_TYPE:b,RDF_JSON_LITERAL:d,XSD_BOOLEAN:g,XSD_DOUBLE:f,XSD_INTEGER:O,XSD_STRING:I}=P("./constants"),j={};function D(A,C,Q,q){if(A.termType.endsWith("Node"))return{"@id":A.value};const H={"@value":A.value};if(A.language)A.language.match(u)||q.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:A.language}},options:q}),H["@language"]=A.language;else{let B=A.datatype.value;if(B||(B=I),B===d){B="@json";try{H["@value"]=JSON.parse(H["@value"])}catch(Z){throw new N("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:H["@value"],cause:Z})}}if(C){if(B===g)H["@value"]==="true"?H["@value"]=!0:H["@value"]==="false"&&(H["@value"]=!1);else if(E.isNumeric(H["@value"]))if(B===O){const Z=parseInt(H["@value"],10);Z.toFixed(0)===H["@value"]&&(H["@value"]=Z)}else B===f&&(H["@value"]=parseFloat(H["@value"]));[g,O,f,I].includes(B)||(H["@type"]=B)}else if(Q==="i18n-datatype"&&B.startsWith("https://www.w3.org/ns/i18n#")){const[,Z,se]=B.split(/[#_]/);Z.length>0&&(H["@language"]=Z,Z.match(u)||q.eventHandler&&r({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Z}},options:q})),H["@direction"]=se}else B!==I&&(H["@type"]=B)}return H}ee.exports=j,j.fromRDF=async(A,C)=>{const{useRdfType:Q=!1,useNativeTypes:q=!1,rdfDirection:H=null}=C,B={},Z={"@default":B},se={};if(H){if(H==="compound-literal")throw new N("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:H});if(H!=="i18n-datatype")throw new N("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:H})}for(const fe of A){const z=fe.graph.termType==="DefaultGraph"?"@default":fe.graph.value;z in Z||(Z[z]={}),z==="@default"||z in B||(B[z]={"@id":z});const U=Z[z],W=fe.subject.value,K=fe.predicate.value,Y=fe.object;W in U||(U[W]={"@id":W});const le=U[W],re=Y.termType.endsWith("Node");if(re&&!(Y.value in U)&&(U[Y.value]={"@id":Y.value}),K===b&&!Q&&re){e(le,"@type",Y.value,{propertyIsArray:!0});continue}const ue=D(Y,q,H,C);if(e(le,K,ue,{propertyIsArray:!0}),re)if(Y.value===v){const pe=U[Y.value];"usages"in pe||(pe.usages=[]),pe.usages.push({node:le,property:K,value:ue})}else Y.value in se?se[Y.value]=!1:se[Y.value]={node:le,property:K,value:ue}}for(const fe in Z){const z=Z[fe];if(!(v in z))continue;const U=z[v];if(U.usages){for(let W of U.usages){let K=W.node,Y=W.property,le=W.value;const re=[],ue=[];let pe=Object.keys(K).length;for(;Y===c&&E.isObject(se[K["@id"]])&&E.isArray(K[s])&&K[s].length===1&&E.isArray(K[c])&&K[c].length===1&&(pe===3||pe===4&&E.isArray(K["@type"])&&K["@type"].length===1&&K["@type"][0]===o)&&(re.push(K[s][0]),ue.push(K["@id"]),W=se[K["@id"]],K=W.node,Y=W.property,le=W.value,pe=Object.keys(K).length,l.isBlankNode(K)););delete le["@id"],le["@list"]=re.reverse();for(const ge of ue)delete z[ge]}delete U.usages}}const ae=[],ye=Object.keys(B).sort();for(const fe of ye){const z=B[fe];if(fe in Z){const U=z["@graph"]=[],W=Z[fe],K=Object.keys(W).sort();for(const Y of K){const le=W[Y];l.isSubjectReference(le)||U.push(le)}}l.isSubjectReference(z)||ae.push(z)}return ae}},{"./JsonLdError":42,"./constants":48,"./events":51,"./graphTypes":56,"./types":61,"./util":63}],56:[function(P,ee,X){"use strict";const N=P("./types"),l={};ee.exports=l,l.isSubject=E=>N.isObject(E)&&!("@value"in E||"@set"in E||"@list"in E)?Object.keys(E).length>1||!("@id"in E):!1,l.isSubjectReference=E=>N.isObject(E)&&Object.keys(E).length===1&&"@id"in E,l.isValue=E=>N.isObject(E)&&"@value"in E,l.isList=E=>N.isObject(E)&&"@list"in E,l.isGraph=E=>N.isObject(E)&&"@graph"in E&&Object.keys(E).filter(u=>u!=="@id"&&u!=="@index").length===1,l.isSimpleGraph=E=>l.isGraph(E)&&!("@id"in E),l.isBlankNode=E=>{if(N.isObject(E)){if("@id"in E){const u=E["@id"];return!N.isString(u)||u.indexOf("_:")===0}return Object.keys(E).length===0||!("@value"in E||"@set"in E||"@list"in E)}return!1}},{"./types":61}],57:[function(P,ee,X){/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const N=P("rdf-canonize"),l=P("./platform"),E=P("./util"),u=P("./ContextResolver"),e=E.IdentifierIssuer,r=P("./JsonLdError"),o=P("lru-cache"),s=P("./NQuads"),{expand:c}=P("./expand"),{flatten:v}=P("./flatten"),{fromRDF:b}=P("./fromRdf"),{toRDF:d}=P("./toRdf"),{frameMergedOrDefault:g,cleanupNull:f}=P("./frame"),{isArray:O,isObject:I,isString:j}=P("./types"),{isSubjectReference:D}=P("./graphTypes"),{expandIri:A,getInitialContext:C,process:Q,processingMode:q}=P("./context"),{compact:H,compactIri:B}=P("./compact"),{createNodeMap:Z,createMergedNodeMap:se,mergeNodeMaps:ae}=P("./nodeMap"),{logEventHandler:ye,logWarningEventHandler:fe,safeEventHandler:z,setDefaultEventHandler:U,setupEventHandler:W,strictEventHandler:K,unhandledEventHandler:Y}=P("./events"),le=function(ue){const pe={},ge=new o({max:100});function we($,{documentLoader:w=ue.documentLoader,...L}){if($&&"compactionMap"in $)throw new r('"compactionMap" not supported.',"jsonld.OptionsError");if($&&"expansionMap"in $)throw new r('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:w},L,$,{eventHandler:W({options:$})})}return ue.compact=async function($,w,L){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(w===null)throw new r("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if($===null)return null;let G;(L=we(L,{base:j($)?$:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new u({sharedCache:ge})})).link&&(L.skipExpansion=!0),L.compactToRelative||delete L.base,G=L.skipExpansion?$:await ue.expand($,L);const te=await ue.processContext(C(L),w,L);let ne=await H({activeCtx:te,element:G,options:L});L.compactArrays&&!L.graph&&O(ne)?ne.length===1?ne=ne[0]:ne.length===0&&(ne={}):L.graph&&I(ne)&&(ne=[ne]),I(w)&&"@context"in w&&(w=w["@context"]),w=E.clone(w),O(w)||(w=[w]);const ie=w;w=[];for(let be=0;be<ie.length;++be)(!I(ie[be])||Object.keys(ie[be]).length>0)&&w.push(ie[be]);const he=w.length>0;if(w.length===1&&(w=w[0]),O(ne)){const be=B({activeCtx:te,iri:"@graph",relativeTo:{vocab:!0}}),_e=ne;ne={},he&&(ne["@context"]=w),ne[be]=_e}else if(I(ne)&&he){const be=ne;ne={"@context":w};for(const _e in be)ne[_e]=be[_e]}return ne},ue.expand=async function($,w){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const L={},G=[];if("expandContext"in(w=we(w,{keepFreeFloatingNodes:!1,contextResolver:new u({sharedCache:ge})}))){const he=E.clone(w.expandContext);I(he)&&"@context"in he?L.expandContext=he:L.expandContext={"@context":he},G.push(L.expandContext)}let te;if(j($)){const he=await ue.get($,w);te=he.documentUrl,L.input=he.document,he.contextUrl&&(L.remoteContext={"@context":he.contextUrl},G.push(L.remoteContext))}else L.input=E.clone($);"base"in w||(w.base=te||"");let ne=C(w);for(const he of G)ne=await Q({activeCtx:ne,localCtx:he,options:w});let ie=await c({activeCtx:ne,element:L.input,options:w});return I(ie)&&"@graph"in ie&&Object.keys(ie).length===1?ie=ie["@graph"]:ie===null&&(ie=[]),O(ie)||(ie=[ie]),ie},ue.flatten=async function($,w,L){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");w=typeof w=="function"?null:w||null,L=we(L,{base:j($)?$:"",contextResolver:new u({sharedCache:ge})});const G=await ue.expand($,L),te=v(G);return w===null?te:(L.graph=!0,L.skipExpansion=!0,await ue.compact(te,w,L))},ue.frame=async function($,w,L){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(L=we(L,{base:j($)?$:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new u({sharedCache:ge})}),j(w)){const Re=await ue.get(w,L);if(w=Re.document,Re.contextUrl){let Ae=w["@context"];Ae?O(Ae)?Ae.push(Re.contextUrl):Ae=[Ae,Re.contextUrl]:Ae=Re.contextUrl,w["@context"]=Ae}}const G=w&&w["@context"]||{},te=await ue.processContext(C(L),G,L);L.hasOwnProperty("omitGraph")||(L.omitGraph=q(te,1.1)),L.hasOwnProperty("pruneBlankNodeIdentifiers")||(L.pruneBlankNodeIdentifiers=q(te,1.1));const ne=await ue.expand($,L),ie={...L};ie.isFrame=!0,ie.keepFreeFloatingNodes=!0;const he=await ue.expand(w,ie),be=Object.keys(w).map(Re=>A(te,Re,{vocab:!0}));ie.merged=!be.includes("@graph"),ie.is11=q(te,1.1);const _e=g(ne,he,ie);ie.graph=!L.omitGraph,ie.skipExpansion=!0,ie.link={},ie.framing=!0;let je=await ue.compact(_e,G,ie);return ie.link={},je=f(je,ie),je},ue.link=async function($,w,L){const G={};return w&&(G["@context"]=w),G["@embed"]="@link",ue.frame($,G,L)},ue.normalize=ue.canonize=async function($,w){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(w=we(w,{base:j($)?$:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new u({sharedCache:ge})}))){if(w.inputFormat!=="application/n-quads"&&w.inputFormat!=="application/nquads")throw new r("Unknown canonicalization input format.","jsonld.CanonizeError");const te=s.parse($);return N.canonize(te,w)}const L={...w};delete L.format,L.produceGeneralizedRdf=!1;const G=await ue.toRDF($,L);return N.canonize(G,w)},ue.fromRDF=async function($,w){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");w=we(w,{format:j($)?"application/n-quads":void 0});const{format:L}=w;let{rdfParser:G}=w;if(L){if(G=G||pe[L],!G)throw new r("Unknown input format.","jsonld.UnknownFormat",{format:L})}else G=()=>$;const te=await G($);return b(te,w)},ue.toRDF=async function($,w){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let L;L=(w=we(w,{base:j($)?$:"",skipExpansion:!1,contextResolver:new u({sharedCache:ge})})).skipExpansion?$:await ue.expand($,w);const G=d(L,w);if(w.format){if(w.format==="application/n-quads"||w.format==="application/nquads")return s.serialize(G);throw new r("Unknown output format.","jsonld.UnknownFormat",{format:w.format})}return G},ue.createNodeMap=async function($,w){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");w=we(w,{base:j($)?$:"",contextResolver:new u({sharedCache:ge})});const L=await ue.expand($,w);return se(L,w)},ue.merge=async function($,w,L){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!O($))throw new TypeError('Could not merge, "docs" must be an array.');w=typeof w=="function"?null:w||null,L=we(L,{contextResolver:new u({sharedCache:ge})});const G=await Promise.all($.map(je=>{const Re={...L};return ue.expand(je,Re)}));let te=!0;"mergeNodes"in L&&(te=L.mergeNodes);const ne=L.issuer||new e("_:b"),ie={"@default":{}};for(let je=0;je<G.length;++je){const Re=E.relabelBlankNodes(G[je],{issuer:new e("_:b"+je+"-")}),Ae=te||je===0?ie:{"@default":{}};if(Z(Re,Ae,"@default",ne),Ae!==ie)for(const xe in Ae){const Ne=Ae[xe];if(!(xe in ie)){ie[xe]=Ne;continue}const Oe=ie[xe];for(const Ge in Ne)Ge in Oe||(Oe[Ge]=Ne[Ge])}}const he=ae(ie),be=[],_e=Object.keys(he).sort();for(let je=0;je<_e.length;++je){const Re=he[_e[je]];D(Re)||be.push(Re)}return w===null?be:(L.graph=!0,L.skipExpansion=!0,await ue.compact(be,w,L))},Object.defineProperty(ue,"documentLoader",{get:()=>ue._documentLoader,set:$=>ue._documentLoader=$}),ue.documentLoader=async $=>{throw new r("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:$})},ue.get=async function($,w){let L;L=typeof w.documentLoader=="function"?w.documentLoader:ue.documentLoader;const G=await L($);try{if(!G.document)throw new r("No remote document found at the given URL.","jsonld.NullRemoteDocument");j(G.document)&&(G.document=JSON.parse(G.document))}catch(te){throw new r("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:te,remoteDoc:G})}return G},ue.processContext=async function($,w,L){return L=we(L,{base:"",contextResolver:new u({sharedCache:ge})}),w===null?C(L):(w=E.clone(w),I(w)&&"@context"in w||(w={"@context":w}),Q({activeCtx:$,localCtx:w,options:L}))},ue.getContextValue=P("./context").getContextValue,ue.documentLoaders={},ue.useDocumentLoader=function($){if(!($ in ue.documentLoaders))throw new r('Unknown document loader type: "'+$+'"',"jsonld.UnknownDocumentLoader",{type:$});ue.documentLoader=ue.documentLoaders[$].apply(ue,Array.prototype.slice.call(arguments,1))},ue.registerRDFParser=function($,w){pe[$]=w},ue.unregisterRDFParser=function($){delete pe[$]},ue.registerRDFParser("application/n-quads",s.parse),ue.registerRDFParser("application/nquads",s.parse),ue.url=P("./url"),ue.logEventHandler=ye,ue.logWarningEventHandler=fe,ue.safeEventHandler=z,ue.setDefaultEventHandler=U,ue.strictEventHandler=K,ue.unhandledEventHandler=Y,ue.util=E,Object.assign(ue,E),ue.promises=ue,ue.RequestQueue=P("./RequestQueue"),ue.JsonLdProcessor=P("./JsonLdProcessor")(ue),l.setupGlobals(ue),l.setupDocumentLoaders(ue),ue},re=function(){return le(function(){return re()})};le(re),ee.exports=re},{"./ContextResolver":41,"./JsonLdError":42,"./JsonLdProcessor":43,"./NQuads":44,"./RequestQueue":45,"./compact":47,"./context":49,"./events":51,"./expand":52,"./flatten":53,"./frame":54,"./fromRdf":55,"./graphTypes":56,"./nodeMap":58,"./platform":59,"./toRdf":60,"./types":61,"./url":62,"./util":63,"lru-cache":64,"rdf-canonize":82}],58:[function(P,ee,X){"use strict";const{isKeyword:N}=P("./context"),l=P("./graphTypes"),E=P("./types"),u=P("./util"),e=P("./JsonLdError"),r={};ee.exports=r,r.createMergedNodeMap=(o,s)=>{const c=(s=s||{}).issuer||new u.IdentifierIssuer("_:b"),v={"@default":{}};return r.createNodeMap(o,v,"@default",c),r.mergeNodeMaps(v)},r.createNodeMap=(o,s,c,v,b,d)=>{if(E.isArray(o)){for(const I of o)r.createNodeMap(I,s,c,v,void 0,d);return}if(!E.isObject(o))return void(d&&d.push(o));if(l.isValue(o)){if("@type"in o){let I=o["@type"];I.indexOf("_:")===0&&(o["@type"]=I=v.getId(I))}return void(d&&d.push(o))}if(d&&l.isList(o)){const I=[];return r.createNodeMap(o["@list"],s,c,v,b,I),void d.push({"@list":I})}if("@type"in o){const I=o["@type"];for(const j of I)j.indexOf("_:")===0&&v.getId(j)}E.isUndefined(b)&&(b=l.isBlankNode(o)?v.getId(o["@id"]):o["@id"]),d&&d.push({"@id":b});const g=s[c],f=g[b]=g[b]||{};f["@id"]=b;const O=Object.keys(o).sort();for(let I of O){if(I==="@id")continue;if(I==="@reverse"){const D={"@id":b},A=o["@reverse"];for(const C in A){const Q=A[C];for(const q of Q){let H=q["@id"];l.isBlankNode(q)&&(H=v.getId(H)),r.createNodeMap(q,s,c,v,H),u.addValue(g[H],C,D,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(I==="@graph"){b in s||(s[b]={}),r.createNodeMap(o[I],s,b,v);continue}if(I==="@included"){r.createNodeMap(o[I],s,c,v);continue}if(I!=="@type"&&N(I)){if(I==="@index"&&I in f&&(o[I]!==f[I]||o[I]["@id"]!==f[I]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[I]=o[I];continue}const j=o[I];if(I.indexOf("_:")===0&&(I=v.getId(I)),j.length!==0)for(let D of j)if(I==="@type"&&(D=D.indexOf("_:")===0?v.getId(D):D),l.isSubject(D)||l.isSubjectReference(D)){if("@id"in D&&!D["@id"])continue;const A=l.isBlankNode(D)?v.getId(D["@id"]):D["@id"];u.addValue(f,I,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),r.createNodeMap(D,s,c,v,A)}else if(l.isValue(D))u.addValue(f,I,D,{propertyIsArray:!0,allowDuplicate:!1});else if(l.isList(D)){const A=[];r.createNodeMap(D["@list"],s,c,v,b,A),D={"@list":A},u.addValue(f,I,D,{propertyIsArray:!0,allowDuplicate:!1})}else r.createNodeMap(D,s,c,v,b),u.addValue(f,I,D,{propertyIsArray:!0,allowDuplicate:!1});else u.addValue(f,I,[],{propertyIsArray:!0})}},r.mergeNodeMapGraphs=o=>{const s={};for(const c of Object.keys(o).sort())for(const v of Object.keys(o[c]).sort()){const b=o[c][v];v in s||(s[v]={"@id":v});const d=s[v];for(const g of Object.keys(b).sort())if(N(g)&&g!=="@type")d[g]=u.clone(b[g]);else for(const f of b[g])u.addValue(d,g,u.clone(f),{propertyIsArray:!0,allowDuplicate:!1})}return s},r.mergeNodeMaps=o=>{const s=o["@default"],c=Object.keys(o).sort();for(const v of c){if(v==="@default")continue;const b=o[v];let d=s[v];d?"@graph"in d||(d["@graph"]=[]):s[v]=d={"@id":v,"@graph":[]};const g=d["@graph"];for(const f of Object.keys(b).sort()){const O=b[f];l.isSubjectReference(O)||g.push(O)}}return s}},{"./JsonLdError":42,"./context":49,"./graphTypes":56,"./types":61,"./util":63}],59:[function(P,ee,X){"use strict";const N=P("./documentLoaders/xhr"),l={};ee.exports=l,l.setupDocumentLoaders=function(E){typeof XMLHttpRequest<"u"&&(E.documentLoaders.xhr=N,E.useDocumentLoader("xhr"))},l.setupGlobals=function(E){globalThis.JsonLdProcessor===void 0&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:E.JsonLdProcessor})}},{"./documentLoaders/xhr":50}],60:[function(P,ee,X){"use strict";const{createNodeMap:N}=P("./nodeMap"),{isKeyword:l}=P("./context"),E=P("./graphTypes"),u=P("canonicalize"),e=P("./JsonLdError"),r=P("./types"),o=P("./util"),{handleEvent:s}=P("./events"),{RDF_FIRST:c,RDF_REST:v,RDF_NIL:b,RDF_TYPE:d,RDF_JSON_LITERAL:g,RDF_LANGSTRING:f,XSD_BOOLEAN:O,XSD_DOUBLE:I,XSD_INTEGER:j,XSD_STRING:D}=P("./constants"),{isAbsolute:A}=P("./url"),C={};function Q(H,B,Z,se,ae){const ye=Object.keys(B).sort();for(const fe of ye){const z=B[fe],U=Object.keys(z).sort();for(let W of U){const K=z[W];if(W==="@type")W=d;else if(l(W))continue;for(const Y of K){const le={termType:fe.startsWith("_:")?"BlankNode":"NamedNode",value:fe};if(!A(fe)){ae.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:fe}},options:ae});continue}const re={termType:W.startsWith("_:")?"BlankNode":"NamedNode",value:W};if(!A(W)){ae.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:W}},options:ae});continue}if(re.termType==="BlankNode"&&!ae.produceGeneralizedRdf){ae.eventHandler&&s({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:se.getOldIds().find(pe=>se.getId(pe)===W)}},options:ae});continue}const ue=q(Y,se,H,Z,ae.rdfDirection,ae);ue&&H.push({subject:le,predicate:re,object:ue,graph:Z})}}}}function q(H,B,Z,se,ae,ye){const fe={};if(E.isValue(H)){fe.termType="Literal",fe.value=void 0,fe.datatype={termType:"NamedNode"};let z=H["@value"];const U=H["@type"]||null;if(U==="@json")fe.value=u(z),fe.datatype.value=g;else if(r.isBoolean(z))fe.value=z.toString(),fe.datatype.value=U||O;else if(r.isDouble(z)||U===I)r.isDouble(z)||(z=parseFloat(z)),fe.value=z.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),fe.datatype.value=U||I;else if(r.isNumber(z))fe.value=z.toFixed(0),fe.datatype.value=U||j;else if("@direction"in H&&ae==="i18n-datatype"){const W=`https://www.w3.org/ns/i18n#${(H["@language"]||"").toLowerCase()}_${H["@direction"]}`;fe.datatype.value=W,fe.value=z}else{if("@direction"in H&&ae==="compound-literal")throw new e("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:ae});if("@direction"in H&&ae)throw new e("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:ae});"@language"in H?("@direction"in H&&!ae&&ye.eventHandler&&s({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:fe.value}},options:ye}),fe.value=z,fe.datatype.value=U||f,fe.language=H["@language"]):("@direction"in H&&!ae&&ye.eventHandler&&s({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:fe.value}},options:ye}),fe.value=z,fe.datatype.value=U||D)}}else if(E.isList(H)){const z=function(U,W,K,Y,le,re){const ue={termType:"NamedNode",value:c},pe={termType:"NamedNode",value:v},ge={termType:"NamedNode",value:b},we=U.pop(),$=we?{termType:"BlankNode",value:W.getId()}:ge;let w=$;for(const L of U){const G=q(L,W,K,Y,le,re),te={termType:"BlankNode",value:W.getId()};K.push({subject:w,predicate:ue,object:G,graph:Y}),K.push({subject:w,predicate:pe,object:te,graph:Y}),w=te}if(we){const L=q(we,W,K,Y,le,re);K.push({subject:w,predicate:ue,object:L,graph:Y}),K.push({subject:w,predicate:pe,object:ge,graph:Y})}return $}(H["@list"],B,Z,se,ae,ye);fe.termType=z.termType,fe.value=z.value}else{const z=r.isObject(H)?H["@id"]:H;fe.termType=z.startsWith("_:")?"BlankNode":"NamedNode",fe.value=z}return fe.termType!=="NamedNode"||A(fe.value)?fe:(ye.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:fe.value}},options:ye}),null)}ee.exports=C,C.toRDF=(H,B)=>{const Z=new o.IdentifierIssuer("_:b"),se={"@default":{}};N(H,se,"@default",Z);const ae=[],ye=Object.keys(se).sort();for(const fe of ye){let z;if(fe==="@default")z={termType:"DefaultGraph",value:""};else{if(!A(fe)){B.eventHandler&&s({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:fe}},options:B});continue}z=fe.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},z.value=fe}Q(ae,se[fe],z,Z,B)}return ae}},{"./JsonLdError":42,"./constants":48,"./context":49,"./events":51,"./graphTypes":56,"./nodeMap":58,"./types":61,"./url":62,"./util":63,canonicalize:12}],61:[function(P,ee,X){"use strict";const N={};ee.exports=N,N.isArray=Array.isArray,N.isBoolean=l=>typeof l=="boolean"||Object.prototype.toString.call(l)==="[object Boolean]",N.isDouble=l=>N.isNumber(l)&&(String(l).indexOf(".")!==-1||Math.abs(l)>=1e21),N.isEmptyObject=l=>N.isObject(l)&&Object.keys(l).length===0,N.isNumber=l=>typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]",N.isNumeric=l=>!isNaN(parseFloat(l))&&isFinite(l),N.isObject=l=>Object.prototype.toString.call(l)==="[object Object]",N.isString=l=>typeof l=="string"||Object.prototype.toString.call(l)==="[object String]",N.isUndefined=l=>l===void 0},{}],62:[function(P,ee,X){"use strict";const N=P("./types"),l={};ee.exports=l,l.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},l.parse=(u,e)=>{const r={},o=l.parsers[e||"full"],s=o.regex.exec(u);let c=o.keys.length;for(;c--;)r[o.keys[c]]=s[c]===void 0?null:s[c];return(r.scheme==="https"&&r.port==="443"||r.scheme==="http"&&r.port==="80")&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=l.removeDotSegments(r.path),r},l.prependBase=(u,e)=>{if(u===null||l.isAbsolute(e))return e;u&&!N.isString(u)||(u=l.parse(u||""));const r=l.parse(e),o={protocol:u.protocol||""};if(r.authority!==null)o.authority=r.authority,o.path=r.path,o.query=r.query;else if(o.authority=u.authority,r.path==="")o.path=u.path,r.query!==null?o.query=r.query:o.query=u.query;else{if(r.path.indexOf("/")===0)o.path=r.path;else{let c=u.path;c=c.substr(0,c.lastIndexOf("/")+1),(c.length>0||u.authority)&&c.substr(-1)!=="/"&&(c+="/"),c+=r.path,o.path=c}o.query=r.query}r.path!==""&&(o.path=l.removeDotSegments(o.path));let s=o.protocol;return o.authority!==null&&(s+="//"+o.authority),s+=o.path,o.query!==null&&(s+="?"+o.query),r.fragment!==null&&(s+="#"+r.fragment),s===""&&(s="./"),s},l.removeBase=(u,e)=>{if(u===null)return e;u&&!N.isString(u)||(u=l.parse(u||""));let r="";if(u.href!==""?r+=(u.protocol||"")+"//"+(u.authority||""):e.indexOf("//")&&(r+="//"),e.indexOf(r)!==0)return e;const o=l.parse(e.substr(r.length)),s=u.normalizedPath.split("/"),c=o.normalizedPath.split("/"),v=o.fragment||o.query?0:1;for(;s.length>0&&c.length>v&&s[0]===c[0];)s.shift(),c.shift();let b="";if(s.length>0){s.pop();for(let d=0;d<s.length;++d)b+="../"}return b+=c.join("/"),o.query!==null&&(b+="?"+o.query),o.fragment!==null&&(b+="#"+o.fragment),b===""&&(b="./"),b},l.removeDotSegments=u=>{if(u.length===0)return"";const e=u.split("/"),r=[];for(;e.length>0;){const o=e.shift(),s=e.length===0;o!=="."?o!==".."?r.push(o):(r.pop(),s&&r.push("")):s&&r.push("")}return u[0]==="/"&&r.length>0&&r[0]!==""&&r.unshift(""),r.length===1&&r[0]===""?"/":r.join("/")};const E=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;l.isAbsolute=u=>N.isString(u)&&E.test(u),l.isRelative=u=>N.isString(u)},{"./types":61}],63:[function(P,ee,X){"use strict";const N=P("./graphTypes"),l=P("./types"),E=P("rdf-canonize").IdentifierIssuer,u=P("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,o=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,s={accept:"application/ld+json, application/json"},c={};function v(b,d){if(l.isArray(d))for(let g=0;g<d.length;++g)d[g]=v(b,d[g]);else if(N.isList(d))d["@list"]=v(b,d["@list"]);else if(l.isObject(d)){N.isBlankNode(d)&&(d["@id"]=b.getId(d["@id"]));const g=Object.keys(d).sort();for(let f=0;f<g.length;++f){const O=g[f];O!=="@id"&&(d[O]=v(b,d[O]))}}return d}ee.exports=c,c.IdentifierIssuer=E,c.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,c.REGEX_KEYWORD=/^@[a-zA-Z]+$/,c.clone=function(b){if(b&&typeof b=="object"){let d;if(l.isArray(b)){d=[];for(let g=0;g<b.length;++g)d[g]=c.clone(b[g])}else if(b instanceof Map){d=new Map;for(const[g,f]of b)d.set(g,c.clone(f))}else if(b instanceof Set){d=new Set;for(const g of b)d.add(c.clone(g))}else if(l.isObject(b)){d={};for(const g in b)d[g]=c.clone(b[g])}else d=b.toString();return d}return b},c.asArray=function(b){return Array.isArray(b)?b:[b]},c.buildHeaders=(b={})=>{if(Object.keys(b).some(d=>d.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+s.accept+'" is supported.');return Object.assign({Accept:s.accept},b)},c.parseLinkHeader=b=>{const d={},g=b.match(e);for(let f=0;f<g.length;++f){let O=g[f].match(r);if(!O)continue;const I={target:O[1]},j=O[2];for(;O=o.exec(j);)I[O[1]]=O[2]===void 0?O[3]:O[2];const D=I.rel||"";Array.isArray(d[D])?d[D].push(I):d.hasOwnProperty(D)?d[D]=[d[D],I]:d[D]=I}return d},c.validateTypeValue=(b,d)=>{if(!(l.isString(b)||l.isArray(b)&&b.every(g=>l.isString(g)))){if(d&&l.isObject(b))switch(Object.keys(b).length){case 0:return;case 1:if("@default"in b&&c.asArray(b["@default"]).every(g=>l.isString(g)))return}throw new u('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:b})}},c.hasProperty=(b,d)=>{if(b.hasOwnProperty(d)){const g=b[d];return!l.isArray(g)||g.length>0}return!1},c.hasValue=(b,d,g)=>{if(c.hasProperty(b,d)){let f=b[d];const O=N.isList(f);if(l.isArray(f)||O){O&&(f=f["@list"]);for(let I=0;I<f.length;++I)if(c.compareValues(g,f[I]))return!0}else if(!l.isArray(g))return c.compareValues(g,f)}return!1},c.addValue=(b,d,g,f)=>{if("propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1),"valueIsArray"in f||(f.valueIsArray=!1),"allowDuplicate"in f||(f.allowDuplicate=!0),"prependValue"in f||(f.prependValue=!1),f.valueIsArray)b[d]=g;else if(l.isArray(g)){g.length===0&&f.propertyIsArray&&!b.hasOwnProperty(d)&&(b[d]=[]),f.prependValue&&(g=g.concat(b[d]),b[d]=[]);for(let O=0;O<g.length;++O)c.addValue(b,d,g[O],f)}else if(b.hasOwnProperty(d)){const O=!f.allowDuplicate&&c.hasValue(b,d,g);l.isArray(b[d])||O&&!f.propertyIsArray||(b[d]=[b[d]]),O||(f.prependValue?b[d].unshift(g):b[d].push(g))}else b[d]=f.propertyIsArray?[g]:g},c.getValues=(b,d)=>[].concat(b[d]||[]),c.removeProperty=(b,d)=>{delete b[d]},c.removeValue=(b,d,g,f)=>{"propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1);const O=c.getValues(b,d).filter(I=>!c.compareValues(I,g));O.length===0?c.removeProperty(b,d):O.length!==1||f.propertyIsArray?b[d]=O:b[d]=O[0]},c.relabelBlankNodes=(b,d)=>v((d=d||{}).issuer||new E("_:b"),b),c.compareValues=(b,d)=>b===d||!(!N.isValue(b)||!N.isValue(d)||b["@value"]!==d["@value"]||b["@type"]!==d["@type"]||b["@language"]!==d["@language"]||b["@index"]!==d["@index"])||!!(l.isObject(b)&&"@id"in b&&l.isObject(d)&&"@id"in d)&&b["@id"]===d["@id"],c.compareShortestLeast=(b,d)=>b.length<d.length?-1:d.length<b.length?1:b===d?0:b<d?-1:1},{"./JsonLdError":42,"./graphTypes":56,"./types":61,"rdf-canonize":82}],64:[function(P,ee,X){"use strict";const N=P("yallist"),l=Symbol("max"),E=Symbol("length"),u=Symbol("lengthCalculator"),e=Symbol("allowStale"),r=Symbol("maxAge"),o=Symbol("dispose"),s=Symbol("noDisposeOnSet"),c=Symbol("lruList"),v=Symbol("cache"),b=Symbol("updateAgeOnGet"),d=()=>1,g=(A,C,Q)=>{const q=A[v].get(C);if(q){const H=q.value;if(f(A,H)){if(I(A,q),!A[e])return}else Q&&(A[b]&&(q.value.now=Date.now()),A[c].unshiftNode(q));return H.value}},f=(A,C)=>{if(!C||!C.maxAge&&!A[r])return!1;const Q=Date.now()-C.now;return C.maxAge?Q>C.maxAge:A[r]&&Q>A[r]},O=A=>{if(A[E]>A[l])for(let C=A[c].tail;A[E]>A[l]&&C!==null;){const Q=C.prev;I(A,C),C=Q}},I=(A,C)=>{if(C){const Q=C.value;A[o]&&A[o](Q.key,Q.value),A[E]-=Q.length,A[v].delete(Q.key),A[c].removeNode(C)}};class j{constructor(C,Q,q,H,B){this.key=C,this.value=Q,this.length=q,this.now=H,this.maxAge=B||0}}const D=(A,C,Q,q)=>{let H=Q.value;f(A,H)&&(I(A,Q),A[e]||(H=void 0)),H&&C.call(q,H.value,H.key,A)};ee.exports=class{constructor(A){if(typeof A=="number"&&(A={max:A}),A||(A={}),A.max&&(typeof A.max!="number"||A.max<0))throw new TypeError("max must be a non-negative number");this[l]=A.max||1/0;const C=A.length||d;if(this[u]=typeof C!="function"?d:C,this[e]=A.stale||!1,A.maxAge&&typeof A.maxAge!="number")throw new TypeError("maxAge must be a number");this[r]=A.maxAge||0,this[o]=A.dispose,this[s]=A.noDisposeOnSet||!1,this[b]=A.updateAgeOnGet||!1,this.reset()}set max(A){if(typeof A!="number"||A<0)throw new TypeError("max must be a non-negative number");this[l]=A||1/0,O(this)}get max(){return this[l]}set allowStale(A){this[e]=!!A}get allowStale(){return this[e]}set maxAge(A){if(typeof A!="number")throw new TypeError("maxAge must be a non-negative number");this[r]=A,O(this)}get maxAge(){return this[r]}set lengthCalculator(A){typeof A!="function"&&(A=d),A!==this[u]&&(this[u]=A,this[E]=0,this[c].forEach(C=>{C.length=this[u](C.value,C.key),this[E]+=C.length})),O(this)}get lengthCalculator(){return this[u]}get length(){return this[E]}get itemCount(){return this[c].length}rforEach(A,C){C=C||this;for(let Q=this[c].tail;Q!==null;){const q=Q.prev;D(this,A,Q,C),Q=q}}forEach(A,C){C=C||this;for(let Q=this[c].head;Q!==null;){const q=Q.next;D(this,A,Q,C),Q=q}}keys(){return this[c].toArray().map(A=>A.key)}values(){return this[c].toArray().map(A=>A.value)}reset(){this[o]&&this[c]&&this[c].length&&this[c].forEach(A=>this[o](A.key,A.value)),this[v]=new Map,this[c]=new N,this[E]=0}dump(){return this[c].map(A=>!f(this,A)&&{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}).toArray().filter(A=>A)}dumpLru(){return this[c]}set(A,C,Q){if((Q=Q||this[r])&&typeof Q!="number")throw new TypeError("maxAge must be a number");const q=Q?Date.now():0,H=this[u](C,A);if(this[v].has(A)){if(H>this[l])return I(this,this[v].get(A)),!1;const Z=this[v].get(A).value;return this[o]&&(this[s]||this[o](A,Z.value)),Z.now=q,Z.maxAge=Q,Z.value=C,this[E]+=H-Z.length,Z.length=H,this.get(A),O(this),!0}const B=new j(A,C,H,q,Q);return B.length>this[l]?(this[o]&&this[o](A,C),!1):(this[E]+=B.length,this[c].unshift(B),this[v].set(A,this[c].head),O(this),!0)}has(A){if(!this[v].has(A))return!1;const C=this[v].get(A).value;return!f(this,C)}get(A){return g(this,A,!0)}peek(A){return g(this,A,!1)}pop(){const A=this[c].tail;return A?(I(this,A),A.value):null}del(A){I(this,this[v].get(A))}load(A){this.reset();const C=Date.now();for(let Q=A.length-1;Q>=0;Q--){const q=A[Q],H=q.e||0;if(H===0)this.set(q.k,q.v);else{const B=H-C;B>0&&this.set(q.k,q.v,B)}}}prune(){this[v].forEach((A,C)=>g(this,C,!1))}}},{yallist:137}],65:[function(P,ee,X){var N=P;P=function(){},X=ee.exports={Lexer:P("./lib/N3Lexer"),Parser:P("./lib/N3Parser"),Writer:P("./lib/N3Writer"),Store:P("./lib/N3Store"),StreamParser:P("./lib/N3StreamParser"),StreamWriter:P("./lib/N3StreamWriter"),Util:P("./lib/N3Util")},Object.keys(X).forEach(function(l){Object.defineProperty(X,l,{configurable:!0,enumerable:!0,get:function(){return delete X[l],X[l]=N("./lib/N3"+l)}})})},{"./lib/N3Lexer":66,"./lib/N3Parser":67,"./lib/N3Store":68,"./lib/N3StreamParser":69,"./lib/N3StreamWriter":70,"./lib/N3Util":71,"./lib/N3Writer":72}],66:[function(P,ee,X){(function(N){(function(){var l=String.fromCharCode,E=typeof N=="function"?N:function(s){setTimeout(s,0)},u=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},r=/[\x00-\x20<>\\"\{\}\|\^\`]/;function o(s){if(!(this instanceof o))return new o(s);if((s=s||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var c=this;this._tokenize=this.tokenize,this.tokenize=function(v,b){this._tokenize(v,function(d,g){!d&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(g.type)?b&&b(d,g):b&&b(d||c._syntaxError(g.type,b=null))})}}this._n3Mode=s.n3!==!1,this._comments=!!s.comments}o.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(s,c){for(var v=this._input,b=this._comments;;){for(var d,g;d=this._newline.exec(v);)b&&(g=this._comment.exec(d[0]))&&s(null,{line:this._line,type:"comment",value:g[1],prefix:""}),v=v.substr(d[0].length,v.length),this._line++;if((d=this._whitespace.exec(v))&&(v=v.substr(d[0].length,v.length)),this._endOfFile.test(v))return c&&(b&&(g=this._comment.exec(v))&&s(null,{line:this._line,type:"comment",value:g[1],prefix:""}),s(v=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=v;var f,O=this._line,I="",j="",D="",A=v[0],C=null,Q=0,q=!1;switch(A){case"^":if(v.length<3)break;if(v[1]!=="^"){this._n3Mode&&(Q=1,I="^");break}if(this._previousMarker="^^",(v=v.substr(2))[0]!=="<"){q=!0;break}case"<":if(C=this._unescapedIri.exec(v))I="IRI",j=C[1];else if(C=this._iri.exec(v)){if((f=this._unescape(C[1]))===null||r.test(f))return B(this);I="IRI",j=f}else this._n3Mode&&v.length>1&&v[1]==="="&&(I="inverse",Q=2,j="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((C=this._blank.exec(v))||c&&(C=this._blank.exec(v+" ")))&&(I="blank",D="_",j=C[1]);break;case'"':case"'":if(C=this._unescapedString.exec(v))I="literal",j=C[0];else if(C=this._singleQuotedString.exec(v)){if((f=this._unescape(C[0]))===null)return B(this);I="literal",j=f.replace(/^'|'$/g,'"')}else if(C=this._tripleQuotedString.exec(v)){if(f=C[1]||C[2],this._line+=f.split(/\r\n|\r|\n/).length-1,(f=this._unescape(f))===null)return B(this);I="literal",j=f.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(C=this._variable.exec(v))&&(I="var",j=C[0]);break;case"@":this._previousMarker==="literal"&&(C=this._langcode.exec(v))?(I="langcode",j=C[1]):(C=this._keyword.exec(v))&&(I=C[0]);break;case".":if(v.length===1?c:v[1]<"0"||v[1]>"9"){I=".",Q=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(C=this._number.exec(v)||c&&(C=this._number.exec(v+" ")))&&(I="literal",j='"'+C[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(C[1]?"double":/^[+\-]?\d+$/.test(C[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(C=this._sparqlKeyword.exec(v))?I=C[0].toUpperCase():q=!0;break;case"f":case"t":(C=this._boolean.exec(v))?(I="literal",j='"'+C[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):q=!0;break;case"a":(C=this._shortPredicates.exec(v))?(I="abbreviation",j="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):q=!0;break;case"=":this._n3Mode&&v.length>1&&(I="abbreviation",v[1]!==">"?(Q=1,j="http://www.w3.org/2002/07/owl#sameAs"):(Q=2,j="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":Q=1,I=A;break;default:q=!0}if(q&&(this._previousMarker!=="@prefix"&&this._previousMarker!=="PREFIX"||!(C=this._prefix.exec(v))?((C=this._prefixed.exec(v))||c&&(C=this._prefixed.exec(v+" ")))&&(I="prefixed",D=C[1]||"",j=this._unescape(C[2])):(I="prefix",j=C[1]||"")),this._previousMarker==="^^")switch(I){case"prefixed":I="type";break;case"IRI":I="typeIRI";break;default:I=""}if(!I)return c||!/^'''|^"""/.test(v)&&/\n|\r/.test(v)?B(this):this._input=v;var H={line:O,type:I,value:j,prefix:D};s(null,H),this.previousToken=H,this._previousMarker=I,v=v.substr(Q||C[0].length,v.length)}function B(Z){s(Z._syntaxError(/^\S*/.exec(v)[0]))}},_unescape:function(s){try{return s.replace(u,function(c,v,b,d){var g;if(v){if(g=parseInt(v,16),isNaN(g))throw new Error;return l(g)}if(b){if(g=parseInt(b,16),isNaN(g))throw new Error;return g<=65535?l(g):l(55296+(g-=65536)/1024,56320+(1023&g))}var f=e[d];if(!f)throw new Error;return f})}catch{return null}},_syntaxError:function(s){this._input=null;var c=new Error('Unexpected "'+s+'" on line '+this._line+".");return c.context={token:void 0,line:this._line,previousToken:this.previousToken},c},tokenize:function(s,c){var v=this;if(this._line=1,typeof s=="string"){if(this._input=s,typeof c!="function"){var b,d=[];if(this._tokenizeToEnd(function(g,f){g?b=g:d.push(f)},!0),b)throw b;return d}E(function(){v._tokenizeToEnd(c,!0)})}else this._input="",typeof s.setEncoding=="function"&&s.setEncoding("utf8"),s.on("data",function(g){v._input!==null&&(v._input+=g,v._tokenizeToEnd(c,!1))}),s.on("end",function(){v._input!==null&&v._tokenizeToEnd(c,!0)}),s.on("error",c)}},ee.exports=o}).call(this)}).call(this,P("timers").setImmediate)},{timers:131}],67:[function(P,ee,X){var N=P("./N3Lexer"),l="http://www.w3.org/1999/02/22-rdf-syntax-ns#",E=l+"nil",u=l+"first",e=l+"rest",r="urn:n3:quantifiers",o=/^[a-z][a-z0-9+.-]*:/i,s=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,c=/(?:^|\/)\.\.?(?:$|[\/#?])/,v=0,b=0;function d(f){if(!(this instanceof d))return new d(f);this._contextStack=[],this._graph=null,f=f||{},this._setBase(f.documentIRI);var O=typeof f.format=="string"?f.format.match(/\w*$/)[0].toLowerCase():"",I=O==="turtle",j=O==="trig",D=/triple/.test(O),A=/quad/.test(O),C=this._n3Mode=/n3/.test(O),Q=D||A;(this._supportsNamedGraphs=!(I||C))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(I||j||D||C),Q&&(this._base="",this._resolveIRI=function(q){return this._error("Disallowed relative IRI",q),this._callback=g,this._subject=null}),this._blankNodePrefix=typeof f.blankNodePrefix!="string"?"":"_:"+f.blankNodePrefix.replace(/^_:/,""),this._lexer=f.lexer||new N({lineMode:Q,n3:C}),this._explicitQuantifiers=!!f.explicitQuantifiers}function g(){}d._resetBlankNodeIds=function(){v=b=0},d.prototype={_setBase:function(f){if(f){var O=f.indexOf("#");O>=0&&(f=f.substr(0,O)),this._base=f,this._basePath=f.indexOf("/")<0?f:f.replace(/[^\/?]*(?:\?.*)?$/,""),f=f.match(s),this._baseRoot=f[0],this._baseScheme=f[1]}else this._base=null},_saveContext:function(f,O,I,j,D){var A=this._n3Mode;this._contextStack.push({subject:I,predicate:j,object:D,graph:O,type:f,inverse:!!A&&this._inversePredicate,blankPrefix:A?this._prefixes._:"",quantified:A?this._quantified:null}),A&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var f=this._contextStack.pop(),O=this._n3Mode;this._subject=f.subject,this._predicate=f.predicate,this._object=f.object,this._graph=f.graph,O&&(this._inversePredicate=f.inverse,this._prefixes._=f.blankPrefix,this._quantified=f.quantified)},_readInTopContext:function(f){switch(f.type){case"eof":return this._graph!==null?this._error("Unclosed graph",f):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(f)}},_readEntity:function(f,O){var I;switch(f.type){case"IRI":case"typeIRI":I=this._base===null||o.test(f.value)?f.value:this._resolveIRI(f);break;case"type":case"blank":case"prefixed":var j=this._prefixes[f.prefix];if(j===void 0)return this._error('Undefined prefix "'+f.prefix+':"',f);I=j+f.value;break;case"var":return f.value;default:return this._error("Expected entity but got "+f.type,f)}return!O&&this._n3Mode&&I in this._quantified&&(I=this._quantified[I]),I},_readSubject:function(f){switch(this._predicate=null,f.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+b++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,E,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+b++,null,null),this._readSubject):this._error("Unexpected graph",f);case"}":return this._readPunctuation(f);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',f);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',f);default:if((this._subject=this._readEntity(f))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(f){var O=f.type;switch(O){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=f.value;break;case".":case"]":case"}":return this._predicate===null?this._error("Unexpected "+O,f):(this._subject=null,O==="]"?this._readBlankNodeTail(f):this._readPunctuation(f));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",f);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",f);default:if((this._predicate=this._readEntity(f))===void 0)return}return this._readObject},_readObject:function(f){switch(f.type){case"literal":return this._object=f.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+b++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,E),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+b++),this._readSubject):this._error("Unexpected graph",f);default:if((this._object=this._readEntity(f))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(f){return f.type==="{"?this._readGraph(f):this._readPredicate(f)},_readGraph:function(f){return f.type!=="{"?this._error("Expected graph but got "+f.type,f):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(f){return f.type==="]"?(this._subject=null,this._readBlankNodeTail(f)):(this._predicate=null,this._readPredicate(f))},_readBlankNodeTail:function(f){if(f.type!=="]")return this._readBlankNodePunctuation(f);this._subject!==null&&this._triple(this._subject,this._predicate,this._object,this._graph);var O=this._predicate===null;return this._restoreContext(),this._object===null?O?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(f){return f.type!=="."||this._contextStack.length?this._readPredicate(f):(this._subject=null,this._readPunctuation(f))},_readListItem:function(f){var O=null,I=null,j=this._subject,D=this._contextStack,A=D[D.length-1],C=this._readListItem,Q=!0;switch(f.type){case"[":this._saveContext("blank",this._graph,I="_:b"+b++,u,this._subject=O="_:b"+b++),C=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,I="_:b"+b++,u,E),this._subject=null;break;case")":if(this._restoreContext(),D.length!==0&&D[D.length-1].type==="list"&&this._triple(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(C=this._readPredicate,this._subject===E)return C}else if(C=this._getContextEndReader(),this._object===E)return C;I=E;break;case"literal":O=f.value,Q=!1,C=this._readListItemDataTypeOrLang;break;default:if((O=this._readEntity(f))===void 0)return}if(I===null&&(this._subject=I="_:b"+b++),j===null?A.predicate===null?A.subject=I:A.object=I:this._triple(j,e,I,this._graph),O!==null){if(this._n3Mode&&(f.type==="IRI"||f.type==="prefixed"))return this._saveContext("item",this._graph,I,u,O),this._subject=O,this._predicate=null,this._getPathReader(this._readListItem);Q?this._triple(I,u,O,this._graph):this._object=O}return C},_readDataTypeOrLang:function(f){return this._completeLiteral(f,!1)},_readListItemDataTypeOrLang:function(f){return this._completeLiteral(f,!0)},_completeLiteral:function(f,O){var I=!1;switch(f.type){case"type":case"typeIRI":var j=this._readEntity(f);if(j===void 0)return;I=!0,this._object+="^^"+j;break;case"langcode":I=!0,this._object+="@"+f.value.toLowerCase()}return O&&this._triple(this._subject,u,this._object,this._graph),I?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(f))},_readFormulaTail:function(f){return f.type!=="}"?this._readPunctuation(f):(this._subject!==null&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),this._object===null?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(f){var O,I=this._subject,j=this._graph,D=this._inversePredicate;switch(f.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",f);if(this._n3Mode)return this._readFormulaTail(f);this._graph=null;case".":this._subject=null,O=this._contextStack.length?this._readSubject:this._readInTopContext,D&&(this._inversePredicate=!1);break;case";":O=this._readPredicate;break;case",":O=this._readObject;break;default:if(this._supportsQuads&&this._graph===null&&(j=this._readEntity(f))!==void 0){O=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',f)}if(I!==null){var A=this._predicate,C=this._object;D?this._triple(C,A,I,j):this._triple(I,A,C,j)}return O},_readBlankNodePunctuation:function(f){var O;switch(f.type){case";":O=this._readPredicate;break;case",":O=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',f)}return this._triple(this._subject,this._predicate,this._object,this._graph),O},_readQuadPunctuation:function(f){return f.type!=="."?this._error("Expected dot to follow quad",f):this._readInTopContext},_readPrefix:function(f){return f.type!=="prefix"?this._error("Expected prefix to follow @prefix",f):(this._prefix=f.value,this._readPrefixIRI)},_readPrefixIRI:function(f){if(f.type!=="IRI")return this._error('Expected IRI to follow prefix "'+this._prefix+':"',f);var O=this._readEntity(f);return this._prefixes[this._prefix]=O,this._prefixCallback(this._prefix,O),this._readDeclarationPunctuation},_readBaseIRI:function(f){return f.type!=="IRI"?this._error("Expected IRI to follow base declaration",f):(this._setBase(this._base===null||o.test(f.value)?f.value:this._resolveIRI(f)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(f){switch(f.type){case"IRI":case"blank":case"prefixed":return this._readSubject(f),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",f)}},_readNamedGraphBlankLabel:function(f){return f.type!=="]"?this._error("Invalid graph label",f):(this._subject="_:b"+b++,this._readGraph)},_readDeclarationPunctuation:function(f){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(f)):f.type!=="."?this._error("Expected declaration to end with a dot",f):this._readInTopContext},_readQuantifierList:function(f){var O;switch(f.type){case"IRI":case"prefixed":if((O=this._readEntity(f,!0))!==void 0)break;default:return this._error("Unexpected "+f.type,f)}return this._explicitQuantifiers?(this._subject===null?this._triple(this._graph||"",this._predicate,this._subject="_:b"+b++,r):this._triple(this._subject,e,this._subject="_:b"+b++,r),this._triple(this._subject,u,O,r)):this._quantified[O]=this._quantifiedPrefix+b++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(f){return f.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,E,r),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(f))},_getPathReader:function(f){return this._afterPath=f,this._readPath},_readPath:function(f){switch(f.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var O=this._contextStack,I=O.length&&O[O.length-1];if(I&&I.type==="item"){var j=this._subject;this._restoreContext(),this._triple(this._subject,u,j,this._graph)}return this._afterPath(f)}},_readForwardPath:function(f){var O,I,j="_:b"+b++;if((I=this._readEntity(f))!==void 0)return this._predicate===null?(O=this._subject,this._subject=j):(O=this._object,this._object=j),this._triple(O,I,j,this._graph),this._readPath},_readBackwardPath:function(f){var O,I,j="_:b"+b++;if((O=this._readEntity(f))!==void 0)return this._predicate===null?(I=this._subject,this._subject=j):(I=this._object,this._object=j),this._triple(j,O,I,this._graph),this._readPath},_getContextEndReader:function(){var f=this._contextStack;if(!f.length)return this._readPunctuation;switch(f[f.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(f,O,I,j){this._callback(null,{subject:f,predicate:O,object:I,graph:j||""})},_error:function(f,O){var I=new Error(f+" on line "+O.line+".");I.context={token:O,line:O.line,previousToken:this._lexer.previousToken},this._callback(I),this._callback=g},_resolveIRI:function(f){var O=f.value;switch(O[0]){case void 0:return this._base;case"#":return this._base+O;case"?":return this._base.replace(/(?:\?.*)?$/,O);case"/":return(O[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(O);default:return this._removeDotSegments(this._basePath+O)}},_removeDotSegments:function(f){if(!c.test(f))return f;for(var O="",I=f.length,j=-1,D=-1,A=0,C="/";j<I;){switch(C){case":":if(D<0&&f[++j]==="/"&&f[++j]==="/")for(;(D=j+1)<I&&f[D]!=="/";)j=D;break;case"?":case"#":j=I;break;case"/":if(f[j+1]===".")switch(C=f[1+ ++j]){case"/":O+=f.substring(A,j-1),A=j+1;break;case void 0:case"?":case"#":return O+f.substring(A,j)+f.substr(j+1);case".":if((C=f[1+ ++j])===void 0||C==="/"||C==="?"||C==="#"){if((A=(O+=f.substring(A,j-2)).lastIndexOf("/"))>=D&&(O=O.substr(0,A)),C!=="/")return O+"/"+f.substr(j+1);A=j+1}}}C=f[++j]}return O+f.substring(A)},parse:function(f,O,I){var j=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+v+++"_",this._prefixCallback=I||g,this._inversePredicate=!1,this._quantified=Object.create(null),!O){var D,A=[];if(this._callback=function(C,Q){C?D=C:Q&&A.push(Q)},this._lexer.tokenize(f).every(function(C){return j._readCallback=j._readCallback(C)}),D)throw D;return A}this._callback=O,this._lexer.tokenize(f,function(C,Q){C!==null?(j._callback(C),j._callback=g):j._readCallback&&(j._readCallback=j._readCallback(Q))})}},ee.exports=d},{"./N3Lexer":66}],68:[function(P,ee,X){var N=P("./N3Util").expandPrefixedName;function l(u,e){if(!(this instanceof l))return new l(u,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!u||u[0]||(e=u,u=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),u&&this.addTriples(u)}function E(u){return typeof u=="string"||u instanceof String}l.prototype={get size(){var u=this._size;if(u!==null)return u;u=0;var e,r,o=this._graphs;for(var s in o)for(var c in e=o[s].subjects)for(var v in r=e[c])u+=Object.keys(r[v]).length;return this._size=u},_addToIndex:function(u,e,r,o){var s=u[e]||(u[e]={}),c=s[r]||(s[r]={}),v=o in c;return v||(c[o]=null),!v},_removeFromIndex:function(u,e,r,o){var s,c=u[e],v=c[r];for(s in delete v[o],v)return;for(s in delete c[r],c)return;delete u[e]},_findInIndex:function(u,e,r,o,s,c,v,b,d,g){var f,O,I,j=!e+!r+!o>1?Object.keys(this._ids):this._entities;for(var D in e&&((f=u,u={})[e]=f[e]),u){var A=j[D];if(O=u[D])for(var C in r&&((f=O,O={})[r]=f[r]),O){var Q=j[C];if(I=O[C])for(var q=o?o in I?[o]:[]:Object.keys(I),H=q.length-1;H>=0;H--){var B={subject:"",predicate:"",object:"",graph:b};if(B[s]=A,B[c]=Q,B[v]=j[q[H]],g)g.push(B);else if(d(B))return!0}}}return g},_loop:function(u,e){for(var r in u)e(r)},_loopByKey0:function(u,e,r){var o,s;if(o=u[e])for(s in o)r(s)},_loopByKey1:function(u,e,r){var o;for(o in u)u[o][e]&&r(o)},_loopBy2Keys:function(u,e,r,o){var s,c,v;if((s=u[e])&&(c=s[r]))for(v in c)o(v)},_countInIndex:function(u,e,r,o){var s,c,v,b=0;for(var d in e&&((s=u,u={})[e]=s[e]),u)if(c=u[d])for(var g in r&&((s=c,c={})[r]=s[r]),c)(v=c[g])&&(o?o in v&&b++:b+=Object.keys(v).length);return b},_getGraphs:function(u){if(!E(u))return this._graphs;var e={};return e[u]=this._graphs[u],e},_uniqueEntities:function(u){var e=Object.create(null),r=this._entities;return function(o){o in e||(e[o]=!0,u(r[o]))}},addTriple:function(u,e,r,o){e||(o=u.graph,r=u.object,e=u.predicate,u=u.subject),o=o||"";var s=this._graphs[o];s||(s=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(s));var c=this._ids,v=this._entities;u=c[u]||(c[v[++this._id]=u]=this._id),e=c[e]||(c[v[++this._id]=e]=this._id),r=c[r]||(c[v[++this._id]=r]=this._id);var b=this._addToIndex(s.subjects,u,e,r);return this._addToIndex(s.predicates,e,r,u),this._addToIndex(s.objects,r,u,e),this._size=null,b},addTriples:function(u){for(var e=u.length-1;e>=0;e--)this.addTriple(u[e])},addPrefix:function(u,e){this._prefixes[u]=e},addPrefixes:function(u){for(var e in u)this.addPrefix(e,u[e])},removeTriple:function(u,e,r,o){e||(o=u.graph,r=u.object,e=u.predicate,u=u.subject),o=o||"";var s,c,v,b=this._ids,d=this._graphs;if(!((u=b[u])&&(e=b[e])&&(r=b[r])&&(s=d[o])&&(c=s.subjects[u])&&(v=c[e])&&r in v))return!1;for(u in this._removeFromIndex(s.subjects,u,e,r),this._removeFromIndex(s.predicates,e,r,u),this._removeFromIndex(s.objects,r,u,e),this._size!==null&&this._size--,s.subjects)return!0;return delete d[o],!0},removeTriples:function(u){for(var e=u.length-1;e>=0;e--)this.removeTriple(u[e])},getTriples:function(u,e,r,o){var s=this._prefixes;return this.getTriplesByIRI(N(u,s),N(e,s),N(r,s),N(o,s))},getTriplesByIRI:function(u,e,r,o){var s,c,v,b,d=[],g=this._getGraphs(o),f=this._ids;if(E(u)&&!(c=f[u])||E(e)&&!(v=f[e])||E(r)&&!(b=f[r]))return d;for(var O in g)(s=g[O])&&(c?b?this._findInIndex(s.objects,b,c,v,"object","subject","predicate",O,null,d):this._findInIndex(s.subjects,c,v,null,"subject","predicate","object",O,null,d):v?this._findInIndex(s.predicates,v,b,null,"predicate","object","subject",O,null,d):b?this._findInIndex(s.objects,b,null,null,"object","subject","predicate",O,null,d):this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",O,null,d));return d},countTriples:function(u,e,r,o){var s=this._prefixes;return this.countTriplesByIRI(N(u,s),N(e,s),N(r,s),N(o,s))},countTriplesByIRI:function(u,e,r,o){var s,c,v,b,d=0,g=this._getGraphs(o),f=this._ids;if(E(u)&&!(c=f[u])||E(e)&&!(v=f[e])||E(r)&&!(b=f[r]))return 0;for(var O in g)(s=g[O])&&(d+=u?r?this._countInIndex(s.objects,b,c,v):this._countInIndex(s.subjects,c,v,b):e?this._countInIndex(s.predicates,v,b,c):this._countInIndex(s.objects,b,c,v));return d},forEach:function(u,e,r,o,s){var c=this._prefixes;this.forEachByIRI(u,N(e,c),N(r,c),N(o,c),N(s,c))},forEachByIRI:function(u,e,r,o,s){this.someByIRI(function(c){return u(c),!1},e,r,o,s)},every:function(u,e,r,o,s){var c=this._prefixes;return this.everyByIRI(u,N(e,c),N(r,c),N(o,c),N(s,c))},everyByIRI:function(u,e,r,o,s){var c=!1,v=!this.someByIRI(function(b){return c=!0,!u(b)},e,r,o,s);return c&&v},some:function(u,e,r,o,s){var c=this._prefixes;return this.someByIRI(u,N(e,c),N(r,c),N(o,c),N(s,c))},someByIRI:function(u,e,r,o,s){var c,v,b,d,g=this._getGraphs(s),f=this._ids;if(E(e)&&!(v=f[e])||E(r)&&!(b=f[r])||E(o)&&!(d=f[o]))return!1;for(var O in g)if(c=g[O]){if(v){if(d){if(this._findInIndex(c.objects,d,v,b,"object","subject","predicate",O,u,null))return!0}else if(this._findInIndex(c.subjects,v,b,null,"subject","predicate","object",O,u,null))return!0}else if(b){if(this._findInIndex(c.predicates,b,d,null,"predicate","object","subject",O,u,null))return!0}else if(d){if(this._findInIndex(c.objects,d,null,null,"object","subject","predicate",O,u,null))return!0}else if(this._findInIndex(c.subjects,null,null,null,"subject","predicate","object",O,u,null))return!0}return!1},getSubjects:function(u,e,r){var o=this._prefixes;return this.getSubjectsByIRI(N(u,o),N(e,o),N(r,o))},getSubjectsByIRI:function(u,e,r){var o=[];return this.forSubjectsByIRI(function(s){o.push(s)},u,e,r),o},forSubjects:function(u,e,r,o){var s=this._prefixes;this.forSubjectsByIRI(u,N(e,s),N(r,s),N(o,s))},forSubjectsByIRI:function(u,e,r,o){var s,c,v,b=this._ids,d=this._getGraphs(o);if(u=this._uniqueEntities(u),!(E(e)&&!(c=b[e])||E(r)&&!(v=b[r])))for(o in d)(s=d[o])&&(c?v?this._loopBy2Keys(s.predicates,c,v,u):this._loopByKey1(s.subjects,c,u):v?this._loopByKey0(s.objects,v,u):this._loop(s.subjects,u))},getPredicates:function(u,e,r){var o=this._prefixes;return this.getPredicatesByIRI(N(u,o),N(e,o),N(r,o))},getPredicatesByIRI:function(u,e,r){var o=[];return this.forPredicatesByIRI(function(s){o.push(s)},u,e,r),o},forPredicates:function(u,e,r,o){var s=this._prefixes;this.forPredicatesByIRI(u,N(e,s),N(r,s),N(o,s))},forPredicatesByIRI:function(u,e,r,o){var s,c,v,b=this._ids,d=this._getGraphs(o);if(u=this._uniqueEntities(u),!(E(e)&&!(c=b[e])||E(r)&&!(v=b[r])))for(o in d)(s=d[o])&&(c?v?this._loopBy2Keys(s.objects,v,c,u):this._loopByKey0(s.subjects,c,u):v?this._loopByKey1(s.predicates,v,u):this._loop(s.predicates,u))},getObjects:function(u,e,r){var o=this._prefixes;return this.getObjectsByIRI(N(u,o),N(e,o),N(r,o))},getObjectsByIRI:function(u,e,r){var o=[];return this.forObjectsByIRI(function(s){o.push(s)},u,e,r),o},forObjects:function(u,e,r,o){var s=this._prefixes;this.forObjectsByIRI(u,N(e,s),N(r,s),N(o,s))},forObjectsByIRI:function(u,e,r,o){var s,c,v,b=this._ids,d=this._getGraphs(o);if(u=this._uniqueEntities(u),!(E(e)&&!(c=b[e])||E(r)&&!(v=b[r])))for(o in d)(s=d[o])&&(c?v?this._loopBy2Keys(s.subjects,c,v,u):this._loopByKey1(s.objects,c,u):v?this._loopByKey0(s.predicates,v,u):this._loop(s.objects,u))},getGraphs:function(u,e,r){var o=this._prefixes;return this.getGraphsByIRI(N(u,o),N(e,o),N(r,o))},getGraphsByIRI:function(u,e,r){var o=[];return this.forGraphsByIRI(function(s){o.push(s)},u,e,r),o},forGraphs:function(u,e,r,o){var s=this._prefixes;this.forGraphsByIRI(u,N(e,s),N(r,s),N(o,s))},forGraphsByIRI:function(u,e,r,o){for(var s in this._graphs)this.someByIRI(function(c){return u(c.graph),!0},e,r,o,s)},createBlankNode:function(u){var e,r;if(u)for(e=u="_:"+u,r=1;this._ids[e];)e=u+r++;else do e="_:b"+this._blankNodeIndex++;while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},ee.exports=l},{"./N3Util":71}],69:[function(P,ee,X){var N=P("stream").Transform,l=P("util"),E=P("./N3Parser.js");function u(e){if(!(this instanceof u))return new u(e);N.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var r,o,s=this;new E(e).parse({on:function(c,v){switch(c){case"data":r=v;break;case"end":o=v}}},function(c,v){c&&s.emit("error",c)||v&&s.push(v)},function(c,v){s.emit("prefix",c,v)}),this._transform=function(c,v,b){r(c),b()},this._flush=function(c){o(),c()}}l.inherits(u,N),ee.exports=u},{"./N3Parser.js":67,stream:96,util:7}],70:[function(P,ee,X){var N=P("stream").Transform,l=P("util"),E=P("./N3Writer.js");function u(e){if(!(this instanceof u))return new u(e);N.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var r=this,o=new E({write:function(s,c,v){r.push(s),v&&v()},end:function(s){r.push(null),s&&s()}},e);this._transform=function(s,c,v){o.addTriple(s,v)},this._flush=function(s){o.end(s)}}l.inherits(u,N),ee.exports=u},{"./N3Writer.js":72,stream:96,util:7}],71:[function(P,ee,X){var N="http://www.w3.org/2001/XMLSchema#",l=N+"string",E=N+"integer",u=N+"double",e=N+"boolean",r={isIRI:function(o){if(typeof o!="string")return!1;if(o.length===0)return!0;var s=o[0];return s!=='"'&&s!=="_"},isLiteral:function(o){return typeof o=="string"&&o[0]==='"'},isBlank:function(o){return typeof o=="string"&&o.substr(0,2)==="_:"},isDefaultGraph:function(o){return!o},inDefaultGraph:function(o){return!o.graph},getLiteralValue:function(o){var s=/^"([^]*)"/.exec(o);if(!s)throw new Error(o+" is not a literal");return s[1]},getLiteralType:function(o){var s=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(o);if(!s)throw new Error(o+" is not a literal");return s[1]||(s[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":l)},getLiteralLanguage:function(o){var s=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(o);if(!s)throw new Error(o+" is not a literal");return s[1]?s[1].toLowerCase():""},isPrefixedName:function(o){return typeof o=="string"&&/^[^:\/"']*:[^:\/"']+$/.test(o)},expandPrefixedName:function(o,s){var c,v,b,d=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(o);return d&&(v=s[c=d[1]],b=d.index),v===void 0?o:b===0?v+o.substr(c.length+1):o.substr(0,b+3)+v+o.substr(b+c.length+4)},createIRI:function(o){return o&&o[0]==='"'?r.getLiteralValue(o):o},createLiteral:function(o,s){if(!s)switch(typeof o){case"boolean":s=e;break;case"number":isFinite(o)?s=o%1==0?E:u:(s=u,isNaN(o)||(o=o>0?"INF":"-INF"));break;default:return'"'+o+'"'}return'"'+o+(/^[a-z]+(-[a-z0-9]+)*$/i.test(s)?'"@'+s.toLowerCase():'"^^'+s)},prefix:function(o){return r.prefixes({"":o})("")},prefixes:function(o){var s=Object.create(null);for(var c in o)v(c,o[c]);function v(b,d){if(d||!(b in s)){var g=Object.create(null);d=d||"",s[b]=function(f){return g[f]||(g[f]=d+f)}}return s[b]}return v}};ee.exports=r},{}],72:[function(P,ee,X){var N=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,l=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,E=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,u={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(o,s){if(!(this instanceof e))return new e(o,s);if(o&&typeof o.write!="function"&&(s=o,o=null),s=s||{},o)this._outputStream=o,this._endStream=s.end===void 0||!!s.end;else{var c="";this._outputStream={write:function(v,b,d){c+=v,d&&d()},end:function(v){v&&v(null,c)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(s.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),s.prefixes&&this.addPrefixes(s.prefixes))}function r(o){var s=u[o];return s===void 0&&(o.length===1?(s=o.charCodeAt(0).toString(16),s="\\u0000".substr(0,6-s.length)+s):(s=(1024*(o.charCodeAt(0)-55296)+o.charCodeAt(1)+9216).toString(16),s="\\U00000000".substr(0,10-s.length)+s)),s}e.prototype={_write:function(o,s){this._outputStream.write(o,"utf8",s)},_writeTriple:function(o,s,c,v,b){try{this._graph!==v&&(this._write((this._subject===null?"":this._graph?`
}
`:`.
`)+(v?this._encodeIriOrBlankNode(v)+` {
`:"")),this._subject=null,this._graph=v[0]!=="["?v:"]"),this._subject===o?this._predicate===s?this._write(", "+this._encodeObject(c),b):this._write(`;
    `+this._encodePredicate(this._predicate=s)+" "+this._encodeObject(c),b):this._write((this._subject===null?"":`.
`)+this._encodeSubject(this._subject=o)+" "+this._encodePredicate(this._predicate=s)+" "+this._encodeObject(c),b)}catch(d){b&&b(d)}},_writeTripleLine:function(o,s,c,v,b){delete this._prefixMatch;try{this._write(this.tripleToString(o,s,c,v),b)}catch(d){b&&b(d)}},tripleToString:function(o,s,c,v){return this._encodeIriOrBlankNode(o)+" "+this._encodeIriOrBlankNode(s)+" "+this._encodeObject(c)+(v?" "+this._encodeIriOrBlankNode(v)+`.
`:`.
`)},triplesToString:function(o){return o.map(function(s){return this.tripleToString(s.subject,s.predicate,s.object,s.graph)},this).join("")},_encodeIriOrBlankNode:function(o){var s=o[0];if(s==="["||s==="("||s==="_"&&o[1]===":")return o;l.test(o)&&(o=o.replace(E,r));var c=this._prefixRegex.exec(o);return c?c[1]?this._prefixIRIs[c[1]]+c[2]:o:"<"+o+">"},_encodeLiteral:function(o,s,c){return l.test(o)&&(o=o.replace(E,r)),c?'"'+o+'"@'+c:s?'"'+o+'"^^'+this._encodeIriOrBlankNode(s):'"'+o+'"'},_encodeSubject:function(o){if(o[0]==='"')throw new Error("A literal as subject is not allowed: "+o);return o[0]==="["&&(this._subject="]"),this._encodeIriOrBlankNode(o)},_encodePredicate:function(o){if(o[0]==='"')throw new Error("A literal as predicate is not allowed: "+o);return o==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"?"a":this._encodeIriOrBlankNode(o)},_encodeObject:function(o){if(o[0]!=='"')return this._encodeIriOrBlankNode(o);var s=N.exec(o);if(!s)throw new Error("Invalid literal: "+o);return this._encodeLiteral(s[1],s[2],s[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(o,s,c,v,b){c===void 0?this._writeTriple(o.subject,o.predicate,o.object,o.graph||"",s):typeof v!="string"?this._writeTriple(o,s,c,"",v):this._writeTriple(o,s,c,v,b)},addTriples:function(o){for(var s=0;s<o.length;s++)this.addTriple(o[s])},addPrefix:function(o,s,c){var v={};v[o]=s,this.addPrefixes(v,c)},addPrefixes:function(o,s){var c=this._prefixIRIs,v=!1;for(var b in o){var d=o[b];/[#\/]$/.test(d)&&c[d]!==(b+=":")&&(v=!0,c[d]=b,this._subject!==null&&(this._write(this._graph?`
}
`:`.
`),this._subject=null,this._graph=""),this._write("@prefix "+b+" <"+d+`>.
`))}if(v){var g="",f="";for(var O in c)g+=g?"|"+O:O,f+=(f?"|":"")+c[O];g=g.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+f+")[^/]*$|^("+g+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(v?`
`:"",s)},blank:function(o,s){var c,v,b=o;switch(o===void 0?b=[]:typeof o=="string"?b=[{predicate:o,object:s}]:"length"in o||(b=[o]),v=b.length){case 0:return"[]";case 1:if((c=b[0]).object[0]!=="[")return"[ "+this._encodePredicate(c.predicate)+" "+this._encodeObject(c.object)+" ]";default:for(var d="[",g=0;g<v;g++)(c=b[g]).predicate===o?d+=", "+this._encodeObject(c.object):(d+=(g?`;
  `:`
  `)+this._encodePredicate(c.predicate)+" "+this._encodeObject(c.object),o=c.predicate);return d+`
]`}},list:function(o){for(var s=o&&o.length||0,c=new Array(s),v=0;v<s;v++)c[v]=this._encodeObject(o[v]);return"("+c.join(" ")+")"},_prefixRegex:/$0^/,end:function(o){this._subject!==null&&(this._write(this._graph?`
}
`:`.
`),this._subject=null),this._write=this._blockedWrite;var s=o&&function(c,v){s=null,o(c,v)};if(this._endStream)try{return this._outputStream.end(s)}catch{}s&&s()}},ee.exports=e},{}],73:[function(P,ee,X){(function(N){(function(){var l=typeof Map=="function"&&Map.prototype,E=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,u=l&&E&&typeof E.get=="function"?E.get:null,e=l&&Map.prototype.forEach,r=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=r&&o&&typeof o.get=="function"?o.get:null,c=r&&Set.prototype.forEach,v=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap.prototype.has:null,b=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,f=Object.prototype.toString,O=Function.prototype.toString,I=String.prototype.match,j=String.prototype.slice,D=String.prototype.replace,A=String.prototype.toUpperCase,C=String.prototype.toLowerCase,Q=RegExp.prototype.test,q=Array.prototype.concat,H=Array.prototype.join,B=Array.prototype.slice,Z=Math.floor,se=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ae=Object.getOwnPropertySymbols,ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,fe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",z=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===fe||!0)?Symbol.toStringTag:null,U=Object.prototype.propertyIsEnumerable,W=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ae){return Ae.__proto__}:null);function K(Ae,xe){if(Ae===1/0||Ae===-1/0||Ae!=Ae||Ae&&Ae>-1e3&&Ae<1e3||Q.call(/e/,xe))return xe;var Ne=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ae=="number"){var Oe=Ae<0?-Z(-Ae):Z(Ae);if(Oe!==Ae){var Ge=String(Oe),Be=j.call(xe,Ge.length+1);return D.call(Ge,Ne,"$&_")+"."+D.call(D.call(Be,/([0-9]{3})/g,"$&_"),/_$/,"")}}return D.call(xe,Ne,"$&_")}var Y=P("./util.inspect"),le=Y.custom,re=$(le)?le:null;function ue(Ae,xe,Ne){var Oe=(Ne.quoteStyle||xe)==="double"?'"':"'";return Oe+Ae+Oe}function pe(Ae){return D.call(String(Ae),/"/g,"&quot;")}function ge(Ae){return!(G(Ae)!=="[object Array]"||z&&typeof Ae=="object"&&z in Ae)}function we(Ae){return!(G(Ae)!=="[object RegExp]"||z&&typeof Ae=="object"&&z in Ae)}function $(Ae){if(fe)return Ae&&typeof Ae=="object"&&Ae instanceof Symbol;if(typeof Ae=="symbol")return!0;if(!Ae||typeof Ae!="object"||!ye)return!1;try{return ye.call(Ae),!0}catch{}return!1}ee.exports=function Ae(xe,Ne,Oe,Ge){var Be=Ne||{};if(L(Be,"quoteStyle")&&Be.quoteStyle!=="single"&&Be.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(L(Be,"maxStringLength")&&(typeof Be.maxStringLength=="number"?Be.maxStringLength<0&&Be.maxStringLength!==1/0:Be.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Xe=!L(Be,"customInspect")||Be.customInspect;if(typeof Xe!="boolean"&&Xe!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(L(Be,"indent")&&Be.indent!==null&&Be.indent!=="	"&&!(parseInt(Be.indent,10)===Be.indent&&Be.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(L(Be,"numericSeparator")&&typeof Be.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ut=Be.numericSeparator;if(xe===void 0)return"undefined";if(xe===null)return"null";if(typeof xe=="boolean")return xe?"true":"false";if(typeof xe=="string")return ne(xe,Be);if(typeof xe=="number"){if(xe===0)return 1/0/xe>0?"0":"-0";var We=String(xe);return ut?K(xe,We):We}if(typeof xe=="bigint"){var st=String(xe)+"n";return ut?K(xe,st):st}var it=Be.depth===void 0?5:Be.depth;if(Oe===void 0&&(Oe=0),Oe>=it&&it>0&&typeof xe=="object")return ge(xe)?"[Array]":"[Object]";var Ze=function(Ie,Je){var _t;if(Ie.indent==="	")_t="	";else{if(!(typeof Ie.indent=="number"&&Ie.indent>0))return null;_t=H.call(Array(Ie.indent+1)," ")}return{base:_t,prev:H.call(Array(Je+1),_t)}}(Be,Oe);if(Ge===void 0)Ge=[];else if(te(Ge,xe)>=0)return"[Circular]";function He(Ie,Je,_t){if(Je&&(Ge=B.call(Ge)).push(Je),_t){var br={depth:Be.depth};return L(Be,"quoteStyle")&&(br.quoteStyle=Be.quoteStyle),Ae(Ie,br,Oe+1,Ge)}return Ae(Ie,Be,Oe+1,Ge)}if(typeof xe=="function"&&!we(xe)){var tt=function(Ie){if(Ie.name)return Ie.name;var Je=I.call(O.call(Ie),/^function\s*([\w$]+)/);return Je?Je[1]:null}(xe),dr=Re(xe,He);return"[Function"+(tt?": "+tt:" (anonymous)")+"]"+(dr.length>0?" { "+H.call(dr,", ")+" }":"")}if($(xe)){var hr=fe?D.call(String(xe),/^(Symbol\(.*\))_[^)]*$/,"$1"):ye.call(xe);return typeof xe!="object"||fe?hr:he(hr)}if(function(Ie){return!Ie||typeof Ie!="object"?!1:typeof HTMLElement<"u"&&Ie instanceof HTMLElement?!0:typeof Ie.nodeName=="string"&&typeof Ie.getAttribute=="function"}(xe)){for(var Tt="<"+C.call(String(xe.nodeName)),tr=xe.attributes||[],Rt=0;Rt<tr.length;Rt++)Tt+=" "+tr[Rt].name+"="+ue(pe(tr[Rt].value),"double",Be);return Tt+=">",xe.childNodes&&xe.childNodes.length&&(Tt+="..."),Tt+="</"+C.call(String(xe.nodeName))+">"}if(ge(xe)){if(xe.length===0)return"[]";var Nt=Re(xe,He);return Ze&&!function(Ie){for(var Je=0;Je<Ie.length;Je++)if(te(Ie[Je],`
`)>=0)return!1;return!0}(Nt)?"["+je(Nt,Ze)+"]":"[ "+H.call(Nt,", ")+" ]"}if(function(Ie){return!(G(Ie)!=="[object Error]"||z&&typeof Ie=="object"&&z in Ie)}(xe)){var rr=Re(xe,He);return"cause"in Error.prototype||!("cause"in xe)||U.call(xe,"cause")?rr.length===0?"["+String(xe)+"]":"{ ["+String(xe)+"] "+H.call(rr,", ")+" }":"{ ["+String(xe)+"] "+H.call(q.call("[cause]: "+He(xe.cause),rr),", ")+" }"}if(typeof xe=="object"&&Xe){if(re&&typeof xe[re]=="function"&&Y)return Y(xe,{depth:it-Oe});if(Xe!=="symbol"&&typeof xe.inspect=="function")return xe.inspect()}if(function(Ie){if(!u||!Ie||typeof Ie!="object")return!1;try{u.call(Ie);try{s.call(Ie)}catch{return!0}return Ie instanceof Map}catch{}return!1}(xe)){var nr=[];return e&&e.call(xe,function(Ie,Je){nr.push(He(Je,xe,!0)+" => "+He(Ie,xe))}),_e("Map",u.call(xe),nr,Ze)}if(function(Ie){if(!s||!Ie||typeof Ie!="object")return!1;try{s.call(Ie);try{u.call(Ie)}catch{return!0}return Ie instanceof Set}catch{}return!1}(xe)){var yr=[];return c&&c.call(xe,function(Ie){yr.push(He(Ie,xe))}),_e("Set",s.call(xe),yr,Ze)}if(function(Ie){if(!v||!Ie||typeof Ie!="object")return!1;try{v.call(Ie,v);try{b.call(Ie,b)}catch{return!0}return Ie instanceof WeakMap}catch{}return!1}(xe))return be("WeakMap");if(function(Ie){if(!b||!Ie||typeof Ie!="object")return!1;try{b.call(Ie,b);try{v.call(Ie,v)}catch{return!0}return Ie instanceof WeakSet}catch{}return!1}(xe))return be("WeakSet");if(function(Ie){if(!d||!Ie||typeof Ie!="object")return!1;try{return d.call(Ie),!0}catch{}return!1}(xe))return be("WeakRef");if(function(Ie){return!(G(Ie)!=="[object Number]"||z&&typeof Ie=="object"&&z in Ie)}(xe))return he(He(Number(xe)));if(function(Ie){if(!Ie||typeof Ie!="object"||!se)return!1;try{return se.call(Ie),!0}catch{}return!1}(xe))return he(He(se.call(xe)));if(function(Ie){return!(G(Ie)!=="[object Boolean]"||z&&typeof Ie=="object"&&z in Ie)}(xe))return he(g.call(xe));if(function(Ie){return!(G(Ie)!=="[object String]"||z&&typeof Ie=="object"&&z in Ie)}(xe))return he(He(String(xe)));if(typeof window<"u"&&xe===window)return"{ [object Window] }";if(xe===N)return"{ [object globalThis] }";if(!function(Ie){return!(G(Ie)!=="[object Date]"||z&&typeof Ie=="object"&&z in Ie)}(xe)&&!we(xe)){var ir=Re(xe,He),vr=W?W(xe)===Object.prototype:xe instanceof Object||xe.constructor===Object,Ot=xe instanceof Object?"":"null prototype",gr=!vr&&z&&Object(xe)===xe&&z in xe?j.call(G(xe),8,-1):Ot?"Object":"",Lt=(vr||typeof xe.constructor!="function"?"":xe.constructor.name?xe.constructor.name+" ":"")+(gr||Ot?"["+H.call(q.call([],gr||[],Ot||[]),": ")+"] ":"");return ir.length===0?Lt+"{}":Ze?Lt+"{"+je(ir,Ze)+"}":Lt+"{ "+H.call(ir,", ")+" }"}return String(xe)};var w=Object.prototype.hasOwnProperty||function(Ae){return Ae in this};function L(Ae,xe){return w.call(Ae,xe)}function G(Ae){return f.call(Ae)}function te(Ae,xe){if(Ae.indexOf)return Ae.indexOf(xe);for(var Ne=0,Oe=Ae.length;Ne<Oe;Ne++)if(Ae[Ne]===xe)return Ne;return-1}function ne(Ae,xe){if(Ae.length>xe.maxStringLength){var Ne=Ae.length-xe.maxStringLength,Oe="... "+Ne+" more character"+(Ne>1?"s":"");return ne(j.call(Ae,0,xe.maxStringLength),xe)+Oe}return ue(D.call(D.call(Ae,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ie),"single",xe)}function ie(Ae){var xe=Ae.charCodeAt(0),Ne={8:"b",9:"t",10:"n",12:"f",13:"r"}[xe];return Ne?"\\"+Ne:"\\x"+(xe<16?"0":"")+A.call(xe.toString(16))}function he(Ae){return"Object("+Ae+")"}function be(Ae){return Ae+" { ? }"}function _e(Ae,xe,Ne,Oe){return Ae+" ("+xe+") {"+(Oe?je(Ne,Oe):H.call(Ne,", "))+"}"}function je(Ae,xe){if(Ae.length===0)return"";var Ne=`
`+xe.prev+xe.base;return Ne+H.call(Ae,","+Ne)+`
`+xe.prev}function Re(Ae,xe){var Ne=ge(Ae),Oe=[];if(Ne){Oe.length=Ae.length;for(var Ge=0;Ge<Ae.length;Ge++)Oe[Ge]=L(Ae,Ge)?xe(Ae[Ge],Ae):""}var Be,Xe=typeof ae=="function"?ae(Ae):[];if(fe){Be={};for(var ut=0;ut<Xe.length;ut++)Be["$"+Xe[ut]]=Xe[ut]}for(var We in Ae)L(Ae,We)&&(Ne&&String(Number(We))===We&&We<Ae.length||fe&&Be["$"+We]instanceof Symbol||(Q.call(/[^\w$]/,We)?Oe.push(xe(We,Ae)+": "+xe(Ae[We],Ae)):Oe.push(We+": "+xe(Ae[We],Ae))));if(typeof ae=="function")for(var st=0;st<Xe.length;st++)U.call(Ae,Xe[st])&&Oe.push("["+xe(Xe[st])+"]: "+xe(Ae[Xe[st]],Ae));return Oe}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./util.inspect":3}],74:[function(P,ee,X){"use strict";ee.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},{}],75:[function(P,ee,X){var N,l,E=ee.exports={};function u(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(O){if(N===setTimeout)return setTimeout(O,0);if((N===u||!N)&&setTimeout)return N=setTimeout,setTimeout(O,0);try{return N(O,0)}catch{try{return N.call(null,O,0)}catch{return N.call(this,O,0)}}}(function(){try{N=typeof setTimeout=="function"?setTimeout:u}catch{N=u}try{l=typeof clearTimeout=="function"?clearTimeout:e}catch{l=e}})();var o,s=[],c=!1,v=-1;function b(){c&&o&&(c=!1,o.length?s=o.concat(s):v=-1,s.length&&d())}function d(){if(!c){var O=r(b);c=!0;for(var I=s.length;I;){for(o=s,s=[];++v<I;)o&&o[v].run();v=-1,I=s.length}o=null,c=!1,function(j){if(l===clearTimeout)return clearTimeout(j);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(j);try{return l(j)}catch{try{return l.call(null,j)}catch{return l.call(this,j)}}}(O)}}function g(O,I){this.fun=O,this.array=I}function f(){}E.nextTick=function(O){var I=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)I[j-1]=arguments[j];s.push(new g(O,I)),s.length!==1||c||r(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=f,E.addListener=f,E.once=f,E.off=f,E.removeListener=f,E.removeAllListeners=f,E.emit=f,E.prependListener=f,E.prependOnceListener=f,E.listeners=function(O){return[]},E.binding=function(O){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(O){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},{}],76:[function(P,ee,X){(function(N){(function(){(function(l){var E=typeof X=="object"&&X&&!X.nodeType&&X,u=typeof ee=="object"&&ee&&!ee.nodeType&&ee,e=typeof N=="object"&&N;e.global!==e&&e.window!==e&&e.self!==e||(l=e);var r,o,s=2147483647,c=36,v=1,b=26,d=38,g=700,f=72,O=128,I="-",j=/^xn--/,D=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Q=c-v,q=Math.floor,H=String.fromCharCode;function B(K){throw new RangeError(C[K])}function Z(K,Y){for(var le=K.length,re=[];le--;)re[le]=Y(K[le]);return re}function se(K,Y){var le=K.split("@"),re="";return le.length>1&&(re=le[0]+"@",K=le[1]),re+Z((K=K.replace(A,".")).split("."),Y).join(".")}function ae(K){for(var Y,le,re=[],ue=0,pe=K.length;ue<pe;)(Y=K.charCodeAt(ue++))>=55296&&Y<=56319&&ue<pe?(64512&(le=K.charCodeAt(ue++)))==56320?re.push(((1023&Y)<<10)+(1023&le)+65536):(re.push(Y),ue--):re.push(Y);return re}function ye(K){return Z(K,function(Y){var le="";return Y>65535&&(le+=H((Y-=65536)>>>10&1023|55296),Y=56320|1023&Y),le+=H(Y)}).join("")}function fe(K,Y){return K+22+75*(K<26)-((Y!=0)<<5)}function z(K,Y,le){var re=0;for(K=le?q(K/g):K>>1,K+=q(K/Y);K>Q*b>>1;re+=c)K=q(K/Q);return q(re+(Q+1)*K/(K+d))}function U(K){var Y,le,re,ue,pe,ge,we,$,w,L,G,te=[],ne=K.length,ie=0,he=O,be=f;for((le=K.lastIndexOf(I))<0&&(le=0),re=0;re<le;++re)K.charCodeAt(re)>=128&&B("not-basic"),te.push(K.charCodeAt(re));for(ue=le>0?le+1:0;ue<ne;){for(pe=ie,ge=1,we=c;ue>=ne&&B("invalid-input"),(($=(G=K.charCodeAt(ue++))-48<10?G-22:G-65<26?G-65:G-97<26?G-97:c)>=c||$>q((s-ie)/ge))&&B("overflow"),ie+=$*ge,!($<(w=we<=be?v:we>=be+b?b:we-be));we+=c)ge>q(s/(L=c-w))&&B("overflow"),ge*=L;be=z(ie-pe,Y=te.length+1,pe==0),q(ie/Y)>s-he&&B("overflow"),he+=q(ie/Y),ie%=Y,te.splice(ie++,0,he)}return ye(te)}function W(K){var Y,le,re,ue,pe,ge,we,$,w,L,G,te,ne,ie,he,be=[];for(te=(K=ae(K)).length,Y=O,le=0,pe=f,ge=0;ge<te;++ge)(G=K[ge])<128&&be.push(H(G));for(re=ue=be.length,ue&&be.push(I);re<te;){for(we=s,ge=0;ge<te;++ge)(G=K[ge])>=Y&&G<we&&(we=G);for(we-Y>q((s-le)/(ne=re+1))&&B("overflow"),le+=(we-Y)*ne,Y=we,ge=0;ge<te;++ge)if((G=K[ge])<Y&&++le>s&&B("overflow"),G==Y){for($=le,w=c;!($<(L=w<=pe?v:w>=pe+b?b:w-pe));w+=c)he=$-L,ie=c-L,be.push(H(fe(L+he%ie,0))),$=q(he/ie);be.push(H(fe($,0))),pe=z(le,ne,re==ue),le=0,++re}++le,++Y}return be.join("")}if(r={version:"1.4.1",ucs2:{decode:ae,encode:ye},decode:U,encode:W,toASCII:function(K){return se(K,function(Y){return D.test(Y)?"xn--"+W(Y):Y})},toUnicode:function(K){return se(K,function(Y){return j.test(Y)?U(Y.slice(4).toLowerCase()):Y})}},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return r});else if(E&&u)if(ee.exports==E)u.exports=r;else for(o in r)r.hasOwnProperty(o)&&(E[o]=r[o]);else l.punycode=r})(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],77:[function(P,ee,X){"use strict";var N=String.prototype.replace,l=/%20/g,E="RFC1738",u="RFC3986";ee.exports={default:u,formatters:{RFC1738:function(e){return N.call(e,l,"+")},RFC3986:function(e){return String(e)}},RFC1738:E,RFC3986:u}},{}],78:[function(P,ee,X){"use strict";var N=P("./stringify"),l=P("./parse"),E=P("./formats");ee.exports={formats:E,parse:l,stringify:N}},{"./formats":77,"./parse":79,"./stringify":80}],79:[function(P,ee,X){"use strict";var N=P("./utils"),l=Object.prototype.hasOwnProperty,E=Array.isArray,u={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:N.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},e=function(s){return s.replace(/&#(\d+);/g,function(c,v){return String.fromCharCode(parseInt(v,10))})},r=function(s,c){return s&&typeof s=="string"&&c.comma&&s.indexOf(",")>-1?s.split(","):s},o=function(s,c,v,b){if(s){var d=v.allowDots?s.replace(/\.([^.[]+)/g,"[$1]"):s,g=/(\[[^[\]]*])/g,f=v.depth>0&&/(\[[^[\]]*])/.exec(d),O=f?d.slice(0,f.index):d,I=[];if(O){if(!v.plainObjects&&l.call(Object.prototype,O)&&!v.allowPrototypes)return;I.push(O)}for(var j=0;v.depth>0&&(f=g.exec(d))!==null&&j<v.depth;){if(j+=1,!v.plainObjects&&l.call(Object.prototype,f[1].slice(1,-1))&&!v.allowPrototypes)return;I.push(f[1])}return f&&I.push("["+d.slice(f.index)+"]"),function(D,A,C,Q){for(var q=Q?A:r(A,C),H=D.length-1;H>=0;--H){var B,Z=D[H];if(Z==="[]"&&C.parseArrays)B=C.allowEmptyArrays&&q===""?[]:[].concat(q);else{B=C.plainObjects?Object.create(null):{};var se=Z.charAt(0)==="["&&Z.charAt(Z.length-1)==="]"?Z.slice(1,-1):Z,ae=C.decodeDotInKeys?se.replace(/%2E/g,"."):se,ye=parseInt(ae,10);C.parseArrays||ae!==""?!isNaN(ye)&&Z!==ae&&String(ye)===ae&&ye>=0&&C.parseArrays&&ye<=C.arrayLimit?(B=[])[ye]=q:ae!=="__proto__"&&(B[ae]=q):B={0:q}}q=B}return q}(I,c,v,b)}};ee.exports=function(s,c){var v=function(j){if(!j)return u;if(j.allowEmptyArrays!==void 0&&typeof j.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(j.decodeDotInKeys!==void 0&&typeof j.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(j.decoder!==null&&j.decoder!==void 0&&typeof j.decoder!="function")throw new TypeError("Decoder has to be a function.");if(j.charset!==void 0&&j.charset!=="utf-8"&&j.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var D=j.charset===void 0?u.charset:j.charset,A=j.duplicates===void 0?u.duplicates:j.duplicates;if(A!=="combine"&&A!=="first"&&A!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:j.allowDots===void 0?j.decodeDotInKeys===!0||u.allowDots:!!j.allowDots,allowEmptyArrays:typeof j.allowEmptyArrays=="boolean"?!!j.allowEmptyArrays:u.allowEmptyArrays,allowPrototypes:typeof j.allowPrototypes=="boolean"?j.allowPrototypes:u.allowPrototypes,allowSparse:typeof j.allowSparse=="boolean"?j.allowSparse:u.allowSparse,arrayLimit:typeof j.arrayLimit=="number"?j.arrayLimit:u.arrayLimit,charset:D,charsetSentinel:typeof j.charsetSentinel=="boolean"?j.charsetSentinel:u.charsetSentinel,comma:typeof j.comma=="boolean"?j.comma:u.comma,decodeDotInKeys:typeof j.decodeDotInKeys=="boolean"?j.decodeDotInKeys:u.decodeDotInKeys,decoder:typeof j.decoder=="function"?j.decoder:u.decoder,delimiter:typeof j.delimiter=="string"||N.isRegExp(j.delimiter)?j.delimiter:u.delimiter,depth:typeof j.depth=="number"||j.depth===!1?+j.depth:u.depth,duplicates:A,ignoreQueryPrefix:j.ignoreQueryPrefix===!0,interpretNumericEntities:typeof j.interpretNumericEntities=="boolean"?j.interpretNumericEntities:u.interpretNumericEntities,parameterLimit:typeof j.parameterLimit=="number"?j.parameterLimit:u.parameterLimit,parseArrays:j.parseArrays!==!1,plainObjects:typeof j.plainObjects=="boolean"?j.plainObjects:u.plainObjects,strictNullHandling:typeof j.strictNullHandling=="boolean"?j.strictNullHandling:u.strictNullHandling}}(c);if(s===""||s==null)return v.plainObjects?Object.create(null):{};for(var b=typeof s=="string"?function(j,D){var A,C={__proto__:null},Q=D.ignoreQueryPrefix?j.replace(/^\?/,""):j,q=D.parameterLimit===1/0?void 0:D.parameterLimit,H=Q.split(D.delimiter,q),B=-1,Z=D.charset;if(D.charsetSentinel)for(A=0;A<H.length;++A)H[A].indexOf("utf8=")===0&&(H[A]==="utf8=%E2%9C%93"?Z="utf-8":H[A]==="utf8=%26%2310003%3B"&&(Z="iso-8859-1"),B=A,A=H.length);for(A=0;A<H.length;++A)if(A!==B){var se,ae,ye=H[A],fe=ye.indexOf("]="),z=fe===-1?ye.indexOf("="):fe+1;z===-1?(se=D.decoder(ye,u.decoder,Z,"key"),ae=D.strictNullHandling?null:""):(se=D.decoder(ye.slice(0,z),u.decoder,Z,"key"),ae=N.maybeMap(r(ye.slice(z+1),D),function(W){return D.decoder(W,u.decoder,Z,"value")})),ae&&D.interpretNumericEntities&&Z==="iso-8859-1"&&(ae=e(ae)),ye.indexOf("[]=")>-1&&(ae=E(ae)?[ae]:ae);var U=l.call(C,se);U&&D.duplicates==="combine"?C[se]=N.combine(C[se],ae):U&&D.duplicates!=="last"||(C[se]=ae)}return C}(s,v):s,d=v.plainObjects?Object.create(null):{},g=Object.keys(b),f=0;f<g.length;++f){var O=g[f],I=o(O,b[O],v,typeof s=="string");d=N.merge(d,I,v)}return v.allowSparse===!0?d:N.compact(d)}},{"./utils":81}],80:[function(P,ee,X){"use strict";var N=P("side-channel"),l=P("./utils"),E=P("./formats"),u=Object.prototype.hasOwnProperty,e={brackets:function(f){return f+"[]"},comma:"comma",indices:function(f,O){return f+"["+O+"]"},repeat:function(f){return f}},r=Array.isArray,o=Array.prototype.push,s=function(f,O){o.apply(f,r(O)?O:[O])},c=Date.prototype.toISOString,v=E.default,b={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:l.encode,encodeValuesOnly:!1,format:v,formatter:E.formatters[v],indices:!1,serializeDate:function(f){return c.call(f)},skipNulls:!1,strictNullHandling:!1},d={},g=function f(O,I,j,D,A,C,Q,q,H,B,Z,se,ae,ye,fe,z,U,W){for(var K,Y=O,le=W,re=0,ue=!1;(le=le.get(d))!==void 0&&!ue;){var pe=le.get(O);if(re+=1,pe!==void 0){if(pe===re)throw new RangeError("Cyclic object value");ue=!0}le.get(d)===void 0&&(re=0)}if(typeof B=="function"?Y=B(I,Y):Y instanceof Date?Y=ae(Y):j==="comma"&&r(Y)&&(Y=l.maybeMap(Y,function(_e){return _e instanceof Date?ae(_e):_e})),Y===null){if(C)return H&&!z?H(I,b.encoder,U,"key",ye):I;Y=""}if(typeof(K=Y)=="string"||typeof K=="number"||typeof K=="boolean"||typeof K=="symbol"||typeof K=="bigint"||l.isBuffer(Y))return H?[fe(z?I:H(I,b.encoder,U,"key",ye))+"="+fe(H(Y,b.encoder,U,"value",ye))]:[fe(I)+"="+fe(String(Y))];var ge,we=[];if(Y===void 0)return we;if(j==="comma"&&r(Y))z&&H&&(Y=l.maybeMap(Y,H)),ge=[{value:Y.length>0?Y.join(",")||null:void 0}];else if(r(B))ge=B;else{var $=Object.keys(Y);ge=Z?$.sort(Z):$}var w=q?I.replace(/\./g,"%2E"):I,L=D&&r(Y)&&Y.length===1?w+"[]":w;if(A&&r(Y)&&Y.length===0)return L+"[]";for(var G=0;G<ge.length;++G){var te=ge[G],ne=typeof te=="object"&&te.value!==void 0?te.value:Y[te];if(!Q||ne!==null){var ie=se&&q?te.replace(/\./g,"%2E"):te,he=r(Y)?typeof j=="function"?j(L,ie):L:L+(se?"."+ie:"["+ie+"]");W.set(O,re);var be=N();be.set(d,W),s(we,f(ne,he,j,D,A,C,Q,q,j==="comma"&&z&&r(Y)?null:H,B,Z,se,ae,ye,fe,z,U,be))}}return we};ee.exports=function(f,O){var I,j=f,D=function(ae){if(!ae)return b;if(ae.allowEmptyArrays!==void 0&&typeof ae.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(ae.encodeDotInKeys!==void 0&&typeof ae.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(ae.encoder!==null&&ae.encoder!==void 0&&typeof ae.encoder!="function")throw new TypeError("Encoder has to be a function.");var ye=ae.charset||b.charset;if(ae.charset!==void 0&&ae.charset!=="utf-8"&&ae.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var fe=E.default;if(ae.format!==void 0){if(!u.call(E.formatters,ae.format))throw new TypeError("Unknown format option provided.");fe=ae.format}var z,U=E.formatters[fe],W=b.filter;if((typeof ae.filter=="function"||r(ae.filter))&&(W=ae.filter),z=ae.arrayFormat in e?ae.arrayFormat:"indices"in ae?ae.indices?"indices":"repeat":b.arrayFormat,"commaRoundTrip"in ae&&typeof ae.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var K=ae.allowDots===void 0?ae.encodeDotInKeys===!0||b.allowDots:!!ae.allowDots;return{addQueryPrefix:typeof ae.addQueryPrefix=="boolean"?ae.addQueryPrefix:b.addQueryPrefix,allowDots:K,allowEmptyArrays:typeof ae.allowEmptyArrays=="boolean"?!!ae.allowEmptyArrays:b.allowEmptyArrays,arrayFormat:z,charset:ye,charsetSentinel:typeof ae.charsetSentinel=="boolean"?ae.charsetSentinel:b.charsetSentinel,commaRoundTrip:ae.commaRoundTrip,delimiter:ae.delimiter===void 0?b.delimiter:ae.delimiter,encode:typeof ae.encode=="boolean"?ae.encode:b.encode,encodeDotInKeys:typeof ae.encodeDotInKeys=="boolean"?ae.encodeDotInKeys:b.encodeDotInKeys,encoder:typeof ae.encoder=="function"?ae.encoder:b.encoder,encodeValuesOnly:typeof ae.encodeValuesOnly=="boolean"?ae.encodeValuesOnly:b.encodeValuesOnly,filter:W,format:fe,formatter:U,serializeDate:typeof ae.serializeDate=="function"?ae.serializeDate:b.serializeDate,skipNulls:typeof ae.skipNulls=="boolean"?ae.skipNulls:b.skipNulls,sort:typeof ae.sort=="function"?ae.sort:null,strictNullHandling:typeof ae.strictNullHandling=="boolean"?ae.strictNullHandling:b.strictNullHandling}}(O);typeof D.filter=="function"?j=(0,D.filter)("",j):r(D.filter)&&(I=D.filter);var A=[];if(typeof j!="object"||j===null)return"";var C=e[D.arrayFormat],Q=C==="comma"&&D.commaRoundTrip;I||(I=Object.keys(j)),D.sort&&I.sort(D.sort);for(var q=N(),H=0;H<I.length;++H){var B=I[H];D.skipNulls&&j[B]===null||s(A,g(j[B],B,C,Q,D.allowEmptyArrays,D.strictNullHandling,D.skipNulls,D.encodeDotInKeys,D.encode?D.encoder:null,D.filter,D.sort,D.allowDots,D.serializeDate,D.format,D.formatter,D.encodeValuesOnly,D.charset,q))}var Z=A.join(D.delimiter),se=D.addQueryPrefix===!0?"?":"";return D.charsetSentinel&&(D.charset==="iso-8859-1"?se+="utf8=%26%2310003%3B&":se+="utf8=%E2%9C%93&"),Z.length>0?se+Z:""}},{"./formats":77,"./utils":81,"side-channel":95}],81:[function(P,ee,X){"use strict";var N=P("./formats"),l=Object.prototype.hasOwnProperty,E=Array.isArray,u=function(){for(var o=[],s=0;s<256;++s)o.push("%"+((s<16?"0":"")+s.toString(16)).toUpperCase());return o}(),e=function(o,s){for(var c=s&&s.plainObjects?Object.create(null):{},v=0;v<o.length;++v)o[v]!==void 0&&(c[v]=o[v]);return c},r=1024;ee.exports={arrayToObject:e,assign:function(o,s){return Object.keys(s).reduce(function(c,v){return c[v]=s[v],c},o)},combine:function(o,s){return[].concat(o,s)},compact:function(o){for(var s=[{obj:{o},prop:"o"}],c=[],v=0;v<s.length;++v)for(var b=s[v],d=b.obj[b.prop],g=Object.keys(d),f=0;f<g.length;++f){var O=g[f],I=d[O];typeof I=="object"&&I!==null&&c.indexOf(I)===-1&&(s.push({obj:d,prop:O}),c.push(I))}return function(j){for(;j.length>1;){var D=j.pop(),A=D.obj[D.prop];if(E(A)){for(var C=[],Q=0;Q<A.length;++Q)A[Q]!==void 0&&C.push(A[Q]);D.obj[D.prop]=C}}}(s),o},decode:function(o,s,c){var v=o.replace(/\+/g," ");if(c==="iso-8859-1")return v.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(v)}catch{return v}},encode:function(o,s,c,v,b){if(o.length===0)return o;var d=o;if(typeof o=="symbol"?d=Symbol.prototype.toString.call(o):typeof o!="string"&&(d=String(o)),c==="iso-8859-1")return escape(d).replace(/%u[0-9a-f]{4}/gi,function(A){return"%26%23"+parseInt(A.slice(2),16)+"%3B"});for(var g="",f=0;f<d.length;f+=r){for(var O=d.length>=r?d.slice(f,f+r):d,I=[],j=0;j<O.length;++j){var D=O.charCodeAt(j);D===45||D===46||D===95||D===126||D>=48&&D<=57||D>=65&&D<=90||D>=97&&D<=122||b===N.RFC1738&&(D===40||D===41)?I[I.length]=O.charAt(j):D<128?I[I.length]=u[D]:D<2048?I[I.length]=u[192|D>>6]+u[128|63&D]:D<55296||D>=57344?I[I.length]=u[224|D>>12]+u[128|D>>6&63]+u[128|63&D]:(j+=1,D=65536+((1023&D)<<10|1023&O.charCodeAt(j)),I[I.length]=u[240|D>>18]+u[128|D>>12&63]+u[128|D>>6&63]+u[128|63&D])}g+=I.join("")}return g},isBuffer:function(o){return!(!o||typeof o!="object")&&!!(o.constructor&&o.constructor.isBuffer&&o.constructor.isBuffer(o))},isRegExp:function(o){return Object.prototype.toString.call(o)==="[object RegExp]"},maybeMap:function(o,s){if(E(o)){for(var c=[],v=0;v<o.length;v+=1)c.push(s(o[v]));return c}return s(o)},merge:function o(s,c,v){if(!c)return s;if(typeof c!="object"){if(E(s))s.push(c);else{if(!s||typeof s!="object")return[s,c];(v&&(v.plainObjects||v.allowPrototypes)||!l.call(Object.prototype,c))&&(s[c]=!0)}return s}if(!s||typeof s!="object")return[s].concat(c);var b=s;return E(s)&&!E(c)&&(b=e(s,v)),E(s)&&E(c)?(c.forEach(function(d,g){if(l.call(s,g)){var f=s[g];f&&typeof f=="object"&&d&&typeof d=="object"?s[g]=o(f,d,v):s.push(d)}else s[g]=d}),s):Object.keys(c).reduce(function(d,g){var f=c[g];return l.call(d,g)?d[g]=o(d[g],f,v):d[g]=f,d},b)}}},{"./formats":77}],82:[function(P,ee,X){ee.exports=P("./lib")},{"./lib":91}],83:[function(P,ee,X){"use strict";ee.exports=class il{constructor(l,E=new Map,u=0){this.prefix=l,this._existing=E,this.counter=u}clone(){const{prefix:l,_existing:E,counter:u}=this;return new il(l,new Map(E),u)}getId(l){const E=l&&this._existing.get(l);if(E)return E;const u=this.prefix+this.counter;return this.counter++,l&&this._existing.set(l,u),u}hasId(l){return this._existing.has(l)}getOldIds(){return[...this._existing.keys()]}}},{}],84:[function(P,ee,X){/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */"use strict";P("setimmediate");const N=self.crypto||self.msCrypto;ee.exports=class{constructor(l){if(!N||!N.subtle)throw new Error("crypto.subtle not found.");if(l==="sha256")this.algorithm={name:"SHA-256"};else{if(l!=="sha1")throw new Error(`Unsupported algorithm "${l}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(l){this._content+=l}async digest(){const l=new TextEncoder().encode(this._content),E=new Uint8Array(await N.subtle.digest(this.algorithm,l));let u="";for(let e=0;e<E.length;++e)u+=E[e].toString(16).padStart(2,"0");return u}}},{setimmediate:94}],85:[function(P,ee,X){/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */"use strict";const N="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",l="http://www.w3.org/2001/XMLSchema#string",E="NamedNode",u="BlankNode",e="Literal",r="DefaultGraph",o={};function s(b,d){return b.subject.termType===d.subject.termType&&b.object.termType===d.object.termType&&b.subject.value===d.subject.value&&b.predicate.value===d.predicate.value&&b.object.value===d.object.value&&(b.object.termType!==e||b.object.datatype.termType===d.object.datatype.termType&&b.object.language===d.object.language&&b.object.datatype.value===d.object.datatype.value)}(()=>{const b="(?:<([^:]+:[^>]*)>)",d="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD_",g=d+"0-9-\xB7\u0300-\u036F\u203F-\u2040",f="(_:(?:["+d+"0-9])(?:(?:["+g+".])*(?:["+g+"]))?)",O="[ \\t]+",I="[ \\t]*",j="(?:"+b+"|"+f+")"+O,D=b+O,A="(?:"+b+"|"+f+"|"+('(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:'+("(?:\\^\\^"+b+")")+"|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?)")+")"+I,C="(?:\\.|(?:(?:"+b+"|"+f+")"+I+"\\.))";o.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,o.empty=new RegExp("^"+I+"$"),o.quad=new RegExp("^"+I+j+D+A+C+I+"$")})(),ee.exports=class fn{static parse(d){const g=[],f={},O=d.split(o.eoln);let I=0;for(const j of O){if(I++,o.empty.test(j))continue;const D=j.match(o.quad);if(D===null)throw new Error("N-Quads parse error on line "+I+".");const A={subject:null,predicate:null,object:null,graph:null};if(D[1]!==void 0?A.subject={termType:E,value:D[1]}:A.subject={termType:u,value:D[2]},A.predicate={termType:E,value:D[3]},D[4]!==void 0?A.object={termType:E,value:D[4]}:D[5]!==void 0?A.object={termType:u,value:D[5]}:(A.object={termType:e,value:void 0,datatype:{termType:E}},D[7]!==void 0?A.object.datatype.value=D[7]:D[8]!==void 0?(A.object.datatype.value=N,A.object.language=D[8]):A.object.datatype.value=l,A.object.value=D[6].replace(v,function(C,Q,q,H){if(Q)switch(Q){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(q)return String.fromCharCode(parseInt(q,16));if(H)throw new Error("Unsupported U escape")})),D[9]!==void 0?A.graph={termType:E,value:D[9]}:D[10]!==void 0?A.graph={termType:u,value:D[10]}:A.graph={termType:r,value:""},A.graph.value in f){let C=!0;const Q=f[A.graph.value];for(const q of Q)if(s(q,A)){C=!1;break}C&&(Q.push(A),g.push(A))}else f[A.graph.value]=[A],g.push(A)}return g}static serialize(d){Array.isArray(d)||(d=fn.legacyDatasetToQuads(d));const g=[];for(const f of d)g.push(fn.serializeQuad(f));return g.sort().join("")}static serializeQuadComponents(d,g,f,O){let I="";return d.termType===E?I+=`<${d.value}>`:I+=`${d.value}`,I+=` <${g.value}> `,f.termType===E?I+=`<${f.value}>`:f.termType===u?I+=f.value:(I+=`"${function(j){return j.replace(c,function(D){switch(D){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}(f.value)}"`,f.datatype.value===N?f.language&&(I+=`@${f.language}`):f.datatype.value!==l&&(I+=`^^<${f.datatype.value}>`)),O.termType===E?I+=` <${O.value}>`:O.termType===u&&(I+=` ${O.value}`),I+=` .
`,I}static serializeQuad(d){return fn.serializeQuadComponents(d.subject,d.predicate,d.object,d.graph)}static legacyDatasetToQuads(d){const g=[],f={"blank node":u,IRI:E,literal:e};for(const O in d)d[O].forEach(I=>{const j={};for(const D in I){const A=I[D],C={termType:f[A.type],value:A.value};C.termType===e&&(C.datatype={termType:E},"datatype"in A&&(C.datatype.value=A.datatype),"language"in A?("datatype"in A||(C.datatype.value=N),C.language=A.language):"datatype"in A||(C.datatype.value=l)),j[D]=C}j.graph=O==="@default"?{termType:r,value:""}:{termType:O.startsWith("_:")?u:E,value:O},g.push(j)});return g}};const c=/["\\\n\r]/g,v=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],86:[function(P,ee,X){/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */"use strict";ee.exports=class{constructor(N){this.current=N.sort(),this.done=!1,this.dir=new Map;for(let l=0;l<N.length;++l)this.dir.set(N[l],!0)}hasNext(){return!this.done}next(){const{current:N,dir:l}=this,E=N.slice();let u=null,e=0;const r=N.length;for(let o=0;o<r;++o){const s=N[o],c=l.get(s);(u===null||s>u)&&(c&&o>0&&s>N[o-1]||!c&&o<r-1&&s>N[o+1])&&(u=s,e=o)}if(u===null)this.done=!0;else{const o=l.get(u)?e-1:e+1;N[e]=N[o],N[o]=u;for(const s of N)s>u&&l.set(s,!l.get(s))}return E}}},{}],87:[function(P,ee,X){(function(N){(function(){/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */"use strict";const l=P("./IdentifierIssuer"),E=P("./MessageDigest"),u=P("./Permuter"),e=P("./NQuads");function r(o,s){return o.hash<s.hash?-1:o.hash>s.hash?1:0}ee.exports=class{constructor({createMessageDigest:o=()=>new E("sha256"),canonicalIdMap:s=new Map,maxDeepIterations:c=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new l("_:c14n",s),this.createMessageDigest=o,this.maxDeepIterations=c,this.quads=null,this.deepIterations=null}async main(o){this.deepIterations=new Map,this.quads=o;for(const f of o)this._addBlankNodeQuadInfo({quad:f,component:f.subject}),this._addBlankNodeQuadInfo({quad:f,component:f.object}),this._addBlankNodeQuadInfo({quad:f,component:f.graph});const s=new Map,c=[...this.blankNodeInfo.keys()];let v=0;for(const f of c)++v%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:f,hashToBlankNodes:s});const b=[...s.keys()].sort(),d=[];for(const f of b){const O=s.get(f);if(O.length>1){d.push(O);continue}const I=O[0];this.canonicalIssuer.getId(I)}for(const f of d){const O=[];for(const I of f){if(this.canonicalIssuer.hasId(I))continue;const j=new l("_:b");j.getId(I);const D=await this.hashNDegreeQuads(I,j);O.push(D)}O.sort(r);for(const I of O){const j=I.issuer.getOldIds();for(const D of j)this.canonicalIssuer.getId(D)}}const g=[];for(const f of this.quads){const O=e.serializeQuadComponents(this._componentWithCanonicalId(f.subject),f.predicate,this._componentWithCanonicalId(f.object),this._componentWithCanonicalId(f.graph));g.push(O)}return g.sort(),g.join("")}async hashFirstDegreeQuads(o){const s=[],c=this.blankNodeInfo.get(o),v=c.quads;for(const d of v){const g={subject:null,predicate:d.predicate,object:null,graph:null};g.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),g.object=this.modifyFirstDegreeComponent(o,d.object,"object"),g.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),s.push(e.serializeQuad(g))}s.sort();const b=this.createMessageDigest();for(const d of s)b.update(d);return c.hash=await b.digest(),c.hash}async hashRelatedBlankNode(o,s,c,v){let b;b=this.canonicalIssuer.hasId(o)?this.canonicalIssuer.getId(o):c.hasId(o)?c.getId(o):this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(v),v!=="g"&&d.update(this.getRelatedPredicate(s)),d.update(b),d.digest()}async hashNDegreeQuads(o,s){const c=this.deepIterations.get(o)||0;if(c>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,c+1);const v=this.createMessageDigest(),b=await this.createHashToRelated(o,s),d=[...b.keys()].sort();for(const g of d){v.update(g);let f,O="";const I=new u(b.get(g));let j=0;for(;I.hasNext();){const D=I.next();++j%3==0&&await this._yield();let A=s.clone(),C="";const Q=[];let q=!1;for(const H of D)if(this.canonicalIssuer.hasId(H)?C+=this.canonicalIssuer.getId(H):(A.hasId(H)||Q.push(H),C+=A.getId(H)),O.length!==0&&C>O){q=!0;break}if(!q){for(const H of Q){const B=await this.hashNDegreeQuads(H,A);if(C+=A.getId(H),C+=`<${B.hash}>`,A=B.issuer,O.length!==0&&C>O){q=!0;break}}q||(O.length===0||C<O)&&(O=C,f=A)}}v.update(O),s=f}return{hash:await v.digest(),issuer:s}}modifyFirstDegreeComponent(o,s){return s.termType!=="BlankNode"?s:{termType:"BlankNode",value:s.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}async createHashToRelated(o,s){const c=new Map,v=this.blankNodeInfo.get(o).quads;let b=0;for(const d of v)++b%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:o,issuer:s,hashToRelated:c}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:o,issuer:s,hashToRelated:c}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:o,issuer:s,hashToRelated:c})]);return c}async _hashAndTrackBlankNode({id:o,hashToBlankNodes:s}){const c=await this.hashFirstDegreeQuads(o),v=s.get(c);v?v.push(o):s.set(c,[o])}_addBlankNodeQuadInfo({quad:o,component:s}){if(s.termType!=="BlankNode")return;const c=s.value,v=this.blankNodeInfo.get(c);v?v.quads.add(o):this.blankNodeInfo.set(c,{quads:new Set([o]),hash:null})}async _addRelatedBlankNodeHash({quad:o,component:s,position:c,id:v,issuer:b,hashToRelated:d}){if(s.termType!=="BlankNode"||s.value===v)return;const g=s.value,f=await this.hashRelatedBlankNode(g,o,b,c),O=d.get(f);O?O.push(g):d.set(f,[g])}_componentWithCanonicalId(o){return o.termType!=="BlankNode"||o.value.startsWith(this.canonicalIssuer.prefix)?o:{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}}async _yield(){return new Promise(o=>N(o))}}}).call(this)}).call(this,P("timers").setImmediate)},{"./IdentifierIssuer":83,"./MessageDigest":84,"./NQuads":85,"./Permuter":86,timers:131}],88:[function(P,ee,X){/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */"use strict";const N=P("./IdentifierIssuer"),l=P("./MessageDigest"),E=P("./Permuter"),u=P("./NQuads");function e(r,o){return r.hash<o.hash?-1:r.hash>o.hash?1:0}ee.exports=class{constructor({createMessageDigest:r=()=>new l("sha256"),canonicalIdMap:o=new Map,maxDeepIterations:s=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new N("_:c14n",o),this.createMessageDigest=r,this.maxDeepIterations=s,this.quads=null,this.deepIterations=null}main(r){this.deepIterations=new Map,this.quads=r;for(const d of r)this._addBlankNodeQuadInfo({quad:d,component:d.subject}),this._addBlankNodeQuadInfo({quad:d,component:d.object}),this._addBlankNodeQuadInfo({quad:d,component:d.graph});const o=new Map,s=[...this.blankNodeInfo.keys()];for(const d of s)this._hashAndTrackBlankNode({id:d,hashToBlankNodes:o});const c=[...o.keys()].sort(),v=[];for(const d of c){const g=o.get(d);if(g.length>1){v.push(g);continue}const f=g[0];this.canonicalIssuer.getId(f)}for(const d of v){const g=[];for(const f of d){if(this.canonicalIssuer.hasId(f))continue;const O=new N("_:b");O.getId(f);const I=this.hashNDegreeQuads(f,O);g.push(I)}g.sort(e);for(const f of g){const O=f.issuer.getOldIds();for(const I of O)this.canonicalIssuer.getId(I)}}const b=[];for(const d of this.quads){const g=u.serializeQuadComponents(this._componentWithCanonicalId({component:d.subject}),d.predicate,this._componentWithCanonicalId({component:d.object}),this._componentWithCanonicalId({component:d.graph}));b.push(g)}return b.sort(),b.join("")}hashFirstDegreeQuads(r){const o=[],s=this.blankNodeInfo.get(r),c=s.quads;for(const b of c){const d={subject:null,predicate:b.predicate,object:null,graph:null};d.subject=this.modifyFirstDegreeComponent(r,b.subject,"subject"),d.object=this.modifyFirstDegreeComponent(r,b.object,"object"),d.graph=this.modifyFirstDegreeComponent(r,b.graph,"graph"),o.push(u.serializeQuad(d))}o.sort();const v=this.createMessageDigest();for(const b of o)v.update(b);return s.hash=v.digest(),s.hash}hashRelatedBlankNode(r,o,s,c){let v;v=this.canonicalIssuer.hasId(r)?this.canonicalIssuer.getId(r):s.hasId(r)?s.getId(r):this.blankNodeInfo.get(r).hash;const b=this.createMessageDigest();return b.update(c),c!=="g"&&b.update(this.getRelatedPredicate(o)),b.update(v),b.digest()}hashNDegreeQuads(r,o){const s=this.deepIterations.get(r)||0;if(s>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(r,s+1);const c=this.createMessageDigest(),v=this.createHashToRelated(r,o),b=[...v.keys()].sort();for(const d of b){c.update(d);let g,f="";const O=new E(v.get(d));for(;O.hasNext();){const I=O.next();let j=o.clone(),D="";const A=[];let C=!1;for(const Q of I)if(this.canonicalIssuer.hasId(Q)?D+=this.canonicalIssuer.getId(Q):(j.hasId(Q)||A.push(Q),D+=j.getId(Q)),f.length!==0&&D>f){C=!0;break}if(!C){for(const Q of A){const q=this.hashNDegreeQuads(Q,j);if(D+=j.getId(Q),D+=`<${q.hash}>`,j=q.issuer,f.length!==0&&D>f){C=!0;break}}C||(f.length===0||D<f)&&(f=D,g=j)}}c.update(f),o=g}return{hash:c.digest(),issuer:o}}modifyFirstDegreeComponent(r,o){return o.termType!=="BlankNode"?o:{termType:"BlankNode",value:o.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return`<${r.predicate.value}>`}createHashToRelated(r,o){const s=new Map,c=this.blankNodeInfo.get(r).quads;for(const v of c)this._addRelatedBlankNodeHash({quad:v,component:v.subject,position:"s",id:r,issuer:o,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:v,component:v.object,position:"o",id:r,issuer:o,hashToRelated:s}),this._addRelatedBlankNodeHash({quad:v,component:v.graph,position:"g",id:r,issuer:o,hashToRelated:s});return s}_hashAndTrackBlankNode({id:r,hashToBlankNodes:o}){const s=this.hashFirstDegreeQuads(r),c=o.get(s);c?c.push(r):o.set(s,[r])}_addBlankNodeQuadInfo({quad:r,component:o}){if(o.termType!=="BlankNode")return;const s=o.value,c=this.blankNodeInfo.get(s);c?c.quads.add(r):this.blankNodeInfo.set(s,{quads:new Set([r]),hash:null})}_addRelatedBlankNodeHash({quad:r,component:o,position:s,id:c,issuer:v,hashToRelated:b}){if(o.termType!=="BlankNode"||o.value===c)return;const d=o.value,g=this.hashRelatedBlankNode(d,r,v,s),f=b.get(g);f?f.push(d):b.set(g,[d])}_componentWithCanonicalId({component:r}){return r.termType!=="BlankNode"||r.value.startsWith(this.canonicalIssuer.prefix)?r:{termType:"BlankNode",value:this.canonicalIssuer.getId(r.value)}}}},{"./IdentifierIssuer":83,"./MessageDigest":84,"./NQuads":85,"./Permuter":86}],89:[function(P,ee,X){/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */"use strict";const N=P("./MessageDigest"),l=P("./URDNA2015");ee.exports=class extends l{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new N("sha1")}modifyFirstDegreeComponent(E,u,e){return u.termType!=="BlankNode"?u:e==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:u.value===E?"_:a":"_:z"}}getRelatedPredicate(E){return E.predicate.value}async createHashToRelated(E,u){const e=new Map,r=this.blankNodeInfo.get(E).quads;let o=0;for(const s of r){let c,v;if(s.subject.termType==="BlankNode"&&s.subject.value!==E)v=s.subject.value,c="p";else{if(s.object.termType!=="BlankNode"||s.object.value===E)continue;v=s.object.value,c="r"}++o%100==0&&await this._yield();const b=await this.hashRelatedBlankNode(v,s,u,c),d=e.get(b);d?d.push(v):e.set(b,[v])}return e}}},{"./MessageDigest":84,"./URDNA2015":87}],90:[function(P,ee,X){/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */"use strict";const N=P("./MessageDigest"),l=P("./URDNA2015Sync");ee.exports=class extends l{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new N("sha1")}modifyFirstDegreeComponent(E,u,e){return u.termType!=="BlankNode"?u:e==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:u.value===E?"_:a":"_:z"}}getRelatedPredicate(E){return E.predicate.value}createHashToRelated(E,u){const e=new Map,r=this.blankNodeInfo.get(E).quads;for(const o of r){let s,c;if(o.subject.termType==="BlankNode"&&o.subject.value!==E)c=o.subject.value,s="p";else{if(o.object.termType!=="BlankNode"||o.object.value===E)continue;c=o.object.value,s="r"}const v=this.hashRelatedBlankNode(c,o,u,s),b=e.get(v);b?b.push(c):e.set(v,[c])}return e}}},{"./MessageDigest":84,"./URDNA2015Sync":88}],91:[function(P,ee,X){"use strict";const N=P("./URDNA2015"),l=P("./URGNA2012"),E=P("./URDNA2015Sync"),u=P("./URGNA2012Sync");let e;try{e=P("rdf-canonize-native")}catch{}function r(o){return Array.isArray(o)?o:X.NQuads.legacyDatasetToQuads(o)}X.NQuads=P("./NQuads"),X.IdentifierIssuer=P("./IdentifierIssuer"),X._rdfCanonizeNative=function(o){return o&&(e=o),e},X.canonize=async function(o,s){const c=r(o);if(s.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((v,b)=>e.canonize(c,s,(d,g)=>d?b(d):v(g)))}if(s.algorithm==="URDNA2015")return new N(s).main(c);if(s.algorithm==="URGNA2012"){if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new l(s).main(c)}throw"algorithm"in s?new Error("Invalid RDF Dataset Canonicalization algorithm: "+s.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},X._canonizeSync=function(o,s){const c=r(o);if(s.useNative){if(!e)throw new Error("rdf-canonize-native not available");if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return e.canonizeSync(c,s)}if(s.algorithm==="URDNA2015")return new E(s).main(c);if(s.algorithm==="URGNA2012"){if(s.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new u(s).main(c)}throw"algorithm"in s?new Error("Invalid RDF Dataset Canonicalization algorithm: "+s.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":83,"./NQuads":85,"./URDNA2015":87,"./URDNA2015Sync":88,"./URGNA2012":89,"./URGNA2012Sync":90,"rdf-canonize-native":3}],92:[function(P,ee,X){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var N=P("buffer"),l=N.Buffer;function E(e,r){for(var o in e)r[o]=e[o]}function u(e,r,o){return l(e,r,o)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?ee.exports=N:(E(N,X),X.Buffer=u),u.prototype=Object.create(l.prototype),E(l,u),u.from=function(e,r,o){if(typeof e=="number")throw new TypeError("Argument must not be a number");return l(e,r,o)},u.alloc=function(e,r,o){if(typeof e!="number")throw new TypeError("Argument must be a number");var s=l(e);return r!==void 0?typeof o=="string"?s.fill(r,o):s.fill(r):s.fill(0),s},u.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return l(e)},u.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return N.SlowBuffer(e)}},{buffer:8}],93:[function(P,ee,X){"use strict";var N=P("get-intrinsic"),l=P("define-data-property"),E=P("has-property-descriptors")(),u=P("gopd"),e=P("es-errors/type"),r=N("%Math.floor%");ee.exports=function(o,s){if(typeof o!="function")throw new e("`fn` is not a function");if(typeof s!="number"||s<0||s>4294967295||r(s)!==s)throw new e("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],v=!0,b=!0;if("length"in o&&u){var d=u(o,"length");d&&!d.configurable&&(v=!1),d&&!d.writable&&(b=!1)}return(v||b||!c)&&(E?l(o,"length",s,!0,!0):l(o,"length",s)),o}},{"define-data-property":13,"es-errors/type":20,"get-intrinsic":26,gopd:27,"has-property-descriptors":28}],94:[function(P,ee,X){(function(N,l){(function(){(function(E,u){"use strict";if(!E.setImmediate){var e,r,o,s,c,v=1,b={},d=!1,g=E.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(E);f=f&&f.setTimeout?f:E,{}.toString.call(E.process)==="[object process]"?e=function(j){N.nextTick(function(){I(j)})}:function(){if(E.postMessage&&!E.importScripts){var j=!0,D=E.onmessage;return E.onmessage=function(){j=!1},E.postMessage("","*"),E.onmessage=D,j}}()?(s="setImmediate$"+Math.random()+"$",c=function(j){j.source===E&&typeof j.data=="string"&&j.data.indexOf(s)===0&&I(+j.data.slice(s.length))},E.addEventListener?E.addEventListener("message",c,!1):E.attachEvent("onmessage",c),e=function(j){E.postMessage(s+j,"*")}):E.MessageChannel?((o=new MessageChannel).port1.onmessage=function(j){I(j.data)},e=function(j){o.port2.postMessage(j)}):g&&"onreadystatechange"in g.createElement("script")?(r=g.documentElement,e=function(j){var D=g.createElement("script");D.onreadystatechange=function(){I(j),D.onreadystatechange=null,r.removeChild(D),D=null},r.appendChild(D)}):e=function(j){setTimeout(I,0,j)},f.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var D=new Array(arguments.length-1),A=0;A<D.length;A++)D[A]=arguments[A+1];var C={callback:j,args:D};return b[v]=C,e(v),v++},f.clearImmediate=O}function O(j){delete b[j]}function I(j){if(d)setTimeout(I,0,j);else{var D=b[j];if(D){d=!0;try{(function(A){var C=A.callback,Q=A.args;switch(Q.length){case 0:C();break;case 1:C(Q[0]);break;case 2:C(Q[0],Q[1]);break;case 3:C(Q[0],Q[1],Q[2]);break;default:C.apply(u,Q)}})(D)}finally{O(j),d=!1}}}}})(typeof self>"u"?l===void 0?this:l:self)}).call(this)}).call(this,P("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:75}],95:[function(P,ee,X){"use strict";var N=P("get-intrinsic"),l=P("call-bind/callBound"),E=P("object-inspect"),u=P("es-errors/type"),e=N("%WeakMap%",!0),r=N("%Map%",!0),o=l("WeakMap.prototype.get",!0),s=l("WeakMap.prototype.set",!0),c=l("WeakMap.prototype.has",!0),v=l("Map.prototype.get",!0),b=l("Map.prototype.set",!0),d=l("Map.prototype.has",!0),g=function(f,O){for(var I,j=f;(I=j.next)!==null;j=I)if(I.key===O)return j.next=I.next,I.next=f.next,f.next=I,I};ee.exports=function(){var f,O,I,j={assert:function(D){if(!j.has(D))throw new u("Side channel does not contain "+E(D))},get:function(D){if(e&&D&&(typeof D=="object"||typeof D=="function")){if(f)return o(f,D)}else if(r){if(O)return v(O,D)}else if(I)return function(A,C){var Q=g(A,C);return Q&&Q.value}(I,D)},has:function(D){if(e&&D&&(typeof D=="object"||typeof D=="function")){if(f)return c(f,D)}else if(r){if(O)return d(O,D)}else if(I)return function(A,C){return!!g(A,C)}(I,D);return!1},set:function(D,A){e&&D&&(typeof D=="object"||typeof D=="function")?(f||(f=new e),s(f,D,A)):r?(O||(O=new r),b(O,D,A)):(I||(I={key:{},next:null}),function(C,Q,q){var H=g(C,Q);H?H.value=q:C.next={key:Q,next:C.next,value:q}}(I,D,A))}};return j}},{"call-bind/callBound":10,"es-errors/type":20,"get-intrinsic":26,"object-inspect":73}],96:[function(P,ee,X){ee.exports=l;var N=P("events").EventEmitter;function l(){N.call(this)}P("inherits")(l,N),l.Readable=P("readable-stream/lib/_stream_readable.js"),l.Writable=P("readable-stream/lib/_stream_writable.js"),l.Duplex=P("readable-stream/lib/_stream_duplex.js"),l.Transform=P("readable-stream/lib/_stream_transform.js"),l.PassThrough=P("readable-stream/lib/_stream_passthrough.js"),l.finished=P("readable-stream/lib/internal/streams/end-of-stream.js"),l.pipeline=P("readable-stream/lib/internal/streams/pipeline.js"),l.Stream=l,l.prototype.pipe=function(E,u){var e=this;function r(g){E.writable&&E.write(g)===!1&&e.pause&&e.pause()}function o(){e.readable&&e.resume&&e.resume()}e.on("data",r),E.on("drain",o),E._isStdio||u&&u.end===!1||(e.on("end",c),e.on("close",v));var s=!1;function c(){s||(s=!0,E.end())}function v(){s||(s=!0,typeof E.destroy=="function"&&E.destroy())}function b(g){if(d(),N.listenerCount(this,"error")===0)throw g}function d(){e.removeListener("data",r),E.removeListener("drain",o),e.removeListener("end",c),e.removeListener("close",v),e.removeListener("error",b),E.removeListener("error",b),e.removeListener("end",d),e.removeListener("close",d),E.removeListener("close",d)}return e.on("error",b),E.on("error",b),e.on("end",d),e.on("close",d),E.on("close",d),E.emit("pipe",e),E}},{events:22,inherits:36,"readable-stream/lib/_stream_duplex.js":98,"readable-stream/lib/_stream_passthrough.js":99,"readable-stream/lib/_stream_readable.js":100,"readable-stream/lib/_stream_transform.js":101,"readable-stream/lib/_stream_writable.js":102,"readable-stream/lib/internal/streams/end-of-stream.js":106,"readable-stream/lib/internal/streams/pipeline.js":108}],97:[function(P,ee,X){"use strict";var N={};function l(u,e,r){r||(r=Error);var o=function(s){var c,v;function b(d,g,f){return s.call(this,function(O,I,j){return typeof e=="string"?e:e(O,I,j)}(d,g,f))||this}return v=s,(c=b).prototype=Object.create(v.prototype),c.prototype.constructor=c,c.__proto__=v,b}(r);o.prototype.name=r.name,o.prototype.code=u,N[u]=o}function E(u,e){if(Array.isArray(u)){var r=u.length;return u=u.map(function(o){return String(o)}),r>2?"one of ".concat(e," ").concat(u.slice(0,r-1).join(", "),", or ")+u[r-1]:r===2?"one of ".concat(e," ").concat(u[0]," or ").concat(u[1]):"of ".concat(e," ").concat(u[0])}return"of ".concat(e," ").concat(String(u))}l("ERR_INVALID_OPT_VALUE",function(u,e){return'The value "'+e+'" is invalid for option "'+u+'"'},TypeError),l("ERR_INVALID_ARG_TYPE",function(u,e,r){var o,s,c,v;if(typeof e=="string"&&(s="not ",e.substr(!c||c<0?0:+c,s.length)===s)?(o="must not be",e=e.replace(/^not /,"")):o="must be",function(d,g,f){return(f===void 0||f>d.length)&&(f=d.length),d.substring(f-g.length,f)===g}(u," argument"))v="The ".concat(u," ").concat(o," ").concat(E(e,"type"));else{var b=function(d,g,f){return typeof f!="number"&&(f=0),!(f+g.length>d.length)&&d.indexOf(g,f)!==-1}(u,".")?"property":"argument";v='The "'.concat(u,'" ').concat(b," ").concat(o," ").concat(E(e,"type"))}return v+=". Received type ".concat(typeof r)},TypeError),l("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),l("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),l("ERR_STREAM_PREMATURE_CLOSE","Premature close"),l("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),l("ERR_STREAM_WRITE_AFTER_END","write after end"),l("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),l("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),l("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.codes=N},{}],98:[function(P,ee,X){(function(N){(function(){"use strict";var l=Object.keys||function(b){var d=[];for(var g in b)d.push(g);return d};ee.exports=s;var E=P("./_stream_readable"),u=P("./_stream_writable");P("inherits")(s,E);for(var e=l(u.prototype),r=0;r<e.length;r++){var o=e[r];s.prototype[o]||(s.prototype[o]=u.prototype[o])}function s(b){if(!(this instanceof s))return new s(b);E.call(this,b),u.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||N.nextTick(v,this)}function v(b){b.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}})}).call(this)}).call(this,P("_process"))},{"./_stream_readable":100,"./_stream_writable":102,_process:75,inherits:36}],99:[function(P,ee,X){"use strict";ee.exports=l;var N=P("./_stream_transform");function l(E){if(!(this instanceof l))return new l(E);N.call(this,E)}P("inherits")(l,N),l.prototype._transform=function(E,u,e){e(null,E)}},{"./_stream_transform":101,inherits:36}],100:[function(P,ee,X){(function(N,l){(function(){"use strict";var E;ee.exports=B,B.ReadableState=H,P("events").EventEmitter;var u=function($,w){return $.listeners(w).length},e=P("./internal/streams/stream"),r=P("buffer").Buffer,o=(l!==void 0?l:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,c=P("util");s=c&&c.debuglog?c.debuglog("stream"):function(){};var v,b,d,g=P("./internal/streams/buffer_list"),f=P("./internal/streams/destroy"),O=P("./internal/streams/state").getHighWaterMark,I=P("../errors").codes,j=I.ERR_INVALID_ARG_TYPE,D=I.ERR_STREAM_PUSH_AFTER_EOF,A=I.ERR_METHOD_NOT_IMPLEMENTED,C=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;P("inherits")(B,e);var Q=f.errorOrDestroy,q=["error","close","destroy","pause","resume"];function H($,w,L){E=E||P("./_stream_duplex"),$=$||{},typeof L!="boolean"&&(L=w instanceof E),this.objectMode=!!$.objectMode,L&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=O(this,$,"readableHighWaterMark",L),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(v||(v=P("string_decoder/").StringDecoder),this.decoder=new v($.encoding),this.encoding=$.encoding)}function B($){if(E=E||P("./_stream_duplex"),!(this instanceof B))return new B($);var w=this instanceof E;this._readableState=new H($,this,w),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),e.call(this)}function Z($,w,L,G,te){s("readableAddChunk",w);var ne,ie=$._readableState;if(w===null)ie.reading=!1,function(he,be){if(s("onEofChunk"),!be.ended){if(be.decoder){var _e=be.decoder.end();_e&&_e.length&&(be.buffer.push(_e),be.length+=be.objectMode?1:_e.length)}be.ended=!0,be.sync?fe(he):(be.needReadable=!1,be.emittedReadable||(be.emittedReadable=!0,z(he)))}}($,ie);else if(te||(ne=function(he,be){var _e;je=be,r.isBuffer(je)||je instanceof o||typeof be=="string"||be===void 0||he.objectMode||(_e=new j("chunk",["string","Buffer","Uint8Array"],be));var je;return _e}(ie,w)),ne)Q($,ne);else if(ie.objectMode||w&&w.length>0)if(typeof w=="string"||ie.objectMode||Object.getPrototypeOf(w)===r.prototype||(w=function(he){return r.from(he)}(w)),G)ie.endEmitted?Q($,new C):se($,ie,w,!0);else if(ie.ended)Q($,new D);else{if(ie.destroyed)return!1;ie.reading=!1,ie.decoder&&!L?(w=ie.decoder.write(w),ie.objectMode||w.length!==0?se($,ie,w,!1):U($,ie)):se($,ie,w,!1)}else G||(ie.reading=!1,U($,ie));return!ie.ended&&(ie.length<ie.highWaterMark||ie.length===0)}function se($,w,L,G){w.flowing&&w.length===0&&!w.sync?(w.awaitDrain=0,$.emit("data",L)):(w.length+=w.objectMode?1:L.length,G?w.buffer.unshift(L):w.buffer.push(L),w.needReadable&&fe($)),U($,w)}Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),B.prototype.destroy=f.destroy,B.prototype._undestroy=f.undestroy,B.prototype._destroy=function($,w){w($)},B.prototype.push=function($,w){var L,G=this._readableState;return G.objectMode?L=!0:typeof $=="string"&&((w=w||G.defaultEncoding)!==G.encoding&&($=r.from($,w),w=""),L=!0),Z(this,$,w,!1,L)},B.prototype.unshift=function($){return Z(this,$,null,!0,!1)},B.prototype.isPaused=function(){return this._readableState.flowing===!1},B.prototype.setEncoding=function($){v||(v=P("string_decoder/").StringDecoder);var w=new v($);this._readableState.decoder=w,this._readableState.encoding=this._readableState.decoder.encoding;for(var L=this._readableState.buffer.head,G="";L!==null;)G+=w.write(L.data),L=L.next;return this._readableState.buffer.clear(),G!==""&&this._readableState.buffer.push(G),this._readableState.length=G.length,this};var ae=1073741824;function ye($,w){return $<=0||w.length===0&&w.ended?0:w.objectMode?1:$!=$?w.flowing&&w.length?w.buffer.head.data.length:w.length:($>w.highWaterMark&&(w.highWaterMark=function(L){return L>=ae?L=ae:(L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++),L}($)),$<=w.length?$:w.ended?w.length:(w.needReadable=!0,0))}function fe($){var w=$._readableState;s("emitReadable",w.needReadable,w.emittedReadable),w.needReadable=!1,w.emittedReadable||(s("emitReadable",w.flowing),w.emittedReadable=!0,N.nextTick(z,$))}function z($){var w=$._readableState;s("emitReadable_",w.destroyed,w.length,w.ended),w.destroyed||!w.length&&!w.ended||($.emit("readable"),w.emittedReadable=!1),w.needReadable=!w.flowing&&!w.ended&&w.length<=w.highWaterMark,re($)}function U($,w){w.readingMore||(w.readingMore=!0,N.nextTick(W,$,w))}function W($,w){for(;!w.reading&&!w.ended&&(w.length<w.highWaterMark||w.flowing&&w.length===0);){var L=w.length;if(s("maybeReadMore read 0"),$.read(0),L===w.length)break}w.readingMore=!1}function K($){var w=$._readableState;w.readableListening=$.listenerCount("readable")>0,w.resumeScheduled&&!w.paused?w.flowing=!0:$.listenerCount("data")>0&&$.resume()}function Y($){s("readable nexttick read 0"),$.read(0)}function le($,w){s("resume",w.reading),w.reading||$.read(0),w.resumeScheduled=!1,$.emit("resume"),re($),w.flowing&&!w.reading&&$.read(0)}function re($){var w=$._readableState;for(s("flow",w.flowing);w.flowing&&$.read()!==null;);}function ue($,w){return w.length===0?null:(w.objectMode?L=w.buffer.shift():!$||$>=w.length?(L=w.decoder?w.buffer.join(""):w.buffer.length===1?w.buffer.first():w.buffer.concat(w.length),w.buffer.clear()):L=w.buffer.consume($,w.decoder),L);var L}function pe($){var w=$._readableState;s("endReadable",w.endEmitted),w.endEmitted||(w.ended=!0,N.nextTick(ge,w,$))}function ge($,w){if(s("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,w.readable=!1,w.emit("end"),$.autoDestroy)){var L=w._writableState;(!L||L.autoDestroy&&L.finished)&&w.destroy()}}function we($,w){for(var L=0,G=$.length;L<G;L++)if($[L]===w)return L;return-1}B.prototype.read=function($){s("read",$),$=parseInt($,10);var w=this._readableState,L=$;if($!==0&&(w.emittedReadable=!1),$===0&&w.needReadable&&((w.highWaterMark!==0?w.length>=w.highWaterMark:w.length>0)||w.ended))return s("read: emitReadable",w.length,w.ended),w.length===0&&w.ended?pe(this):fe(this),null;if(($=ye($,w))===0&&w.ended)return w.length===0&&pe(this),null;var G,te=w.needReadable;return s("need readable",te),(w.length===0||w.length-$<w.highWaterMark)&&s("length less than watermark",te=!0),w.ended||w.reading?s("reading or ended",te=!1):te&&(s("do read"),w.reading=!0,w.sync=!0,w.length===0&&(w.needReadable=!0),this._read(w.highWaterMark),w.sync=!1,w.reading||($=ye(L,w))),(G=$>0?ue($,w):null)===null?(w.needReadable=w.length<=w.highWaterMark,$=0):(w.length-=$,w.awaitDrain=0),w.length===0&&(w.ended||(w.needReadable=!0),L!==$&&w.ended&&pe(this)),G!==null&&this.emit("data",G),G},B.prototype._read=function($){Q(this,new A("_read()"))},B.prototype.pipe=function($,w){var L=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=$;break;case 1:G.pipes=[G.pipes,$];break;default:G.pipes.push($)}G.pipesCount+=1,s("pipe count=%d opts=%j",G.pipesCount,w);var te=(!w||w.end!==!1)&&$!==N.stdout&&$!==N.stderr?ie:xe;function ne(Ne,Oe){s("onunpipe"),Ne===L&&Oe&&Oe.hasUnpiped===!1&&(Oe.hasUnpiped=!0,s("cleanup"),$.removeListener("close",Re),$.removeListener("finish",Ae),$.removeListener("drain",he),$.removeListener("error",je),$.removeListener("unpipe",ne),L.removeListener("end",ie),L.removeListener("end",xe),L.removeListener("data",_e),be=!0,!G.awaitDrain||$._writableState&&!$._writableState.needDrain||he())}function ie(){s("onend"),$.end()}G.endEmitted?N.nextTick(te):L.once("end",te),$.on("unpipe",ne);var he=function(Ne){return function(){var Oe=Ne._readableState;s("pipeOnDrain",Oe.awaitDrain),Oe.awaitDrain&&Oe.awaitDrain--,Oe.awaitDrain===0&&u(Ne,"data")&&(Oe.flowing=!0,re(Ne))}}(L);$.on("drain",he);var be=!1;function _e(Ne){s("ondata");var Oe=$.write(Ne);s("dest.write",Oe),Oe===!1&&((G.pipesCount===1&&G.pipes===$||G.pipesCount>1&&we(G.pipes,$)!==-1)&&!be&&(s("false write response, pause",G.awaitDrain),G.awaitDrain++),L.pause())}function je(Ne){s("onerror",Ne),xe(),$.removeListener("error",je),u($,"error")===0&&Q($,Ne)}function Re(){$.removeListener("finish",Ae),xe()}function Ae(){s("onfinish"),$.removeListener("close",Re),xe()}function xe(){s("unpipe"),L.unpipe($)}return L.on("data",_e),function(Ne,Oe,Ge){if(typeof Ne.prependListener=="function")return Ne.prependListener(Oe,Ge);Ne._events&&Ne._events[Oe]?Array.isArray(Ne._events[Oe])?Ne._events[Oe].unshift(Ge):Ne._events[Oe]=[Ge,Ne._events[Oe]]:Ne.on(Oe,Ge)}($,"error",je),$.once("close",Re),$.once("finish",Ae),$.emit("pipe",L),G.flowing||(s("pipe resume"),L.resume()),$},B.prototype.unpipe=function($){var w=this._readableState,L={hasUnpiped:!1};if(w.pipesCount===0)return this;if(w.pipesCount===1)return $&&$!==w.pipes||($||($=w.pipes),w.pipes=null,w.pipesCount=0,w.flowing=!1,$&&$.emit("unpipe",this,L)),this;if(!$){var G=w.pipes,te=w.pipesCount;w.pipes=null,w.pipesCount=0,w.flowing=!1;for(var ne=0;ne<te;ne++)G[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var ie=we(w.pipes,$);return ie===-1||(w.pipes.splice(ie,1),w.pipesCount-=1,w.pipesCount===1&&(w.pipes=w.pipes[0]),$.emit("unpipe",this,L)),this},B.prototype.on=function($,w){var L=e.prototype.on.call(this,$,w),G=this._readableState;return $==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):$==="readable"&&(G.endEmitted||G.readableListening||(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,s("on readable",G.length,G.reading),G.length?fe(this):G.reading||N.nextTick(Y,this))),L},B.prototype.addListener=B.prototype.on,B.prototype.removeListener=function($,w){var L=e.prototype.removeListener.call(this,$,w);return $==="readable"&&N.nextTick(K,this),L},B.prototype.removeAllListeners=function($){var w=e.prototype.removeAllListeners.apply(this,arguments);return $!=="readable"&&$!==void 0||N.nextTick(K,this),w},B.prototype.resume=function(){var $=this._readableState;return $.flowing||(s("resume"),$.flowing=!$.readableListening,function(w,L){L.resumeScheduled||(L.resumeScheduled=!0,N.nextTick(le,w,L))}(this,$)),$.paused=!1,this},B.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},B.prototype.wrap=function($){var w=this,L=this._readableState,G=!1;for(var te in $.on("end",function(){if(s("wrapped end"),L.decoder&&!L.ended){var ie=L.decoder.end();ie&&ie.length&&w.push(ie)}w.push(null)}),$.on("data",function(ie){s("wrapped data"),L.decoder&&(ie=L.decoder.write(ie)),L.objectMode&&ie==null||(L.objectMode||ie&&ie.length)&&(w.push(ie)||(G=!0,$.pause()))}),$)this[te]===void 0&&typeof $[te]=="function"&&(this[te]=function(ie){return function(){return $[ie].apply($,arguments)}}(te));for(var ne=0;ne<q.length;ne++)$.on(q[ne],this.emit.bind(this,q[ne]));return this._read=function(ie){s("wrapped _read",ie),G&&(G=!1,$.resume())},this},typeof Symbol=="function"&&(B.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=P("./internal/streams/async_iterator")),b(this)}),Object.defineProperty(B.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(B.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(B.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),B._fromList=ue,Object.defineProperty(B.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(B.from=function($,w){return d===void 0&&(d=P("./internal/streams/from")),d(B,$,w)})}).call(this)}).call(this,P("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":97,"./_stream_duplex":98,"./internal/streams/async_iterator":103,"./internal/streams/buffer_list":104,"./internal/streams/destroy":105,"./internal/streams/from":107,"./internal/streams/state":109,"./internal/streams/stream":110,_process:75,buffer:8,events:22,inherits:36,"string_decoder/":130,util:3}],101:[function(P,ee,X){"use strict";ee.exports=s;var N=P("../errors").codes,l=N.ERR_METHOD_NOT_IMPLEMENTED,E=N.ERR_MULTIPLE_CALLBACK,u=N.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=N.ERR_TRANSFORM_WITH_LENGTH_0,r=P("./_stream_duplex");function o(b,d){var g=this._transformState;g.transforming=!1;var f=g.writecb;if(f===null)return this.emit("error",new E);g.writechunk=null,g.writecb=null,d!=null&&this.push(d),f(b);var O=this._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}function s(b){if(!(this instanceof s))return new s(b);r.call(this,b),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",c)}function c(){var b=this;typeof this._flush!="function"||this._readableState.destroyed?v(this,null,null):this._flush(function(d,g){v(b,d,g)})}function v(b,d,g){if(d)return b.emit("error",d);if(g!=null&&b.push(g),b._writableState.length)throw new e;if(b._transformState.transforming)throw new u;return b.push(null)}P("inherits")(s,r),s.prototype.push=function(b,d){return this._transformState.needTransform=!1,r.prototype.push.call(this,b,d)},s.prototype._transform=function(b,d,g){g(new l("_transform()"))},s.prototype._write=function(b,d,g){var f=this._transformState;if(f.writecb=g,f.writechunk=b,f.writeencoding=d,!f.transforming){var O=this._readableState;(f.needTransform||O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}},s.prototype._read=function(b){var d=this._transformState;d.writechunk===null||d.transforming?d.needTransform=!0:(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform))},s.prototype._destroy=function(b,d){r.prototype._destroy.call(this,b,function(g){d(g)})}},{"../errors":97,"./_stream_duplex":98,inherits:36}],102:[function(P,ee,X){(function(N,l){(function(){"use strict";function E(U){var W=this;this.next=null,this.entry=null,this.finish=function(){(function(K,Y,le){var re=K.entry;for(K.entry=null;re;){var ue=re.callback;Y.pendingcb--,ue(le),re=re.next}Y.corkedRequestsFree.next=K})(W,U)}}var u;ee.exports=B,B.WritableState=H;var e={deprecate:P("util-deprecate")},r=P("./internal/streams/stream"),o=P("buffer").Buffer,s=(l!==void 0?l:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},c,v=P("./internal/streams/destroy"),b=P("./internal/streams/state").getHighWaterMark,d=P("../errors").codes,g=d.ERR_INVALID_ARG_TYPE,f=d.ERR_METHOD_NOT_IMPLEMENTED,O=d.ERR_MULTIPLE_CALLBACK,I=d.ERR_STREAM_CANNOT_PIPE,j=d.ERR_STREAM_DESTROYED,D=d.ERR_STREAM_NULL_VALUES,A=d.ERR_STREAM_WRITE_AFTER_END,C=d.ERR_UNKNOWN_ENCODING,Q=v.errorOrDestroy;function q(){}function H(U,W,K){u=u||P("./_stream_duplex"),U=U||{},typeof K!="boolean"&&(K=W instanceof u),this.objectMode=!!U.objectMode,K&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=b(this,U,"writableHighWaterMark",K),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Y=U.decodeStrings===!1;this.decodeStrings=!Y,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){(function(re,ue){var pe=re._writableState,ge=pe.sync,we=pe.writecb;if(typeof we!="function")throw new O;if(function(w){w.writing=!1,w.writecb=null,w.length-=w.writelen,w.writelen=0}(pe),ue)(function(w,L,G,te,ne){--L.pendingcb,G?(N.nextTick(ne,te),N.nextTick(z,w,L),w._writableState.errorEmitted=!0,Q(w,te)):(ne(te),w._writableState.errorEmitted=!0,Q(w,te),z(w,L))})(re,pe,ge,ue,we);else{var $=ye(pe)||re.destroyed;$||pe.corked||pe.bufferProcessing||!pe.bufferedRequest||ae(re,pe),ge?N.nextTick(se,re,pe,$,we):se(re,pe,$,we)}})(W,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function B(U){var W=this instanceof(u=u||P("./_stream_duplex"));if(!W&&!c.call(B,this))return new B(U);this._writableState=new H(U,this,W),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),r.call(this)}function Z(U,W,K,Y,le,re,ue){W.writelen=Y,W.writecb=ue,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new j("write")):K?U._writev(le,W.onwrite):U._write(le,re,W.onwrite),W.sync=!1}function se(U,W,K,Y){K||function(le,re){re.length===0&&re.needDrain&&(re.needDrain=!1,le.emit("drain"))}(U,W),W.pendingcb--,Y(),z(U,W)}function ae(U,W){W.bufferProcessing=!0;var K=W.bufferedRequest;if(U._writev&&K&&K.next){var Y=W.bufferedRequestCount,le=new Array(Y),re=W.corkedRequestsFree;re.entry=K;for(var ue=0,pe=!0;K;)le[ue]=K,K.isBuf||(pe=!1),K=K.next,ue+=1;le.allBuffers=pe,Z(U,W,!0,W.length,le,"",re.finish),W.pendingcb++,W.lastBufferedRequest=null,re.next?(W.corkedRequestsFree=re.next,re.next=null):W.corkedRequestsFree=new E(W),W.bufferedRequestCount=0}else{for(;K;){var ge=K.chunk,we=K.encoding,$=K.callback;if(Z(U,W,!1,W.objectMode?1:ge.length,ge,we,$),K=K.next,W.bufferedRequestCount--,W.writing)break}K===null&&(W.lastBufferedRequest=null)}W.bufferedRequest=K,W.bufferProcessing=!1}function ye(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function fe(U,W){U._final(function(K){W.pendingcb--,K&&Q(U,K),W.prefinished=!0,U.emit("prefinish"),z(U,W)})}function z(U,W){var K=ye(W);if(K&&(function(le,re){re.prefinished||re.finalCalled||(typeof le._final!="function"||re.destroyed?(re.prefinished=!0,le.emit("prefinish")):(re.pendingcb++,re.finalCalled=!0,N.nextTick(fe,le,re)))}(U,W),W.pendingcb===0&&(W.finished=!0,U.emit("finish"),W.autoDestroy))){var Y=U._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&U.destroy()}return K}P("inherits")(B,r),H.prototype.getBuffer=function(){for(var U=this.bufferedRequest,W=[];U;)W.push(U),U=U.next;return W},function(){try{Object.defineProperty(H.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(B,Symbol.hasInstance,{value:function(U){return!!c.call(this,U)||this===B&&U&&U._writableState instanceof H}})):c=function(U){return U instanceof this},B.prototype.pipe=function(){Q(this,new I)},B.prototype.write=function(U,W,K){var Y,le=this._writableState,re=!1,ue=!le.objectMode&&(Y=U,o.isBuffer(Y)||Y instanceof s);return ue&&!o.isBuffer(U)&&(U=function(pe){return o.from(pe)}(U)),typeof W=="function"&&(K=W,W=null),ue?W="buffer":W||(W=le.defaultEncoding),typeof K!="function"&&(K=q),le.ending?function(pe,ge){var we=new A;Q(pe,we),N.nextTick(ge,we)}(this,K):(ue||function(pe,ge,we,$){var w;return we===null?w=new D:typeof we=="string"||ge.objectMode||(w=new g("chunk",["string","Buffer"],we)),!w||(Q(pe,w),N.nextTick($,w),!1)}(this,le,U,K))&&(le.pendingcb++,re=function(pe,ge,we,$,w,L){if(!we){var G=function(he,be,_e){return he.objectMode||he.decodeStrings===!1||typeof be!="string"||(be=o.from(be,_e)),be}(ge,$,w);$!==G&&(we=!0,w="buffer",$=G)}var te=ge.objectMode?1:$.length;ge.length+=te;var ne=ge.length<ge.highWaterMark;if(ne||(ge.needDrain=!0),ge.writing||ge.corked){var ie=ge.lastBufferedRequest;ge.lastBufferedRequest={chunk:$,encoding:w,isBuf:we,callback:L,next:null},ie?ie.next=ge.lastBufferedRequest:ge.bufferedRequest=ge.lastBufferedRequest,ge.bufferedRequestCount+=1}else Z(pe,ge,!1,te,$,w,L);return ne}(this,le,ue,U,W,K)),re},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,U.writing||U.corked||U.bufferProcessing||!U.bufferedRequest||ae(this,U))},B.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new C(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(B.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(B.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),B.prototype._write=function(U,W,K){K(new f("_write()"))},B.prototype._writev=null,B.prototype.end=function(U,W,K){var Y=this._writableState;return typeof U=="function"?(K=U,U=null,W=null):typeof W=="function"&&(K=W,W=null),U!=null&&this.write(U,W),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||function(le,re,ue){re.ending=!0,z(le,re),ue&&(re.finished?N.nextTick(ue):le.once("finish",ue)),re.ended=!0,le.writable=!1}(this,Y,K),this},Object.defineProperty(B.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),B.prototype.destroy=v.destroy,B.prototype._undestroy=v.undestroy,B.prototype._destroy=function(U,W){W(U)}}).call(this)}).call(this,P("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":97,"./_stream_duplex":98,"./internal/streams/destroy":105,"./internal/streams/state":109,"./internal/streams/stream":110,_process:75,buffer:8,inherits:36,"util-deprecate":133}],103:[function(P,ee,X){(function(N){(function(){"use strict";var l;function E(j,D,A){return(D=function(C){var Q=function(q,H){if(typeof q!="object"||q===null)return q;var B=q[Symbol.toPrimitive];if(B!==void 0){var Z=B.call(q,H||"default");if(typeof Z!="object")return Z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(q)}(C,"string");return typeof Q=="symbol"?Q:String(Q)}(D))in j?Object.defineProperty(j,D,{value:A,enumerable:!0,configurable:!0,writable:!0}):j[D]=A,j}var u=P("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),c=Symbol("lastPromise"),v=Symbol("handlePromise"),b=Symbol("stream");function d(j,D){return{value:j,done:D}}function g(j){var D=j[e];if(D!==null){var A=j[b].read();A!==null&&(j[c]=null,j[e]=null,j[r]=null,D(d(A,!1)))}}function f(j){N.nextTick(g,j)}var O=Object.getPrototypeOf(function(){}),I=Object.setPrototypeOf((E(l={get stream(){return this[b]},next:function(){var j=this,D=this[o];if(D!==null)return Promise.reject(D);if(this[s])return Promise.resolve(d(void 0,!0));if(this[b].destroyed)return new Promise(function(q,H){N.nextTick(function(){j[o]?H(j[o]):q(d(void 0,!0))})});var A,C=this[c];if(C)A=new Promise(function(q,H){return function(B,Z){q.then(function(){H[s]?B(d(void 0,!0)):H[v](B,Z)},Z)}}(C,this));else{var Q=this[b].read();if(Q!==null)return Promise.resolve(d(Q,!1));A=new Promise(this[v])}return this[c]=A,A}},Symbol.asyncIterator,function(){return this}),E(l,"return",function(){var j=this;return new Promise(function(D,A){j[b].destroy(null,function(C){C?A(C):D(d(void 0,!0))})})}),l),O);ee.exports=function(j){var D,A=Object.create(I,(E(D={},b,{value:j,writable:!0}),E(D,e,{value:null,writable:!0}),E(D,r,{value:null,writable:!0}),E(D,o,{value:null,writable:!0}),E(D,s,{value:j._readableState.endEmitted,writable:!0}),E(D,v,{value:function(C,Q){var q=A[b].read();q?(A[c]=null,A[e]=null,A[r]=null,C(d(q,!1))):(A[e]=C,A[r]=Q)},writable:!0}),D));return A[c]=null,u(j,function(C){if(C&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Q=A[r];return Q!==null&&(A[c]=null,A[e]=null,A[r]=null,Q(C)),void(A[o]=C)}var q=A[e];q!==null&&(A[c]=null,A[e]=null,A[r]=null,q(d(void 0,!0))),A[s]=!0}),j.on("readable",f.bind(null,A)),A}}).call(this)}).call(this,P("_process"))},{"./end-of-stream":106,_process:75}],104:[function(P,ee,X){"use strict";function N(c,v){var b=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);v&&(d=d.filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable})),b.push.apply(b,d)}return b}function l(c){for(var v=1;v<arguments.length;v++){var b=arguments[v]!=null?arguments[v]:{};v%2?N(Object(b),!0).forEach(function(d){E(c,d,b[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):N(Object(b)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(b,d))})}return c}function E(c,v,b){return(v=e(v))in c?Object.defineProperty(c,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):c[v]=b,c}function u(c,v){for(var b=0;b<v.length;b++){var d=v[b];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,e(d.key),d)}}function e(c){var v=function(b,d){if(typeof b!="object"||b===null)return b;var g=b[Symbol.toPrimitive];if(g!==void 0){var f=g.call(b,d||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(b)}(c,"string");return typeof v=="symbol"?v:String(v)}var r=P("buffer").Buffer,o=P("util").inspect,s=o&&o.custom||"inspect";ee.exports=function(){function c(){(function(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}var v,b,d;return v=c,(b=[{key:"push",value:function(g){var f={data:g,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length}},{key:"unshift",value:function(g){var f={data:g,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var f=this.head,O=""+f.data;f=f.next;)O+=g+f.data;return O}},{key:"concat",value:function(g){if(this.length===0)return r.alloc(0);for(var f,O,I,j=r.allocUnsafe(g>>>0),D=this.head,A=0;D;)f=D.data,O=j,I=A,r.prototype.copy.call(f,O,I),A+=D.data.length,D=D.next;return j}},{key:"consume",value:function(g,f){var O;return g<this.head.data.length?(O=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):O=g===this.head.data.length?this.shift():f?this._getString(g):this._getBuffer(g),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var f=this.head,O=1,I=f.data;for(g-=I.length;f=f.next;){var j=f.data,D=g>j.length?j.length:g;if(D===j.length?I+=j:I+=j.slice(0,g),(g-=D)==0){D===j.length?(++O,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=j.slice(D));break}++O}return this.length-=O,I}},{key:"_getBuffer",value:function(g){var f=r.allocUnsafe(g),O=this.head,I=1;for(O.data.copy(f),g-=O.data.length;O=O.next;){var j=O.data,D=g>j.length?j.length:g;if(j.copy(f,f.length-g,0,D),(g-=D)==0){D===j.length?(++I,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=j.slice(D));break}++I}return this.length-=I,f}},{key:s,value:function(g,f){return o(this,l(l({},f),{},{depth:0,customInspect:!1}))}}])&&u(v.prototype,b),d&&u(v,d),Object.defineProperty(v,"prototype",{writable:!1}),c}()},{buffer:8,util:3}],105:[function(P,ee,X){(function(N){(function(){"use strict";function l(e,r){u(e,r),E(e)}function E(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function u(e,r){e.emit("error",r)}ee.exports={destroy:function(e,r){var o=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,N.nextTick(u,this,e)):N.nextTick(u,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(v){!r&&v?o._writableState?o._writableState.errorEmitted?N.nextTick(E,o):(o._writableState.errorEmitted=!0,N.nextTick(l,o,v)):N.nextTick(l,o,v):r?(N.nextTick(E,o),r(v)):N.nextTick(E,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var o=e._readableState,s=e._writableState;o&&o.autoDestroy||s&&s.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,P("_process"))},{_process:75}],106:[function(P,ee,X){"use strict";var N=P("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function l(){}ee.exports=function E(u,e,r){if(typeof e=="function")return E(u,null,e);e||(e={}),r=function(j){var D=!1;return function(){if(!D){D=!0;for(var A=arguments.length,C=new Array(A),Q=0;Q<A;Q++)C[Q]=arguments[Q];j.apply(this,C)}}}(r||l);var o=e.readable||e.readable!==!1&&u.readable,s=e.writable||e.writable!==!1&&u.writable,c=function(){u.writable||b()},v=u._writableState&&u._writableState.finished,b=function(){s=!1,v=!0,o||r.call(u)},d=u._readableState&&u._readableState.endEmitted,g=function(){o=!1,d=!0,s||r.call(u)},f=function(j){r.call(u,j)},O=function(){var j;return o&&!d?(u._readableState&&u._readableState.ended||(j=new N),r.call(u,j)):s&&!v?(u._writableState&&u._writableState.ended||(j=new N),r.call(u,j)):void 0},I=function(){u.req.on("finish",b)};return function(j){return j.setHeader&&typeof j.abort=="function"}(u)?(u.on("complete",b),u.on("abort",O),u.req?I():u.on("request",I)):s&&!u._writableState&&(u.on("end",c),u.on("close",c)),u.on("end",g),u.on("finish",b),e.error!==!1&&u.on("error",f),u.on("close",O),function(){u.removeListener("complete",b),u.removeListener("abort",O),u.removeListener("request",I),u.req&&u.req.removeListener("finish",b),u.removeListener("end",c),u.removeListener("close",c),u.removeListener("finish",b),u.removeListener("end",g),u.removeListener("error",f),u.removeListener("close",O)}}},{"../../../errors":97}],107:[function(P,ee,X){ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],108:[function(P,ee,X){"use strict";var N,l=P("../../../errors").codes,E=l.ERR_MISSING_ARGS,u=l.ERR_STREAM_DESTROYED;function e(s){if(s)throw s}function r(s){s()}function o(s,c){return s.pipe(c)}ee.exports=function(){for(var s=arguments.length,c=new Array(s),v=0;v<s;v++)c[v]=arguments[v];var b,d=function(f){return f.length?typeof f[f.length-1]!="function"?e:f.pop():e}(c);if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new E("streams");var g=c.map(function(f,O){var I=O<c.length-1;return function(j,D,A,C){C=function(H){var B=!1;return function(){B||(B=!0,H.apply(void 0,arguments))}}(C);var Q=!1;j.on("close",function(){Q=!0}),N===void 0&&(N=P("./end-of-stream")),N(j,{readable:D,writable:A},function(H){if(H)return C(H);Q=!0,C()});var q=!1;return function(H){if(!Q&&!q)return q=!0,function(B){return B.setHeader&&typeof B.abort=="function"}(j)?j.abort():typeof j.destroy=="function"?j.destroy():void C(H||new u("pipe"))}}(f,I,O>0,function(j){b||(b=j),j&&g.forEach(r),I||(g.forEach(r),d(b))})});return c.reduce(o)}},{"../../../errors":97,"./end-of-stream":106}],109:[function(P,ee,X){"use strict";var N=P("../../../errors").codes.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function(l,E,u,e){var r=function(o,s,c){return o.highWaterMark!=null?o.highWaterMark:s?o[c]:null}(E,e,u);if(r!=null){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new N(e?u:"highWaterMark",r);return Math.floor(r)}return l.objectMode?16:16384}}},{"../../../errors":97}],110:[function(P,ee,X){ee.exports=P("events").EventEmitter},{events:22}],111:[function(P,ee,X){(function(N){(function(){var l=P("./lib/request"),E=P("./lib/response"),u=P("xtend"),e=P("builtin-status-codes"),r=P("url"),o=X;o.request=function(s,c){s=typeof s=="string"?r.parse(s):u(s);var v=N.location.protocol.search(/^https?:$/)===-1?"http:":"",b=s.protocol||v,d=s.hostname||s.host,g=s.port,f=s.path||"/";d&&d.indexOf(":")!==-1&&(d="["+d+"]"),s.url=(d?b+"//"+d:"")+(g?":"+g:"")+f,s.method=(s.method||"GET").toUpperCase(),s.headers=s.headers||{};var O=new l(s);return c&&O.on("response",c),O},o.get=function(s,c){var v=o.request(s,c);return v.end(),v},o.ClientRequest=l,o.IncomingMessage=E.IncomingMessage,o.Agent=function(){},o.Agent.defaultMaxSockets=4,o.globalAgent=new o.Agent,o.STATUS_CODES=e,o.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/request":113,"./lib/response":114,"builtin-status-codes":9,url:132,xtend:135}],112:[function(P,ee,X){(function(N){(function(){var l;function E(){if(l!==void 0)return l;if(N.XMLHttpRequest){l=new N.XMLHttpRequest;try{l.open("GET",N.XDomainRequest?"/":"https://example.com")}catch{l=null}}else l=null;return l}function u(r){var o=E();if(!o)return!1;try{return o.responseType=r,o.responseType===r}catch{}return!1}function e(r){return typeof r=="function"}X.fetch=e(N.fetch)&&e(N.ReadableStream),X.writableStream=e(N.WritableStream),X.abortController=e(N.AbortController),X.arraybuffer=X.fetch||u("arraybuffer"),X.msstream=!X.fetch&&u("ms-stream"),X.mozchunkedarraybuffer=!X.fetch&&u("moz-chunked-arraybuffer"),X.overrideMimeType=X.fetch||!!E()&&e(E().overrideMimeType),l=null}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],113:[function(P,ee,X){(function(N,l,E){(function(){var u=P("./capability"),e=P("inherits"),r=P("./response"),o=P("readable-stream"),s=r.IncomingMessage,c=r.readyStates,v=ee.exports=function(d){var g,f=this;o.Writable.call(f),f._opts=d,f._body=[],f._headers={},d.auth&&f.setHeader("Authorization","Basic "+E.from(d.auth).toString("base64")),Object.keys(d.headers).forEach(function(I){f.setHeader(I,d.headers[I])});var O=!0;if(d.mode==="disable-fetch"||"requestTimeout"in d&&!u.abortController)O=!1,g=!0;else if(d.mode==="prefer-streaming")g=!1;else if(d.mode==="allow-wrong-content-type")g=!u.overrideMimeType;else{if(d.mode&&d.mode!=="default"&&d.mode!=="prefer-fast")throw new Error("Invalid value for opts.mode");g=!0}f._mode=function(I,j){return u.fetch&&j?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&I?"arraybuffer":"text"}(g,O),f._fetchTimer=null,f._socketTimeout=null,f._socketTimer=null,f.on("finish",function(){f._onFinish()})};e(v,o.Writable),v.prototype.setHeader=function(d,g){var f=d.toLowerCase();b.indexOf(f)===-1&&(this._headers[f]={name:d,value:g})},v.prototype.getHeader=function(d){var g=this._headers[d.toLowerCase()];return g?g.value:null},v.prototype.removeHeader=function(d){delete this._headers[d.toLowerCase()]},v.prototype._onFinish=function(){var d=this;if(!d._destroyed){var g=d._opts;"timeout"in g&&g.timeout!==0&&d.setTimeout(g.timeout);var f=d._headers,O=null;g.method!=="GET"&&g.method!=="HEAD"&&(O=new Blob(d._body,{type:(f["content-type"]||{}).value||""}));var I=[];if(Object.keys(f).forEach(function(C){var Q=f[C].name,q=f[C].value;Array.isArray(q)?q.forEach(function(H){I.push([Q,H])}):I.push([Q,q])}),d._mode==="fetch"){var j=null;if(u.abortController){var D=new AbortController;j=D.signal,d._fetchAbortController=D,"requestTimeout"in g&&g.requestTimeout!==0&&(d._fetchTimer=l.setTimeout(function(){d.emit("requestTimeout"),d._fetchAbortController&&d._fetchAbortController.abort()},g.requestTimeout))}l.fetch(d._opts.url,{method:d._opts.method,headers:I,body:O||void 0,mode:"cors",credentials:g.withCredentials?"include":"same-origin",signal:j}).then(function(C){d._fetchResponse=C,d._resetTimers(!1),d._connect()},function(C){d._resetTimers(!0),d._destroyed||d.emit("error",C)})}else{var A=d._xhr=new l.XMLHttpRequest;try{A.open(d._opts.method,d._opts.url,!0)}catch(C){return void N.nextTick(function(){d.emit("error",C)})}"responseType"in A&&(A.responseType=d._mode),"withCredentials"in A&&(A.withCredentials=!!g.withCredentials),d._mode==="text"&&"overrideMimeType"in A&&A.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in g&&(A.timeout=g.requestTimeout,A.ontimeout=function(){d.emit("requestTimeout")}),I.forEach(function(C){A.setRequestHeader(C[0],C[1])}),d._response=null,A.onreadystatechange=function(){switch(A.readyState){case c.LOADING:case c.DONE:d._onXHRProgress()}},d._mode==="moz-chunked-arraybuffer"&&(A.onprogress=function(){d._onXHRProgress()}),A.onerror=function(){d._destroyed||(d._resetTimers(!0),d.emit("error",new Error("XHR error")))};try{A.send(O)}catch(C){return void N.nextTick(function(){d.emit("error",C)})}}}},v.prototype._onXHRProgress=function(){var d=this;d._resetTimers(!1),function(g){try{var f=g.status;return f!==null&&f!==0}catch{return!1}}(d._xhr)&&!d._destroyed&&(d._response||d._connect(),d._response._onXHRProgress(d._resetTimers.bind(d)))},v.prototype._connect=function(){var d=this;d._destroyed||(d._response=new s(d._xhr,d._fetchResponse,d._mode,d._resetTimers.bind(d)),d._response.on("error",function(g){d.emit("error",g)}),d.emit("response",d._response))},v.prototype._write=function(d,g,f){this._body.push(d),f()},v.prototype._resetTimers=function(d){var g=this;l.clearTimeout(g._socketTimer),g._socketTimer=null,d?(l.clearTimeout(g._fetchTimer),g._fetchTimer=null):g._socketTimeout&&(g._socketTimer=l.setTimeout(function(){g.emit("timeout")},g._socketTimeout))},v.prototype.abort=v.prototype.destroy=function(d){var g=this;g._destroyed=!0,g._resetTimers(!0),g._response&&(g._response._destroyed=!0),g._xhr?g._xhr.abort():g._fetchAbortController&&g._fetchAbortController.abort(),d&&g.emit("error",d)},v.prototype.end=function(d,g,f){typeof d=="function"&&(f=d,d=void 0),o.Writable.prototype.end.call(this,d,g,f)},v.prototype.setTimeout=function(d,g){var f=this;g&&f.once("timeout",g),f._socketTimeout=d,f._resetTimers(!1)},v.prototype.flushHeaders=function(){},v.prototype.setNoDelay=function(){},v.prototype.setSocketKeepAlive=function(){};var b=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,P("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},P("buffer").Buffer)},{"./capability":112,"./response":114,_process:75,buffer:8,inherits:36,"readable-stream":129}],114:[function(P,ee,X){(function(N,l,E){(function(){var u=P("./capability"),e=P("inherits"),r=P("readable-stream"),o=X.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},s=X.IncomingMessage=function(c,v,b,d){var g=this;if(r.Readable.call(g),g._mode=b,g.headers={},g.rawHeaders=[],g.trailers={},g.rawTrailers=[],g.on("end",function(){N.nextTick(function(){g.emit("close")})}),b==="fetch"){if(g._fetchResponse=v,g.url=v.url,g.statusCode=v.status,g.statusMessage=v.statusText,v.headers.forEach(function(D,A){g.headers[A.toLowerCase()]=D,g.rawHeaders.push(A,D)}),u.writableStream){var f=new WritableStream({write:function(D){return d(!1),new Promise(function(A,C){g._destroyed?C():g.push(E.from(D))?A():g._resumeFetch=A})},close:function(){d(!0),g._destroyed||g.push(null)},abort:function(D){d(!0),g._destroyed||g.emit("error",D)}});try{return void v.body.pipeTo(f).catch(function(D){d(!0),g._destroyed||g.emit("error",D)})}catch{}}var O=v.body.getReader();(function D(){O.read().then(function(A){g._destroyed||(d(A.done),A.done?g.push(null):(g.push(E.from(A.value)),D()))}).catch(function(A){d(!0),g._destroyed||g.emit("error",A)})})()}else if(g._xhr=c,g._pos=0,g.url=c.responseURL,g.statusCode=c.status,g.statusMessage=c.statusText,c.getAllResponseHeaders().split(/\r?\n/).forEach(function(D){var A=D.match(/^([^:]+):\s*(.*)/);if(A){var C=A[1].toLowerCase();C==="set-cookie"?(g.headers[C]===void 0&&(g.headers[C]=[]),g.headers[C].push(A[2])):g.headers[C]!==void 0?g.headers[C]+=", "+A[2]:g.headers[C]=A[2],g.rawHeaders.push(A[1],A[2])}}),g._charset="x-user-defined",!u.overrideMimeType){var I=g.rawHeaders["mime-type"];if(I){var j=I.match(/;\s*charset=([^;])(;|$)/);j&&(g._charset=j[1].toLowerCase())}g._charset||(g._charset="utf-8")}};e(s,r.Readable),s.prototype._read=function(){var c=this._resumeFetch;c&&(this._resumeFetch=null,c())},s.prototype._onXHRProgress=function(c){var v=this,b=v._xhr,d=null;switch(v._mode){case"text":if((d=b.responseText).length>v._pos){var g=d.substr(v._pos);if(v._charset==="x-user-defined"){for(var f=E.alloc(g.length),O=0;O<g.length;O++)f[O]=255&g.charCodeAt(O);v.push(f)}else v.push(g,v._charset);v._pos=d.length}break;case"arraybuffer":if(b.readyState!==o.DONE||!b.response)break;d=b.response,v.push(E.from(new Uint8Array(d)));break;case"moz-chunked-arraybuffer":if(d=b.response,b.readyState!==o.LOADING||!d)break;v.push(E.from(new Uint8Array(d)));break;case"ms-stream":if(d=b.response,b.readyState!==o.LOADING)break;var I=new l.MSStreamReader;I.onprogress=function(){I.result.byteLength>v._pos&&(v.push(E.from(new Uint8Array(I.result.slice(v._pos)))),v._pos=I.result.byteLength)},I.onload=function(){c(!0),v.push(null)},I.readAsArrayBuffer(d)}v._xhr.readyState===o.DONE&&v._mode!=="ms-stream"&&(c(!0),v.push(null))}}).call(this)}).call(this,P("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},P("buffer").Buffer)},{"./capability":112,_process:75,buffer:8,inherits:36,"readable-stream":129}],115:[function(P,ee,X){arguments[4][97][0].apply(X,arguments)},{dup:97}],116:[function(P,ee,X){arguments[4][98][0].apply(X,arguments)},{"./_stream_readable":118,"./_stream_writable":120,_process:75,dup:98,inherits:36}],117:[function(P,ee,X){arguments[4][99][0].apply(X,arguments)},{"./_stream_transform":119,dup:99,inherits:36}],118:[function(P,ee,X){arguments[4][100][0].apply(X,arguments)},{"../errors":115,"./_stream_duplex":116,"./internal/streams/async_iterator":121,"./internal/streams/buffer_list":122,"./internal/streams/destroy":123,"./internal/streams/from":125,"./internal/streams/state":127,"./internal/streams/stream":128,_process:75,buffer:8,dup:100,events:22,inherits:36,"string_decoder/":130,util:3}],119:[function(P,ee,X){arguments[4][101][0].apply(X,arguments)},{"../errors":115,"./_stream_duplex":116,dup:101,inherits:36}],120:[function(P,ee,X){arguments[4][102][0].apply(X,arguments)},{"../errors":115,"./_stream_duplex":116,"./internal/streams/destroy":123,"./internal/streams/state":127,"./internal/streams/stream":128,_process:75,buffer:8,dup:102,inherits:36,"util-deprecate":133}],121:[function(P,ee,X){arguments[4][103][0].apply(X,arguments)},{"./end-of-stream":124,_process:75,dup:103}],122:[function(P,ee,X){arguments[4][104][0].apply(X,arguments)},{buffer:8,dup:104,util:3}],123:[function(P,ee,X){arguments[4][105][0].apply(X,arguments)},{_process:75,dup:105}],124:[function(P,ee,X){arguments[4][106][0].apply(X,arguments)},{"../../../errors":115,dup:106}],125:[function(P,ee,X){arguments[4][107][0].apply(X,arguments)},{dup:107}],126:[function(P,ee,X){arguments[4][108][0].apply(X,arguments)},{"../../../errors":115,"./end-of-stream":124,dup:108}],127:[function(P,ee,X){arguments[4][109][0].apply(X,arguments)},{"../../../errors":115,dup:109}],128:[function(P,ee,X){arguments[4][110][0].apply(X,arguments)},{dup:110,events:22}],129:[function(P,ee,X){(X=ee.exports=P("./lib/_stream_readable.js")).Stream=X,X.Readable=X,X.Writable=P("./lib/_stream_writable.js"),X.Duplex=P("./lib/_stream_duplex.js"),X.Transform=P("./lib/_stream_transform.js"),X.PassThrough=P("./lib/_stream_passthrough.js"),X.finished=P("./lib/internal/streams/end-of-stream.js"),X.pipeline=P("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":116,"./lib/_stream_passthrough.js":117,"./lib/_stream_readable.js":118,"./lib/_stream_transform.js":119,"./lib/_stream_writable.js":120,"./lib/internal/streams/end-of-stream.js":124,"./lib/internal/streams/pipeline.js":126}],130:[function(P,ee,X){"use strict";var N=P("safe-buffer").Buffer,l=N.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(d){var g;switch(this.encoding=function(f){var O=function(I){if(!I)return"utf8";for(var j;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(j)return;I=(""+I).toLowerCase(),j=!0}}(f);if(typeof O!="string"&&(N.isEncoding===l||!l(f)))throw new Error("Unknown encoding: "+f);return O||f}(d),this.encoding){case"utf16le":this.text=r,this.end=o,g=4;break;case"utf8":this.fillLast=e,g=4;break;case"base64":this.text=s,this.end=c,g=3;break;default:return this.write=v,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=N.allocUnsafe(g)}function u(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function e(d){var g=this.lastTotal-this.lastNeed,f=function(O,I,j){if((192&I[0])!=128)return O.lastNeed=0,"\uFFFD";if(O.lastNeed>1&&I.length>1){if((192&I[1])!=128)return O.lastNeed=1,"\uFFFD";if(O.lastNeed>2&&I.length>2&&(192&I[2])!=128)return O.lastNeed=2,"\uFFFD"}}(this,d);return f!==void 0?f:this.lastNeed<=d.length?(d.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,g,0,d.length),void(this.lastNeed-=d.length))}function r(d,g){if((d.length-g)%2==0){var f=d.toString("utf16le",g);if(f){var O=f.charCodeAt(f.length-1);if(O>=55296&&O<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",g,d.length-1)}function o(d){var g=d&&d.length?this.write(d):"";if(this.lastNeed){var f=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,f)}return g}function s(d,g){var f=(d.length-g)%3;return f===0?d.toString("base64",g):(this.lastNeed=3-f,this.lastTotal=3,f===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",g,d.length-f))}function c(d){var g=d&&d.length?this.write(d):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function v(d){return d.toString(this.encoding)}function b(d){return d&&d.length?this.write(d):""}X.StringDecoder=E,E.prototype.write=function(d){if(d.length===0)return"";var g,f;if(this.lastNeed){if((g=this.fillLast(d))===void 0)return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<d.length?g?g+this.text(d,f):this.text(d,f):g||""},E.prototype.end=function(d){var g=d&&d.length?this.write(d):"";return this.lastNeed?g+"\uFFFD":g},E.prototype.text=function(d,g){var f=function(I,j,D){var A=j.length-1;if(A<D)return 0;var C=u(j[A]);return C>=0?(C>0&&(I.lastNeed=C-1),C):--A<D||C===-2?0:(C=u(j[A]),C>=0?(C>0&&(I.lastNeed=C-2),C):--A<D||C===-2?0:(C=u(j[A]),C>=0?(C>0&&(C===2?C=0:I.lastNeed=C-3),C):0))}(this,d,g);if(!this.lastNeed)return d.toString("utf8",g);this.lastTotal=f;var O=d.length-(f-this.lastNeed);return d.copy(this.lastChar,0,O),d.toString("utf8",g,O)},E.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},{"safe-buffer":92}],131:[function(P,ee,X){(function(N,l){(function(){var E=P("process/browser.js").nextTick,u=Function.prototype.apply,e=Array.prototype.slice,r={},o=0;function s(c,v){this._id=c,this._clearFn=v}X.setTimeout=function(){return new s(u.call(setTimeout,window,arguments),clearTimeout)},X.setInterval=function(){return new s(u.call(setInterval,window,arguments),clearInterval)},X.clearTimeout=X.clearInterval=function(c){c.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},X.enroll=function(c,v){clearTimeout(c._idleTimeoutId),c._idleTimeout=v},X.unenroll=function(c){clearTimeout(c._idleTimeoutId),c._idleTimeout=-1},X._unrefActive=X.active=function(c){clearTimeout(c._idleTimeoutId);var v=c._idleTimeout;v>=0&&(c._idleTimeoutId=setTimeout(function(){c._onTimeout&&c._onTimeout()},v))},X.setImmediate=typeof N=="function"?N:function(c){var v=o++,b=!(arguments.length<2)&&e.call(arguments,1);return r[v]=!0,E(function(){r[v]&&(b?c.apply(null,b):c.call(null),X.clearImmediate(v))}),v},X.clearImmediate=typeof l=="function"?l:function(c){delete r[c]}}).call(this)}).call(this,P("timers").setImmediate,P("timers").clearImmediate)},{"process/browser.js":75,timers:131}],132:[function(P,ee,X){"use strict";var N=P("punycode");function l(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var E=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,e=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),o=["'"].concat(r),s=["%","/","?",";","#"].concat(o),c=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=P("qs");function I(j,D,A){if(j&&typeof j=="object"&&j instanceof l)return j;var C=new l;return C.parse(j,D,A),C}l.prototype.parse=function(j,D,A){if(typeof j!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof j);var C=j.indexOf("?"),Q=C!==-1&&C<j.indexOf("#")?"?":"#",q=j.split(Q);q[0]=q[0].replace(/\\/g,"/");var H=j=q.join(Q);if(H=H.trim(),!A&&j.split("#").length===1){var B=e.exec(H);if(B)return this.path=H,this.href=H,this.pathname=B[1],B[2]?(this.search=B[2],this.query=D?O.parse(this.search.substr(1)):this.search.substr(1)):D&&(this.search="",this.query={}),this}var Z=E.exec(H);if(Z){var se=(Z=Z[0]).toLowerCase();this.protocol=se,H=H.substr(Z.length)}if(A||Z||H.match(/^\/\/[^@/]+@[^@/]+/)){var ae=H.substr(0,2)==="//";!ae||Z&&g[Z]||(H=H.substr(2),this.slashes=!0)}if(!g[Z]&&(ae||Z&&!f[Z])){for(var ye,fe,z=-1,U=0;U<c.length;U++)(W=H.indexOf(c[U]))!==-1&&(z===-1||W<z)&&(z=W);for((fe=z===-1?H.lastIndexOf("@"):H.lastIndexOf("@",z))!==-1&&(ye=H.slice(0,fe),H=H.slice(fe+1),this.auth=decodeURIComponent(ye)),z=-1,U=0;U<s.length;U++){var W;(W=H.indexOf(s[U]))!==-1&&(z===-1||W<z)&&(z=W)}z===-1&&(z=H.length),this.host=H.slice(0,z),H=H.slice(z),this.parseHost(),this.hostname=this.hostname||"";var K=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!K)for(var Y=this.hostname.split(/\./),le=(U=0,Y.length);U<le;U++){var re=Y[U];if(re&&!re.match(v)){for(var ue="",pe=0,ge=re.length;pe<ge;pe++)re.charCodeAt(pe)>127?ue+="x":ue+=re[pe];if(!ue.match(v)){var we=Y.slice(0,U),$=Y.slice(U+1),w=re.match(b);w&&(we.push(w[1]),$.unshift(w[2])),$.length&&(H="/"+$.join(".")+H),this.hostname=we.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),K||(this.hostname=N.toASCII(this.hostname));var L=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+L,this.href+=this.host,K&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),H[0]!=="/"&&(H="/"+H))}if(!d[se])for(U=0,le=o.length;U<le;U++){var te=o[U];if(H.indexOf(te)!==-1){var ne=encodeURIComponent(te);ne===te&&(ne=escape(te)),H=H.split(te).join(ne)}}var ie=H.indexOf("#");ie!==-1&&(this.hash=H.substr(ie),H=H.slice(0,ie));var he=H.indexOf("?");if(he!==-1?(this.search=H.substr(he),this.query=H.substr(he+1),D&&(this.query=O.parse(this.query)),H=H.slice(0,he)):D&&(this.search="",this.query={}),H&&(this.pathname=H),f[se]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var be=this.search||"";this.path=L+be}return this.href=this.format(),this},l.prototype.format=function(){var j=this.auth||"";j&&(j=(j=encodeURIComponent(j)).replace(/%3A/i,":"),j+="@");var D=this.protocol||"",A=this.pathname||"",C=this.hash||"",Q=!1,q="";this.host?Q=j+this.host:this.hostname&&(Q=j+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Q+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(q=O.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var H=this.search||q&&"?"+q||"";return D&&D.substr(-1)!==":"&&(D+=":"),this.slashes||(!D||f[D])&&Q!==!1?(Q="//"+(Q||""),A&&A.charAt(0)!=="/"&&(A="/"+A)):Q||(Q=""),C&&C.charAt(0)!=="#"&&(C="#"+C),H&&H.charAt(0)!=="?"&&(H="?"+H),D+Q+(A=A.replace(/[?#]/g,function(B){return encodeURIComponent(B)}))+(H=H.replace("#","%23"))+C},l.prototype.resolve=function(j){return this.resolveObject(I(j,!1,!0)).format()},l.prototype.resolveObject=function(j){if(typeof j=="string"){var D=new l;D.parse(j,!1,!0),j=D}for(var A=new l,C=Object.keys(this),Q=0;Q<C.length;Q++){var q=C[Q];A[q]=this[q]}if(A.hash=j.hash,j.href==="")return A.href=A.format(),A;if(j.slashes&&!j.protocol){for(var H=Object.keys(j),B=0;B<H.length;B++){var Z=H[B];Z!=="protocol"&&(A[Z]=j[Z])}return f[A.protocol]&&A.hostname&&!A.pathname&&(A.pathname="/",A.path=A.pathname),A.href=A.format(),A}if(j.protocol&&j.protocol!==A.protocol){if(!f[j.protocol]){for(var se=Object.keys(j),ae=0;ae<se.length;ae++){var ye=se[ae];A[ye]=j[ye]}return A.href=A.format(),A}if(A.protocol=j.protocol,j.host||g[j.protocol])A.pathname=j.pathname;else{for(var fe=(j.pathname||"").split("/");fe.length&&!(j.host=fe.shift()););j.host||(j.host=""),j.hostname||(j.hostname=""),fe[0]!==""&&fe.unshift(""),fe.length<2&&fe.unshift(""),A.pathname=fe.join("/")}if(A.search=j.search,A.query=j.query,A.host=j.host||"",A.auth=j.auth,A.hostname=j.hostname||j.host,A.port=j.port,A.pathname||A.search){var z=A.pathname||"",U=A.search||"";A.path=z+U}return A.slashes=A.slashes||j.slashes,A.href=A.format(),A}var W=A.pathname&&A.pathname.charAt(0)==="/",K=j.host||j.pathname&&j.pathname.charAt(0)==="/",Y=K||W||A.host&&j.pathname,le=Y,re=A.pathname&&A.pathname.split("/")||[],ue=(fe=j.pathname&&j.pathname.split("/")||[],A.protocol&&!f[A.protocol]);if(ue&&(A.hostname="",A.port=null,A.host&&(re[0]===""?re[0]=A.host:re.unshift(A.host)),A.host="",j.protocol&&(j.hostname=null,j.port=null,j.host&&(fe[0]===""?fe[0]=j.host:fe.unshift(j.host)),j.host=null),Y=Y&&(fe[0]===""||re[0]==="")),K)A.host=j.host||j.host===""?j.host:A.host,A.hostname=j.hostname||j.hostname===""?j.hostname:A.hostname,A.search=j.search,A.query=j.query,re=fe;else if(fe.length)re||(re=[]),re.pop(),re=re.concat(fe),A.search=j.search,A.query=j.query;else if(j.search!=null)return ue&&(A.host=re.shift(),A.hostname=A.host,(w=!!(A.host&&A.host.indexOf("@")>0)&&A.host.split("@"))&&(A.auth=w.shift(),A.hostname=w.shift(),A.host=A.hostname)),A.search=j.search,A.query=j.query,A.pathname===null&&A.search===null||(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.href=A.format(),A;if(!re.length)return A.pathname=null,A.search?A.path="/"+A.search:A.path=null,A.href=A.format(),A;for(var pe=re.slice(-1)[0],ge=(A.host||j.host||re.length>1)&&(pe==="."||pe==="..")||pe==="",we=0,$=re.length;$>=0;$--)(pe=re[$])==="."?re.splice($,1):pe===".."?(re.splice($,1),we++):we&&(re.splice($,1),we--);if(!Y&&!le)for(;we--;we)re.unshift("..");!Y||re[0]===""||re[0]&&re[0].charAt(0)==="/"||re.unshift(""),ge&&re.join("/").substr(-1)!=="/"&&re.push("");var w,L=re[0]===""||re[0]&&re[0].charAt(0)==="/";return ue&&(A.hostname=L?"":re.length?re.shift():"",A.host=A.hostname,(w=!!(A.host&&A.host.indexOf("@")>0)&&A.host.split("@"))&&(A.auth=w.shift(),A.hostname=w.shift(),A.host=A.hostname)),(Y=Y||A.host&&re.length)&&!L&&re.unshift(""),re.length>0?A.pathname=re.join("/"):(A.pathname=null,A.path=null),A.pathname===null&&A.search===null||(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.auth=j.auth||A.auth,A.slashes=A.slashes||j.slashes,A.href=A.format(),A},l.prototype.parseHost=function(){var j=this.host,D=u.exec(j);D&&((D=D[0])!==":"&&(this.port=D.substr(1)),j=j.substr(0,j.length-D.length)),j&&(this.hostname=j)},X.parse=I,X.resolve=function(j,D){return I(j,!1,!0).resolve(D)},X.resolveObject=function(j,D){return j?I(j,!1,!0).resolveObject(D):D},X.format=function(j){return typeof j=="string"&&(j=I(j)),j instanceof l?j.format():l.prototype.format.call(j)},X.Url=l},{punycode:76,qs:78}],133:[function(P,ee,X){(function(N){(function(){function l(E){try{if(!N.localStorage)return!1}catch{return!1}var u=N.localStorage[E];return u!=null&&String(u).toLowerCase()==="true"}ee.exports=function(E,u){if(l("noDeprecation"))return E;var e=!1;return function(){if(!e){if(l("throwDeprecation"))throw new Error(u);l("traceDeprecation")?console.trace(u):console.warn(u),e=!0}return E.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],134:[function(P,ee,X){(function(N){(function(){"use strict";var l=P("for-each"),E=P("available-typed-arrays"),u=P("call-bind"),e=P("call-bind/callBound"),r=P("gopd"),o=e("Object.prototype.toString"),s=P("has-tostringtag/shams")(),c=typeof globalThis>"u"?N:globalThis,v=E(),b=e("String.prototype.slice"),d=Object.getPrototypeOf,g=e("Array.prototype.indexOf",!0)||function(O,I){for(var j=0;j<O.length;j+=1)if(O[j]===I)return j;return-1},f={__proto__:null};l(v,s&&r&&d?function(O){var I=new c[O];if(Symbol.toStringTag in I){var j=d(I),D=r(j,Symbol.toStringTag);if(!D){var A=d(j);D=r(A,Symbol.toStringTag)}f["$"+O]=u(D.get)}}:function(O){var I=new c[O],j=I.slice||I.set;j&&(f["$"+O]=u(j))}),ee.exports=function(O){if(!O||typeof O!="object")return!1;if(!s){var I=b(o(O),8,-1);return g(v,I)>-1?I:I==="Object"&&function(j){var D=!1;return l(f,function(A,C){if(!D)try{A(j),D=b(C,1)}catch{}}),D}(O)}return r?function(j){var D=!1;return l(f,function(A,C){if(!D)try{"$"+A(j)===C&&(D=b(C,1))}catch{}}),D}(O):null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":1,"call-bind":11,"call-bind/callBound":10,"for-each":23,gopd:27,"has-tostringtag/shams":32}],135:[function(P,ee,X){ee.exports=function(){for(var l={},E=0;E<arguments.length;E++){var u=arguments[E];for(var e in u)N.call(u,e)&&(l[e]=u[e])}return l};var N=Object.prototype.hasOwnProperty},{}],136:[function(P,ee,X){"use strict";ee.exports=function(N){N.prototype[Symbol.iterator]=function*(){for(let l=this.head;l;l=l.next)yield l.value}}},{}],137:[function(P,ee,X){"use strict";function N(r){var o=this;if(o instanceof N||(o=new N),o.tail=null,o.head=null,o.length=0,r&&typeof r.forEach=="function")r.forEach(function(v){o.push(v)});else if(arguments.length>0)for(var s=0,c=arguments.length;s<c;s++)o.push(arguments[s]);return o}function l(r,o,s){var c=o===r.head?new e(s,null,o,r):new e(s,o,o.next,r);return c.next===null&&(r.tail=c),c.prev===null&&(r.head=c),r.length++,c}function E(r,o){r.tail=new e(o,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function u(r,o){r.head=new e(o,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function e(r,o,s,c){if(!(this instanceof e))return new e(r,o,s,c);this.list=c,this.value=r,o?(o.next=this,this.prev=o):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}ee.exports=N,N.Node=e,N.create=N,N.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var o=r.next,s=r.prev;return o&&(o.prev=s),s&&(s.next=o),r===this.head&&(this.head=o),r===this.tail&&(this.tail=s),r.list.length--,r.next=null,r.prev=null,r.list=null,o},N.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var o=this.head;r.list=this,r.next=o,o&&(o.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}},N.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var o=this.tail;r.list=this,r.prev=o,o&&(o.next=r),this.tail=r,this.head||(this.head=r),this.length++}},N.prototype.push=function(){for(var r=0,o=arguments.length;r<o;r++)E(this,arguments[r]);return this.length},N.prototype.unshift=function(){for(var r=0,o=arguments.length;r<o;r++)u(this,arguments[r]);return this.length},N.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}},N.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}},N.prototype.forEach=function(r,o){o=o||this;for(var s=this.head,c=0;s!==null;c++)r.call(o,s.value,c,this),s=s.next},N.prototype.forEachReverse=function(r,o){o=o||this;for(var s=this.tail,c=this.length-1;s!==null;c--)r.call(o,s.value,c,this),s=s.prev},N.prototype.get=function(r){for(var o=0,s=this.head;s!==null&&o<r;o++)s=s.next;if(o===r&&s!==null)return s.value},N.prototype.getReverse=function(r){for(var o=0,s=this.tail;s!==null&&o<r;o++)s=s.prev;if(o===r&&s!==null)return s.value},N.prototype.map=function(r,o){o=o||this;for(var s=new N,c=this.head;c!==null;)s.push(r.call(o,c.value,this)),c=c.next;return s},N.prototype.mapReverse=function(r,o){o=o||this;for(var s=new N,c=this.tail;c!==null;)s.push(r.call(o,c.value,this)),c=c.prev;return s},N.prototype.reduce=function(r,o){var s,c=this.head;if(arguments.length>1)s=o;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");c=this.head.next,s=this.head.value}for(var v=0;c!==null;v++)s=r(s,c.value,v),c=c.next;return s},N.prototype.reduceReverse=function(r,o){var s,c=this.tail;if(arguments.length>1)s=o;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");c=this.tail.prev,s=this.tail.value}for(var v=this.length-1;c!==null;v--)s=r(s,c.value,v),c=c.prev;return s},N.prototype.toArray=function(){for(var r=new Array(this.length),o=0,s=this.head;s!==null;o++)r[o]=s.value,s=s.next;return r},N.prototype.toArrayReverse=function(){for(var r=new Array(this.length),o=0,s=this.tail;s!==null;o++)r[o]=s.value,s=s.prev;return r},N.prototype.slice=function(r,o){(o=o||this.length)<0&&(o+=this.length),(r=r||0)<0&&(r+=this.length);var s=new N;if(o<r||o<0)return s;r<0&&(r=0),o>this.length&&(o=this.length);for(var c=0,v=this.head;v!==null&&c<r;c++)v=v.next;for(;v!==null&&c<o;c++,v=v.next)s.push(v.value);return s},N.prototype.sliceReverse=function(r,o){(o=o||this.length)<0&&(o+=this.length),(r=r||0)<0&&(r+=this.length);var s=new N;if(o<r||o<0)return s;r<0&&(r=0),o>this.length&&(o=this.length);for(var c=this.length,v=this.tail;v!==null&&c>o;c--)v=v.prev;for(;v!==null&&c>r;c--,v=v.prev)s.push(v.value);return s},N.prototype.splice=function(r,o,...s){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var c=0,v=this.head;v!==null&&c<r;c++)v=v.next;var b=[];for(c=0;v&&c<o;c++)b.push(v.value),v=this.removeNode(v);for(v===null&&(v=this.tail),v!==this.head&&v!==this.tail&&(v=v.prev),c=0;c<s.length;c++)v=l(this,v,s[c]);return b},N.prototype.reverse=function(){for(var r=this.head,o=this.tail,s=r;s!==null;s=s.prev){var c=s.prev;s.prev=s.next,s.next=c}return this.head=o,this.tail=r,this};try{P("./iterator.js")(N)}catch{}},{"./iterator.js":136}],138:[function(P,ee,X){var N=P("./parser"),l=P("./utils"),E=l;function u(r,o){this.name="NonSupportedSparqlFeatureError",this.feature=r,this.message=o||"SPARQL feature "+r+" non supported"}function e(r){this.name=ParserError,this.message=r||"Error parsing SPARQL query"}u.prototype=new Error,u.constructor=u,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(r){return N.parse(r)},AbstractQueryTree.prototype.parseExecutableUnit=function(r){if(r.kind==="select")return this.parseSelect(r);if(r.kind==="ask")return this.parseSelect(r);if(r.kind==="modify")return this.parseSelect(r);if(r.kind==="construct")return this.parseSelect(r);if(r.kind==="insertdata")return this.parseInsertData(r);if(r.kind==="deletedata")return this.parseInsertData(r);if(r.kind==="load"||r.kind==="clear"||r.kind==="drop"||r.kind==="create")return r;throw new Error("unknown executable unit: "+r.kind)},AbstractQueryTree.prototype.parseSelect=function(r){return r==null?(console.log("error parsing query"),null):(r.pattern=this.build(r.pattern,{freshCounter:0}),r)},AbstractQueryTree.prototype.parseInsertData=function(r){return r??(console.log("error parsing query"),null)},AbstractQueryTree.prototype.build=function(r,o){if(r.token==="groupgraphpattern")return this._buildGroupGraphPattern(r,o);if(r.token==="basicgraphpattern"){var s={kind:"BGP",value:r.triplesContext};return s=AbstractQueryTree.translatePathExpressionsInBGP(s,o)}if(r.token==="graphunionpattern")return{kind:"UNION",value:[this.build(r.value[0],o),this.build(r.value[1],o)]};if(r.token==="graphgraphpattern")return{kind:"GRAPH",value:this.build(r.value,o),graph:r.graph};throw r.token!=null?new u(r.token,"Non implemented SPARQL graph pattern: '"+r.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(r)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(r,o){for(var s,c,v,b=[],d=0;d<r.value.length;d++)if(r.value[d].predicate&&r.value[d].predicate.token==="path"){s=r.value[d],c=r.value.slice(d+1);var g=AbstractQueryTree.translatePathExpression(s,o),f=null;if(g.kind!=="BGP"){if(g.kind==="ZERO_OR_MORE_PATH"||g.kind==="ONE_OR_MORE_PATH"){if(v=b.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:b},rvalue:g}:g,g.kind==="ZERO_OR_MORE_PATH"){if(g.y.token==="var"&&g.y.value.indexOf("fresh:")===0&&g.x.token==="var"&&g.x.value.indexOf("fresh:")===0)for(var O=0;O<r.value.length;O++)r.value[O].object&&r.value[O].object.token==="var"&&r.value[O].object.value===g.x.value&&((f=E.clone(r.value[O],!0)).object=g.y);else if(g.y.token==="var"&&g.y.value.indexOf("fresh:")===0)for(O=0;O<r.value.length;O++)r.value[O].subject&&r.value[O].subject.token==="var"&&r.value[O].subject.value===g.y.value&&((f=E.clone(r.value[O],!0)).subject=g.x)}if(c.length>0){var I=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:c},o);return f!=null?{kind:"UNION",value:[{kind:"JOIN",lvalue:v,rvalue:I},{kind:"BGP",value:b.concat([f]).concat(c)}]}:{kind:"JOIN",lvalue:v,rvalue:I}}return v}return g}b=b.concat(g.value)}else b.push(r.value[d]);return r.value=b,r},AbstractQueryTree.translatePathExpression=function(r,o){if(r.predicate.kind==="element")return r.predicate.modifier==="+"?(r.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,o),x:r.subject,y:r.object}):r.predicate.modifier==="*"?(r.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(r,o),x:r.subject,y:r.object}):(r.predicate=r.predicate.value,{kind:"BGP",value:[r]});if(r.predicate.kind==="sequence"){for(var s,c,v=r.subject,b=r.object,d=r.graph,g=[],f=0;f<r.predicate.value.length;f++)f!=r.predicate.value.length-1?(s={token:"var",value:"fresh:"+o.freshCounter},o.freshCounter++):s=b,c={subject:v,predicate:r.predicate.value[f],object:s},d!=null&&(c.graph=E.clone(d,!0)),g.push(c),f!=r.predicate.value.length-1&&(v=E.clone(s,!0));var O={kind:"BGP",value:g};return AbstractQueryTree.translatePathExpressionsInBGP(O,o)}throw new u("Non supported path expression "+r.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(r,o){for(var s=r.filters||[],c=r.binds||[],v={kind:"EMPTY_PATTERN"},b=0;b<r.patterns.length;b++){var d=r.patterns[b];if(d.token==="optionalgraphpattern")v=(g=this.build(d.value,o)).kind==="FILTER"?{kind:"LEFT_JOIN",lvalue:v,rvalue:g.value,filter:g.filter}:{kind:"LEFT_JOIN",lvalue:v,rvalue:g,filter:!0};else{var g=this.build(d,o);v=v.kind=="EMPTY_PATTERN"?g:{kind:"JOIN",lvalue:v,rvalue:g}}}if(v.binds=c,s.length!=0){if(v.kind==="EMPTY_PATTERN")return{kind:"FILTER",filter:s,value:v};if(v.kind==="LEFT_JOIN"&&v.filter===!0)return{kind:"FILTER",filter:s,value:v};if(v.kind==="LEFT_JOIN")return{kind:"FILTER",filter:s,value:v};if(v.kind==="JOIN")return{kind:"FILTER",filter:s,value:v};if(v.kind==="UNION")return{kind:"FILTER",filter:s,value:v};if(v.kind==="GRAPH")return{kind:"FILTER",filter:s,value:v};if(v.kind==="BGP")return{kind:"FILTER",filter:s,value:v};throw new Error("Unknow kind of algebra expression: "+v.kind)}return v},AbstractQueryTree.prototype.collectBasicTriples=function(r,o){if(o==null&&(o=[]),r.kind==="select")o=this.collectBasicTriples(r.pattern,o);else if(r.kind==="BGP")o=o.concat(r.value);else if(r.kind==="ZERO_OR_MORE_PATH")o=this.collectBasicTriples(r.path);else if(r.kind==="UNION")o=this.collectBasicTriples(r.value[0],o),o=this.collectBasicTriples(r.value[1],o);else if(r.kind==="GRAPH")o=this.collectBasicTriples(r.value,o);else if(r.kind==="LEFT_JOIN"||r.kind==="JOIN")o=this.collectBasicTriples(r.lvalue,o),o=this.collectBasicTriples(r.rvalue,o);else if(r.kind==="FILTER")o=this.collectBasicTriples(r.value,o);else if(r.kind==="construct")o=this.collectBasicTriples(r.pattern,o);else if(r.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+r.kind;return o},AbstractQueryTree.prototype.bind=function(r,o){if(r.graph!=null&&r.graph.token&&r.graph.token==="var"&&o[r.graph.value]!=null&&(r.graph=o[r.graph.value]),r.filter!=null){for(var s=[],c=0;c<r.filter.length;c++)r.filter[c].value=this._bindFilter(r.filter[c].value,o),s.push(r.filter[c]);r.filter=s}if(r.kind==="select")r.pattern=this.bind(r.pattern,o);else if(r.kind==="BGP")r.value=this._bindTripleContext(r.value,o);else if(r.kind==="ZERO_OR_MORE_PATH")r.path=this._bindTripleContext(r.path,o),r.x&&r.x.token==="var"&&o[r.x.value]!=null&&(r.x=o[r.x.value]),r.y&&r.y.token==="var"&&o[r.y.value]!=null&&(r.y=o[r.y.value]);else if(r.kind==="UNION")r.value[0]=this.bind(r.value[0],o),r.value[1]=this.bind(r.value[1],o);else if(r.kind==="GRAPH")r.value=this.bind(r.value,o);else if(r.kind==="LEFT_JOIN"||r.kind==="JOIN")r.lvalue=this.bind(r.lvalue,o),r.rvalue=this.bind(r.rvalue,o);else if(r.kind==="FILTER"){var v=this;r.value=this.bind(r.value,o),r.filter=r.filter.map(function(b){return{token:"filter",value:v._bindFilter(b.value,o)}})}else if(r.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._bindTripleContext=function(r,o){for(var s=0;s<r.length;s++)for(var c in delete r[s].graph,delete r[s].variables,r[s]){var v=r[s][c];v.token==="var"&&o[v.value]!=null&&(r[s][c]=o[v.value])}return r},AbstractQueryTree.prototype._bindFilter=function(r,o){if(r.expressionType!=null){var s=r.expressionType;if(s=="relationalexpression")r.op1=this._bindFilter(r.op1,o),r.op2=this._bindFilter(r.op2,o);else if(s=="conditionalor"||s=="conditionaland")for(var c=0;c<r.operands.length;c++)r.operands[c]=this._bindFilter(r.operands[c],o);else if(s=="additiveexpression")for(r.summand=this._bindFilter(r.summand,o),c=0;c<r.summands.length;c++)r.summands[c].expression=this._bindFilter(r.summands[c].expression,o);else if(s=="builtincall")for(c=0;c<r.args.length;c++)r.args[c]=this._bindFilter(r.args[c],o);else if(s=="multiplicativeexpression")for(r.factor=this._bindFilter(r.factor,o),c=0;c<r.factors.length;c++)r.factors[c].expression=this._bindFilter(r.factors[c].expression,o);else if(s=="unaryexpression")r.expression=this._bindFilter(r.expression,o);else if(s=="irireforfunction")for(c=0;c<r.factors.args;c++)r.args[c]=this._bindFilter(r.args[c],o);else if(s=="atomic"&&r.primaryexpression=="var"&&o[r.value.value]!=null){var v=o[r.value.value];v.token==="uri"?r.primaryexpression="iri":r.primaryexpression="literal",r.value=v}}return r},AbstractQueryTree.prototype.replace=function(r,o,s,c){if(r.graph!=null&&r.graph.token&&r.graph.token===o.token&&r.graph.value==o.value&&(r.graph=E.clone(s,!0)),r.filter!=null){for(var v=[],b=0;b<r.filter.length;b++)r.filter[b].value=this._replaceFilter(r.filter[b].value,o,s,c),v.push(r.filter[b]);r.filter=v}if(r.kind==="select")r.pattern=this.replace(r.pattern,o,s,c);else if(r.kind==="BGP")r.value=this._replaceTripleContext(r.value,o,s,c);else if(r.kind==="ZERO_OR_MORE_PATH")r.path=this._replaceTripleContext(r.path,o,s,c),r.x&&r.x.token===o.token&&r.value===o.value&&(r.x=E.clone(s,!0)),r.y&&r.y.token===o.token&&r.value===o.value&&(r.y=E.clone(s,!0));else if(r.kind==="UNION")r.value[0]=this.replace(r.value[0],o,s,c),r.value[1]=this.replace(r.value[1],o,s,c);else if(r.kind==="GRAPH")r.value=this.replace(r.value,o,s);else if(r.kind==="LEFT_JOIN"||r.kind==="JOIN")r.lvalue=this.replace(r.lvalue,o,s,c),r.rvalue=this.replace(r.rvalue,o,s,c);else if(r.kind==="FILTER")r.value=this._replaceFilter(r.value,o,s,c);else if(r.kind!=="EMPTY_PATTERN")throw"Unknown pattern: "+r.kind;return r},AbstractQueryTree.prototype._replaceTripleContext=function(r,o,s,c){for(var v=0;v<r.length;v++)for(var b in r[v]){var d=r[v][b];d.token==="var"&&o.token==="var"&&d.value===o.value||d.token==="blank"&&o.token==="blank"&&d.value===o.value?r[v][b]=s:d.token!=="literal"&&d.token!=="uri"||o.token!=="literal"&&o.token!=="uri"||d.token!==o.token||l.lexicalFormTerm(d,c)[d.token]!==l.lexicalFormTerm(o,c)[d.token]||(r[v][b]=s)}return r},AbstractQueryTree.prototype._replaceFilter=function(r,o,s,c){if(r.expressionType!=null){var v=r.expressionType;if(v=="relationalexpression")r.op1=this._replaceFilter(r.op1,o,s,c),r.op2=this._replaceFilter(r.op2,o,s,c);else if(v=="conditionalor"||v=="conditionaland")for(var b=0;b<r.operands.length;b++)r.operands[b]=this._replaceFilter(r.operands[b],o,s,c);else if(v=="additiveexpression")for(r.summand=this._replaceFilter(r.summand,o,s,c),b=0;b<r.summands.length;b++)r.summands[b].expression=this._replaceFilter(r.summands[b].expression,o,s,c);else if(v=="builtincall")for(b=0;b<r.args.length;b++)r.args[b]=this._replaceFilter(r.args[b],o,s,c);else if(v=="multiplicativeexpression")for(r.factor=this._replaceFilter(r.factor,o,s,c),b=0;b<r.factors.length;b++)r.factors[b].expression=this._replaceFilter(r.factors[b].expression,o,s,c);else if(v=="unaryexpression")r.expression=this._replaceFilter(r.expression,o,s,c);else if(v=="irireforfunction")for(b=0;b<r.factors.args;b++)r.args[b]=this._replaceFilter(r.args[b],o,s,c);else if(v=="atomic"){var d=null;(r.primaryexpression==o.token&&r.value==o.value||r.primaryexpression=="iri"&&o.token=="uri"&&r.value==o.value)&&(d=s.value),d!=null&&(s.token==="uri"?r.primaryexpression="iri":r.primaryexpression=s.token,r.value=d)}}return r},AbstractQueryTree.prototype.treeWithUnion=function(r){if(r==null||r.kind==null)return!1;if(r.kind==="select")return this.treeWithUnion(r.pattern);if(r.kind==="BGP")return this.treeWithUnion(r.value);if(r.kind==="ZERO_OR_MORE_PATH")return!1;if(r.kind==="UNION"){if(r.value[0].value==null||r.value[0].value.variables==null||r.value[1].value==null||r.value[1].value.variables==null)return!0;if(r.value[0].variables.join("/")===r.values[1].variables.join("/"))return!!this.treeWithUnion(r.value[0])||this.treeWithUnion(r.value[1])}else{if(r.kind==="GRAPH")return!1;if(r.kind!=="LEFT_JOIN"&&r.kind!=="JOIN")return r.kind==="FILTER"||r.kind,!1;if(this.treeWithUnion(r.lvalue))return!0;this.treeWithUnion(r.rvalue)}},ee.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:u,SparqlParserError:e}},{"./parser":144,"./utils":156}],139:[function(P,ee,X){"use strict";var N=P("./utils"),l=N,E=N.nextTick,u=function(r,o){if(arguments.length!=0){this.order=r,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var s=this;this._diskWrite(this.root,function(c){s.root=c,s._updateRootNode(s.root,function(v){s.comparator=function(b,d){return b<d?-1:b>d?1:0},s.merger=null,o?.(s)})})}};u.prototype._allocateNode=function(){return new e},u.prototype._diskWrite=function(r,o){E(function(){o(r)})},u.prototype._diskRead=function(r,o){E(function(){o(r)})},u.prototype._diskDelete=function(r,o){E(function(){o()})},u.prototype._updateRootNode=function(r,o){o(r)},u.prototype.search=function(r,o,s){var c=this.root;this.__search(this,r,c,o,s)},u.prototype.__search=function(r,o,s,c,v){for(var b=0;b<s.numberActives&&r.comparator(o,s.keys[b].key)===1;)b++;b<s.numberActives&&r.comparator(s.keys[b].key,o)===0?c(v!=null&&v==1||s.keys[b].data):s.isLeaf===!0?c(null):r._diskRead(s.children[b],function(d){r.__search(r,o,d,c,v)})},u.prototype.walk=function(r,o){this.__walk(this,this.root,r,o)},u.prototype.__walk=function(r,o,s,c){var v=o.numberActives,b=0;if(o.isLeaf){for(b=0;b<o.numberActives;b++)s(o.keys[b]);return c()}l.whilst(function(){return b<v},function(d){r._diskRead(o.children[b],function(g){r.__walk(r,g,s,function(){r._diskRead(o.keys[b],function(f){s(f),b++,d()})})})},function(){r._diskRead(o.children[v],function(d){r.__walk(r,d,s,function(){c()})})})},u.prototype.walkNodes=function(r){this.__walkNodes(this,root,r,function(){})},u.prototype.__walkNodes=function(r,o,s,c){if(o.isLeaf)return s(o),c();s(o);var v=o.numberActives,b=0;l.whilst(function(){return b<v},function(d){r._diskRead(o.children[b],function(g){r.__walkNodes(r,g,s,function(){b++,d()})})},function(){r._diskRead(o.children[v],function(d){r.__walkNodes(r,d,s,function(){})})})},u.prototype._splitChild=function(r,o,s,c){var v=this._allocateNode();v.isLeaf=s.isLeaf,v.level=s.level,v.numberActives=this.order-1;var b=s.keys[this.order-1];s.keys[this.order-1]=null;for(var d=0;d<this.order-1;d++)v.keys[d]=s.keys[d+this.order],s.keys[d+this.order]=null,s.isLeaf||(v.children[d]=s.children[d+this.order],s.children[d+this.order]=null);for(s.isLeaf||(v.children[d]=s.children[d+this.order],s.children[d+this.order]=null),s.numberActives=this.order-1,d=r.numberActives+1;d>o+1;d--)r.children[d]=r.children[d-1];for(r.children[o+1]=v,d=r.numberActives;d>o;d--)r.keys[d]=r.keys[d-1];r.keys[o]=b,r.numberActives++;var g=this;this._diskWrite(v,function(f){g._diskWrite(r,function(O){O.children[o+1]=f,g._diskWrite(s,function(I){return c(O)})})})},u.prototype.insert=function(r,o,s){if(this.root.numberActives===2*this.order-1){var c=this._allocateNode();c.isLeaf=!1,c.level=this.root.level+1,c.numberActives=0,c.children[0]=this.root;var v=this;this._splitChild(c,0,this.root,function(b){c=b,v.root=c,v._updateRootNode(c,function(d){v._insertNonFull(d,r,o,s)})})}else this._insertNonFull(this.root,r,o,s)},u.prototype._insertNonFull=function(r,o,s,c){var v=r.numberActives-1;this.__insertNonFull(this,r,v,o,s,c)},u.prototype.__insertNonFull=function(r,o,s,c,v,b){if(o.isLeaf){for(;s>=0&&r.comparator(c,o.keys[s].key)===-1;)o.keys[s+1]=o.keys[s],s--;s>=0&&r.comparator(c,o.keys[s].key)===0?o.keys[s]={key:c,data:v}:(o.keys[s+1]={key:c,data:v},o.numberActives++),r._diskWrite(o,function(g){return b(g)})}else{for(;s>=0&&r.comparator(c,o.keys[s].key)===-1;)s--;s++;var d=r;r._diskRead(o.children[s],function(g){g.numberActives===2*d.order-1?d._splitChild(o,s,g,function(){d.comparator(c,o.keys[s].key)===1&&s++,d._diskRead(o.children[s],function(f){s=f.numberActives-1,d.__insertNonFull(r,f,s,c,v,b)})}):d._diskRead(o.children[s],function(f){s=f.numberActives-1,d.__insertNonFull(r,f,s,c,v,b)})})}},u.prototype.delete=function(r,o){var s=this.root;u.prototype.__deleteSearchNode(this,r,s,o)},u.prototype.__deleteSearchNode=function(r,o,s,c){var v=0;if(s.numberActives===0)return c(!1);for(;v<s.numberActives&&r.comparator(o,s.keys[v].key)===1;)v++;var b=v;if(v<s.numberActives&&r.comparator(o,s.keys[v].key)===0)return r.__deleteNodeFound(r,b,o,s,c);if(s.isLeaf===!0)return c(!1);var d=s;r._diskRead(s.children[v],function(g){if(g===null)return c(!1);var f=!1,O=!1,I=null,j=null;b===d.numberActives?(O=!0,j=d.children[b-1],I=d.children[b-1]):b===0?(f=!0,I=d.children[1],j=d.children[1]):(j=d.children[b-1],I=d.children[b+1]),r._diskRead(j,function(D){r._diskRead(I,function(A){O===!0&&(A=null),f===!0&&(D=null),g.numberActives===r.order-1&&d!=null?A!=null&&A.numberActives>r.order-1?r._moveKey(d,v,-1,function(C){r.__deleteSearchNode(r,o,g,c)}):D!=null&&D.numberActives>r.order-1?r._moveKey(d,v,1,function(C){r.__deleteSearchNode(r,o,g,c)}):D!=null&&D.numberActives===r.order-1?r._mergeSiblings(d,v,-1,function(C){r.__deleteSearchNode(r,o,C,c)}):A!=null&&A.numberActives===r.order-1&&r._mergeSiblings(d,v,1,function(C){r.__deleteSearchNode(r,o,C,c)}):r.__deleteSearchNode(r,o,g,c)})})})},u.prototype.__deleteNodeFound=function(r,o,s,c,v){return c.isLeaf&&c.numberActives>r.order-1||c.isLeaf&&c===r.root?(r._deleteKeyFromNode(c,o,function(){v(!0)}),!0):(c.isLeaf===!1&&r._diskRead(c.children[o],function(b){b.numberActives>r.order-1?r._getMaxKeyPos(r,b,function(d){s=d.node.keys[d.index],c.keys[o]=s,r._diskWrite(c,function(g){g=b,s=s.key,r.__deleteSearchNode(r,s,g,v)})}):r._diskRead(c.children[o+1],function(d){d.numberActives>r.order-1?r._getMinKeyPos(r,d,function(g){s=g.node.keys[g.index],c.keys[o]=s,r._diskWrite(c,function(f){f=d,s=s.key,r.__deleteSearchNode(r,s,f,v)})}):b.numberActives===r.order-1&&d.numberActives===r.order-1&&r._mergeNodes(b,c.keys[o],d,function(g){c.children[o]=g;for(var f=++o;f<c.numberActives;f++)c.children[f]=c.children[f+1],c.keys[f-1]=c.keys[f];c.children[f]=null,c.keys[f-1]=null,c.numberActives--,c.numberActives===0&&r.root===c&&(r.root=g),r._diskWrite(c,function(O){r.__deleteSearchNode(r,s,g,v)})})})}),void(c.isLeaf&&c.numberActives>r.order-1&&r._deleteKeyFromNode(c,o,function(b){r.__deleteSearchNode(r,s,b,v)})))},u.prototype._moveKey=function(r,o,s,c){s===1&&o--;var v=this;v._diskRead(r.children[o],function(b){v._diskRead(r.children[o+1],function(d){if(s==-1){b.keys[b.numberActives]=r.keys[o],b.children[b.numberActives+1]=d.children[0],d.children[0]=null,b.numberActives++,r.keys[o]=d.keys[0];for(var g=1;g<d.numberActives;g++)d.keys[g-1]=d.keys[g],d.children[g-1]=d.children[g];d.children[d.numberActives-1]=d.children[d.numberActives],d.numberActives--}else{for(d.children[d.numberActives+1]=d.children[d.numberActives],g=d.numberActives;g>0;g--)d.children[g]=d.children[g-1],d.keys[g]=d.keys[g-1];d.keys[0]=null,d.children[0]=null,d.children[0]=b.children[b.numberActives],d.keys[0]=r.keys[o],d.numberActives++,b.children[b.numberActives]=null,r.keys[o]=b.keys[b.numberActives-1],b.keys[b.numberActives-1]=null,b.numberActives--}v._diskWrite(b,function(f){v._diskWrite(d,function(O){v._diskWrite(r,function(I){return c(I)})})})})})},u.prototype._mergeSiblings=function(r,o,s,c){var v,b,d,g;o===r.numberActives?(o--,d=r.children[r.numberActives-1],g=r.children[r.numberActives]):(d=r.children[o],g=r.children[o+1]);var f=this;f._diskRead(d,function(O){f._diskRead(g,function(I){var j=f._allocateNode();for(j.isLeaf=O.isLeaf,j.level=O.level,b=0;b<f.order-1;b++)j.keys[b]=O.keys[b],j.children[b]=O.children[b];for(j.keys[f.order-1]=r.keys[o],j.children[f.order-1]=O.children[f.order-1],b=0;b<f.order-1;b++)j.keys[b+f.order]=I.keys[b],j.children[b+f.order]=I.children[b];for(j.children[2*f.order-1]=I.children[f.order-1],r.children[o]=j,b=o;b<r.numberActives;b++)r.keys[b]=r.keys[b+1],r.children[b+1]=r.children[b+2];for(j.numberActives=O.numberActives+I.numberActives+1,r.numberActives--,v=r.numberActives;v<2*f.order-1;v++)r.keys[v]=null;r.numberActives===0&&f.root===r&&(f.root=j,j.level?j.isLeaf=!1:j.isLeaf=!0),f._diskWrite(j,function(D){f._diskWrite(r,function(A){f._diskDelete(O,function(){f._diskDelete(I,function(){if(f.root!==D)return c(D);f._updateRootNode(f.root,function(){return c(D)})})})})})})})},u.prototype._deleteKeyFromNode=function(r,o,s){var c,v=2*this.order-1;if(r.numberActives<v&&(v=r.numberActives),r.isLeaf===!1)return!1;for(r.keys[o],c=o;c<v-1;c++)r.keys[c]=r.keys[c+1];r.keys.pop(),r.numberActives--,this._diskWrite(r,function(b){return s(b)})},u.prototype._mergeNodes=function(r,o,s,c){var v,b;for((v=this._allocateNode()).isLeaf=!0,b=0;b<r.numberActives;b++)v.keys[b]=r.keys[b],v.children[b]=r.children[b];for(v.children[r.numberActives]=r.children[r.numberActives],v.keys[r.numberActives]=o,b=0;b<s.numberActives;b++)v.keys[b+r.numberActives+1]=s.keys[b],v.children[b+r.numberActives+1]=s.children[b];v.children[2*this.order-1]=s.children[s.numberActives],v.numberActives=r.numberActives+s.numberActives+1,v.isLeaf=r.isLeaf,v.level=r.level;var d=this;this._diskWrite(v,function(g){d._diskDelete(r,function(){d._diskDelete(s,function(){return c(g)})})})},u.prototype.audit=function(r){var o=[],s=[],c=this,v=function(d){for(var g=0;g<s.length;g++)if(c.comparator(s[g],d)===0){var f=" !!! duplicated key "+d;r===!0&&console.log(f),o.push(f)}},b=null;return c=this,this.walkNodes(function(d){r===!0&&(console.log("--- Node at "+d.level+" level"),console.log(" - leaf? "+d.isLeaf),console.log(" - num actives? "+d.numberActives),console.log(" - keys: "));for(var g=d.numberActives;g<d.keys.length;g++)d.keys[g]!=null&&r===!0&&(console.log(" * warning : redundant key data"),o.push(" * warning : redundant key data"));for(g=d.numberActives+1;g<d.children.length;g++)d.children[g]!=null&&r===!0&&(console.log(" * warning : redundant children data"),o.push(" * warning : redundant key data"));if(d.isLeaf===!1)for(g=0;g<d.numberActives;g++){var f=this._diskRead(d.children[g]).keys[this._diskRead(d.children[g]).numberActives-1].key,O=this._diskRead(d.children[g+1]).keys[0].key;if(r===!0&&console.log("   "+d.keys[g].key+"("+f+","+O+")"),c.comparator(d.keys[g].key,f)===-1){var I=" !!! value max left "+f+" > key "+d.keys[g].key;r===!0&&console.log(I),o.push(I)}c.comparator(d.keys[g].key,O)===1&&(I=" !!! value min right "+O+" < key "+d.keys[g].key,r===!0&&console.log(I),o.push(I)),v(d.keys[g].key),s.push(d.keys[g].key)}else for(b===null?b=d.level:b!=d.level&&(I=" !!! Leaf node with wrong level value",r===!0&&console.log(I),o.push(I)),g=0;g<d.numberActives;g++)r===!0&&console.log(" "+d.keys[g].key),v(d.keys[g].key),s.push(d.keys[g].key);d!=c.root&&(d.numberActives>2*c.order-1&&(r===!0&&(I=" !!!! MAX num keys restriction violated "),console.log(I),o.push(I)),d.numberActives<c.order-1&&(r===!0&&(I=" !!!! MIN num keys restriction violated "),console.log(I),o.push(I)))}),o},u.prototype._getMaxKeyPos=function(r,o,s){var c={};return o===null?s(null):o.isLeaf===!0?(c.node=o,c.index=o.numberActives-1,s(c)):(c.node=o,c.index=o.numberActives-1,void r._diskRead(o.children[o.numberActives],function(v){return r._getMaxKeyPos(r,v,s)}))},u.prototype._getMinKeyPos=function(r,o,s){var c={};if(o===null&&s(null),o.isLeaf===!0)return c.node=o,c.index=0,s(c);c.node=o,c.index=0,r._diskRead(o.children[0],function(v){return r._getMinKeyPos(r,v,s)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};ee.exports={Tree:u,Node:e}},{"./utils":156}],140:[function(P,ee,X){var N=P("./utils"),l=P("./utils"),E=(P("./quad_index").QuadIndex,P("./quad_index").Pattern),u=P("./rdf_model"),e=P("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var r=0;r<this.indices.length;r++){var o=this.indices[r];this.indexMap[o]={},this.queriesIndexMap[o]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){this.ongoingModification!==!0&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],this.updateInProgress==null&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(r,o){this.updateInProgress[r].push(o)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(r){if(this.ongoingModification!==!0){var o=this;if(this.updateInProgress!=null){var s=o.updateInProgress;o.updateInProgress=null,this.sendNotification(Callbacks.deleted,s[Callbacks.deleted],function(){o.sendNotification(Callbacks.added,s[Callbacks.added],function(){o.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){o.dispatchQueries(function(){r(!0)})})})})}else r(!0)}else r(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){this.ongoingModification!==!0&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(r,o,s){for(var c={},v=0;v<o.length;v++){var b=o[v];for(var d in this.indexMap){var g=this.indexMap[d],f=this.componentOrders[d];this._searchCallbacksInIndex(g,f,r,b,c),this.pendingQueries.length!=0&&(g=this.queriesIndexMap[d],this._searchQueriesInIndex(g,f,b))}}this.dispatchNotifications(c),s?.(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(r,o,s){for(var c=this.emptyNotificationsMap[r]||[],v=0;v<c.length;v++)c[v](r,o);s()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(r){for(var o in r){var s=this.callbacksMap[o],c=r[o][Callbacks.deleted];if(c!=null)try{s(Callbacks.deleted,c)}catch{}for(var v in r[o])if(v!=Callbacks.deleted)try{s(v,r[o][v])}catch{}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(r,o,s,c,v){for(var b=c[1],d=(c=c[0],0);d<o.length+1;d++){for(var g=r._||[],f=[],O=0;O<g.length;O++){var I=g[O];this.callbacksMap[I]!=null&&(v[I]=v[I]||{},v[I][s]=v[I][s]||[],v[I][s].push(c),f.push(I))}r._=f;var j=o[d];if(r[""+b[j]]==null)break;r=r[""+b[j]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(r,o){var s=this.emptyNotificationsMap[r]||[];s.push(o),this.emptyNotificationsMap[r]=s},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(r,o){var s=this.emptyNotificationsMap[r];s!=null&&(s=N.reject(s,function(c){return c===o})),this.emptyNotificationsMap[r]=s},Callbacks.CallbacksBackend.prototype.subscribe=function(r,o,s,c,v,b){var d=this._tokenizeComponents(r,o,s,c),g={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,g);var f=this;this.engine.normalizeQuad(d,g,!0,function(O){for(var I=new E(O),j=f._indexForPattern(I),D=f.componentOrders[j],A=f.indexMap[j],C=0;C<D.length;C++){var Q=O[D[C]];if(Q==="_"){A._==null&&(A._=[]),f.callbackCounter++,A._.push(f.callbackCounter),f.callbacksMap[f.callbackCounter]=v,f.callbacksInverseMap[v]=f.callbackCounter;break}C===D.length-1?(A[Q]=A[Q]||{_:[]},f.callbackCounter++,A[Q]._.push(f.callbackCounter),f.callbacksMap[f.callbackCounter]=v,f.callbacksInverseMap[v]=f.callbackCounter):(A[Q]=A[Q]||{},A=A[Q])}b?.(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(r){var o=this.callbacksInverseMap[r];o!=null&&(delete this.callbacksInverseMap[r],delete this.callbacksMap[o])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(r,o,s,c){var v={};return r==null?v.subject=Callbacks.ANYTHING:r.indexOf("_:")==0?v.subject={token:"blank",value:r}:v.subject={token:"uri",value:r},v.predicate=o==null?Callbacks.ANYTHING:{token:"uri",value:o},v.object=s==null?Callbacks.ANYTHING:{token:"uri",value:s},v.graph=c==null?Callbacks.ANYTHING:{token:"uri",value:c},v},Callbacks.CallbacksBackend.prototype._indexForPattern=function(r){for(var o=r.indexKey,s=this.indices,c=0;c<s.length;c++)for(var v=s[c],b=this.componentOrders[v],d=0;d<b.length&&N.include(o,b[d])!==!1;d++)if(d==o.length-1)return v;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var r,o,s,c;arguments.length===4?(r=arguments[0],o=arguments[1],s=arguments[2],c=arguments[3]):(r=arguments[0],o=this.engine.lexicon.defaultGraphUri,s=arguments[1],c=arguments[2]);var v="CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+o+"> { <"+r+"> ?p ?o } }",b=this,d={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,d);var g=[];this.engine.execute(v,function(f,O){if(f)c&&c(!1);else{var I=O,j=!1,D=function(A,C){if(A==="eventsFlushed"&&j){j=!1;try{s(I)}catch{}}else if(A!=="eventsFlushed"){j=!0;for(var Q=0;Q<C.length;Q++){var q=C[Q],H=u.buildRDFResource(q.subject,g,b.engine,d),B=u.buildRDFResource(q.predicate,g,b.engine,d),Z=u.buildRDFResource(q.object,g,b.engine,d);H!=null&&B!=null&&Z!=null&&(q=new u.Triple(H,B,Z),A===Callbacks.added?I.add(q):A===Callbacks.deleted&&I.remove(q))}}};b.observersMap[s]=D,b.subscribeEmpty(Callbacks.eventsFlushed,D),b.subscribe(r,null,null,null,D,function(){try{s(I)}catch{}c&&c(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(r){var o=this.observersMap[r];return!!o&&(this.unsubscribe(o),this.unsubscribeEmpty(Callbacks.eventsFlushed,o),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(r,o,s){var c=this.aqt.parseQueryString(r),v=this.aqt.parseSelect(c.units[0]),b=this.aqt.collectBasicTriples(v),d=this,g={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,g);var f=this.queryCounter;this.queryCounter++,this.queriesMap[f]=r,this.queriesInverseMap[r]=f,this.queriesList.push(f),this.queriesCallbacksMap[f]=o,l.eachSeries(b,function(O,I){O.graph==null&&(O.graph=d.engine.lexicon.defaultGraphUriTerm),d.engine.normalizeQuad(O,g,!0,function(j){for(var D=new E(j),A=d._indexForPattern(D),C=d.componentOrders[A],Q=d.queriesIndexMap[A],q=0;q<C.length;q++){var H=j[C[q]];if(typeof H=="string"){Q._==null&&(Q._=[]),Q._.push(f);break}q===C.length-1?(Q[H]=Q[H]||{_:[]},Q[H]._.push(f)):(Q[H]=Q[H]||{},Q=Q[H])}I()})},function(){d.engine.execute(r,function(O,I){O?console.log("ERROR in query callback "+I):o(I)}),s?.()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(r){var o=this.queriesInverseMap[r];o!=null&&(delete this.queriesInverseMap[r],delete this.queriesMap[o],this.queriesList=N.reject(this.queriesList,function(s){return s===o}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(r,o,s){for(var c=s[1],v=(s=s[0],0);v<o.length+1;v++){for(var b=r._||[],d=[],g=0;g<b.length;g++){var f=b[g];N.include(this.pendingQueries,f)&&(N.remove(this.pendingQueries,function(I){return I===f}),this.matchedQueries.push(f)),this.queriesMap[f]!=null&&d.push(f)}r._=d;var O=o[v];if(r[""+c[O]]==null)break;r=r[""+c[O]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(r){var o,s,c=this,v={};l.eachSeries(this.matchedQueries,function(b,d){v[b]==null?(v[b]=!0,o=c.queriesMap[b],s=c.queriesCallbacksMap[b],c.engine.execute(o,function(g,f){if(!g)try{s(f)}catch{}d()})):d()},function(){r()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,ee.exports=Callbacks},{"./abstract_query_tree":138,"./quad_index":148,"./rdf_model":153,"./utils":156}],141:[function(P,ee,X){var N=P("jsonld");X.JSONLDParser={};var l=X.JSONLDParser;l.parser={async:!0,parse:function(E,u,e,r){try{typeof E=="string"&&(E=JSON.parse(E)),async function(o,s,c){var v=null;const b=await N.toRDF(o,{});var d=function(j){return j.termType==="BlankNode"?{blank:j.value}:j.termType==="NamedNode"?{token:"uri",value:j.value}:j.termType==="Literal"?j.language!=null?{literal:'"'+j.value+'"@'+j.language}:j.datatype!==null?{literal:'"'+j.value+'"^^<'+j.datatype.value+">"}:{literal:'"'+j.value+'"'}:void 0};v=[];for(var g=function(j,D,A){v.push({subject:d(j),predicate:d(D),object:d(A),graph:s})},f=b,O=0;O<f.length;O++){var I=f[O];g(I.subject,I.predicate,I.object)}c(null,v)}(E,u,r)}catch(o){r(o)}}},ee.exports={JSONLDParser:l}},{jsonld:57}],142:[function(P,ee,X){var N=P("./utils"),l=P("./btree").Tree;Lexicon=function(E){var u=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,N.seq(function(e){new l(2,function(r){u.uris=r,e()})},function(e){new l(2,function(r){u.literals=r,e()})},function(e){new l(2,function(r){u.knownGraphs=r,e()})},function(e){new l(2,function(r){u.oidUris=r,e()})},function(e){new l(2,function(r){u.oidLiterals=r,e()})},function(e){new l(2,function(r){u.oidBlanks=r,e()})})(function(){E?.(u)})},Lexicon.prototype.registerGraph=function(E,u,e){E!=this.defaultGraphOid?this.knownGraphs.insert(E,u,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(E,u){var e=[];this.knownGraphs.walk(function(r){E===!0?e.push(r.data):e.push(r.key)},function(){u(e)})},Lexicon.prototype.registerUri=function(E,u){var e=this;E===this.defaultGraphUri?u(this.defaultGraphOid):this.uris.search(E,function(r){if(r==null){var o=e.oidCounter,s="u"+o;e.oidCounter++,N.seq(function(c){e.uris.insert(E,[o,0],function(){c()})},function(c){e.oidUris.insert(s,E,function(){c()})})(function(){u(o)})}else o=r[0],r[1]=r[1]+1,u(o)})},Lexicon.prototype.resolveUri=function(E,u){E===this.defaultGraphUri?u(this.defaultGraphOid):this.uris.search(E,function(e){u(e!=null?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(E,u){E===this.defaultGraphUri?u(0):this.uris.search(E,function(e){u(e!=null?e[1]:-1)})},Lexicon.prototype.registerBlank=function(E){var u=this.oidCounter;this.oidCounter++;var e=""+u;this.oidBlanks.insert(e,e,function(){E(u)})},Lexicon.prototype.resolveBlank=function(E,u){var e=this;this.oidBlanks.search(E,function(r){if(r!=null)u(r);else{var o=e.oidCounter;this.oidCounter++,u(""+o)}})},Lexicon.prototype.resolveBlankCost=function(E,u){u(0)},Lexicon.prototype.registerLiteral=function(E,u){var e=this;this.literals.search(E,function(r){if(r==null){var o="l"+(s=e.oidCounter);e.oidCounter++,N.seq(function(c){e.literals.insert(E,[s,0],function(){c()})},function(c){e.oidLiterals.insert(o,E,function(){c()})})(function(){u(s)})}else{var s=r[0];r[1]=r[1]+1,u(s)}})},Lexicon.prototype.resolveLiteral=function(E,u){this.literals.search(E,function(e){u(e!=null?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(E,u){this.literals.search(E,function(e){u(e!=null?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(E){var u;return(u=E.lastIndexOf("@"))!=-1&&E[u-1]==='"'&&E.substring(u,E.length).match(/^@[a-zA-Z\-]+$/g)!=null?{token:"literal",value:E.substring(1,u-1),lang:E.substring(u+1,E.length)}:(u=E.lastIndexOf("^^"))!=-1&&E[u-1]==='"'&&E[u+2]==="<"&&E[E.length-1]===">"?{token:"literal",value:E.substring(1,u-1),type:E.substring(u+3,E.length-1)}:{token:"literal",value:E.substring(1,E.length-1)}},Lexicon.prototype.parseUri=function(E){return{token:"uri",value:E}},Lexicon.prototype.retrieve=function(E,u){var e=this;E===this.defaultGraphOid?u({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):N.seq(function(r,o){e.oidUris.search("u"+E,function(s){o(null,s!=null?e.parseUri(s):null)})},function(r,o){r==null?e.oidLiterals.search("l"+E,function(s){o(null,s!=null?e.parseLiteral(s):null)}):o(null,r)},function(r,o){r==null?e.oidBlanks.search(""+E,function(s){o(null,s!=null?{token:"blank",value:"_:"+E}:null)}):o(null,r)})(null,function(r,o){u(o)})},Lexicon.prototype.clear=function(E){var u=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,N.seq(function(e){new l(2,function(r){u.uris=r,e()})},function(e){new l(2,function(r){u.literals=r,e()})},function(e){new l(2,function(r){u.knownGraphs=r,e()})},function(e){new l(2,function(r){u.oidUris=r,e()})},function(e){new l(2,function(r){u.oidLiterals=r,e()})},function(e){new l(2,function(r){u.oidBlanks=r,e()})})(function(){E?.()})},Lexicon.prototype.unregister=function(E,u,e){var r=this;N.seq(function(o){r._unregisterTerm(E.subject.token,u.subject,o)},function(o){r._unregisterTerm(E.predicate.token,u.predicate,o)},function(o){r._unregisterTerm(E.object.token,u.object,o)},function(o){E.graph!=null?r._unregisterTerm(E.graph.token,u.graph,o):o()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(E,u,e){var r=this;if(E==="uri")if(u!=this.defaultGraphOid){var o="u"+u;r.oidUris.search(o,function(s){r.uris.search(s,function(c){var v=c[1];""+c[0]==""+u?v===0?N.seq(function(b){r.oidUris.delete(o,function(){b()})},function(b){r.uris.delete(s,function(){b()})},function(b){r.knownGraphs.delete(u,function(){b()})})(function(){e()}):r.uris.insert(s,[u,v-1],function(){e()}):e()})})}else e();else E==="literal"?(this.oidCounter++,o="l"+u,r.oidLiterals.search(o,function(s){r.literals.search(s,function(c){var v=c[1];""+c[0]==""+u?v===0?N.seq(function(b){r.oidLiterals.delete(o,function(){b()})},function(b){r.literals.delete(s,function(){b()})})(function(){e()}):r.literals.insert(s,[u,v-1],function(){e()}):e()})})):E==="blank"?r.oidBlanks.delete(""+u,function(){e()}):e()},ee.exports={Lexicon}},{"./btree":139,"./utils":156}],143:[function(P,ee,X){if(!P("./utils").isWorker()){var N=P("http"),l=P("https"),E=P("url");NetworkTransport={load:function(u,e,r,o){var s=o??3,c=E.parse(u,!0,!0),v={host:c.host,hostname:c.hostname,method:"GET",path:c.path,headers:{host:c.hostname,Accept:e}},b=null;c.protocol==="http:"?(v.port=c.port||80,b=N):c.protocol==="https:"&&(v.port=c.port||443,b=l);var d=b.request(v,function(g){var f=g.headers,O="";if((""+g.statusCode)[0]=="2")g.on("end",function(){r(null,{headers:f,data:O})}),g.on("data",function(j){O+=j});else if((""+g.statusCode)[0]=="3")if(s==0)r(new Error("Too many redirections"));else{var I=f.Location||f.location;I!=null?NetworkTransport.load(I,e,r,s-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+g.statusCode))});d.on("error",r),d.end()}},ee.exports={NetworkTransport}}},{"./utils":156,http:111,https:34,url:132}],144:[function(P,ee,X){ee.exports=function(){"use strict";function N(l,E,u,e){this.message=l,this.expected=E,this.found=u,this.location=e,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,N)}return function(l,E){function u(){this.constructor=l}u.prototype=E.prototype,l.prototype=new u}(N,Error),N.buildMessage=function(l,E){var u={literal:function(s){return'"'+r(s.text)+'"'},class:function(s){var c,v="";for(c=0;c<s.parts.length;c++)v+=s.parts[c]instanceof Array?o(s.parts[c][0])+"-"+o(s.parts[c][1]):o(s.parts[c]);return"["+(s.inverted?"^":"")+v+"]"},any:function(s){return"any character"},end:function(s){return"end of input"},other:function(s){return s.description}};function e(s){return s.charCodeAt(0).toString(16).toUpperCase()}function r(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+e(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+e(c)})}function o(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+e(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+e(c)})}return"Expected "+function(s){var c,v,b,d=new Array(s.length);for(c=0;c<s.length;c++)d[c]=(b=s[c],u[b.type](b));if(d.sort(),d.length>0){for(c=1,v=1;c<d.length;c++)d[c-1]!==d[c]&&(d[v]=d[c],v++);d.length=v}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(l)+" but "+function(s){return s?'"'+r(s)+'"':"end of input"}(E)+" found."},{SyntaxError:N,parse:function(l,E){E=E!==void 0?E:{};var u,e={},r={DOCUMENT:wa},o=wa,s=me("[1] QueryUnit"),c=me("[2] Query"),v=function(n,a,h){return{token:"query",kind:"query",prologue:n,units:[a],inlineData:h}},b=me("[3] Prologue"),d=function(n,a){return{token:"prologue",base:n,prefixes:a}},g=me("[4] BaseDecl"),f="BASE",O=ve("BASE",!1),I="base",j=ve("base",!1),D=function(n){dv(n);var a={token:"base"};return a.value=n,a},A=me("[5] PrefixDecl"),C="PREFIX",Q=ve("PREFIX",!1),q="prefix",H=ve("prefix",!1),B=function(n,a){pv(n,a);var h={token:"prefix"};return h.prefix=n,h.local=a,h},Z=me("[6] SelectQuery"),se=function(n,a,h,y){for(var x={named:[],implicit:[]},k=0;k<a.length;k++){var _=a[k];_.kind==="default"?x.implicit.push(_.graph):x.named.push(_.graph)}x.named.length===0&&x.implicit.length===0&&x.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var T={kind:"select",token:"executableunit"};return T.dataset=x,T.projection=n.vars,T.modifier=n.modifier,T.pattern=h,y!=null&&y.limit!=null&&(T.limit=y.limit),y!=null&&y.offset!=null&&(T.offset=y.offset),y!=null&&y.order!=null&&y.order!=""&&(T.order=y.order),y!=null&&y.group!=null&&(T.group=y.group),T},ae=me("[7] SubSelect"),ye=function(n,a,h){var y={kind:"select",token:"subselect"};return y.projection=n.vars,y.modifier=n.modifier,y.pattern=a,h!=null&&h.limit!=null&&(y.limit=h.limit),h!=null&&h.offset!=null&&(y.offset=h.offset),h!=null&&h.order!=null&&h.order!=""&&(y.order=h.order),h!=null&&h.group!=null&&(y.group=h.group),y},fe=me("[8] SelectClause"),z="SELECT",U=ve("SELECT",!1),W="select",K=ve("select",!1),Y="DISTINCT",le=ve("DISTINCT",!1),re="distinct",ue=ve("distinct",!1),pe="REDUCED",ge=ve("REDUCED",!1),we="reduced",$=ve("reduced",!1),w="(",L=ve("(",!1),G="AS",te=ve("AS",!1),ne="as",ie=ve("as",!1),he=")",be=ve(")",!1),_e="*",je=ve("*",!1),Re=function(n,a){var h=[];if(a.length===3&&a[1]==="*")return{vars:[{token:"variable",kind:"*"}],modifier:nl(n)};for(var y=0;y<a.length;y++){var x=a[y];x.length===3?h.push({token:"variable",kind:"var",value:x[1]}):h.push({token:"variable",kind:"aliased",expression:x[3],alias:x[7]})}return{vars:h,modifier:nl(n)}},Ae=me("[9] ConstructQuery"),xe="CONSTRUCT",Ne=ve("CONSTRUCT",!1),Oe="construct",Ge=ve("construct",!1),Be=function(n,a,h,y){for(var x={named:[],implicit:[]},k=0;k<a.length;k++){var _=a[k];_.kind==="default"?x.implicit.push(_.graph):x.named.push(_.graph)}x.named.length===0&&x.implicit.length===0&&x.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var T={kind:"construct",token:"executableunit"};return T.dataset=x,T.template=n,T.pattern=h,y!=null&&y.limit!=null&&(T.limit=y.limit),y!=null&&y.offset!=null&&(T.offset=y.offset),y!=null&&y.order!=null&&y.order!=""&&(T.order=y.order),T},Xe="WHERE",ut=ve("WHERE",!1),We="where",st=ve("where",!1),it="{",Ze=ve("{",!1),He="}",tt=ve("}",!1),dr=function(n,a,h){for(var y={named:[],implicit:[]},x=0;x<n.length;x++){var k=n[x];k.kind==="default"?y.implicit.push(k.graph):y.named.push(k.graph)}y.named.length===0&&y.implicit.length===0&&y.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var _={kind:"construct",token:"executableunit"};return _.dataset=y,_.template=a,_.pattern={token:"basicgraphpattern",triplesContext:a.triplesContext},h!=null&&h.limit!=null&&(_.limit=h.limit),h!=null&&h.offset!=null&&(_.offset=h.offset),h!=null&&h.order!=null&&h.order!=""&&(_.order=h.order),_},hr=me("[10] DescribeQuery"),Tt="DESCRIBE",tr=ve("DESCRIBE",!1),Rt=me("[11] AskQuery"),Nt="ASK",rr=ve("ASK",!1),nr="ask",yr=ve("ask",!1),ir=function(n,a){for(var h={named:[],implicit:[]},y=0;y<n.length;y++){var x=n[y];x.kind==="implicit"?h.implicit.push(x.graph):h.named.push(x.graph)}h.named.length===0&&h.implicit.length===0&&h.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var k={kind:"ask",token:"executableunit"};return k.dataset=h,k.pattern=a,k},vr=me("[12] DatasetClause"),Ot="FROM",gr=ve("FROM",!1),Lt="from",Ie=ve("from",!1),Je=function(n){return n},_t=me("[13] DefaultGraphClause"),br=function(n){return{graph:n,kind:"default",token:"graphClause"}},ol=me("[14] NamedGraphClause"),Dt="NAMED",pn=ve("NAMED",!1),Pt="named",dn=ve("named",!1),sl=function(n){return{graph:n,kind:"named",token:"graphCluase"}},al=me("[15] SourceSelector"),ll=me("[16] WhereClause"),ui=function(n){return n},ul=me("[17] SolutionModifier"),cl=function(n,a,h){var y={};return h!=null&&(h.limit!=null&&(y.limit=h.limit),h.offset!=null&&(y.offset=h.offset)),n!=null&&(y.group=n),y.order=a,y},fl=me("[18] GroupClause"),ci="GROUP",pl=ve("GROUP",!1),fi="group",dl=ve("group",!1),mr="BY",pi=ve("BY",!1),xr="by",di=ve("by",!1),hl=function(n){return n},yl=me("[19] GroupCondition"),vl=function(n){return n},gl=function(n){return n},bl=function(n,a){return a.length!=0?{token:"aliased_expression",expression:n,alias:a[2]}:n},hi=function(n){return n},ml=me("[20] HavingClause"),yi="HAVING",xl=ve("HAVING",!1),wl=me("[21] HavingCondition"),_l=me("[22] OrderClause"),vi="ORDER",kl=ve("ORDER",!1),gi="order",El=ve("order",!1),Al=function(n){return n},Sl=me("[23] OrderCondition"),bi="ASC",jl=ve("ASC",!1),mi="asc",Tl=ve("asc",!1),xi="DESC",Fl=ve("DESC",!1),wi="desc",Il=ve("desc",!1),Cl=function(n,a){return{direction:n.toUpperCase(),expression:a}},Rl=function(n){return n.token==="var"&&(n={token:"expression",expressionType:"atomic",primaryexpression:"var",value:n}),{direction:"ASC",expression:n}},Nl=me("[24] LimitOffsetClauses"),Ol=function(n){for(var a={},h=0;h<n.length;h++){var y=n[h];y!=null&&y.limit!=null?a.limit=y.limit:y!=null&&y.offset!=null&&(a.offset=y.offset)}return a},Ll=me("[25] LimitClause"),_i="LIMIT",Dl=ve("LIMIT",!1),ki="limit",Pl=ve("limit",!1),Ml=function(n){return{limit:parseInt(n.value)}},Ql=me("[26] OffsetClause"),Ei="OFFSET",Bl=ve("OFFSET",!1),Ai="offset",Ul=ve("offset",!1),Gl=function(n){return{offset:parseInt(n.value)}},ql=me("[27] BindingsClause"),Si="BINDINGS",Hl=ve("BINDINGS",!1),Jl=me("[28] BindingValue"),wr="UNDEF",ji=ve("UNDEF",!1),zl=me("[28]	ValuesClause	  ::=	( 'VALUES' DataBlock )?"),_r="VALUES",Ti=ve("VALUES",!1),kr="values",Fi=ve("values",!1),Vl=function(n){return n!=null?n[1]:null},Wl=me("[29] UpdateUnit"),Xl=me("[30] Update"),bt=";",mt=ve(";",!1),Kl=function(n,a,h){var y={token:"query",kind:"update"};y.prologue=n;var x=[a];return h!=null&&h.length!=null&&h[3]!=null&&h[3].units!=null&&(x=x.concat(h[3].units)),y.units=x,y},$l=me("[31] Update1"),Zl=me("[32] Load"),Ii="LOAD",Yl=ve("LOAD",!1),Ci="load",eu=ve("load",!1),Ri="INTO",tu=ve("INTO",!1),Ni="into",ru=ve("into",!1),nu=function(n,a){var h={kind:"load",token:"executableunit"};return h.sourceGraph=n,a!=null&&(h.destinyGraph=a[2]),h},iu=me("[33] Clear"),Oi="CLEAR",ou=ve("CLEAR",!1),Li="clear",su=ve("clear",!1),Mt="SILENT",hn=ve("SILENT",!1),Qt="silent",yn=ve("silent",!1),au=function(n){var a={kind:"clear",token:"executableunit"};return a.destinyGraph=n,a},lu=me("[34] Drop"),Di="DROP",uu=ve("DROP",!1),Pi="drop",cu=ve("drop",!1),fu=function(n){var a={kind:"drop",token:"executableunit"};return a.destinyGraph=n,a},pu=me("[35] Create"),Mi="CREATE",du=ve("CREATE",!1),Qi="create",hu=ve("create",!1),yu=function(n){var a={kind:"create",token:"executableunit"};return a.destinyGraph=n,a},vu=me("[36] InsertData"),Er="INSERT",Bi=ve("INSERT",!1),Ar="insert",Ui=ve("insert",!1),Sr="DATA",Gi=ve("DATA",!1),jr="data",qi=ve("data",!1),gu=function(n){var a={kind:"insertdata",token:"executableunit"};return a.quads=n,a},bu=me("[37] DeleteData"),Bt="DELETE",vn=ve("DELETE",!1),Ut="delete",gn=ve("delete",!1),mu=function(n){var a={kind:"deletedata",token:"executableunit"};return a.quads=n,a},xu=me("[38] DeleteWhere"),wu=function(n){var a={kind:"modify"};a.pattern=n,a.with=null,a.using=null;var h=[],y=n.patterns[0];y=y.triplesContext==null&&y.patterns!=null?y.patterns[0].triplesContext:y.triplesContext;for(var x=0;x<y.length;x++){var k={},_=y[x];k.subject=_.subject,k.predicate=_.predicate,k.object=_.object,k.graph=_.graph,h.push(k)}return a.delete=h,a},_u=me("[39] Modify"),Hi="WITH",ku=ve("WITH",!1),Ji="with",Eu=ve("with",!1),Au=function(n,a,h,y){var x={kind:"modify"};return x.with=n!=""&&n!=null?n[2]:null,a.length!==3||a[2]!==""&&a[2]!=null?a.length===3&&a[0].length!=null&&a[1].length!=null&&a[2].length!=null?(x.delete=a[0],x.insert=a[2]):(x.insert=a,x.delete=null):(x.delete=a[0],x.insert=null),h!=""&&(x.using=h),x.pattern=y,x},Su=me("[40] DeleteClause"),zi=function(n){return n},ju=me("[41] InsertClause"),Tu=me("[42] UsingClause"),Vi="USING",Fu=ve("USING",!1),Wi="using",Iu=ve("using",!1),Cu=function(n){return n.length!=null?{kind:"named",uri:n[2]}:{kind:"default",uri:n}},Ru=me("[43] GraphRef"),Gt="GRAPH",bn=ve("GRAPH",!1),qt="graph",mn=ve("graph",!1),Nu=function(n){return n},Ou=me("[44] GraphRefAll"),Xi="DEFAULT",Lu=ve("DEFAULT",!1),Ki="default",Du=ve("default",!1),Pu=function(){return"default"},Mu=function(){return"named"},$i="ALL",Qu=ve("ALL",!1),Zi="all",Bu=ve("all",!1),Uu=function(){return"all"},Gu=me("[45] QuadPattern"),Yi=function(n){return n.quadsContext},qu=me("[46] QuadData"),Hu=me("[47] Quads"),rt=".",nt=ve(".",!1),Ju=function(n,a){var h=[];if(n!=null&&n.triplesContext!=null)for(var y=0;y<n.triplesContext.length;y++)(x=n.triplesContext[y]).graph=null,h.push(x);if(a&&a.length>0&&a[0].length>0&&(h=h.concat(a[0][0].quadsContext),a[0][2]!=null&&a[0][2].triplesContext!=null))for(y=0;y<a[0][2].triplesContext.length;y++){var x;(x=a[0][2].triplesContext[y]).graph=null,h.push(x)}return{token:"quads",quadsContext:h}},zu=me("[48] QuadsNotTriples"),Vu=function(n,a){var h=[];if(a!=null)for(var y=0;y<a.triplesContext.length;y++){var x=a.triplesContext[y];x.graph=n,h.push(x)}return{token:"quadsnottriples",quadsContext:h}},Wu=me("[49] TriplesTemplate"),Xu=function(n,a){var h=n.triplesContext;return a!=null&&typeof a=="object"&&a.length!=null&&a[3]!=null&&a[3].triplesContext!=null&&(h=h.concat(a[3].triplesContext)),{token:"triplestemplate",triplesContext:h}},Ku=me("[50] GroupGraphPattern"),xn=function(n){return n},$u=me("[51] GroupGraphPatternSub"),Zu=function(n,a){var h=[];n!=null&&n!=[]&&h.push(n);for(var y=0;y<a.length;y++)for(var x=0;x<a[y].length;x++)a[y][x]!=null&&a[y][x].token!=null&&h.push(a[y][x]);var k=[],_=[],T=[],M=[];for(y=0;y<h.length;y++)if(h[y].token!=="triplespattern"&&h[y].token!=="filter"&&h[y].token!=="bind"){if(_.length!=0||T.length!=0){var V=[];for(x=0;x<_.length;x++)V=V.concat(_[x].triplesContext);V.length>0&&k.push({token:"basicgraphpattern",triplesContext:V}),_=[]}k.push(h[y])}else h[y].token==="triplespattern"?_.push(h[y]):h[y].token==="bind"?M.push(h[y]):T.push(h[y]);if(_.length!=0||T.length!=0){for(V=[],x=0;x<_.length;x++)V=V.concat(_[x].triplesContext);V.length>0&&k.push({token:"basicgraphpattern",triplesContext:V})}return{token:"groupgraphpattern",patterns:k,filters:T,binds:M}},Yu=me("[54] TriplesBlock"),ec=function(n,a){var h=n.triplesContext;return a!=null&&typeof a=="object"&&a!=null&&a.length!=null&&a[2]!=null&&a[2].triplesContext!=null&&(h=h.concat(a[2].triplesContext)),{token:"triplespattern",triplesContext:h}},tc=me("[53] GraphPatternNotTriples"),rc=me("[54] OptionalGraphPattern"),eo="OPTIONAL",nc=ve("OPTIONAL",!1),to="optional",ic=ve("optional",!1),oc=function(n){return{token:"optionalgraphpattern",value:n}},sc=me("[55] GraphGraphPattern"),ac=function(n,a){for(var h=0;h<a.patterns.length;h++)for(var y=a.patterns[h],x=0;x<y.triplesContext.length;x++)y.triplesContext[x].graph=n;return a.token="groupgraphpattern",a},lc=me("[56] ServiceGraphPattern"),ro="SERVICE",uc=ve("SERVICE",!1),cc=function(n,a){return{token:"servicegraphpattern",status:"todo",value:[n,a]}},fc=me("[57] MinusGraphPattern"),no="MINUS",pc=ve("MINUS",!1),io="minus",dc=ve("minus",!1),hc=function(n){return{token:"minusgraphpattern",status:"todo",value:n}},yc=me("[58] GroupOrUnionGraphPattern"),Tr="UNION",oo=ve("UNION",!1),Fr="union",so=ve("union",!1),vc=function(n,a){if(a.length===0)return n;for(var h={token:"graphunionpattern",value:[n]},y=0;y<a.length;y++)y==a.length-1?h.value.push(a[y][3]):(h.value.push(a[y][3]),h={token:"graphunionpattern",value:[h]});return h},gc=me("[59] Filter"),ao="FILTER",bc=ve("FILTER",!1),lo="filter",mc=ve("filter",!1),xc=function(n){return{token:"filter",value:n}},wc=me("[60] Bind"),uo="BIND",_c=ve("BIND",!1),co="bind",kc=ve("bind",!1),Ec=function(n,a){return{token:"bind",expression:n,as:a}},Ac=me("[60] Constraint"),Sc=me("[61] InlineData"),jc=function(n){return n},Tc=me("[62] DataBlock"),Fc=me("[63] InlineDataOneVar"),Ic=function(n,a){return{token:"inlineData",values:[{var:n,value:a}]}},Cc=me("[64] InlineDataFull"),Rc=function(n,a){return{token:"inlineData",values:[],todo:!0}},Nc=me("[65] DataBlockValue"),Oc=me("[61] FunctionCall"),Lc=function(n,a){var h={token:"expression",expressionType:"irireforfunction"};return h.iriref=n,h.args=a.value,h},Dc=me("[62] ArgList"),fo=function(){var n={token:"args",value:[]};return n},Ke=",",$e=ve(",",!1),Pc=function(n,a,h){for(var y=[],x=0;x<h.length;x++)y.push(h[x][2]);var k={token:"args"};return k.value=[a].concat(y),n!=null&&n.toUpperCase()==="DISTINCT"?k.distinct=!0:k.distinct=!1,k},Mc=me("[63] ExpressionList"),Qc=function(n,a){for(var h=[],y=0;y<a.length;y++)h.push(a[y][2]);var x={token:"args"};return x.value=[n].concat(h),x},Bc=me("[64] ConstructTemplate"),Uc=function(n){return n},Gc=me("[65] ConstructTriples"),qc=function(n,a){var h=n.triplesContext;return a!=null&&typeof a=="object"&&a.length!=null&&a[3]!=null&&a[3].triplesContext!=null&&(h=h.concat(a[3].triplesContext)),{token:"triplestemplate",triplesContext:h}},Hc=me("[66] TriplesSameSubject"),Jc=function(n,a){var h=a.triplesContext,y=n;if(a.pairs)for(var x=0;x<a.pairs.length;x++){var k=a.pairs[x],_=null;k[1].length!=null&&(k[1]=k[1][0]),y.token&&y.token==="triplesnodecollection"?(_={subject:y.chainSubject[0],predicate:k[0],object:k[1]},h.push(_),h=h.concat(y.triplesContext)):(_={subject:y,predicate:k[0],object:k[1]},h.push(_))}var T={token:"triplessamesubject"};return T.triplesContext=h,T.chainSubject=y,T},zc=function(n,a){var h=n.triplesContext,y=n.chainSubject;if(a.pairs)for(var x=0;x<a.pairs.length;x++){var k=a.pairs[x];if(k[1].length!=null&&(k[1]=k[1][0]),n.token==="triplesnodecollection")for(var _=0;_<y.length;_++){var T=y[_];if(T.triplesContext!=null){var M={subject:T.chainSubject,predicate:k[0],object:k[1]};h.concat(T.triplesContext)}else M={subject:y[_],predicate:k[0],object:k[1]},h.push(M)}else M={subject:y,predicate:k[0],object:k[1]},h.push(M)}var V={token:"triplessamesubject"};return V.triplesContext=h,V.chainSubject=y,V},Vc=me("[83] PropertyListPathNotEmpty"),Wc=function(n,a,h){for(var y={token:"propertylist"},x=[],k=[],_=0;_<a.length;_++)a[_].triplesContext!=null?(x=x.concat(a[_].triplesContext),a[_].token==="triplesnodecollection"&&a[_].chainSubject.length!=null?k.push([n,a[_].chainSubject[0]]):k.push([n,a[_].chainSubject])):k.push([n,a[_]]);for(_=0;_<h.length;_++)for(var T=h[_][3],M=T[0],V=T[2]||[],J=0;J<V.length;J++)V[J].triplesContext!=null?(x=x.concat(V[J].triplesContext),k.push([M,V[J].chainSubject])):k.push([M,V[J]]);return y.pairs=k,y.triplesContext=x,y},Xc=me("[67] PropertyListNotEmpty"),Kc=function(n,a,h){for(var y={token:"propertylist"},x=[],k=[],_=0;_<a.length;_++)a[_].triplesContext!=null?(x=x.concat(a[_].triplesContext),a[_].token==="triplesnodecollection"&&a[_].chainSubject.length!=null?k.push([n,a[_].chainSubject[0]]):k.push([n,a[_].chainSubject])):k.push([n,a[_]]);for(_=0;_<h.length;_++)for(var T=h[_][3],M=T[0],V=T[2]||[],J=0;J<V.length;J++)V[J].triplesContext!=null?(x=x.concat(V[J].triplesContext),k.push([M,V[J].chainSubject])):k.push([M,V[J]]);return y.pairs=k,y.triplesContext=x,y},$c=me("[68] PropertyList"),Zc=me("[86] ObjectListPath"),Yc=function(n,a){var h=[];h.push(n);for(var y=0;y<a.length;y++)for(var x=0;x<a[y].length;x++)typeof a[y][x]=="object"&&a[y][x].token!=null&&h.push(a[y][x]);return h},ef=me("[69] ObjectList"),tf=function(n,a){var h=[];h.push(n);for(var y=0;y<a.length;y++)for(var x=0;x<a[y].length;x++)typeof a[y][x]=="object"&&a[y][x].token!=null&&h.push(a[y][x]);return h},rf=me("[87] ObjectPath"),nf=me("[70] Object"),of=me("[71] Verb"),Ir="a",Cr=ve("a",!1),po=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},sf=me("[72] TriplesSameSubjectPath"),af=function(n,a){var h=a.triplesContext,y=n;if(a.pairs)for(var x=0;x<a.pairs.length;x++){var k=a.pairs[x],_=null;k[1].length!=null&&(k[1]=k[1][0]),y.token&&y.token==="triplesnodecollection"?((_={subject:y.chainSubject[0],predicate:k[0],object:k[1]}).predicate.token==="path"&&_.predicate.kind==="element"&&(_.predicate=_.predicate.value),h.push(_),h=h.concat(y.triplesContext)):((_={subject:y,predicate:k[0],object:k[1]}).predicate.token==="path"&&_.predicate.kind==="element"&&(_.predicate=_.predicate.value),h.push(_))}var T={token:"triplessamesubject"};return T.triplesContext=h,T.chainSubject=y,T},lf=function(n,a){var h=n.triplesContext,y=n.chainSubject;if(a!=null&&a.pairs!=null)for(var x=0;x<a.pairs.length;x++){var k=a.pairs[x];if(k[1].length!=null&&(k[1]=k[1][0]),n.token==="triplesnodecollection")for(var _=0;_<y.length;_++){var T=y[_];if(T.triplesContext!=null){var M={subject:T.chainSubject,predicate:k[0],object:k[1]};h.concat(T.triplesContext)}else M={subject:y[_],predicate:k[0],object:k[1]},h.push(M)}else M={subject:y,predicate:k[0],object:k[1]},h.push(M)}var V={token:"triplessamesubject"};return V.triplesContext=h,V.chainSubject=y,V},uf=me("[73] PropertyListNotEmptyPath"),cf=function(n,a,h){for(var y={token:"propertylist"},x=[],k=[],_=0;_<a.length;_++)a[_].triplesContext!=null?(x=x.concat(a[_].triplesContext),a[_].token==="triplesnodecollection"&&a[_].chainSubject.length!=null?k.push([n,a[_].chainSubject[0]]):k.push([n,a[_].chainSubject])):k.push([n,a[_]]);for(_=0;_<h.length;_++)for(var T=h[_][3],M=T[0],V=T[1]||[],J=0;J<V.length;J++)V[J].triplesContext!=null?(x=x.concat(V[J].triplesContext),k.push([M,V[J].chainSubject])):k.push([M,V[J]]);return y.pairs=k,y.triplesContext=x,y},ff=me("[74] PropertyListPath"),pf=me("[75]"),df=function(n){var a={token:"path",kind:"element"};return a.value=n,n},hf=me("[76] VerbSimple"),yf=me("[77] Path"),vf=me("[78] PathAlternative"),Rr="|",Nr=ve("|",!1),gf=function(n,a){if(a==null||a.length===0)return n;for(var h=[],y=0;y<a.length;y++)h.push(a[1]);var x={token:"path",kind:"alternative"};return x.value=h,x},bf=me("[79] PathSequence"),Ft="/",It=ve("/",!1),mf=function(n,a){if(a==null||a.length===0)return n;for(var h=[n],y=0;y<a.length;y++)h.push(a[y][1]);var x={token:"path",kind:"sequence"};return x.value=h,x},xf=me("[88] PathElt"),wf=function(n,a){if(n.token&&n.token!="path"&&a=="")return n;if(n.token&&n.token!=h&&a!=""){var h={token:"path",kind:"element"};return h.value=n,h.modifier=a,h}return n.modifier=a,n},_f=me("[81] PathEltOrInverse"),ho="^",yo=ve("^",!1),kf=function(n){var a={token:"path",kind:"inversePath"};return a.value=n,a},Ef=me("[82] PathMod"),wn="?",_n=ve("?",!1),kt="+",Et=ve("+",!1),Af=me("[83] PathPrimary"),kn="!",En=ve("!",!1),Sf=me("[85] PathOneInPropertySet"),jf=me("[86] Integer"),Tf=me("[100] TriplesNodePath"),Ff=function(n){for(var a=[],h=[],y=null,x=0;x<n.length;x++){lt++;var k=null;n[x].chainSubject==null&&n[x].triplesContext==null?k=n[x]:(k=n[x].chainSubject,a=a.concat(n[x].triplesContext)),y={subject:{token:"blank",value:"_:"+lt},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:k},x==0&&h.push(y.subject),a.push(y),y=x===n.length-1?{subject:{token:"blank",value:"_:"+lt},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+lt},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(lt+1)}},a.push(y)}return{token:"triplesnodecollection",triplesContext:a,chainSubject:h}},If=me("[87] TriplesNode"),Cf=function(n){for(var a=[],h=[],y=null,x=0;x<n.length;x++){lt++;var k=null;n[x].chainSubject==null&&n[x].triplesContext==null?k=n[x]:(k=n[x].chainSubject,a=a.concat(k.triplesContext)),y={subject:{token:"blank",value:"_:"+lt},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:k},x==0&&h.push(y.subject),a.push(y),y=x===n.length-1?{subject:{token:"blank",value:"_:"+lt},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+lt},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(lt+1)}},a.push(y)}return{token:"triplesnodecollection",triplesContext:a,chainSubject:h}},Rf=me("[101] BlankNodePropertyListPath"),An="[",Sn=ve("[",!1),jn="]",Tn=ve("]",!1),Nf=function(n){for(var a={token:"blank",value:"_:"+ ++lt},h=[],y=0;y<n.pairs.length;y++){var x=n.pairs[y],k={};k.subject=a,k.predicate=x[0],x[1].length!=null&&(x[1]=x[1][0]),k.object=x[1],h.push(k)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:n.triplesContext.concat(h),chainSubject:a}},Of=me("[88] BlankNodePropertyList"),Lf=function(n){for(var a={token:"blank",value:"_:"+ ++lt},h=[],y=0;y<n.pairs.length;y++){var x=n.pairs[y],k={};k.subject=a,k.predicate=x[0],x[1].length!=null&&(x[1]=x[1][0]),k.object=x[1],h.push(k)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:n.triplesContext.concat(h),chainSubject:a}},Df=me("[103] CollectionPath"),vo=function(n){return n},Pf=me("[89] Collection"),Mf=me("[105] GraphNodePath"),go=function(n){return n[1]},Qf=me("[90] GraphNode"),Bf=me("[91] VarOrTerm"),Uf=me("[92] VarOrIRIref"),Gf=me("[93] Var"),qf=function(n){var a={token:"var"};return a.value=n,a},Hf=me("[94] GraphTerm"),Jf=me("[95] Expression"),zf=me("[96] ConditionalOrExpression"),Or="||",bo=ve("||",!1),Vf=function(n,a){if(a.length===0)return n;for(var h={token:"expression",expressionType:"conditionalor"},y=[n],x=0;x<a.length;x++)y.push(a[x][3]);return h.operands=y,h},Wf=me("[97] ConditionalAndExpression"),Lr="&&",mo=ve("&&",!1),Xf=function(n,a){if(a.length===0)return n;for(var h={token:"expression",expressionType:"conditionaland"},y=[n],x=0;x<a.length;x++)y.push(a[x][3]);return h.operands=y,h},Kf=me("[98] ValueLogical"),$f=me("[99] RelationalExpression"),Dr="=",Pr=ve("=",!1),Mr="!=",xo=ve("!=",!1),Fn="<",In=ve("<",!1),Cn=">",Rn=ve(">",!1),Qr="<=",wo=ve("<=",!1),Br=">=",_o=ve(">=",!1),Ur="I",Gr=ve("I",!1),qr="i",Hr=ve("i",!1),Ht="N",Jt=ve("N",!1),zt="n",Vt=ve("n",!1),ko="O",Eo=ve("O",!1),Ao="o",So=ve("o",!1),jo="T",To=ve("T",!1),Fo="t",Io=ve("t",!1),Zf=function(n,a){if(a.length===0)return n;if(a[0][1]==="i"||a[0][1]==="I"||a[0][1]==="n"||a[0][1]==="N"){var h={};if(a[0][1]==="i"||a[0][1]==="I"){var y="=";h.expressionType="conditionalor"}else y="!=",h.expressionType="conditionaland";for(var x=n,k=[],_=0;_<a[0].length;_++)if(a[0][_].token==="args"){k=a[0][_].value;break}h.token="expression",h.operands=[];for(var T=0;T<k.length;T++){var M={token:"expression",expressionType:"relationalexpression"};M.operator=y,M.op1=x,M.op2=k[T],h.operands.push(M)}return h}return(h={expressionType:"relationalexpression"}).operator=a[0][1],h.op1=n,h.op2=a[0][3],h.token="expression",h},Yf=me("[100] NumericExpression"),ep=me("[101] AdditiveExpression"),dt="-",ht=ve("-",!1),tp=function(n,a){if(a.length===0)return n;var h={token:"expression",expressionType:"additiveexpression"};h.summand=n,h.summands=[];for(var y=0;y<a.length;y++){var x=a[y],k={};if(x.length==4&&typeof x[1]=="string")k.operator=x[1],k.expression=x[3];else{var _={},T=k[0],M=(k[1][1],k[1][3]);T.value<0?(k.operator="-",T.value=-T.value):k.operator="+",_.token="expression",_.expressionType="multiplicativeexpression",_.operator=T,_.factors=[{operator:null,expression:M}],k.expression=_}h.summands.push(k)}return h},rp=me("[102] MultiplicativeExpression"),np=function(n,a){if(a.length===0)return n;var h={token:"expression",expressionType:"multiplicativeexpression"};h.factor=n,h.factors=[];for(var y=0;y<a.length;y++){var x=a[y],k={};k.operator=x[1],k.expression=x[3],h.factors.push(k)}return h},ip=me("[103] UnaryExpression"),op=function(n){var a={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};return a.expression=n,a},sp=function(n){var a={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};return a.expression=n,a},ap=function(n){var a={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return a.expression=n,a},lp=me("[104] PrimaryExpression"),up=function(n){var a={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};return a.value=n,a},cp=function(n){var a={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};return a.value=n,a},fp=function(n){var a={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return a.value=n,a},pp=function(n){var a={token:"expression",expressionType:"atomic",primaryexpression:"var"};return a.value=n,a},dp=me("[105] BrackettedExpression"),hp=function(n){return n},yp=me("[106] BuiltInCall"),Co="STR",vp=ve("STR",!1),Ro="str",gp=ve("str",!1),bp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"str"};return a.args=[n],a},No="LANG",mp=ve("LANG",!1),Oo="lang",xp=ve("lang",!1),wp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"lang"};return a.args=[n],a},Lo="LANGMATCHES",_p=ve("LANGMATCHES",!1),Do="langmatches",kp=ve("langmatches",!1),Ep=function(n,a){var h={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return h.args=[n,a],h},Po="DATATYPE",Ap=ve("DATATYPE",!1),Mo="datatype",Sp=ve("datatype",!1),jp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return a.args=[n],a},Qo="BOUND",Tp=ve("BOUND",!1),Bo="bound",Fp=ve("bound",!1),Ip=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"bound"};return a.args=[n],a},Uo="IRI",Cp=ve("IRI",!1),Go="iri",Rp=ve("iri",!1),Np=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"iri"};return a.args=[n],a},qo="URI",Op=ve("URI",!1),Ho="uri",Lp=ve("uri",!1),Dp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"uri"};return a.args=[n],a},Jo="BNODE",Pp=ve("BNODE",!1),zo="bnode",Mp=ve("bnode",!1),Qp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return n.length===5?a.args=[n[2]]:a.args=null,a},Vo="COALESCE",Bp=ve("COALESCE",!1),Wo="coalesce",Up=ve("coalesce",!1),Gp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return a.args=n,a},Xo="IF",qp=ve("IF",!1),Ko="if",Hp=ve("if",!1),Jp=function(n,a,h){var y={token:"expression",expressionType:"builtincall",builtincall:"if"};return y.args=[n,a,h],y},$o="ISLITERAL",zp=ve("ISLITERAL",!1),Zo="isliteral",Vp=ve("isliteral",!1),Yo="isLITERAL",Wp=ve("isLITERAL",!1),Xp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return a.args=[n],a},es="ISBLANK",Kp=ve("ISBLANK",!1),ts="isblank",$p=ve("isblank",!1),rs="isBLANK",Zp=ve("isBLANK",!1),Yp=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return a.args=[n],a},ns="SAMETERM",ed=ve("SAMETERM",!1),is="sameterm",td=ve("sameterm",!1),rd=function(n,a){var h={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return h.args=[n,a],h},os="ISURI",nd=ve("ISURI",!1),ss="isuri",id=ve("isuri",!1),as="isURI",od=ve("isURI",!1),ls="ISIRI",sd=ve("ISIRI",!1),us="isiri",ad=ve("isiri",!1),cs="isIRI",ld=ve("isIRI",!1),ud=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return a.args=[n],a},fs="custom:",cd=ve("custom:",!1),ps="CUSTOM:",fd=ve("CUSTOM:",!1),ds=/^[a-zA-Z0-9_]/,hs=Ue([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),pd=function(n,a,h){var y={token:"expression",expressionType:"custom"};y.name=n.join("");for(var x=[],k=0;k<a.length;k++)x.push(a[k][1]);return x.push(h),y.args=x,y},dd=me("[107] RegexExpression"),ys="REGEX",hd=ve("REGEX",!1),vs="regex",yd=ve("regex",!1),vd=function(n,a,h){var y={token:"expression",expressionType:"regex"};return y.text=n,y.pattern=a,h!=null&&(y.flags=h[2]),y},gd=me("[108] ExistsFunc"),Jr="EXISTS",gs=ve("EXISTS",!1),zr="exists",bs=ve("exists",!1),bd=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"exists"};return a.args=[n],a},md=me("[109] NotExistsFunc"),ms="NOT",xd=ve("NOT",!1),xs="not",wd=ve("not",!1),_d=function(n){var a={token:"expression",expressionType:"builtincall",builtincall:"notexists"};return a.args=[n],a},kd=me("[110] Aggregate"),ws="COUNT",Ed=ve("COUNT",!1),_s="count",Ad=ve("count",!1),Sd=function(n,a){var h={token:"expression",expressionType:"aggregate",aggregateType:"count"};return h.distinct=n!=""&&n!=null?"DISTINCT":n,h.expression=a,h},ks="GROUP_CONCAT",jd=ve("GROUP_CONCAT",!1),Es="group_concat",Td=ve("group_concat",!1),As="SEPARATOR",Fd=ve("SEPARATOR",!1),Id=function(n,a,h){var y={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"};return y.distinct=n!=""&&n!=null?"DISTINCT":n,y.expression=a,y.separator=h,y},Ss="SUM",Cd=ve("SUM",!1),js="sum",Rd=ve("sum",!1),Nd=function(n,a){var h={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return h.distinct=n!=""&&n!=null?"DISTINCT":n,h.expression=a,h},Ts="MIN",Od=ve("MIN",!1),Fs="min",Ld=ve("min",!1),Dd=function(n,a){var h={token:"expression",expressionType:"aggregate",aggregateType:"min"};return h.distinct=n!=""&&n!=null?"DISTINCT":n,h.expression=a,h},Is="MAX",Pd=ve("MAX",!1),Cs="max",Md=ve("max",!1),Qd=function(n,a){var h={token:"expression",expressionType:"aggregate",aggregateType:"max"};return h.distinct=n!=""&&n!=null?"DISTINCT":n,h.expression=a,h},Rs="AVG",Bd=ve("AVG",!1),Ns="avg",Ud=ve("avg",!1),Gd=function(n,a){var h={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return h.distinct=n!=""&&n!=null?"DISTINCT":n,h.expression=a,h},qd=me("[117] IRIrefOrFunction"),Hd=function(n,a){var h={token:"expression",expressionType:"irireforfunction"};return h.iriref=n,h.args=a!=null?a.value:a,h},Jd=me("[112] RDFLiteral"),Os="^^",zd=ve("^^",!1),Vd=function(n,a){return typeof a=="string"&&a.length>0?{token:"literal",value:n.value,lang:a.slice(1),type:null}:a!=null&&typeof a=="object"?(a.shift(),{token:"literal",value:n.value,lang:null,type:a[0]}):{token:"literal",value:n.value,lang:null,type:null}},Wd=me("[113] NumericLiteral"),Xd=me("[114] NumericLiteralUnsigned"),Kd=me("[115] NumericLiteralPositive"),$d=me("[116] NumericLiteralNegative"),Zd=me("[117] BooleanLiteral"),Ls="TRUE",Yd=ve("TRUE",!1),Ds="true",eh=ve("true",!1),th=function(){var n={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0};return n},Ps="FALSE",rh=ve("FALSE",!1),Ms="false",nh=ve("false",!1),ih=function(){var n={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1};return n},oh=me("[118] String"),Vr=function(n){return{token:"string",value:n}},sh=me("[119] IRIref"),ah=function(n){return{token:"uri",prefix:null,suffix:null,value:n}},Qs=function(n){return n},lh=me("[120] PrefixedName"),uh=function(n){return{token:"uri",prefix:n[0],suffix:n[1],value:null}},ch=function(n){return{token:"uri",prefix:n,suffix:"",value:null}},fh=me("[121] BlankNode"),ph=function(n){return{token:"blank",value:n}},dh=function(){return{token:"blank",value:"_:"+ ++lt}},hh=me("[122] IRI_REF"),Bs=/^[^<>"{}|\^`\\]/,Us=Ue(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),yh=function(n){return n.join("")},vh=me("[123] PNAME_NS"),or=":",sr=ve(":",!1),gh=me("[124] PNAME_LN"),bh=function(n,a){return[n,a]},mh=me("[125] BLANK_NODE_LABEL"),Gs="_:",xh=ve("_:",!1),wh=function(n){return n},_h=me("[126] VAR1"),qs=function(n){return n},kh=me("[127] VAR2"),Hs="$",Js=ve("$",!1),Eh=me("[128] LANGTAG"),zs="@",Vs=ve("@",!1),Ws=/^[a-zA-Z]/,Xs=Ue([["a","z"],["A","Z"]],!1,!1),Wr=/^[a-zA-Z0-9]/,Xr=Ue([["a","z"],["A","Z"],["0","9"]],!1,!1),Ah=function(n,a){return a.length===0?("@"+n.join("")).toLowerCase():("@"+n.join("")+"-"+a[0][1].join("")).toLowerCase()},Sh=me("[129] INTEGER"),ze=/^[0-9]/,Ve=Ue([["0","9"]],!1,!1),jh=function(n){var a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};return a.value=St(n),a},Th=me("[130] DECIMAL"),Fh=function(n,a,h){var y={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return y.value=St([n,a,h]),y},Ih=function(n,a){var h={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return h.value=St([n,a]),h},Ch=me("[131] DOUBLE"),Rh=function(n,a,h,y){var x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return x.value=St([n,a,h,y]),x},Nh=function(n,a,h){var y={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return y.value=St([n,a,h]),y},Oh=function(n,a){var h={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return h.value=St([n,a]),h},Lh=me("[132] INTEGER_POSITIVE"),Dh=function(n){return n.value="+"+n.value,n},Ph=me("[133] DECIMAL_POSITIVE"),Ks=function(n){return n.value="+"+n.value,n},Mh=me("[134] DOUBLE_POSITIVE"),Qh=me("[135] INTEGER_NEGATIVE"),Nn=function(n){return n.value="-"+n.value,n},Bh=me("[136] DECIMAL_NEGATIVE"),Uh=me("[137] DOUBLE_NEGATIVE"),Gh=me("[138] EXPONENT"),qh=/^[eE]/,Hh=Ue(["e","E"],!1,!1),Jh=/^[+\-]/,zh=Ue(["+","-"],!1,!1),Vh=function(n,a,h){return St([n,a,h])},Wh=me("[139] STRING_LITERAL1"),On="'",Ln=ve("'",!1),$s=/^[^'\\\n\r]/,Zs=Ue(["'","\\",`
`,"\r"],!0,!1),Kr=function(n){return St(n)},Xh=me("[140] STRING_LITERAL2"),Ys='"',ea=ve('"',!1),ta=/^[^"\\\n\r]/,ra=Ue(['"',"\\",`
`,"\r"],!0,!1),Kh=me("[141] STRING_LITERAL_LONG1"),$r="'''",na=ve("'''",!1),ia=/^[^'\\]/,oa=Ue(["'","\\"],!0,!1),$h=me("[142] STRING_LITERAL_LONG2"),Zr='"""',sa=ve('"""',!1),aa=/^[^"\\]/,la=Ue(['"',"\\"],!0,!1),Zh=me("[143] ECHAR"),ua="\\",ca=ve("\\",!1),Yh=/^[tbnrf"']/,ey=Ue(["t","b","n","r","f",'"',"'"],!1,!1),ty=me("[144] NIL"),ry=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},ny=me("[145] WS"),iy=/^[ ]/,oy=Ue([" "],!1,!1),sy=/^[\t]/,ay=Ue(["	"],!1,!1),ly=/^[\r]/,uy=Ue(["\r"],!1,!1),cy=/^[\n]/,fy=Ue([`
`],!1,!1),py=me(" COMMENT"),fa="#",pa=ve("#",!1),da=/^[^\n\r]/,ha=Ue([`
`,"\r"],!0,!1),dy=me("[146] ANON"),hy=me("[147] PN_CHARS_BASE"),yy=/^[A-Z]/,vy=Ue([["A","Z"]],!1,!1),gy=/^[a-z]/,by=Ue([["a","z"]],!1,!1),my=/^[\xC0-\xD6]/,xy=Ue([["\xC0","\xD6"]],!1,!1),wy=/^[\xD8-\xF6]/,_y=Ue([["\xD8","\xF6"]],!1,!1),ky=/^[\xF8-\u02FF]/,Ey=Ue([["\xF8","\u02FF"]],!1,!1),Ay=/^[\u0370-\u037D]/,Sy=Ue([["\u0370","\u037D"]],!1,!1),jy=/^[\u037F-\u1FFF]/,Ty=Ue([["\u037F","\u1FFF"]],!1,!1),Fy=/^[\u200C-\u200D]/,Iy=Ue([["\u200C","\u200D"]],!1,!1),Cy=/^[\u2070-\u218F]/,Ry=Ue([["\u2070","\u218F"]],!1,!1),Ny=/^[\u2C00-\u2FEF]/,Oy=Ue([["\u2C00","\u2FEF"]],!1,!1),Ly=/^[\u3001-\uD7FF]/,Dy=Ue([["\u3001","\uD7FF"]],!1,!1),Py=/^[\uF900-\uFDCF]/,My=Ue([["\uF900","\uFDCF"]],!1,!1),Qy=/^[\uFDF0-\uFFFD]/,By=Ue([["\uFDF0","\uFFFD"]],!1,!1),Uy=/^[\u1000-\uEFFF]/,Gy=Ue([["\u1000","\uEFFF"]],!1,!1),qy=me("[148] PN_CHARS_U"),ya="_",va=ve("_",!1),Hy=me("[149] VARNAME"),Dn=/^[\xB7]/,Pn=Ue(["\xB7"],!1,!1),Mn=/^[\u0300-\u036F]/,Qn=Ue([["\u0300","\u036F"]],!1,!1),Bn=/^[\u203F-\u2040]/,Un=Ue([["\u203F","\u2040"]],!1,!1),Jy=function(n,a){return n+a.join("")},zy=me("[150] PN_CHARS"),Vy=me("[151] PN_PREFIX"),Wy=function(n,a){if(a[a.length-1]==".")throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return n+a.join("")},Xy=me("[152] PN_LOCAL"),Ky=function(n,a){return n+(a||[]).join("")},$y=me("[170] PLX"),Zy=me("[171] PERCENT"),ga="%",ba=ve("%",!1),Yy=function(n){return n.join("")},ev=me("[172] HEX"),tv=/^[A-F]/,rv=Ue([["A","F"]],!1,!1),nv=/^[a-f]/,iv=Ue([["a","f"]],!1,!1),ov=me("[173] PN_LOCAL_ESC"),sv="~",av=ve("~",!1),lv="&",uv=ve("&",!1),cv=function(n){return"\\"+n},t=0,Yr=[{line:1,column:1}],yt=0,Gn=[],m=0;if("startRule"in E){if(!(E.startRule in r))throw new Error(`Can't start parsing from rule "`+E.startRule+'".');o=r[E.startRule]}function ve(n,a){return{type:"literal",text:n,ignoreCase:a}}function Ue(n,a,h){return{type:"class",parts:n,inverted:a,ignoreCase:h}}function me(n){return{type:"other",description:n}}function ma(n){var a,h=Yr[n];if(h)return h;for(a=n-1;!Yr[a];)a--;for(h={line:(h=Yr[a]).line,column:h.column};a<n;)l.charCodeAt(a)===10?(h.line++,h.column=1):h.column++,a++;return Yr[n]=h,h}function xa(n,a){var h=ma(n),y=ma(a);return{start:{offset:n,line:h.line,column:h.column},end:{offset:a,line:y.line,column:y.column}}}function R(n){t<yt||(t>yt&&(yt=t,Gn=[]),Gn.push(n))}function fv(n,a,h){return new N(N.buildMessage(n,a),n,a,h)}function wa(){return function(){var n;return n=function(){var a;return m++,a=function(){var h,y,x,k;return m++,h=t,(y=_a())!==e?(x=function(){var _,T,M,V,J,oe,de,ce,Se,Ee;if(m++,_=t,T=Ea(),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e){for(V=[],J=vt();J!==e;)V.push(J),J=vt();if(V!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if((oe=ar())!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if((ce=lr())!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e?(Ee=function(){var ke,Te,Le,Ce,qe,Fe,Qe,Pe,De;if(m++,ke=t,l.substr(t,8)===Si?(Te=Si,t+=8):(Te=e,m===0&&R(Hl)),Te!==e){for(Le=[],Ce=Ye();Ce!==e;)Le.push(Ce),Ce=Ye();if(Le!==e)if(l.charCodeAt(t)===123?(Ce=it,t++):(Ce=e,m===0&&R(Ze)),Ce!==e){if(qe=[],Fe=t,l.charCodeAt(t)===40?(Qe=w,t++):(Qe=e,m===0&&R(L)),Qe!==e){if(Pe=[],(De=en())!==e)for(;De!==e;)Pe.push(De),De=en();else Pe=e;Pe!==e?(l.charCodeAt(t)===41?(De=he,t++):(De=e,m===0&&R(be)),De!==e?Fe=Qe=[Qe,Pe,De]:(t=Fe,Fe=e)):(t=Fe,Fe=e)}else t=Fe,Fe=e;for(Fe===e&&(Fe=wt());Fe!==e;){if(qe.push(Fe),Fe=t,l.charCodeAt(t)===40?(Qe=w,t++):(Qe=e,m===0&&R(L)),Qe!==e){if(Pe=[],(De=en())!==e)for(;De!==e;)Pe.push(De),De=en();else Pe=e;Pe!==e?(l.charCodeAt(t)===41?(De=he,t++):(De=e,m===0&&R(be)),De!==e?Fe=Qe=[Qe,Pe,De]:(t=Fe,Fe=e)):(t=Fe,Fe=e)}else t=Fe,Fe=e;Fe===e&&(Fe=wt())}qe!==e?(l.charCodeAt(t)===125?(Fe=He,t++):(Fe=e,m===0&&R(tt)),Fe!==e?ke=Te=[Te,Le,Ce,qe,Fe]:(t=ke,ke=e)):(t=ke,ke=e)}else t=ke,ke=e;else t=ke,ke=e}else t=ke,ke=e;return ke===e&&(ke=null),m--,ke===e&&(Te=e,m===0&&R(ql)),ke}(),Ee!==e?_=T=se(T,V,oe,ce):(t=_,_=e)):(t=_,_=e)}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e}else t=_,_=e}else t=_,_=e;return m--,_===e&&(T=e,m===0&&R(Z)),_}(),x===e&&(x=function(){var _,T,M,V,J,oe,de,ce,Se,Ee,ke,Te,Le,Ce,qe;for(m++,_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.substr(t,9)===xe?(M=xe,t+=9):(M=e,m===0&&R(Ne)),M===e&&(l.substr(t,9)===Oe?(M=Oe,t+=9):(M=e,m===0&&R(Ge))),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e)if(J=function(){var Fe,Qe,Pe,De,gt,ft;if(m++,Fe=t,l.charCodeAt(t)===123?(Qe=it,t++):(Qe=e,m===0&&R(Ze)),Qe!==e){for(Pe=[],De=F();De!==e;)Pe.push(De),De=F();if(Pe!==e)if((De=qa())===e&&(De=null),De!==e){for(gt=[],ft=F();ft!==e;)gt.push(ft),ft=F();gt!==e?(l.charCodeAt(t)===125?(ft=He,t++):(ft=e,m===0&&R(tt)),ft!==e?Fe=Qe=Uc(De):(t=Fe,Fe=e)):(t=Fe,Fe=e)}else t=Fe,Fe=e;else t=Fe,Fe=e}else t=Fe,Fe=e;return m--,Fe===e&&(Qe=e,m===0&&R(Bc)),Fe}(),J!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();if(oe!==e){for(de=[],ce=vt();ce!==e;)de.push(ce),ce=vt();if(de!==e){for(ce=[],Se=F();Se!==e;)ce.push(Se),Se=F();if(ce!==e)if((Se=ar())!==e){for(Ee=[],ke=F();ke!==e;)Ee.push(ke),ke=F();Ee!==e&&(ke=lr())!==e?_=T=Be(J,de,Se,ke):(t=_,_=e)}else t=_,_=e;else t=_,_=e}else t=_,_=e}else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.substr(t,9)===xe?(M=xe,t+=9):(M=e,m===0&&R(Ne)),M===e&&(l.substr(t,9)===Oe?(M=Oe,t+=9):(M=e,m===0&&R(Ge))),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e){for(J=[],oe=vt();oe!==e;)J.push(oe),oe=vt();if(J!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();if(oe!==e)if(l.substr(t,5)===Xe?(de=Xe,t+=5):(de=e,m===0&&R(ut)),de===e&&(l.substr(t,5)===We?(de=We,t+=5):(de=e,m===0&&R(st))),de!==e){for(ce=[],Se=F();Se!==e;)ce.push(Se),Se=F();if(ce!==e)if(l.charCodeAt(t)===123?(Se=it,t++):(Se=e,m===0&&R(Ze)),Se!==e){for(Ee=[],ke=F();ke!==e;)Ee.push(ke),ke=F();if(Ee!==e)if((ke=Wt())===e&&(ke=null),ke!==e){for(Te=[],Le=F();Le!==e;)Te.push(Le),Le=F();if(Te!==e)if(l.charCodeAt(t)===125?(Le=He,t++):(Le=e,m===0&&R(tt)),Le!==e){for(Ce=[],qe=F();qe!==e;)Ce.push(qe),qe=F();Ce!==e&&(qe=lr())!==e?_=T=dr(J,ke,qe):(t=_,_=e)}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e;else t=_,_=e}else t=_,_=e}else t=_,_=e}else t=_,_=e;else t=_,_=e}return m--,_===e&&(T=e,m===0&&R(Ae)),_}(),x===e&&(x=function(){var _,T,M,V,J,oe;if(m++,_=t,l.substr(t,8)===Tt?(T=Tt,t+=8):(T=e,m===0&&R(tr)),T!==e){if(M=[],(V=Zt())!==e)for(;V!==e;)M.push(V),V=Zt();else M=e;if(M===e&&(l.charCodeAt(t)===42?(M=_e,t++):(M=e,m===0&&R(je))),M!==e){for(V=[],J=vt();J!==e;)V.push(J),J=vt();V!==e?((J=ar())===e&&(J=null),J!==e&&(oe=lr())!==e?_=T=[T,M,V,J,oe]:(t=_,_=e)):(t=_,_=e)}else t=_,_=e}else t=_,_=e;return m--,_===e&&(T=e,m===0&&R(hr)),_}(),x===e&&(x=function(){var _,T,M,V,J,oe,de;for(m++,_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.substr(t,3)===Nt?(M=Nt,t+=3):(M=e,m===0&&R(rr)),M===e&&(l.substr(t,3)===nr?(M=nr,t+=3):(M=e,m===0&&R(yr))),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e){for(J=[],oe=vt();oe!==e;)J.push(oe),oe=vt();if(J!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();oe!==e&&(de=ar())!==e?_=T=ir(J,de):(t=_,_=e)}else t=_,_=e}else t=_,_=e}else t=_,_=e;else t=_,_=e;return m--,_===e&&(T=e,m===0&&R(Rt)),_}()))),x!==e?(k=function(){var _,T,M,V;return m++,_=t,T=t,l.substr(t,6)===_r?(M=_r,t+=6):(M=e,m===0&&R(Ti)),M===e&&(l.substr(t,6)===kr?(M=kr,t+=6):(M=e,m===0&&R(Fi))),M!==e&&(V=Ba())!==e?T=M=[M,V]:(t=T,T=e),T===e&&(T=null),T!==e&&(T=Vl(T)),_=T,m--,_===e&&(T=e,m===0&&R(zl)),_}(),k!==e?h=y=v(y,x,k):(t=h,h=e)):(t=h,h=e)):(t=h,h=e),m--,h===e&&(y=e,m===0&&R(c)),h}(),m--,a===e&&m===0&&R(s),a}(),n===e&&(n=function(){var a;return m++,a=Ca(),m--,a===e&&m===0&&R(Wl),a}()),n}()}function _a(){var n,a,h,y,x;if(m++,n=t,a=function(){var k,_,T,M,V;for(m++,k=t,_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.substr(t,4)===f?(T=f,t+=4):(T=e,m===0&&R(O)),T===e&&(l.substr(t,4)===I?(T=I,t+=4):(T=e,m===0&&R(j))),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e&&(V=un())!==e?k=_=D(V):(t=k,k=e)}else t=k,k=e;else t=k,k=e;return m--,k===e&&(_=e,m===0&&R(g)),k}(),a===e&&(a=null),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e){for(y=[],x=ka();x!==e;)y.push(x),x=ka();y!==e?n=a=d(a,y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(b)),n}function ka(){var n,a,h,y,x,k,_;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(l.substr(t,6)===C?(h=C,t+=6):(h=e,m===0&&R(Q)),h===e&&(l.substr(t,6)===q?(h=q,t+=6):(h=e,m===0&&R(H))),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if((x=ii())!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();k!==e&&(_=un())!==e?n=a=B(x,_):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(A)),n}function Ea(){var n,a,h,y,x,k,_,T,M,V,J,oe,de,ce,Se,Ee,ke,Te,Le,Ce;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(l.substr(t,6)===z?(h=z,t+=6):(h=e,m===0&&R(U)),h===e&&(l.substr(t,6)===W?(h=W,t+=6):(h=e,m===0&&R(K))),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.substr(t,8)===Y?(x=Y,t+=8):(x=e,m===0&&R(le)),x===e&&(l.substr(t,8)===re?(x=re,t+=8):(x=e,m===0&&R(ue))),x===e&&(l.substr(t,7)===pe?(x=pe,t+=7):(x=e,m===0&&R(ge)),x===e&&(l.substr(t,7)===we?(x=we,t+=7):(x=e,m===0&&R($)))),x===e&&(x=null),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e){for(_=[],T=t,M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Ye())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();J!==e?T=M=[M,V,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if(l.charCodeAt(t)===40?(V=w,t++):(V=e,m===0&&R(L)),V!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if((oe=Me())!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,2)===G?(ce=G,t+=2):(ce=e,m===0&&R(te)),ce===e&&(l.substr(t,2)===ne?(ce=ne,t+=2):(ce=e,m===0&&R(ie))),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();if(Se!==e)if((Ee=Ye())!==e){for(ke=[],Te=F();Te!==e;)ke.push(Te),Te=F();if(ke!==e)if(l.charCodeAt(t)===41?(Te=he,t++):(Te=e,m===0&&R(be)),Te!==e){for(Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();Le!==e?T=M=[M,V,J,oe,de,ce,Se,Ee,ke,Te,Le]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}if(T!==e)for(;T!==e;){for(_.push(T),T=t,M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Ye())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();J!==e?T=M=[M,V,J]:(t=T,T=e)}else t=T,T=e;else t=T,T=e;if(T===e){for(T=t,M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if(l.charCodeAt(t)===40?(V=w,t++):(V=e,m===0&&R(L)),V!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if((oe=Me())!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,2)===G?(ce=G,t+=2):(ce=e,m===0&&R(te)),ce===e&&(l.substr(t,2)===ne?(ce=ne,t+=2):(ce=e,m===0&&R(ie))),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();if(Se!==e)if((Ee=Ye())!==e){for(ke=[],Te=F();Te!==e;)ke.push(Te),Te=F();if(ke!==e)if(l.charCodeAt(t)===41?(Te=he,t++):(Te=e,m===0&&R(be)),Te!==e){for(Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();Le!==e?T=M=[M,V,J,oe,de,ce,Se,Ee,ke,Te,Le]:(t=T,T=e)}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}else t=T,T=e;else t=T,T=e}}else _=e;if(_===e){for(_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===42?(M=_e,t++):(M=e,m===0&&R(je)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e?_=T=[T,M,V]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}_!==e?n=a=Re(x,_):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(fe)),n}function vt(){var n,a,h,y,x,k;if(m++,n=t,l.substr(t,4)===Ot?(a=Ot,t+=4):(a=e,m===0&&R(gr)),a===e&&(l.substr(t,4)===Lt?(a=Lt,t+=4):(a=e,m===0&&R(Ie))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(y=function(){var _,T,M;for(m++,_=t,T=[],M=F();M!==e;)T.push(M),M=F();return T!==e&&(M=Aa())!==e?_=T=br(M):(t=_,_=e),m--,_===e&&(T=e,m===0&&R(_t)),_}(),y===e&&(y=function(){var _,T,M,V;if(m++,_=t,l.substr(t,5)===Dt?(T=Dt,t+=5):(T=e,m===0&&R(pn)),T===e&&(l.substr(t,5)===Pt?(T=Pt,t+=5):(T=e,m===0&&R(dn))),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e&&(V=Aa())!==e?_=T=sl(V):(t=_,_=e)}else t=_,_=e;return m--,_===e&&(T=e,m===0&&R(ol)),_}()),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?n=a=Je(y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(vr)),n}function Aa(){var n;return m++,n=et(),m--,n===e&&m===0&&R(al),n}function ar(){var n,a,h,y,x,k;if(m++,n=t,l.substr(t,5)===Xe?(a=Xe,t+=5):(a=e,m===0&&R(ut)),a===e&&(l.substr(t,5)===We?(a=We,t+=5):(a=e,m===0&&R(st))),a===e&&(a=null),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=ct())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?n=a=ui(y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(ll)),n}function lr(){var n,a,h,y,x;return m++,n=t,a=function(){var k,_,T,M,V,J,oe;if(m++,k=t,l.substr(t,5)===ci?(_=ci,t+=5):(_=e,m===0&&R(pl)),_===e&&(l.substr(t,5)===fi?(_=fi,t+=5):(_=e,m===0&&R(dl))),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.substr(t,2)===mr?(M=mr,t+=2):(M=e,m===0&&R(pi)),M===e&&(l.substr(t,2)===xr?(M=xr,t+=2):(M=e,m===0&&R(di))),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e){if(J=[],(oe=Sa())!==e)for(;oe!==e;)J.push(oe),oe=Sa();else J=e;J!==e?k=_=hl(J):(t=k,k=e)}else t=k,k=e}else t=k,k=e;else t=k,k=e}else t=k,k=e;return m--,k===e&&(_=e,m===0&&R(fl)),k}(),a===e&&(a=null),a!==e?(h=function(){var k,_,T,M;if(m++,k=t,l.substr(t,6)===yi?(_=yi,t+=6):(_=e,m===0&&R(xl)),_!==e){if(T=[],(M=ja())!==e)for(;M!==e;)T.push(M),M=ja();else T=e;T!==e?k=_=[_,T]:(t=k,k=e)}else t=k,k=e;return m--,k===e&&(_=e,m===0&&R(ml)),k}(),h===e&&(h=null),h!==e?(y=function(){var k,_,T,M,V,J,oe,de;if(m++,k=t,l.substr(t,5)===vi?(_=vi,t+=5):(_=e,m===0&&R(kl)),_===e&&(l.substr(t,5)===gi?(_=gi,t+=5):(_=e,m===0&&R(El))),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.substr(t,2)===mr?(M=mr,t+=2):(M=e,m===0&&R(pi)),M===e&&(l.substr(t,2)===xr?(M=xr,t+=2):(M=e,m===0&&R(di))),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e){if(J=[],(oe=Ta())!==e)for(;oe!==e;)J.push(oe),oe=Ta();else J=e;if(J!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();oe!==e?k=_=Al(J):(t=k,k=e)}else t=k,k=e}else t=k,k=e}else t=k,k=e;else t=k,k=e}else t=k,k=e;return m--,k===e&&(_=e,m===0&&R(_l)),k}(),y===e&&(y=null),y!==e?(x=function(){var k,_,T,M;return m++,k=t,_=t,T=Fa(),T!==e?((M=Ia())===e&&(M=null),M!==e?_=T=[T,M]:(t=_,_=e)):(t=_,_=e),_===e&&(_=t,(T=Ia())!==e?((M=Fa())===e&&(M=null),M!==e?_=T=[T,M]:(t=_,_=e)):(t=_,_=e)),_!==e&&(_=Ol(_)),k=_,m--,k===e&&(_=e,m===0&&R(Nl)),k}(),x===e&&(x=null),x!==e?n=a=cl(a,y,x):(t=n,n=e)):(t=n,n=e)):(t=n,n=e)):(t=n,n=e),m--,n===e&&(a=e,m===0&&R(ul)),n}function Sa(){var n,a,h,y,x,k,_,T,M,V,J;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if((h=ni())!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e?n=a=vl(h):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if((h=Ua())!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e?n=a=gl(h):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(l.charCodeAt(t)===40?(h=w,t++):(h=e,m===0&&R(L)),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if((x=Me())!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e){if(_=t,l.substr(t,2)===G?(T=G,t+=2):(T=e,m===0&&R(te)),T===e&&(l.substr(t,2)===ne?(T=ne,t+=2):(T=e,m===0&&R(ie))),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e&&(V=Ye())!==e?_=T=[T,M,V]:(t=_,_=e)}else t=_,_=e;if(_===e&&(_=null),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===41?(M=he,t++):(M=e,m===0&&R(be)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e?n=a=bl(x,_):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if((h=Ye())!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e?n=a=hi(h):(t=n,n=e)}else t=n,n=e;else t=n,n=e}}}return m--,n===e&&(a=e,m===0&&R(yl)),n}function ja(){var n;return m++,n=Hn(),m--,n===e&&m===0&&R(wl),n}function Ta(){var n,a,h,y,x,k;if(m++,n=t,l.substr(t,3)===bi?(a=bi,t+=3):(a=e,m===0&&R(jl)),a===e&&(l.substr(t,3)===mi?(a=mi,t+=3):(a=e,m===0&&R(Tl)),a===e&&(l.substr(t,4)===xi?(a=xi,t+=4):(a=e,m===0&&R(Fl)),a===e&&(l.substr(t,4)===wi?(a=wi,t+=4):(a=e,m===0&&R(Il))))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=ri())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?n=a=Cl(a,y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e)if(n=t,(a=Hn())===e&&(a=Ye()),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e?n=a=Rl(a):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Sl)),n}function Fa(){var n,a,h,y,x,k;if(m++,n=t,l.substr(t,5)===_i?(a=_i,t+=5):(a=e,m===0&&R(Dl)),a===e&&(l.substr(t,5)===ki?(a=ki,t+=5):(a=e,m===0&&R(Pl))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Yt())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?n=a=Ml(y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Ll)),n}function Ia(){var n,a,h,y,x,k;if(m++,n=t,l.substr(t,6)===Ei?(a=Ei,t+=6):(a=e,m===0&&R(Bl)),a===e&&(l.substr(t,6)===Ai?(a=Ai,t+=6):(a=e,m===0&&R(Ul))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Yt())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?n=a=Gl(y):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Ql)),n}function en(){var n;return m++,(n=et())===e&&(n=sn())===e&&(n=an())===e&&(n=ln())===e&&(l.substr(t,5)===wr?(n=wr,t+=5):(n=e,m===0&&R(ji))),m--,n===e&&m===0&&R(Jl),n}function Ca(){var n,a,h,y,x,k,_,T,M;if(m++,n=t,(a=_a())!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(y=function(){var V;return m++,V=function(){var J,oe,de,ce,Se,Ee,ke,Te,Le;if(m++,J=t,l.substr(t,4)===Ii?(oe=Ii,t+=4):(oe=e,m===0&&R(Yl)),oe===e&&(l.substr(t,4)===Ci?(oe=Ci,t+=4):(oe=e,m===0&&R(eu))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if((ce=et())!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();if(Se!==e){if(Ee=t,l.substr(t,4)===Ri?(ke=Ri,t+=4):(ke=e,m===0&&R(tu)),ke===e&&(l.substr(t,4)===Ni?(ke=Ni,t+=4):(ke=e,m===0&&R(ru))),ke!==e){for(Te=[],Le=F();Le!==e;)Te.push(Le),Le=F();Te!==e&&(Le=qn())!==e?Ee=ke=[ke,Te,Le]:(t=Ee,Ee=e)}else t=Ee,Ee=e;Ee===e&&(Ee=null),Ee!==e?J=oe=nu(ce,Ee):(t=J,J=e)}else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(Zl)),J}(),V===e&&(V=function(){var J,oe,de,ce,Se,Ee;if(m++,J=t,l.substr(t,5)===Oi?(oe=Oi,t+=5):(oe=e,m===0&&R(ou)),oe===e&&(l.substr(t,5)===Li?(oe=Li,t+=5):(oe=e,m===0&&R(su))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,6)===Mt?(ce=Mt,t+=6):(ce=e,m===0&&R(hn)),ce===e&&(l.substr(t,6)===Qt?(ce=Qt,t+=6):(ce=e,m===0&&R(yn))),ce===e&&(ce=null),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e&&(Ee=Oa())!==e?J=oe=au(Ee):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(iu)),J}(),V===e&&(V=function(){var J,oe,de,ce,Se,Ee;if(m++,J=t,l.substr(t,4)===Di?(oe=Di,t+=4):(oe=e,m===0&&R(uu)),oe===e&&(l.substr(t,4)===Pi?(oe=Pi,t+=4):(oe=e,m===0&&R(cu))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,6)===Mt?(ce=Mt,t+=6):(ce=e,m===0&&R(hn)),ce===e&&(l.substr(t,6)===Qt?(ce=Qt,t+=6):(ce=e,m===0&&R(yn))),ce===e&&(ce=null),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e&&(Ee=Oa())!==e?J=oe=fu(Ee):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(lu)),J}(),V===e&&(V=function(){var J,oe,de,ce,Se,Ee;if(m++,J=t,l.substr(t,6)===Mi?(oe=Mi,t+=6):(oe=e,m===0&&R(du)),oe===e&&(l.substr(t,6)===Qi?(oe=Qi,t+=6):(oe=e,m===0&&R(hu))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,6)===Mt?(ce=Mt,t+=6):(ce=e,m===0&&R(hn)),ce===e&&(l.substr(t,6)===Qt?(ce=Qt,t+=6):(ce=e,m===0&&R(yn))),ce===e&&(ce=null),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e&&(Ee=qn())!==e?J=oe=yu(Ee):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(pu)),J}(),V===e&&(V=function(){var J,oe,de,ce,Se,Ee;if(m++,J=t,l.substr(t,6)===Er?(oe=Er,t+=6):(oe=e,m===0&&R(Bi)),oe===e&&(l.substr(t,6)===Ar?(oe=Ar,t+=6):(oe=e,m===0&&R(Ui))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,4)===Sr?(ce=Sr,t+=4):(ce=e,m===0&&R(Gi)),ce===e&&(l.substr(t,4)===jr?(ce=jr,t+=4):(ce=e,m===0&&R(qi))),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e&&(Ee=Da())!==e?J=oe=gu(Ee):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(vu)),J}(),V===e&&(V=function(){var J,oe,de,ce,Se;if(m++,J=t,l.substr(t,6)===Bt?(oe=Bt,t+=6):(oe=e,m===0&&R(vn)),oe===e&&(l.substr(t,6)===Ut?(oe=Ut,t+=6):(oe=e,m===0&&R(gn))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?(l.substr(t,4)===Sr?(ce=Sr,t+=4):(ce=e,m===0&&R(Gi)),ce===e&&(l.substr(t,4)===jr?(ce=jr,t+=4):(ce=e,m===0&&R(qi))),ce!==e&&(Se=Da())!==e?J=oe=mu(Se):(t=J,J=e)):(t=J,J=e)}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(bu)),J}(),V===e&&(V=function(){var J,oe,de,ce,Se,Ee;if(m++,J=t,l.substr(t,6)===Bt?(oe=Bt,t+=6):(oe=e,m===0&&R(vn)),oe===e&&(l.substr(t,6)===Ut?(oe=Ut,t+=6):(oe=e,m===0&&R(gn))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,5)===Xe?(ce=Xe,t+=5):(ce=e,m===0&&R(ut)),ce===e&&(l.substr(t,5)===We?(ce=We,t+=5):(ce=e,m===0&&R(st))),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e&&(Ee=ct())!==e?J=oe=wu(Ee):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(xu)),J}(),V===e&&(V=function(){var J,oe,de,ce,Se,Ee,ke,Te,Le,Ce,qe,Fe;if(m++,J=t,oe=t,l.substr(t,4)===Hi?(de=Hi,t+=4):(de=e,m===0&&R(ku)),de===e&&(l.substr(t,4)===Ji?(de=Ji,t+=4):(de=e,m===0&&R(Eu))),de!==e){for(ce=[],Se=F();Se!==e;)ce.push(Se),Se=F();ce!==e&&(Se=et())!==e?oe=de=[de,ce,Se]:(t=oe,oe=e)}else t=oe,oe=e;if(oe===e&&(oe=null),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e){if(ce=t,Se=function(){var Qe,Pe,De;return m++,Qe=t,l.substr(t,6)===Bt?(Pe=Bt,t+=6):(Pe=e,m===0&&R(vn)),Pe===e&&(l.substr(t,6)===Ut?(Pe=Ut,t+=6):(Pe=e,m===0&&R(gn))),Pe!==e&&(De=La())!==e?Qe=Pe=zi(De):(t=Qe,Qe=e),m--,Qe===e&&(Pe=e,m===0&&R(Su)),Qe}(),Se!==e){for(Ee=[],ke=F();ke!==e;)Ee.push(ke),ke=F();Ee!==e?((ke=Ra())===e&&(ke=null),ke!==e?ce=Se=[Se,Ee,ke]:(t=ce,ce=e)):(t=ce,ce=e)}else t=ce,ce=e;if(ce===e&&(ce=Ra()),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();if(Se!==e){for(Ee=[],ke=Na();ke!==e;)Ee.push(ke),ke=Na();if(Ee!==e){for(ke=[],Te=F();Te!==e;)ke.push(Te),Te=F();if(ke!==e)if(l.substr(t,5)===Xe?(Te=Xe,t+=5):(Te=e,m===0&&R(ut)),Te===e&&(l.substr(t,5)===We?(Te=We,t+=5):(Te=e,m===0&&R(st))),Te!==e){for(Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();if(Le!==e)if((Ce=ct())!==e){for(qe=[],Fe=F();Fe!==e;)qe.push(Fe),Fe=F();qe!==e?J=oe=Au(oe,ce,Ee,Ce):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e}else t=J,J=e;return m--,J===e&&(oe=e,m===0&&R(_u)),J}()))))))),m--,V===e&&m===0&&R($l),V}(),y!==e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===59?(_=bt,t++):(_=e,m===0&&R(mt)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e?((M=Ca())===e&&(M=null),M!==e?x=k=[k,_,T,M]:(t=x,x=e)):(t=x,x=e)}else t=x,x=e;else t=x,x=e;x===e&&(x=null),x!==e?n=a=Kl(a,y,x):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Xl)),n}function Ra(){var n,a,h;return m++,n=t,l.substr(t,6)===Er?(a=Er,t+=6):(a=e,m===0&&R(Bi)),a===e&&(l.substr(t,6)===Ar?(a=Ar,t+=6):(a=e,m===0&&R(Ui))),a!==e&&(h=La())!==e?n=a=zi(h):(t=n,n=e),m--,n===e&&(a=e,m===0&&R(ju)),n}function Na(){var n,a,h,y,x,k,_,T;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(l.substr(t,5)===Vi?(h=Vi,t+=5):(h=e,m===0&&R(Fu)),h===e&&(l.substr(t,5)===Wi?(h=Wi,t+=5):(h=e,m===0&&R(Iu))),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e){if((x=et())===e)if(x=t,l.substr(t,5)===Dt?(k=Dt,t+=5):(k=e,m===0&&R(pn)),k===e&&(l.substr(t,5)===Pt?(k=Pt,t+=5):(k=e,m===0&&R(dn))),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=et())!==e?x=k=[k,_,T]:(t=x,x=e)}else t=x,x=e;x!==e?n=a=Cu(x):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Tu)),n}function qn(){var n,a,h,y;if(m++,n=t,l.substr(t,5)===Gt?(a=Gt,t+=5):(a=e,m===0&&R(bn)),a===e&&(l.substr(t,5)===qt?(a=qt,t+=5):(a=e,m===0&&R(mn))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e&&(y=et())!==e?n=a=Nu(y):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Ru)),n}function Oa(){var n,a;return m++,n=t,(a=qn())!==e&&(a=ui(a)),(n=a)===e&&(n=t,l.substr(t,7)===Xi?(a=Xi,t+=7):(a=e,m===0&&R(Lu)),a===e&&(l.substr(t,7)===Ki?(a=Ki,t+=7):(a=e,m===0&&R(Du))),a!==e&&(a=Pu()),(n=a)===e&&(n=t,l.substr(t,5)===Dt?(a=Dt,t+=5):(a=e,m===0&&R(pn)),a===e&&(l.substr(t,5)===Pt?(a=Pt,t+=5):(a=e,m===0&&R(dn))),a!==e&&(a=Mu()),(n=a)===e&&(n=t,l.substr(t,3)===$i?(a=$i,t+=3):(a=e,m===0&&R(Qu)),a===e&&(l.substr(t,3)===Zi?(a=Zi,t+=3):(a=e,m===0&&R(Bu))),a!==e&&(a=Uu()),n=a))),m--,n===e&&(a=e,m===0&&R(Ou)),n}function La(){var n,a,h,y,x,k,_,T,M;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(l.charCodeAt(t)===123?(h=it,t++):(h=e,m===0&&R(Ze)),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if((x=Pa())!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===125?(_=He,t++):(_=e,m===0&&R(tt)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e?n=a=Yi(x):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Gu)),n}function Da(){var n,a,h,y,x,k,_,T,M;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(l.charCodeAt(t)===123?(h=it,t++):(h=e,m===0&&R(Ze)),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if((x=Pa())!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===125?(_=He,t++):(_=e,m===0&&R(tt)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e?n=a=Yi(x):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(qu)),n}function Pa(){var n,a,h,y,x,k,_;if(m++,n=t,(a=Wt())===e&&(a=null),a!==e){for(h=[],y=t,(x=Ma())!==e?(l.charCodeAt(t)===46?(k=rt,t++):(k=e,m===0&&R(nt)),k===e&&(k=null),k!==e?((_=Wt())===e&&(_=null),_!==e?y=x=[x,k,_]:(t=y,y=e)):(t=y,y=e)):(t=y,y=e);y!==e;)h.push(y),y=t,(x=Ma())!==e?(l.charCodeAt(t)===46?(k=rt,t++):(k=e,m===0&&R(nt)),k===e&&(k=null),k!==e?((_=Wt())===e&&(_=null),_!==e?y=x=[x,k,_]:(t=y,y=e)):(t=y,y=e)):(t=y,y=e);h!==e?n=a=Ju(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Hu)),n}function Ma(){var n,a,h,y,x,k,_,T,M,V,J,oe,de;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(l.substr(t,5)===Gt?(h=Gt,t+=5):(h=e,m===0&&R(bn)),h===e&&(l.substr(t,5)===qt?(h=qt,t+=5):(h=e,m===0&&R(mn))),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if((x=Zt())!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===123?(_=it,t++):(_=e,m===0&&R(Ze)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if((M=Wt())===e&&(M=null),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e)if(l.charCodeAt(t)===125?(J=He,t++):(J=e,m===0&&R(tt)),J!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();oe!==e?n=a=Vu(x,M):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(zu)),n}function Wt(){var n,a,h,y,x,k,_;if(m++,n=t,(a=Ha())!==e){for(h=t,y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.charCodeAt(t)===46?(x=rt,t++):(x=e,m===0&&R(nt)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();k!==e?((_=Wt())===e&&(_=null),_!==e?h=y=[y,x,k,_]:(t=h,h=e)):(t=h,h=e)}else t=h,h=e;else t=h,h=e;h===e&&(h=null),h!==e?n=a=Xu(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Wu)),n}function ct(){var n,a,h,y,x,k;if(m++,n=t,l.charCodeAt(t)===123?(a=it,t++):(a=e,m===0&&R(Ze)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(y=function(){var _,T,M,V;return m++,_=t,(T=Ea())!==e&&(M=ar())!==e&&(V=lr())!==e?_=T=ye(T,M,V):(t=_,_=e),m--,_===e&&(T=e,m===0&&R(ae)),_}(),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?(l.charCodeAt(t)===125?(k=He,t++):(k=e,m===0&&R(tt)),k!==e?n=a=xn(y):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e)if(n=t,l.charCodeAt(t)===123?(a=it,t++):(a=e,m===0&&R(Ze)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(y=function(){var _,T,M,V,J,oe,de,ce,Se,Ee;if(m++,_=t,T=tn(),T===e&&(T=null),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e){if(V=[],J=t,(oe=Qa())!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.charCodeAt(t)===46?(ce=rt,t++):(ce=e,m===0&&R(nt)),ce===e&&(ce=null),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e?((Ee=tn())===e&&(Ee=null),Ee!==e?J=oe=[oe,de,ce,Se,Ee]:(t=J,J=e)):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;for(;J!==e;)if(V.push(J),J=t,(oe=Qa())!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.charCodeAt(t)===46?(ce=rt,t++):(ce=e,m===0&&R(nt)),ce===e&&(ce=null),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e?((Ee=tn())===e&&(Ee=null),Ee!==e?J=oe=[oe,de,ce,Se,Ee]:(t=J,J=e)):(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;V!==e?_=T=Zu(T,V):(t=_,_=e)}else t=_,_=e}else t=_,_=e;return m--,_===e&&(T=e,m===0&&R($u)),_}(),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?(l.charCodeAt(t)===125?(k=He,t++):(k=e,m===0&&R(tt)),k!==e?n=a=xn(y):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Ku)),n}function tn(){var n,a,h,y,x,k;if(m++,n=t,a=function(){var _,T,M,V,J;for(m++,_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if((M=nn())!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e&&(J=za())!==e?_=T=af(M,J):(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if((M=Xa())!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e?(J=function(){var oe;return m++,oe=function(){var de,ce,Se,Ee,ke,Te,Le,Ce,qe,Fe,Qe,Pe,De;if(m++,de=t,ce=Kt(),ce===e&&(ce=$t()),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();if(Se!==e)if((Ee=Ja())!==e){for(ke=[],Te=t,Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();if(Le!==e)if(l.charCodeAt(t)===59?(Ce=bt,t++):(Ce=e,m===0&&R(mt)),Ce!==e){for(qe=[],Fe=F();Fe!==e;)qe.push(Fe),Fe=F();if(qe!==e){if(Fe=t,(Qe=Kt())===e&&(Qe=$t()),Qe!==e){for(Pe=[],De=F();De!==e;)Pe.push(De),De=F();Pe!==e&&(De=Ct())!==e?Fe=Qe=[Qe,Pe,De]:(t=Fe,Fe=e)}else t=Fe,Fe=e;Fe===e&&(Fe=null),Fe!==e?Te=Le=[Le,Ce,qe,Fe]:(t=Te,Te=e)}else t=Te,Te=e}else t=Te,Te=e;else t=Te,Te=e;for(;Te!==e;){for(ke.push(Te),Te=t,Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();if(Le!==e)if(l.charCodeAt(t)===59?(Ce=bt,t++):(Ce=e,m===0&&R(mt)),Ce!==e){for(qe=[],Fe=F();Fe!==e;)qe.push(Fe),Fe=F();if(qe!==e){if(Fe=t,(Qe=Kt())===e&&(Qe=$t()),Qe!==e){for(Pe=[],De=F();De!==e;)Pe.push(De),De=F();Pe!==e&&(De=Ct())!==e?Fe=Qe=[Qe,Pe,De]:(t=Fe,Fe=e)}else t=Fe,Fe=e;Fe===e&&(Fe=null),Fe!==e?Te=Le=[Le,Ce,qe,Fe]:(t=Te,Te=e)}else t=Te,Te=e}else t=Te,Te=e;else t=Te,Te=e}ke!==e?de=ce=Wc(ce,Ee,ke):(t=de,de=e)}else t=de,de=e;else t=de,de=e}else t=de,de=e;return m--,de===e&&(ce=e,m===0&&R(Vc)),de}(),oe===e&&(oe=null),m--,oe===e&&m===0&&R(ff),oe}(),J!==e?_=T=lf(M,J):(t=_,_=e)):(t=_,_=e)}else t=_,_=e;else t=_,_=e}return m--,_===e&&(T=e,m===0&&R(sf)),_}(),a!==e){for(h=t,y=[],x=F();x!==e;)y.push(x),x=F();y!==e?(l.charCodeAt(t)===46?(x=rt,t++):(x=e,m===0&&R(nt)),x!==e?((k=tn())===e&&(k=null),k!==e?h=y=[y,x,k]:(t=h,h=e)):(t=h,h=e)):(t=h,h=e),h===e&&(h=null),h!==e?n=a=ec(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Yu)),n}function Qa(){var n;return m++,n=function(){var a,h,y,x,k,_,T,M;if(m++,a=t,h=ct(),h!==e){for(y=[],x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,5)===Tr?(_=Tr,t+=5):(_=e,m===0&&R(oo)),_===e&&(l.substr(t,5)===Fr?(_=Fr,t+=5):(_=e,m===0&&R(so))),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=ct())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;for(;x!==e;){for(y.push(x),x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,5)===Tr?(_=Tr,t+=5):(_=e,m===0&&R(oo)),_===e&&(l.substr(t,5)===Fr?(_=Fr,t+=5):(_=e,m===0&&R(so))),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=ct())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e}y!==e?a=h=vc(h,y):(t=a,a=e)}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(yc)),a}(),n===e&&(n=function(){var a,h,y,x,k;for(m++,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.substr(t,8)===eo?(y=eo,t+=8):(y=e,m===0&&R(nc)),y===e&&(l.substr(t,8)===to?(y=to,t+=8):(y=e,m===0&&R(ic))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e&&(k=ct())!==e?a=h=oc(k):(t=a,a=e)}else t=a,a=e;else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(rc)),a}(),n===e&&(n=function(){var a,h,y,x;if(m++,a=t,l.substr(t,5)===no?(h=no,t+=5):(h=e,m===0&&R(pc)),h===e&&(l.substr(t,5)===io?(h=io,t+=5):(h=e,m===0&&R(dc))),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e&&(x=ct())!==e?a=h=hc(x):(t=a,a=e)}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(fc)),a}(),n===e&&(n=function(){var a,h,y,x,k,_,T;for(m++,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.substr(t,5)===Gt?(y=Gt,t+=5):(y=e,m===0&&R(bn)),y===e&&(l.substr(t,5)===qt?(y=qt,t+=5):(y=e,m===0&&R(mn))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Zt())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=ct())!==e?a=h=ac(k,T):(t=a,a=e)}else t=a,a=e;else t=a,a=e}else t=a,a=e;else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(sc)),a}(),n===e&&(n=function(){var a,h,y,x;return m++,a=t,l.substr(t,7)===ro?(h=ro,t+=7):(h=e,m===0&&R(uc)),h!==e&&(y=Zt())!==e&&(x=ct())!==e?a=h=cc(y,x):(t=a,a=e),m--,a===e&&(h=e,m===0&&R(lc)),a}(),n===e&&(n=function(){var a,h,y,x,k;for(m++,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.substr(t,6)===ao?(y=ao,t+=6):(y=e,m===0&&R(bc)),y===e&&(l.substr(t,6)===lo?(y=lo,t+=6):(y=e,m===0&&R(mc))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e&&(k=Hn())!==e?a=h=xc(k):(t=a,a=e)}else t=a,a=e;else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(gc)),a}(),n===e&&(n=function(){var a,h,y,x,k,_,T,M,V,J,oe,de,ce;for(m++,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.substr(t,4)===uo?(y=uo,t+=4):(y=e,m===0&&R(_c)),y===e&&(l.substr(t,4)===co?(y=co,t+=4):(y=e,m===0&&R(kc))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===40?(k=w,t++):(k=e,m===0&&R(L)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if((T=Me())!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if(l.substr(t,2)===ne?(V=ne,t+=2):(V=e,m===0&&R(ie)),V===e&&(l.substr(t,2)===G?(V=G,t+=2):(V=e,m===0&&R(te))),V!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if((oe=Ye())!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?(l.charCodeAt(t)===41?(ce=he,t++):(ce=e,m===0&&R(be)),ce!==e?a=h=Ec(T,oe):(t=a,a=e)):(t=a,a=e)}else t=a,a=e;else t=a,a=e}else t=a,a=e;else t=a,a=e}else t=a,a=e;else t=a,a=e}else t=a,a=e;else t=a,a=e}else t=a,a=e;else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(wc)),a}(),n===e&&(n=function(){var a,h,y,x,k;for(m++,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.substr(t,6)===_r?(y=_r,t+=6):(y=e,m===0&&R(Ti)),y===e&&(l.substr(t,6)===kr?(y=kr,t+=6):(y=e,m===0&&R(Fi))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e&&(k=Ba())!==e?a=h=jc(k):(t=a,a=e)}else t=a,a=e;else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(Sc)),a}()))))))),m--,n===e&&m===0&&R(tc),n}function Hn(){var n;return m++,(n=ri())===e&&(n=ni())===e&&(n=Ua()),m--,n===e&&m===0&&R(Ac),n}function Ba(){var n;return m++,n=function(){var a,h,y,x,k,_,T,M;for(m++,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Ye())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===123?(k=it,t++):(k=e,m===0&&R(Ze)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e){for(T=[],M=Xt();M!==e;)T.push(M),M=Xt();T!==e?(l.charCodeAt(t)===125?(M=He,t++):(M=e,m===0&&R(tt)),M!==e?a=h=Ic(y,T):(t=a,a=e)):(t=a,a=e)}else t=a,a=e}else t=a,a=e;else t=a,a=e}else t=a,a=e;else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(Fc)),a}(),n===e&&(n=function(){var a,h,y,x,k,_,T,M,V,J,oe,de,ce,Se,Ee,ke;for(m++,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e){if((y=wt())===e)if(y=t,l.charCodeAt(t)===40?(x=w,t++):(x=e,m===0&&R(L)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e){for(_=[],T=Ye();T!==e;)_.push(T),T=Ye();if(_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e?(l.charCodeAt(t)===41?(M=he,t++):(M=e,m===0&&R(be)),M!==e?y=x=[x,k,_,T,M]:(t=y,y=e)):(t=y,y=e)}else t=y,y=e}else t=y,y=e}else t=y,y=e;if(y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===123?(k=it,t++):(k=e,m===0&&R(Ze)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e){for(T=[],M=t,V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e)if(l.charCodeAt(t)===40?(J=w,t++):(J=e,m===0&&R(L)),J!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();if(oe!==e){for(de=[],ce=Xt();ce!==e;)de.push(ce),ce=Xt();if(de!==e){for(ce=[],Se=F();Se!==e;)ce.push(Se),Se=F();if(ce!==e)if(l.charCodeAt(t)===41?(Se=he,t++):(Se=e,m===0&&R(be)),Se!==e){for(Ee=[],ke=F();ke!==e;)Ee.push(ke),ke=F();Ee!==e?M=V=[V,J,oe,de,ce,Se,Ee]:(t=M,M=e)}else t=M,M=e;else t=M,M=e}else t=M,M=e}else t=M,M=e}else t=M,M=e;else t=M,M=e;for(M===e&&(M=wt());M!==e;){for(T.push(M),M=t,V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e)if(l.charCodeAt(t)===40?(J=w,t++):(J=e,m===0&&R(L)),J!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();if(oe!==e){for(de=[],ce=Xt();ce!==e;)de.push(ce),ce=Xt();if(de!==e){for(ce=[],Se=F();Se!==e;)ce.push(Se),Se=F();if(ce!==e)if(l.charCodeAt(t)===41?(Se=he,t++):(Se=e,m===0&&R(be)),Se!==e){for(Ee=[],ke=F();ke!==e;)Ee.push(ke),ke=F();Ee!==e?M=V=[V,J,oe,de,ce,Se,Ee]:(t=M,M=e)}else t=M,M=e;else t=M,M=e}else t=M,M=e}else t=M,M=e}else t=M,M=e;else t=M,M=e;M===e&&(M=wt())}if(T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e?(l.charCodeAt(t)===125?(V=He,t++):(V=e,m===0&&R(tt)),V!==e?a=h=Rc(y,T):(t=a,a=e)):(t=a,a=e)}else t=a,a=e}else t=a,a=e}else t=a,a=e;else t=a,a=e}else t=a,a=e}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(Cc)),a}()),m--,n===e&&m===0&&R(Tc),n}function Xt(){var n,a,h,y,x;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if((h=un())===e&&(h=sn())===e&&(h=an())===e&&(h=ln())===e&&(l.substr(t,5)===wr?(h=wr,t+=5):(h=e,m===0&&R(ji))),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e?n=a=hi(h):(t=n,n=e)}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Nc)),n}function Ua(){var n,a,h,y;if(m++,n=t,(a=et())!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e&&(y=Ga())!==e?n=a=Lc(a,y):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Oc)),n}function Ga(){var n,a,h,y,x,k,_,T,M,V,J,oe;if(m++,n=t,(a=wt())!==e&&(a=fo()),(n=a)===e)if(n=t,l.charCodeAt(t)===40?(a=w,t++):(a=e,m===0&&R(L)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.substr(t,8)===Y?(y=Y,t+=8):(y=e,m===0&&R(le)),y===e&&(l.substr(t,8)===re?(y=re,t+=8):(y=e,m===0&&R(ue))),y===e&&(y=null),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e){if(T=[],M=t,l.charCodeAt(t)===44?(V=Ke,t++):(V=e,m===0&&R($e)),V!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();J!==e&&(oe=Me())!==e?M=V=[V,J,oe]:(t=M,M=e)}else t=M,M=e;for(;M!==e;)if(T.push(M),M=t,l.charCodeAt(t)===44?(V=Ke,t++):(V=e,m===0&&R($e)),V!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();J!==e&&(oe=Me())!==e?M=V=[V,J,oe]:(t=M,M=e)}else t=M,M=e;T!==e?(l.charCodeAt(t)===41?(M=he,t++):(M=e,m===0&&R(be)),M!==e?n=a=Pc(y,k,T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Dc)),n}function ur(){var n,a,h,y,x,k,_,T,M,V;if(m++,n=t,(a=wt())!==e&&(a=fo()),(n=a)===e)if(n=t,l.charCodeAt(t)===40?(a=w,t++):(a=e,m===0&&R(L)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=et())===e&&(y=Me()),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e){if(k=[],_=t,l.charCodeAt(t)===44?(T=Ke,t++):(T=e,m===0&&R($e)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e?((V=et())===e&&(V=Me()),V!==e?_=T=[T,M,V]:(t=_,_=e)):(t=_,_=e)}else t=_,_=e;for(;_!==e;)if(k.push(_),_=t,l.charCodeAt(t)===44?(T=Ke,t++):(T=e,m===0&&R($e)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e?((V=et())===e&&(V=Me()),V!==e?_=T=[T,M,V]:(t=_,_=e)):(t=_,_=e)}else t=_,_=e;k!==e?(l.charCodeAt(t)===41?(_=he,t++):(_=e,m===0&&R(be)),_!==e?n=a=Qc(y,k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Mc)),n}function qa(){var n,a,h,y,x,k,_;if(m++,n=t,(a=Ha())!==e){for(h=t,y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.charCodeAt(t)===46?(x=rt,t++):(x=e,m===0&&R(nt)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();k!==e?((_=qa())===e&&(_=null),_!==e?h=y=[y,x,k,_]:(t=h,h=e)):(t=h,h=e)}else t=h,h=e;else t=h,h=e;h===e&&(h=null),h!==e?n=a=qc(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Gc)),n}function Ha(){var n,a,h,y,x;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if((h=nn())!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e&&(x=Jn())!==e?n=a=Jc(h,x):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){for(n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if((h=Ka())!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e?(x=function(){var k;return m++,k=Jn(),k===e&&(k=null),m--,k===e&&m===0&&R($c),k}(),x!==e?n=a=zc(h,x):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}return m--,n===e&&(a=e,m===0&&R(Hc)),n}function Jn(){var n,a,h,y,x,k,_,T,M,V,J,oe,de;if(m++,n=t,(a=Wn())!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Ct())!==e){for(x=[],k=t,_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.charCodeAt(t)===59?(T=bt,t++):(T=e,m===0&&R(mt)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e){if(V=t,(J=Wn())!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();oe!==e&&(de=Ct())!==e?V=J=[J,oe,de]:(t=V,V=e)}else t=V,V=e;V===e&&(V=null),V!==e?k=_=[_,T,M,V]:(t=k,k=e)}else t=k,k=e}else t=k,k=e;else t=k,k=e;for(;k!==e;){for(x.push(k),k=t,_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.charCodeAt(t)===59?(T=bt,t++):(T=e,m===0&&R(mt)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e){if(V=t,(J=Wn())!==e){for(oe=[],de=F();de!==e;)oe.push(de),de=F();oe!==e&&(de=Ct())!==e?V=J=[J,oe,de]:(t=V,V=e)}else t=V,V=e;V===e&&(V=null),V!==e?k=_=[_,T,M,V]:(t=k,k=e)}else t=k,k=e}else t=k,k=e;else t=k,k=e}x!==e?n=a=Kc(a,y,x):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Xc)),n}function Ja(){var n,a,h,y,x,k,_,T;if(m++,n=t,(a=zn())!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e){if(y=[],x=t,l.charCodeAt(t)===44?(k=Ke,t++):(k=e,m===0&&R($e)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=zn())!==e?x=k=[k,_,T]:(t=x,x=e)}else t=x,x=e;for(;x!==e;)if(y.push(x),x=t,l.charCodeAt(t)===44?(k=Ke,t++):(k=e,m===0&&R($e)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=zn())!==e?x=k=[k,_,T]:(t=x,x=e)}else t=x,x=e;y!==e?n=a=Yc(a,y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Zc)),n}function Ct(){var n,a,h,y,x,k,_,T;if(m++,n=t,(a=Vn())!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e){if(y=[],x=t,l.charCodeAt(t)===44?(k=Ke,t++):(k=e,m===0&&R($e)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=Vn())!==e?x=k=[k,_,T]:(t=x,x=e)}else t=x,x=e;for(;x!==e;)if(y.push(x),x=t,l.charCodeAt(t)===44?(k=Ke,t++):(k=e,m===0&&R($e)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=Vn())!==e?x=k=[k,_,T]:(t=x,x=e)}else t=x,x=e;y!==e?n=a=tf(a,y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(ef)),n}function zn(){var n;return m++,n=Zn(),m--,n===e&&m===0&&R(rf),n}function Vn(){var n;return m++,n=Yn(),m--,n===e&&m===0&&R(nf),n}function Wn(){var n,a;return m++,(n=Zt())===e&&(n=t,l.charCodeAt(t)===97?(a=Ir,t++):(a=e,m===0&&R(Cr)),a!==e&&(a=po()),n=a),m--,n===e&&(a=e,m===0&&R(of)),n}function za(){var n,a,h,y,x,k,_,T,M,V,J,oe;if(m++,n=t,(a=Kt())===e&&(a=$t()),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Ja())!==e){for(x=[],k=t,_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.charCodeAt(t)===59?(T=bt,t++):(T=e,m===0&&R(mt)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e?(V=t,(J=Kt())===e&&(J=$t()),J!==e&&(oe=Ct())!==e?V=J=[J,oe]:(t=V,V=e),V===e&&(V=null),V!==e?k=_=[_,T,M,V]:(t=k,k=e)):(t=k,k=e)}else t=k,k=e;else t=k,k=e;for(;k!==e;){for(x.push(k),k=t,_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.charCodeAt(t)===59?(T=bt,t++):(T=e,m===0&&R(mt)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e?(V=t,(J=Kt())===e&&(J=$t()),J!==e&&(oe=Ct())!==e?V=J=[J,oe]:(t=V,V=e),V===e&&(V=null),V!==e?k=_=[_,T,M,V]:(t=k,k=e)):(t=k,k=e)}else t=k,k=e;else t=k,k=e}x!==e?n=a=cf(a,y,x):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(uf)),n}function Kt(){var n,a;return m++,n=t,(a=Va())!==e&&(a=df(a)),m--,(n=a)===e&&(a=e,m===0&&R(pf)),n}function $t(){var n;return m++,n=Ye(),m--,n===e&&m===0&&R(hf),n}function Va(){var n;return m++,n=function(){var a,h,y,x,k,_;if(m++,a=t,h=Xn(),h!==e){for(y=[],x=t,l.charCodeAt(t)===124?(k=Rr,t++):(k=e,m===0&&R(Nr)),k!==e&&(_=Xn())!==e?x=k=[k,_]:(t=x,x=e);x!==e;)y.push(x),x=t,l.charCodeAt(t)===124?(k=Rr,t++):(k=e,m===0&&R(Nr)),k!==e&&(_=Xn())!==e?x=k=[k,_]:(t=x,x=e);y!==e?a=h=gf(h,y):(t=a,a=e)}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(vf)),a}(),m--,n===e&&m===0&&R(yf),n}function Xn(){var n,a,h,y,x,k;if(m++,n=t,(a=Kn())!==e){for(h=[],y=t,l.charCodeAt(t)===47?(x=Ft,t++):(x=e,m===0&&R(It)),x!==e&&(k=Kn())!==e?y=x=[x,k]:(t=y,y=e);y!==e;)h.push(y),y=t,l.charCodeAt(t)===47?(x=Ft,t++):(x=e,m===0&&R(It)),x!==e&&(k=Kn())!==e?y=x=[x,k]:(t=y,y=e);h!==e?n=a=mf(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(bf)),n}function Wa(){var n,a,h;return m++,n=t,a=function(){var y,x,k,_;return m++,y=et(),y===e&&(y=t,l.charCodeAt(t)===97?(x=Ir,t++):(x=e,m===0&&R(Cr)),x!==e&&(x=po()),(y=x)===e&&(y=t,l.charCodeAt(t)===33?(x=kn,t++):(x=e,m===0&&R(En)),x!==e?(k=function(){var T,M,V,J,oe,de,ce,Se;if(T=rn(),T===e)if(T=t,l.charCodeAt(t)===40?(M=w,t++):(M=e,m===0&&R(L)),M!==e){if(V=t,(J=rn())!==e){for(oe=[],de=t,l.charCodeAt(t)===124?(ce=Rr,t++):(ce=e,m===0&&R(Nr)),ce!==e&&(Se=rn())!==e?de=ce=[ce,Se]:(t=de,de=e);de!==e;)oe.push(de),de=t,l.charCodeAt(t)===124?(ce=Rr,t++):(ce=e,m===0&&R(Nr)),ce!==e&&(Se=rn())!==e?de=ce=[ce,Se]:(t=de,de=e);oe!==e?V=J=[J,oe]:(t=V,V=e)}else t=V,V=e;V===e&&(V=null),V!==e?(l.charCodeAt(t)===41?(J=he,t++):(J=e,m===0&&R(be)),J!==e?T=M=[M,V,J]:(t=T,T=e)):(t=T,T=e)}else t=T,T=e;return T}(),k!==e?y=x=[x,k]:(t=y,y=e)):(t=y,y=e),y===e&&(y=t,l.charCodeAt(t)===40?(x=w,t++):(x=e,m===0&&R(L)),x!==e&&(k=Va())!==e?(l.charCodeAt(t)===41?(_=he,t++):(_=e,m===0&&R(be)),_!==e?y=x=xn(k):(t=y,y=e)):(t=y,y=e)))),m--,y===e&&(x=e,m===0&&R(Af)),y}(),a!==e?(h=function(){var y,x,k,_,T,M,V,J,oe;return m++,l.charCodeAt(t)===42?(y=_e,t++):(y=e,m===0&&R(je)),y===e&&(l.charCodeAt(t)===63?(y=wn,t++):(y=e,m===0&&R(_n)),y===e&&(l.charCodeAt(t)===43?(y=kt,t++):(y=e,m===0&&R(Et)),y===e&&(y=t,l.charCodeAt(t)===123?(x=it,t++):(x=e,m===0&&R(Ze)),x!==e?(k=t,(_=$n())!==e?(T=t,l.charCodeAt(t)===44?(M=Ke,t++):(M=e,m===0&&R($e)),M!==e?(l.charCodeAt(t)===125?(V=He,t++):(V=e,m===0&&R(tt)),V===e&&(V=t,(J=$n())!==e?(l.charCodeAt(t)===125?(oe=He,t++):(oe=e,m===0&&R(tt)),oe!==e?V=J=[J,oe]:(t=V,V=e)):(t=V,V=e)),V!==e?T=M=[M,V]:(t=T,T=e)):(t=T,T=e),T===e&&(l.charCodeAt(t)===125?(T=He,t++):(T=e,m===0&&R(tt))),T!==e?k=_=[_,T]:(t=k,k=e)):(t=k,k=e),k===e&&(k=t,l.charCodeAt(t)===44?(_=Ke,t++):(_=e,m===0&&R($e)),_!==e&&(T=$n())!==e?(l.charCodeAt(t)===125?(M=He,t++):(M=e,m===0&&R(tt)),M!==e?k=_=[_,T,M]:(t=k,k=e)):(t=k,k=e)),k!==e?y=x=[x,k]:(t=y,y=e)):(t=y,y=e)))),m--,y===e&&(x=e,m===0&&R(Ef)),y}(),h===e&&(h=null),h!==e?n=a=wf(a,h):(t=n,n=e)):(t=n,n=e),m--,n===e&&(a=e,m===0&&R(xf)),n}function Kn(){var n,a,h;return m++,(n=Wa())===e&&(n=t,l.charCodeAt(t)===94?(a=ho,t++):(a=e,m===0&&R(yo)),a!==e&&(h=Wa())!==e?n=a=kf(h):(t=n,n=e)),m--,n===e&&(a=e,m===0&&R(_f)),n}function rn(){var n,a,h;return m++,(n=et())===e&&(l.charCodeAt(t)===97?(n=Ir,t++):(n=e,m===0&&R(Cr)),n===e&&(n=t,l.charCodeAt(t)===94?(a=ho,t++):(a=e,m===0&&R(yo)),a!==e?((h=et())===e&&(l.charCodeAt(t)===97?(h=Ir,t++):(h=e,m===0&&R(Cr))),h!==e?n=a=[a,h]:(t=n,n=e)):(t=n,n=e))),m--,n===e&&(a=e,m===0&&R(Sf)),n}function $n(){var n;return m++,n=Yt(),m--,n===e&&m===0&&R(jf),n}function Xa(){var n,a;return m++,n=t,a=function(){var h,y,x,k,_,T,M,V,J;for(m++,h=t,y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.charCodeAt(t)===40?(x=w,t++):(x=e,m===0&&R(L)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e){if(_=[],(T=Zn())!==e)for(;T!==e;)_.push(T),T=Zn();else _=e;if(_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===41?(M=he,t++):(M=e,m===0&&R(be)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e?h=y=vo(_):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e}else t=h,h=e}else t=h,h=e;else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(Df)),h}(),a!==e&&(a=Ff(a)),(n=a)===e&&(n=function(){var h,y,x,k,_,T,M,V;for(m++,h=t,y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.charCodeAt(t)===91?(x=An,t++):(x=e,m===0&&R(Sn)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if((_=za())!==e)if(l.charCodeAt(t)===93?(T=jn,t++):(T=e,m===0&&R(Tn)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e?h=y=Nf(_):(t=h,h=e)}else t=h,h=e;else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(Rf)),h}()),m--,n===e&&(a=e,m===0&&R(Tf)),n}function Ka(){var n,a;return m++,n=t,a=function(){var h,y,x,k,_,T,M,V,J;for(m++,h=t,y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.charCodeAt(t)===40?(x=w,t++):(x=e,m===0&&R(L)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e){if(_=[],(T=Yn())!==e)for(;T!==e;)_.push(T),T=Yn();else _=e;if(_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===41?(M=he,t++):(M=e,m===0&&R(be)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e?h=y=vo(_):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e}else t=h,h=e}else t=h,h=e;else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(Pf)),h}(),a!==e&&(a=Cf(a)),(n=a)===e&&(n=function(){var h,y,x,k,_,T,M,V,J;for(m++,h=t,y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.charCodeAt(t)===91?(x=An,t++):(x=e,m===0&&R(Sn)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if((_=Jn())!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===93?(M=jn,t++):(M=e,m===0&&R(Tn)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e?h=y=Lf(_):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(Of)),h}()),m--,n===e&&(a=e,m===0&&R(If)),n}function Zn(){var n,a,h,y,x,k;for(m++,n=t,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=nn())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?a=h=[h,y,x]:(t=a,a=e)}else t=a,a=e;else t=a,a=e;if(a===e){for(a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Xa())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?a=h=[h,y,x]:(t=a,a=e)}else t=a,a=e;else t=a,a=e}return a!==e&&(a=go(a)),m--,(n=a)===e&&(a=e,m===0&&R(Mf)),n}function Yn(){var n,a,h,y,x,k;for(m++,n=t,a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=nn())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?a=h=[h,y,x]:(t=a,a=e)}else t=a,a=e;else t=a,a=e;if(a===e){for(a=t,h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Ka())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?a=h=[h,y,x]:(t=a,a=e)}else t=a,a=e;else t=a,a=e}return a!==e&&(a=go(a)),m--,(n=a)===e&&(a=e,m===0&&R(Qf)),n}function nn(){var n;return m++,(n=Ye())===e&&(n=function(){var a;return m++,a=et(),a===e&&(a=sn())===e&&(a=an())===e&&(a=ln())===e&&(a=function(){var h,y;return m++,h=t,y=function(){var x,k,_;return m++,x=t,l.substr(t,2)===Gs?(k=Gs,t+=2):(k=e,m===0&&R(xh)),k!==e&&(_=el())!==e?x=k=wh(_):(t=x,x=e),m--,x===e&&(k=e,m===0&&R(mh)),x}(),y!==e&&(y=ph(y)),h=y,h===e&&(h=t,y=function(){var x,k,_,T;if(m++,x=t,l.charCodeAt(t)===91?(k=An,t++):(k=e,m===0&&R(Sn)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===93?(T=jn,t++):(T=e,m===0&&R(Tn)),T!==e?x=k=[k,_,T]:(t=x,x=e)):(t=x,x=e)}else t=x,x=e;return m--,x===e&&(k=e,m===0&&R(dy)),x}(),y!==e&&(y=dh()),h=y),m--,h===e&&(y=e,m===0&&R(fh)),h}(),a===e&&(a=wt())),m--,a===e&&m===0&&R(Hf),a}()),m--,n===e&&m===0&&R(Bf),n}function Zt(){var n;return m++,(n=Ye())===e&&(n=et()),m--,n===e&&m===0&&R(Uf),n}function Ye(){var n,a,h,y,x;for(m++,n=t,a=[],h=F();h!==e;)a.push(h),h=F();if(a!==e)if(h=function(){var k,_,T;return m++,k=t,l.charCodeAt(t)===63?(_=wn,t++):(_=e,m===0&&R(_n)),_!==e&&(T=Ya())!==e?k=_=qs(T):(t=k,k=e),m--,k===e&&(_=e,m===0&&R(_h)),k}(),h===e&&(h=function(){var k,_,T;return m++,k=t,l.charCodeAt(t)===36?(_=Hs,t++):(_=e,m===0&&R(Js)),_!==e&&(T=Ya())!==e?k=_=qs(T):(t=k,k=e),m--,k===e&&(_=e,m===0&&R(kh)),k}()),h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();y!==e?n=a=qf(h):(t=n,n=e)}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Gf)),n}function Me(){var n;return m++,n=function(){var a,h,y,x,k,_,T,M;if(m++,a=t,h=ei(),h!==e){for(y=[],x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Or?(_=Or,t+=2):(_=e,m===0&&R(bo)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=ei())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;for(;x!==e;){for(y.push(x),x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Or?(_=Or,t+=2):(_=e,m===0&&R(bo)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=ei())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e}y!==e?a=h=Vf(h,y):(t=a,a=e)}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(zf)),a}(),m--,n===e&&m===0&&R(Jf),n}function ei(){var n,a,h,y,x,k,_,T;if(m++,n=t,(a=ti())!==e){for(h=[],y=t,x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.substr(t,2)===Lr?(k=Lr,t+=2):(k=e,m===0&&R(mo)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=ti())!==e?y=x=[x,k,_,T]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;for(;y!==e;){for(h.push(y),y=t,x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.substr(t,2)===Lr?(k=Lr,t+=2):(k=e,m===0&&R(mo)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=ti())!==e?y=x=[x,k,_,T]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}h!==e?n=a=Xf(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Wf)),n}function ti(){var n;return m++,n=function(){var a,h,y,x,k,_,T,M,V,J,oe,de,ce;if(m++,a=t,h=at(),h!==e){for(y=[],x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===61?(_=Dr,t++):(_=e,m===0&&R(Pr)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Mr?(_=Mr,t+=2):(_=e,m===0&&R(xo)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===60?(_=Fn,t++):(_=e,m===0&&R(In)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===62?(_=Cn,t++):(_=e,m===0&&R(Rn)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Qr?(_=Qr,t+=2):(_=e,m===0&&R(wo)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Br?(_=Br,t+=2):(_=e,m===0&&R(_o)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===73?(_=Ur,t++):(_=e,m===0&&R(Gr)),_===e&&(l.charCodeAt(t)===105?(_=qr,t++):(_=e,m===0&&R(Hr))),_!==e)if(l.charCodeAt(t)===78?(T=Ht,t++):(T=e,m===0&&R(Jt)),T===e&&(l.charCodeAt(t)===110?(T=zt,t++):(T=e,m===0&&R(Vt))),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e&&(V=ur())!==e?x=k=[k,_,T,M,V]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===78?(_=Ht,t++):(_=e,m===0&&R(Jt)),_===e&&(l.charCodeAt(t)===110?(_=zt,t++):(_=e,m===0&&R(Vt))),_!==e)if(l.charCodeAt(t)===79?(T=ko,t++):(T=e,m===0&&R(Eo)),T===e&&(l.charCodeAt(t)===111?(T=Ao,t++):(T=e,m===0&&R(So))),T!==e)if(l.charCodeAt(t)===84?(M=jo,t++):(M=e,m===0&&R(To)),M===e&&(l.charCodeAt(t)===116?(M=Fo,t++):(M=e,m===0&&R(Io))),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e)if(l.charCodeAt(t)===73?(J=Ur,t++):(J=e,m===0&&R(Gr)),J===e&&(l.charCodeAt(t)===105?(J=qr,t++):(J=e,m===0&&R(Hr))),J!==e)if(l.charCodeAt(t)===78?(oe=Ht,t++):(oe=e,m===0&&R(Jt)),oe===e&&(l.charCodeAt(t)===110?(oe=zt,t++):(oe=e,m===0&&R(Vt))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e&&(ce=ur())!==e?x=k=[k,_,T,M,V,J,oe,de,ce]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;else t=x,x=e}else t=x,x=e;else t=x,x=e;else t=x,x=e;else t=x,x=e}}}}}}}for(;x!==e;){for(y.push(x),x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===61?(_=Dr,t++):(_=e,m===0&&R(Pr)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Mr?(_=Mr,t+=2):(_=e,m===0&&R(xo)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===60?(_=Fn,t++):(_=e,m===0&&R(In)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===62?(_=Cn,t++):(_=e,m===0&&R(Rn)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Qr?(_=Qr,t+=2):(_=e,m===0&&R(wo)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.substr(t,2)===Br?(_=Br,t+=2):(_=e,m===0&&R(_o)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=at())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===73?(_=Ur,t++):(_=e,m===0&&R(Gr)),_===e&&(l.charCodeAt(t)===105?(_=qr,t++):(_=e,m===0&&R(Hr))),_!==e)if(l.charCodeAt(t)===78?(T=Ht,t++):(T=e,m===0&&R(Jt)),T===e&&(l.charCodeAt(t)===110?(T=zt,t++):(T=e,m===0&&R(Vt))),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e&&(V=ur())!==e?x=k=[k,_,T,M,V]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===78?(_=Ht,t++):(_=e,m===0&&R(Jt)),_===e&&(l.charCodeAt(t)===110?(_=zt,t++):(_=e,m===0&&R(Vt))),_!==e)if(l.charCodeAt(t)===79?(T=ko,t++):(T=e,m===0&&R(Eo)),T===e&&(l.charCodeAt(t)===111?(T=Ao,t++):(T=e,m===0&&R(So))),T!==e)if(l.charCodeAt(t)===84?(M=jo,t++):(M=e,m===0&&R(To)),M===e&&(l.charCodeAt(t)===116?(M=Fo,t++):(M=e,m===0&&R(Io))),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();if(V!==e)if(l.charCodeAt(t)===73?(J=Ur,t++):(J=e,m===0&&R(Gr)),J===e&&(l.charCodeAt(t)===105?(J=qr,t++):(J=e,m===0&&R(Hr))),J!==e)if(l.charCodeAt(t)===78?(oe=Ht,t++):(oe=e,m===0&&R(Jt)),oe===e&&(l.charCodeAt(t)===110?(oe=zt,t++):(oe=e,m===0&&R(Vt))),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e&&(ce=ur())!==e?x=k=[k,_,T,M,V,J,oe,de,ce]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;else t=x,x=e}else t=x,x=e;else t=x,x=e;else t=x,x=e;else t=x,x=e}}}}}}}}y!==e?a=h=Zf(h,y):(t=a,a=e)}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R($f)),a}(),m--,n===e&&m===0&&R(Kf),n}function at(){var n;return m++,n=function(){var a,h,y,x,k,_,T,M,V,J;if(m++,a=t,h=cr(),h!==e){for(y=[],x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===43?(_=kt,t++):(_=e,m===0&&R(Et)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=cr())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===45?(_=dt,t++):(_=e,m===0&&R(ht)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=cr())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e)if(x=t,(k=fr())===e&&(k=fr()),k!==e){for(_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===42?(M=_e,t++):(M=e,m===0&&R(je)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e&&(J=xt())!==e?_=T=[T,M,V,J]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===47?(M=Ft,t++):(M=e,m===0&&R(It)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e&&(J=xt())!==e?_=T=[T,M,V,J]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}_===e&&(_=null),_!==e?x=k=[k,_]:(t=x,x=e)}else t=x,x=e}for(;x!==e;){for(y.push(x),x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===43?(_=kt,t++):(_=e,m===0&&R(Et)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=cr())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e){for(x=t,k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if(l.charCodeAt(t)===45?(_=dt,t++):(_=e,m===0&&R(ht)),_!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=cr())!==e?x=k=[k,_,T,M]:(t=x,x=e)}else t=x,x=e;else t=x,x=e;if(x===e)if(x=t,(k=fr())===e&&(k=fr()),k!==e){for(_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===42?(M=_e,t++):(M=e,m===0&&R(je)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e&&(J=xt())!==e?_=T=[T,M,V,J]:(t=_,_=e)}else t=_,_=e;else t=_,_=e;if(_===e){for(_=t,T=[],M=F();M!==e;)T.push(M),M=F();if(T!==e)if(l.charCodeAt(t)===47?(M=Ft,t++):(M=e,m===0&&R(It)),M!==e){for(V=[],J=F();J!==e;)V.push(J),J=F();V!==e&&(J=xt())!==e?_=T=[T,M,V,J]:(t=_,_=e)}else t=_,_=e;else t=_,_=e}_===e&&(_=null),_!==e?x=k=[k,_]:(t=x,x=e)}else t=x,x=e}}y!==e?a=h=tp(h,y):(t=a,a=e)}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(ep)),a}(),m--,n===e&&m===0&&R(Yf),n}function cr(){var n,a,h,y,x,k,_,T;if(m++,n=t,(a=xt())!==e){for(h=[],y=t,x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===42?(k=_e,t++):(k=e,m===0&&R(je)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=xt())!==e?y=x=[x,k,_,T]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;if(y===e){for(y=t,x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===47?(k=Ft,t++):(k=e,m===0&&R(It)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=xt())!==e?y=x=[x,k,_,T]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}for(;y!==e;){for(h.push(y),y=t,x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===42?(k=_e,t++):(k=e,m===0&&R(je)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=xt())!==e?y=x=[x,k,_,T]:(t=y,y=e)}else t=y,y=e;else t=y,y=e;if(y===e){for(y=t,x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===47?(k=Ft,t++):(k=e,m===0&&R(It)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e&&(T=xt())!==e?y=x=[x,k,_,T]:(t=y,y=e)}else t=y,y=e;else t=y,y=e}}h!==e?n=a=np(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(rp)),n}function xt(){var n,a,h,y;if(m++,n=t,l.charCodeAt(t)===33?(a=kn,t++):(a=e,m===0&&R(En)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e&&(y=on())!==e?n=a=op(y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,l.charCodeAt(t)===43?(a=kt,t++):(a=e,m===0&&R(Et)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e&&(y=on())!==e?n=a=sp(y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,l.charCodeAt(t)===45?(a=dt,t++):(a=e,m===0&&R(ht)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e&&(y=on())!==e?n=a=ap(y):(t=n,n=e)}else t=n,n=e;n===e&&(n=on())}}return m--,n===e&&(a=e,m===0&&R(ip)),n}function on(){var n,a;return m++,(n=ri())===e&&(n=ni())===e&&(n=function(){var h,y,x,k;if(m++,h=t,y=et(),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?((k=Ga())===e&&(k=null),k!==e?h=y=Hd(y,k):(t=h,h=e)):(t=h,h=e)}else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(qd)),h}(),n===e&&(n=t,(a=sn())!==e&&(a=up(a)),(n=a)===e&&(n=t,(a=an())!==e&&(a=cp(a)),(n=a)===e&&(n=t,(a=ln())!==e&&(a=fp(a)),(n=a)===e&&(n=function(){var h,y,x,k,_,T,M,V,J,oe,de,ce,Se,Ee,ke,Te,Le,Ce;if(m++,h=t,l.substr(t,5)===ws?(y=ws,t+=5):(y=e,m===0&&R(Ed)),y===e&&(l.substr(t,5)===_s?(y=_s,t+=5):(y=e,m===0&&R(Ad))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===40?(k=w,t++):(k=e,m===0&&R(L)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.substr(t,8)===Y?(T=Y,t+=8):(T=e,m===0&&R(le)),T===e&&(l.substr(t,8)===re?(T=re,t+=8):(T=e,m===0&&R(ue))),T===e&&(T=null),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if(l.charCodeAt(t)===42?(V=_e,t++):(V=e,m===0&&R(je)),V===e&&(V=Me()),V!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?h=y=Sd(T,V):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;if(h===e){if(h=t,l.substr(t,12)===ks?(y=ks,t+=12):(y=e,m===0&&R(jd)),y===e&&(l.substr(t,12)===Es?(y=Es,t+=12):(y=e,m===0&&R(Td))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===40?(k=w,t++):(k=e,m===0&&R(L)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.substr(t,8)===Y?(T=Y,t+=8):(T=e,m===0&&R(le)),T===e&&(l.substr(t,8)===re?(T=re,t+=8):(T=e,m===0&&R(ue))),T===e&&(T=null),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){if(J=t,l.charCodeAt(t)===59?(oe=bt,t++):(oe=e,m===0&&R(mt)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if(l.substr(t,9)===As?(ce=As,t+=9):(ce=e,m===0&&R(Fd)),ce!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();if(Se!==e)if(l.charCodeAt(t)===61?(Ee=Dr,t++):(Ee=e,m===0&&R(Pr)),Ee!==e){for(ke=[],Te=F();Te!==e;)ke.push(Te),Te=F();if(ke!==e)if((Te=$a())!==e){for(Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();Le!==e?J=oe=[oe,de,ce,Se,Ee,ke,Te,Le]:(t=J,J=e)}else t=J,J=e;else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e;else t=J,J=e}else t=J,J=e;if(J===e&&(J=null),J!==e)if(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?h=y=Id(T,V,J):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;if(h===e){if(h=t,l.substr(t,3)===Ss?(y=Ss,t+=3):(y=e,m===0&&R(Cd)),y===e&&(l.substr(t,3)===js?(y=js,t+=3):(y=e,m===0&&R(Rd))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===40?(k=w,t++):(k=e,m===0&&R(L)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.substr(t,8)===Y?(T=Y,t+=8):(T=e,m===0&&R(le)),T===e&&(l.substr(t,8)===re?(T=re,t+=8):(T=e,m===0&&R(ue))),T===e&&(T=null),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?h=y=Nd(T,V):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;if(h===e){if(h=t,l.substr(t,3)===Ts?(y=Ts,t+=3):(y=e,m===0&&R(Od)),y===e&&(l.substr(t,3)===Fs?(y=Fs,t+=3):(y=e,m===0&&R(Ld))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===40?(k=w,t++):(k=e,m===0&&R(L)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.substr(t,8)===Y?(T=Y,t+=8):(T=e,m===0&&R(le)),T===e&&(l.substr(t,8)===re?(T=re,t+=8):(T=e,m===0&&R(ue))),T===e&&(T=null),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?h=y=Dd(T,V):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;if(h===e){if(h=t,l.substr(t,3)===Is?(y=Is,t+=3):(y=e,m===0&&R(Pd)),y===e&&(l.substr(t,3)===Cs?(y=Cs,t+=3):(y=e,m===0&&R(Md))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===40?(k=w,t++):(k=e,m===0&&R(L)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.substr(t,8)===Y?(T=Y,t+=8):(T=e,m===0&&R(le)),T===e&&(l.substr(t,8)===re?(T=re,t+=8):(T=e,m===0&&R(ue))),T===e&&(T=null),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?h=y=Qd(T,V):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;if(h===e)if(h=t,l.substr(t,3)===Rs?(y=Rs,t+=3):(y=e,m===0&&R(Bd)),y===e&&(l.substr(t,3)===Ns?(y=Ns,t+=3):(y=e,m===0&&R(Ud))),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if(l.charCodeAt(t)===40?(k=w,t++):(k=e,m===0&&R(L)),k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.substr(t,8)===Y?(T=Y,t+=8):(T=e,m===0&&R(le)),T===e&&(l.substr(t,8)===re?(T=re,t+=8):(T=e,m===0&&R(ue))),T===e&&(T=null),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();de!==e?h=y=Gd(T,V):(t=h,h=e)}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e;else t=h,h=e}else t=h,h=e}}}}return m--,h===e&&(y=e,m===0&&R(kd)),h}(),n===e&&(n=t,(a=Ye())!==e&&(a=pp(a)),n=a)))))),m--,n===e&&(a=e,m===0&&R(lp)),n}function ri(){var n,a,h,y,x,k;if(m++,n=t,l.charCodeAt(t)===40?(a=w,t++):(a=e,m===0&&R(L)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if((y=Me())!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();x!==e?(l.charCodeAt(t)===41?(k=he,t++):(k=e,m===0&&R(be)),k!==e?n=a=hp(y):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(dp)),n}function ni(){var n,a,h,y,x,k,_,T,M,V,J,oe,de,ce,Se,Ee;if(m++,n=t,l.substr(t,3)===Co?(a=Co,t+=3):(a=e,m===0&&R(vp)),a===e&&(l.substr(t,3)===Ro?(a=Ro,t+=3):(a=e,m===0&&R(gp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=bp(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,4)===No?(a=No,t+=4):(a=e,m===0&&R(mp)),a===e&&(l.substr(t,4)===Oo?(a=Oo,t+=4):(a=e,m===0&&R(xp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=wp(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,11)===Lo?(a=Lo,t+=11):(a=e,m===0&&R(_p)),a===e&&(l.substr(t,11)===Do?(a=Do,t+=11):(a=e,m===0&&R(kp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.charCodeAt(t)===44?(T=Ke,t++):(T=e,m===0&&R($e)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();J!==e?(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e?n=a=Ep(k,V):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,8)===Po?(a=Po,t+=8):(a=e,m===0&&R(Ap)),a===e&&(l.substr(t,8)===Mo?(a=Mo,t+=8):(a=e,m===0&&R(Sp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=jp(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,5)===Qo?(a=Qo,t+=5):(a=e,m===0&&R(Tp)),a===e&&(l.substr(t,5)===Bo?(a=Bo,t+=5):(a=e,m===0&&R(Fp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Ye())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=Ip(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,3)===Uo?(a=Uo,t+=3):(a=e,m===0&&R(Cp)),a===e&&(l.substr(t,3)===Go?(a=Go,t+=3):(a=e,m===0&&R(Rp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=Np(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,3)===qo?(a=qo,t+=3):(a=e,m===0&&R(Op)),a===e&&(l.substr(t,3)===Ho?(a=Ho,t+=3):(a=e,m===0&&R(Lp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=Dp(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,5)===Jo?(a=Jo,t+=5):(a=e,m===0&&R(Pp)),a===e&&(l.substr(t,5)===zo?(a=zo,t+=5):(a=e,m===0&&R(Mp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e){if(y=t,l.charCodeAt(t)===40?(x=w,t++):(x=e,m===0&&R(L)),x!==e){for(k=[],_=F();_!==e;)k.push(_),_=F();if(k!==e)if((_=Me())!==e){for(T=[],M=F();M!==e;)T.push(M),M=F();T!==e?(l.charCodeAt(t)===41?(M=he,t++):(M=e,m===0&&R(be)),M!==e?y=x=[x,k,_,T,M]:(t=y,y=e)):(t=y,y=e)}else t=y,y=e;else t=y,y=e}else t=y,y=e;y===e&&(y=wt()),y!==e?n=a=Qp(y):(t=n,n=e)}else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,8)===Vo?(a=Vo,t+=8):(a=e,m===0&&R(Bp)),a===e&&(l.substr(t,8)===Wo?(a=Wo,t+=8):(a=e,m===0&&R(Up))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e&&(y=ur())!==e?n=a=Gp(y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,l.substr(t,2)===Xo?(a=Xo,t+=2):(a=e,m===0&&R(qp)),a===e&&(l.substr(t,2)===Ko?(a=Ko,t+=2):(a=e,m===0&&R(Hp))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.charCodeAt(t)===44?(T=Ke,t++):(T=e,m===0&&R($e)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();if(J!==e)if(l.charCodeAt(t)===44?(oe=Ke,t++):(oe=e,m===0&&R($e)),oe!==e){for(de=[],ce=F();ce!==e;)de.push(ce),ce=F();if(de!==e)if((ce=Me())!==e){for(Se=[],Ee=F();Ee!==e;)Se.push(Ee),Ee=F();Se!==e?(l.charCodeAt(t)===41?(Ee=he,t++):(Ee=e,m===0&&R(be)),Ee!==e?n=a=Jp(k,V,ce):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,9)===$o?(a=$o,t+=9):(a=e,m===0&&R(zp)),a===e&&(l.substr(t,9)===Zo?(a=Zo,t+=9):(a=e,m===0&&R(Vp)),a===e&&(l.substr(t,9)===Yo?(a=Yo,t+=9):(a=e,m===0&&R(Wp)))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=Xp(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,7)===es?(a=es,t+=7):(a=e,m===0&&R(Kp)),a===e&&(l.substr(t,7)===ts?(a=ts,t+=7):(a=e,m===0&&R($p)),a===e&&(l.substr(t,7)===rs?(a=rs,t+=7):(a=e,m===0&&R(Zp)))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=Yp(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,8)===ns?(a=ns,t+=8):(a=e,m===0&&R(ed)),a===e&&(l.substr(t,8)===is?(a=is,t+=8):(a=e,m===0&&R(td))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if(l.charCodeAt(t)===44?(T=Ke,t++):(T=e,m===0&&R($e)),T!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();if(M!==e)if((V=Me())!==e){for(J=[],oe=F();oe!==e;)J.push(oe),oe=F();J!==e?(l.charCodeAt(t)===41?(oe=he,t++):(oe=e,m===0&&R(be)),oe!==e?n=a=rd(k,V):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,5)===os?(a=os,t+=5):(a=e,m===0&&R(nd)),a===e&&(l.substr(t,5)===ss?(a=ss,t+=5):(a=e,m===0&&R(id)),a===e&&(l.substr(t,5)===as?(a=as,t+=5):(a=e,m===0&&R(od)),a===e&&(l.substr(t,5)===ls?(a=ls,t+=5):(a=e,m===0&&R(sd)),a===e&&(l.substr(t,5)===us?(a=us,t+=5):(a=e,m===0&&R(ad)),a===e&&(l.substr(t,5)===cs?(a=cs,t+=5):(a=e,m===0&&R(ld))))))),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();if(h!==e)if(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y!==e){for(x=[],k=F();k!==e;)x.push(k),k=F();if(x!==e)if((k=Me())!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();_!==e?(l.charCodeAt(t)===41?(T=he,t++):(T=e,m===0&&R(be)),T!==e?n=a=ud(k):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e;if(n===e){if(n=t,l.substr(t,7)===fs?(a=fs,t+=7):(a=e,m===0&&R(cd)),a===e&&(l.substr(t,7)===ps?(a=ps,t+=7):(a=e,m===0&&R(fd))),a!==e){if(h=[],ds.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(hs)),y!==e)for(;y!==e;)h.push(y),ds.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(hs));else h=e;if(h!==e){for(y=[],x=F();x!==e;)y.push(x),x=F();if(y!==e)if(l.charCodeAt(t)===40?(x=w,t++):(x=e,m===0&&R(L)),x!==e){for(k=[],_=t,T=[],M=F();M!==e;)T.push(M),M=F();for(T!==e&&(M=Me())!==e?(l.charCodeAt(t)===44?(V=Ke,t++):(V=e,m===0&&R($e)),V!==e?_=T=[T,M,V]:(t=_,_=e)):(t=_,_=e);_!==e;){for(k.push(_),_=t,T=[],M=F();M!==e;)T.push(M),M=F();T!==e&&(M=Me())!==e?(l.charCodeAt(t)===44?(V=Ke,t++):(V=e,m===0&&R($e)),V!==e?_=T=[T,M,V]:(t=_,_=e)):(t=_,_=e)}if(k!==e){for(_=[],T=F();T!==e;)_.push(T),T=F();if(_!==e)if((T=Me())!==e){for(M=[],V=F();V!==e;)M.push(V),V=F();M!==e?(l.charCodeAt(t)===41?(V=he,t++):(V=e,m===0&&R(be)),V!==e?n=a=pd(h,k,T):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;else t=n,n=e}else t=n,n=e}else t=n,n=e;else t=n,n=e}else t=n,n=e}else t=n,n=e;n===e&&(n=function(){var ke,Te,Le,Ce,qe,Fe,Qe,Pe,De,gt,ft,ot,jt,pt,er;if(m++,ke=t,l.substr(t,5)===ys?(Te=ys,t+=5):(Te=e,m===0&&R(hd)),Te===e&&(l.substr(t,5)===vs?(Te=vs,t+=5):(Te=e,m===0&&R(yd))),Te!==e){for(Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();if(Le!==e)if(l.charCodeAt(t)===40?(Ce=w,t++):(Ce=e,m===0&&R(L)),Ce!==e){for(qe=[],Fe=F();Fe!==e;)qe.push(Fe),Fe=F();if(qe!==e)if((Fe=Me())!==e){for(Qe=[],Pe=F();Pe!==e;)Qe.push(Pe),Pe=F();if(Qe!==e)if(l.charCodeAt(t)===44?(Pe=Ke,t++):(Pe=e,m===0&&R($e)),Pe!==e){for(De=[],gt=F();gt!==e;)De.push(gt),gt=F();if(De!==e)if((gt=Me())!==e){for(ft=[],ot=F();ot!==e;)ft.push(ot),ot=F();if(ft!==e){if(ot=t,l.charCodeAt(t)===44?(jt=Ke,t++):(jt=e,m===0&&R($e)),jt!==e){for(pt=[],er=F();er!==e;)pt.push(er),er=F();pt!==e&&(er=Me())!==e?ot=jt=[jt,pt,er]:(t=ot,ot=e)}else t=ot,ot=e;if(ot===e&&(ot=null),ot!==e){for(jt=[],pt=F();pt!==e;)jt.push(pt),pt=F();jt!==e?(l.charCodeAt(t)===41?(pt=he,t++):(pt=e,m===0&&R(be)),pt!==e?ke=Te=vd(Fe,gt,ot):(t=ke,ke=e)):(t=ke,ke=e)}else t=ke,ke=e}else t=ke,ke=e}else t=ke,ke=e;else t=ke,ke=e}else t=ke,ke=e;else t=ke,ke=e}else t=ke,ke=e;else t=ke,ke=e}else t=ke,ke=e;else t=ke,ke=e}else t=ke,ke=e;return m--,ke===e&&(Te=e,m===0&&R(dd)),ke}(),n===e&&(n=function(){var ke,Te,Le,Ce;if(m++,ke=t,l.substr(t,6)===Jr?(Te=Jr,t+=6):(Te=e,m===0&&R(gs)),Te===e&&(l.substr(t,6)===zr?(Te=zr,t+=6):(Te=e,m===0&&R(bs))),Te!==e){for(Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();Le!==e&&(Ce=ct())!==e?ke=Te=bd(Ce):(t=ke,ke=e)}else t=ke,ke=e;return m--,ke===e&&(Te=e,m===0&&R(gd)),ke}(),n===e&&(n=function(){var ke,Te,Le,Ce,qe,Fe;if(m++,ke=t,l.substr(t,3)===ms?(Te=ms,t+=3):(Te=e,m===0&&R(xd)),Te===e&&(l.substr(t,3)===xs?(Te=xs,t+=3):(Te=e,m===0&&R(wd))),Te!==e){for(Le=[],Ce=F();Ce!==e;)Le.push(Ce),Ce=F();if(Le!==e)if(l.substr(t,6)===Jr?(Ce=Jr,t+=6):(Ce=e,m===0&&R(gs)),Ce===e&&(l.substr(t,6)===zr?(Ce=zr,t+=6):(Ce=e,m===0&&R(bs))),Ce!==e){for(qe=[],Fe=F();Fe!==e;)qe.push(Fe),Fe=F();qe!==e&&(Fe=ct())!==e?ke=Te=_d(Fe):(t=ke,ke=e)}else t=ke,ke=e;else t=ke,ke=e}else t=ke,ke=e;return m--,ke===e&&(Te=e,m===0&&R(md)),ke}())))}}}}}}}}}}}}}}return m--,n===e&&(a=e,m===0&&R(yp)),n}function sn(){var n,a,h,y,x;return m++,n=t,(a=$a())!==e?(h=function(){var k,_,T,M,V,J,oe,de;if(m++,k=t,l.charCodeAt(t)===64?(_=zs,t++):(_=e,m===0&&R(Vs)),_!==e){if(T=[],Ws.test(l.charAt(t))?(M=l.charAt(t),t++):(M=e,m===0&&R(Xs)),M!==e)for(;M!==e;)T.push(M),Ws.test(l.charAt(t))?(M=l.charAt(t),t++):(M=e,m===0&&R(Xs));else T=e;if(T!==e){if(M=[],V=t,l.charCodeAt(t)===45?(J=dt,t++):(J=e,m===0&&R(ht)),J!==e){if(oe=[],Wr.test(l.charAt(t))?(de=l.charAt(t),t++):(de=e,m===0&&R(Xr)),de!==e)for(;de!==e;)oe.push(de),Wr.test(l.charAt(t))?(de=l.charAt(t),t++):(de=e,m===0&&R(Xr));else oe=e;oe!==e?V=J=[J,oe]:(t=V,V=e)}else t=V,V=e;for(;V!==e;)if(M.push(V),V=t,l.charCodeAt(t)===45?(J=dt,t++):(J=e,m===0&&R(ht)),J!==e){if(oe=[],Wr.test(l.charAt(t))?(de=l.charAt(t),t++):(de=e,m===0&&R(Xr)),de!==e)for(;de!==e;)oe.push(de),Wr.test(l.charAt(t))?(de=l.charAt(t),t++):(de=e,m===0&&R(Xr));else oe=e;oe!==e?V=J=[J,oe]:(t=V,V=e)}else t=V,V=e;M!==e?k=_=Ah(T,M):(t=k,k=e)}else t=k,k=e}else t=k,k=e;return m--,k===e&&(_=e,m===0&&R(Eh)),k}(),h===e&&(h=t,l.substr(t,2)===Os?(y=Os,t+=2):(y=e,m===0&&R(zd)),y!==e&&(x=et())!==e?h=y=[y,x]:(t=h,h=e)),h===e&&(h=null),h!==e?n=a=Vd(a,h):(t=n,n=e)):(t=n,n=e),m--,n===e&&(a=e,m===0&&R(Jd)),n}function an(){var n;return m++,(n=function(){var a;return m++,a=si(),a===e&&(a=oi())===e&&(a=Yt()),m--,a===e&&m===0&&R(Xd),a}())===e&&(n=function(){var a;return m++,a=function(){var h,y,x;return m++,h=t,l.charCodeAt(t)===43?(y=kt,t++):(y=e,m===0&&R(Et)),y!==e&&(x=si())!==e?h=y=Ks(x):(t=h,h=e),m--,h===e&&(y=e,m===0&&R(Mh)),h}(),a===e&&(a=function(){var h,y,x;return m++,h=t,l.charCodeAt(t)===43?(y=kt,t++):(y=e,m===0&&R(Et)),y!==e&&(x=oi())!==e?h=y=Ks(x):(t=h,h=e),m--,h===e&&(y=e,m===0&&R(Ph)),h}(),a===e&&(a=function(){var h,y,x;return m++,h=t,l.charCodeAt(t)===43?(y=kt,t++):(y=e,m===0&&R(Et)),y!==e&&(x=Yt())!==e?h=y=Dh(x):(t=h,h=e),m--,h===e&&(y=e,m===0&&R(Lh)),h}())),m--,a===e&&m===0&&R(Kd),a}(),n===e&&(n=fr())),m--,n===e&&m===0&&R(Wd),n}function fr(){var n;return m++,n=function(){var a,h,y;return m++,a=t,l.charCodeAt(t)===45?(h=dt,t++):(h=e,m===0&&R(ht)),h!==e&&(y=si())!==e?a=h=Nn(y):(t=a,a=e),m--,a===e&&(h=e,m===0&&R(Uh)),a}(),n===e&&(n=function(){var a,h,y;return m++,a=t,l.charCodeAt(t)===45?(h=dt,t++):(h=e,m===0&&R(ht)),h!==e&&(y=oi())!==e?a=h=Nn(y):(t=a,a=e),m--,a===e&&(h=e,m===0&&R(Bh)),a}(),n===e&&(n=function(){var a,h,y;return m++,a=t,l.charCodeAt(t)===45?(h=dt,t++):(h=e,m===0&&R(ht)),h!==e&&(y=Yt())!==e?a=h=Nn(y):(t=a,a=e),m--,a===e&&(h=e,m===0&&R(Qh)),a}())),m--,n===e&&m===0&&R($d),n}function ln(){var n,a;return m++,n=t,l.substr(t,4)===Ls?(a=Ls,t+=4):(a=e,m===0&&R(Yd)),a===e&&(l.substr(t,4)===Ds?(a=Ds,t+=4):(a=e,m===0&&R(eh))),a!==e&&(a=th()),(n=a)===e&&(n=t,l.substr(t,5)===Ps?(a=Ps,t+=5):(a=e,m===0&&R(rh)),a===e&&(l.substr(t,5)===Ms?(a=Ms,t+=5):(a=e,m===0&&R(nh))),a!==e&&(a=ih()),n=a),m--,n===e&&(a=e,m===0&&R(Zd)),n}function $a(){var n,a;return m++,n=t,a=function(){var h,y,x,k;if(m++,h=t,l.substr(t,3)===$r?(y=$r,t+=3):(y=e,m===0&&R(na)),y!==e){for(x=[],ia.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(oa)),k===e&&(k=At());k!==e;)x.push(k),ia.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(oa)),k===e&&(k=At());x!==e?(l.substr(t,3)===$r?(k=$r,t+=3):(k=e,m===0&&R(na)),k!==e?h=y=Kr(x):(t=h,h=e)):(t=h,h=e)}else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(Kh)),h}(),a!==e&&(a=Vr(a)),(n=a)===e&&(n=t,a=function(){var h,y,x,k;if(m++,h=t,l.substr(t,3)===Zr?(y=Zr,t+=3):(y=e,m===0&&R(sa)),y!==e){for(x=[],aa.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(la)),k===e&&(k=At());k!==e;)x.push(k),aa.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(la)),k===e&&(k=At());x!==e?(l.substr(t,3)===Zr?(k=Zr,t+=3):(k=e,m===0&&R(sa)),k!==e?h=y=Kr(x):(t=h,h=e)):(t=h,h=e)}else t=h,h=e;return m--,h===e&&(y=e,m===0&&R($h)),h}(),a!==e&&(a=Vr(a)),(n=a)===e&&(n=t,a=function(){var h,y,x,k;if(m++,h=t,l.charCodeAt(t)===39?(y=On,t++):(y=e,m===0&&R(Ln)),y!==e){for(x=[],$s.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(Zs)),k===e&&(k=At());k!==e;)x.push(k),$s.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(Zs)),k===e&&(k=At());x!==e?(l.charCodeAt(t)===39?(k=On,t++):(k=e,m===0&&R(Ln)),k!==e?h=y=Kr(x):(t=h,h=e)):(t=h,h=e)}else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(Wh)),h}(),a!==e&&(a=Vr(a)),(n=a)===e&&(n=t,a=function(){var h,y,x,k;if(m++,h=t,l.charCodeAt(t)===34?(y=Ys,t++):(y=e,m===0&&R(ea)),y!==e){for(x=[],ta.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(ra)),k===e&&(k=At());k!==e;)x.push(k),ta.test(l.charAt(t))?(k=l.charAt(t),t++):(k=e,m===0&&R(ra)),k===e&&(k=At());x!==e?(l.charCodeAt(t)===34?(k=Ys,t++):(k=e,m===0&&R(ea)),k!==e?h=y=Kr(x):(t=h,h=e)):(t=h,h=e)}else t=h,h=e;return m--,h===e&&(y=e,m===0&&R(Xh)),h}(),a!==e&&(a=Vr(a)),n=a))),m--,n===e&&(a=e,m===0&&R(oh)),n}function et(){var n,a;return m++,n=t,(a=un())!==e&&(a=ah(a)),(n=a)===e&&(n=t,a=function(){var h,y;return m++,h=t,y=function(){var x,k,_;return m++,x=t,k=ii(),k!==e&&(_=el())!==e?x=k=bh(k,_):(t=x,x=e),m--,x===e&&(k=e,m===0&&R(gh)),x}(),y!==e&&(y=uh(y)),h=y,h===e&&(h=t,(y=ii())!==e&&(y=ch(y)),h=y),m--,h===e&&(y=e,m===0&&R(lh)),h}(),a!==e&&(a=Qs(a)),n=a),m--,n===e&&(a=e,m===0&&R(sh)),n}function un(){var n,a,h,y;if(m++,n=t,l.charCodeAt(t)===60?(a=Fn,t++):(a=e,m===0&&R(In)),a!==e){for(h=[],Bs.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Us));y!==e;)h.push(y),Bs.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Us));h!==e?(l.charCodeAt(t)===62?(y=Cn,t++):(y=e,m===0&&R(Rn)),y!==e?n=a=yh(h):(t=n,n=e)):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(hh)),n}function ii(){var n,a,h;return m++,n=t,a=function(){var y,x,k,_;if(m++,y=t,x=Za(),x!==e){for(k=[],(_=cn())===e&&(l.charCodeAt(t)===46?(_=rt,t++):(_=e,m===0&&R(nt)));_!==e;)k.push(_),(_=cn())===e&&(l.charCodeAt(t)===46?(_=rt,t++):(_=e,m===0&&R(nt)));k!==e?y=x=Wy(x,k):(t=y,y=e)}else t=y,y=e;return m--,y===e&&(x=e,m===0&&R(Vy)),y}(),a===e&&(a=null),a!==e?(l.charCodeAt(t)===58?(h=or,t++):(h=e,m===0&&R(sr)),h!==e?n=a=Qs(a):(t=n,n=e)):(t=n,n=e),m--,n===e&&(a=e,m===0&&R(vh)),n}function Yt(){var n,a,h;if(m++,n=t,a=[],ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve)),h!==e)for(;h!==e;)a.push(h),ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve));else a=e;return a!==e&&(a=jh(a)),m--,(n=a)===e&&(a=e,m===0&&R(Sh)),n}function oi(){var n,a,h,y,x;if(m++,n=t,a=[],ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve)),h!==e)for(;h!==e;)a.push(h),ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve));else a=e;if(a!==e)if(l.charCodeAt(t)===46?(h=rt,t++):(h=e,m===0&&R(nt)),h!==e){for(y=[],ze.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(Ve));x!==e;)y.push(x),ze.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(Ve));y!==e?n=a=Fh(a,h,y):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e)if(n=t,l.charCodeAt(t)===46?(a=rt,t++):(a=e,m===0&&R(nt)),a!==e){if(h=[],ze.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Ve)),y!==e)for(;y!==e;)h.push(y),ze.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Ve));else h=e;h!==e?n=a=Ih(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Th)),n}function si(){var n,a,h,y,x;if(m++,n=t,a=[],ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve)),h!==e)for(;h!==e;)a.push(h),ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve));else a=e;if(a!==e)if(l.charCodeAt(t)===46?(h=rt,t++):(h=e,m===0&&R(nt)),h!==e){for(y=[],ze.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(Ve));x!==e;)y.push(x),ze.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(Ve));y!==e&&(x=ai())!==e?n=a=Rh(a,h,y,x):(t=n,n=e)}else t=n,n=e;else t=n,n=e;if(n===e){if(n=t,l.charCodeAt(t)===46?(a=rt,t++):(a=e,m===0&&R(nt)),a!==e){if(h=[],ze.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Ve)),y!==e)for(;y!==e;)h.push(y),ze.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Ve));else h=e;h!==e&&(y=ai())!==e?n=a=Nh(a,h,y):(t=n,n=e)}else t=n,n=e;if(n===e){if(n=t,a=[],ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve)),h!==e)for(;h!==e;)a.push(h),ze.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(Ve));else a=e;a!==e&&(h=ai())!==e?n=a=Oh(a,h):(t=n,n=e)}}return m--,n===e&&(a=e,m===0&&R(Ch)),n}function ai(){var n,a,h,y,x;if(m++,n=t,qh.test(l.charAt(t))?(a=l.charAt(t),t++):(a=e,m===0&&R(Hh)),a!==e)if(Jh.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(zh)),h===e&&(h=null),h!==e){if(y=[],ze.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(Ve)),x!==e)for(;x!==e;)y.push(x),ze.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(Ve));else y=e;y!==e?n=a=Vh(a,h,y):(t=n,n=e)}else t=n,n=e;else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Gh)),n}function At(){var n,a,h;return m++,n=t,l.charCodeAt(t)===92?(a=ua,t++):(a=e,m===0&&R(ca)),a!==e?(Yh.test(l.charAt(t))?(h=l.charAt(t),t++):(h=e,m===0&&R(ey)),h!==e?n=a=[a,h]:(t=n,n=e)):(t=n,n=e),m--,n===e&&(a=e,m===0&&R(Zh)),n}function wt(){var n,a,h,y;if(m++,n=t,l.charCodeAt(t)===40?(a=w,t++):(a=e,m===0&&R(L)),a!==e){for(h=[],y=F();y!==e;)h.push(y),y=F();h!==e?(l.charCodeAt(t)===41?(y=he,t++):(y=e,m===0&&R(be)),y!==e?n=a=ry():(t=n,n=e)):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(ty)),n}function F(){var n;return m++,iy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(oy)),n===e&&(sy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(ay)),n===e&&(ly.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(uy)),n===e&&(cy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(fy)),n===e&&(n=function(){var a,h,y,x;if(m++,a=t,l.charCodeAt(t)===35?(h=fa,t++):(h=e,m===0&&R(pa)),h!==e){for(y=[],da.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(ha));x!==e;)y.push(x),da.test(l.charAt(t))?(x=l.charAt(t),t++):(x=e,m===0&&R(ha));y!==e?a=h=[h,y]:(t=a,a=e)}else t=a,a=e;return m--,a===e&&(h=e,m===0&&R(py)),a}())))),m--,n===e&&m===0&&R(ny),n}function Za(){var n;return m++,yy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(vy)),n===e&&(gy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(by)),n===e&&(my.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(xy)),n===e&&(wy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(_y)),n===e&&(ky.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Ey)),n===e&&(Ay.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Sy)),n===e&&(jy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Ty)),n===e&&(Fy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Iy)),n===e&&(Cy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Ry)),n===e&&(Ny.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Oy)),n===e&&(Ly.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Dy)),n===e&&(Py.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(My)),n===e&&(Qy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(By)),n===e&&(Uy.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Gy))))))))))))))),m--,n===e&&m===0&&R(hy),n}function pr(){var n;return m++,(n=Za())===e&&(l.charCodeAt(t)===95?(n=ya,t++):(n=e,m===0&&R(va))),m--,n===e&&m===0&&R(qy),n}function Ya(){var n,a,h,y;if(m++,n=t,(a=pr())===e&&(ze.test(l.charAt(t))?(a=l.charAt(t),t++):(a=e,m===0&&R(Ve))),a!==e){for(h=[],(y=pr())===e&&(ze.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Ve)),y===e&&(Dn.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Pn)),y===e&&(Mn.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Qn)),y===e&&(Bn.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Un))))));y!==e;)h.push(y),(y=pr())===e&&(ze.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Ve)),y===e&&(Dn.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Pn)),y===e&&(Mn.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Qn)),y===e&&(Bn.test(l.charAt(t))?(y=l.charAt(t),t++):(y=e,m===0&&R(Un))))));h!==e?n=a=Jy(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Hy)),n}function cn(){var n;return m++,(n=pr())===e&&(l.charCodeAt(t)===45?(n=dt,t++):(n=e,m===0&&R(ht)),n===e&&(ze.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Ve)),n===e&&(Dn.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Pn)),n===e&&(Mn.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Qn)),n===e&&(Bn.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Un))))))),m--,n===e&&m===0&&R(zy),n}function el(){var n,a,h,y;if(m++,n=t,(a=pr())===e&&(ze.test(l.charAt(t))?(a=l.charAt(t),t++):(a=e,m===0&&R(Ve)),a===e&&(l.charCodeAt(t)===58?(a=or,t++):(a=e,m===0&&R(sr)),a===e&&(a=li()))),a!==e){for(h=[],(y=cn())===e&&(l.charCodeAt(t)===46?(y=rt,t++):(y=e,m===0&&R(nt)),y===e&&(l.charCodeAt(t)===58?(y=or,t++):(y=e,m===0&&R(sr)),y===e&&(y=li())));y!==e;)h.push(y),(y=cn())===e&&(l.charCodeAt(t)===46?(y=rt,t++):(y=e,m===0&&R(nt)),y===e&&(l.charCodeAt(t)===58?(y=or,t++):(y=e,m===0&&R(sr)),y===e&&(y=li())));h!==e?n=a=Ky(a,h):(t=n,n=e)}else t=n,n=e;return m--,n===e&&(a=e,m===0&&R(Xy)),n}function li(){var n;return m++,n=function(){var a,h,y,x,k;return m++,a=t,h=t,l.charCodeAt(t)===37?(y=ga,t++):(y=e,m===0&&R(ba)),y!==e&&(x=tl())!==e&&(k=tl())!==e?h=y=[y,x,k]:(t=h,h=e),h!==e&&(h=Yy(h)),a=h,m--,a===e&&(h=e,m===0&&R(Zy)),a}(),n===e&&(n=function(){var a,h,y;return m++,a=t,l.charCodeAt(t)===92?(h=ua,t++):(h=e,m===0&&R(ca)),h!==e?(l.charCodeAt(t)===95?(y=ya,t++):(y=e,m===0&&R(va)),y===e&&(l.charCodeAt(t)===126?(y=sv,t++):(y=e,m===0&&R(av)),y===e&&(l.charCodeAt(t)===46?(y=rt,t++):(y=e,m===0&&R(nt)),y===e&&(l.charCodeAt(t)===45?(y=dt,t++):(y=e,m===0&&R(ht)),y===e&&(l.charCodeAt(t)===33?(y=kn,t++):(y=e,m===0&&R(En)),y===e&&(l.charCodeAt(t)===36?(y=Hs,t++):(y=e,m===0&&R(Js)),y===e&&(l.charCodeAt(t)===38?(y=lv,t++):(y=e,m===0&&R(uv)),y===e&&(l.charCodeAt(t)===39?(y=On,t++):(y=e,m===0&&R(Ln)),y===e&&(l.charCodeAt(t)===40?(y=w,t++):(y=e,m===0&&R(L)),y===e&&(l.charCodeAt(t)===41?(y=he,t++):(y=e,m===0&&R(be)),y===e&&(l.charCodeAt(t)===42?(y=_e,t++):(y=e,m===0&&R(je)),y===e&&(l.charCodeAt(t)===43?(y=kt,t++):(y=e,m===0&&R(Et)),y===e&&(l.charCodeAt(t)===44?(y=Ke,t++):(y=e,m===0&&R($e)),y===e&&(l.charCodeAt(t)===59?(y=bt,t++):(y=e,m===0&&R(mt)),y===e&&(l.charCodeAt(t)===58?(y=or,t++):(y=e,m===0&&R(sr)),y===e&&(l.charCodeAt(t)===61?(y=Dr,t++):(y=e,m===0&&R(Pr)),y===e&&(l.charCodeAt(t)===47?(y=Ft,t++):(y=e,m===0&&R(It)),y===e&&(l.charCodeAt(t)===63?(y=wn,t++):(y=e,m===0&&R(_n)),y===e&&(l.charCodeAt(t)===35?(y=fa,t++):(y=e,m===0&&R(pa)),y===e&&(l.charCodeAt(t)===64?(y=zs,t++):(y=e,m===0&&R(Vs)),y===e&&(l.charCodeAt(t)===37?(y=ga,t++):(y=e,m===0&&R(ba)))))))))))))))))))))),y!==e?a=h=cv(y):(t=a,a=e)):(t=a,a=e),m--,a===e&&(h=e,m===0&&R(ov)),a}()),m--,n===e&&m===0&&R($y),n}function tl(){var n;return m++,ze.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(Ve)),n===e&&(tv.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(rv)),n===e&&(nv.test(l.charAt(t))?(n=l.charAt(t),t++):(n=e,m===0&&R(iv)))),m--,n===e&&m===0&&R(ev),n}var St=function(n){for(var a="",h=0;h<n.length;h++)typeof n[h]=="string"?a+=n[h]:a+=n[h].join("");return a},lt=0,rl={},pv=function(n,a){rl[n]=a},dv=function(n){rl.null=n},nl=function(n){var a="";if(n==null)return null;for(var h=0;h<n.length;h++)a+=n[h];return a.toUpperCase()};if((u=o())!==e&&t===l.length)return u;throw u!==e&&t<l.length&&R({type:"end"}),fv(Gn,yt<l.length?l.charAt(yt):null,yt<l.length?xa(yt,yt+1):xa(yt,yt))}}}()},{}],145:[function(P,ee,X){P("./btree").Tree;var N=P("./utils"),l=N,E=P("./lexicon").Lexicon;PersistentLexicon=function(u,e){var r=this;N.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=e||"rdfstorejs";var o=r.indexedDB.open(this.dbName+"_lexicon",1);o.onerror=function(s){u(null,new Error("Error opening IndexedDB: "+s.target.errorCode))},o.onsuccess=function(s){r.db=s.target.result,u(r)},o.onupgradeneeded=function(s){r.db=s.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(u,e,r){if(u!=this.defaultGraphOid){var o=this.db.transaction(["knownGraphs"],"readwrite");o.onerror=function(c){r(null,new Error(c.target.statusCode))};var s=o.objectStore("knownGraphs");s.get(e).onsuccess=function(c){c.target.result?r(!0):s.add({oid:u,uriToken:e}).onsuccess=function(v){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(u,e){var r=[],o=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();o.onsuccess=function(s){var c=s.target.result;c?(u===!0?r.push(c.value.uriToken):r.push(c.value.oid),c.continue()):e(r)},o.onerror=function(s){e(null,new Error("Error retrieving data from the cursor: "+s.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(u,e){if(u===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"],"readwrite").objectStore("components"),o=r.index("value").get("_u:"+u);o.onsuccess=function(s){var c=s.target.result;if(c){c.counter++;var v=c.id,b=r.put(c);b.onsuccess=function(g){e(v)},b.onerror=function(g){e(null,new Error("Error updating the URI data"+g.target.errorCode))}}else{var d=r.add({value:"_u:"+u,counter:0,uri:!0});d.onsuccess=function(g){e(g.target.result)},d.onerror=function(g){e(null,new Error("Error inserting the URI data"+g.target.errorCode))}}},o.onerror=function(s){e(null,new Error("Error retrieving the URI data"+s.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(u,e){if(u===this.defaultGraphUri)e(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+u);r.onsuccess=function(o){o.target.result!=null?e(o.target.result.id):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving uri data "+o.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(u,e){if(u===this.defaultGraphUri)e(0);else{var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+u);r.onsuccess=function(o){o.target.result!=null?e(o.target.result.cost):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving uri data "+o.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(u){var e=guid(),r=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});r.onsuccess=function(o){u(o.target.result)},r.onerror=function(o){u(null,new Error("Error inserting the URI data"+o.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(u,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(u,e){var r=this.db.transaction(["components"],"readwrite").objectStore("components"),o=r.index("value").get("_l:"+u);o.onsuccess=function(s){var c=s.target.result;if(c){c.counter++;var v=c.id,b=r.put(c);b.onsuccess=function(g){e(v)},b.onerror=function(g){e(null,new Error("Error updating the literal data"+g.target.errorCode))}}else{var d=r.add({value:"_l:"+u,counter:0,literal:!0});d.onsuccess=function(g){e(g.target.result)},d.onerror=function(g){e(null,new Error("Error inserting the literal data"+g.target.errorCode))}}},o.onerror=function(s){e(null,new Error("Error retrieving the literal data"+s.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(u,e){var r=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+u);r.onsuccess=function(o){o.target.result!=null?e(o.target.result.id):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving literal data "+o.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(u,e){var r=that.db.transaction(["components"]).objectStore("components").index("components").get(u);r.onsuccess=function(o){o.target.result!=null?e(o.target.result.cost):e(-1)},r.onerror=function(o){e(null,new Error("Error retrieving literal data "+o.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(u){return E.prototype.parseLiteral(u)},PersistentLexicon.prototype.parseUri=function(u){return E.prototype.parseUri(u)},PersistentLexicon.prototype.retrieve=function(u,e){var r,o=this;u===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((r=o.db.transaction(["components"]).objectStore("components").get(u)).onsuccess=function(s){if(s.target.result!=null)if(s.target.result.label!=null){var c="_:"+s.target.result.id;e({token:"blank",value:c})}else s.target.result.uri!=null?e(o.parseUri(s.target.result.value.slice(3,s.target.result.value.length))):s.target.result.literal!=null?e(o.parseLiteral(s.target.result.value.slice(3,s.target.result.value.length))):(console.log(s.target.result),e(null,new Error("Unknown type of component "+s.target.result)));else e(null,null)},r.onerror=function(s){e(null,new Error("Error searching in blanks data "+s.target.errorCode))})},PersistentLexicon.prototype.clear=function(u){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,r=function(){u?.()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=r,e.onerror=r},PersistentLexicon.prototype.unregister=function(u,e,r){var o=this;l.seq(function(s){o._unregisterTerm(u.subject.token,e.subject,s)},function(s){o._unregisterTerm(u.predicate.token,e.predicate,s)},function(s){o._unregisterTerm(u.object.token,e.object,s)},function(s){u.graph!=null?o._unregisterTerm(u.graph.token,e.graph,s):s()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(u,e,r){var o=this.db.transaction(["components","knownGraphs"],"readwrite");u==="uri"?e!=this.defaultGraphOid?o.objectStore("components").delete(e).onsuccess=void(o.objectStore("knownGraphs").delete(e).onsuccess=function(){r()}):r():o.objectStore("components").delete(e).onsuccess=function(){r()}},ee.exports={PersistentLexicon}},{"./btree":139,"./lexicon":142,"./utils":156}],146:[function(P,ee,X){var N=P("./utils");PersistentQuadBackend=function(l,E){var u=this;if(arguments!==0){for(var e in N.registerIndexedDB(u),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var r=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[r]=e}u.dbName=l.name||"rdfstorejs";var o=u.indexedDB.open(this.dbName+"_db",1);o.onerror=function(s){E(null,new Error("Error opening IndexedDB: "+s.target.errorCode))},o.onsuccess=function(s){u.db=s.target.result,E(u)},o.onupgradeneeded=function(s){var c=s.target.result.createObjectStore(u.dbName,{keyPath:"SPOG"});N.each(u.indices,function(v){v!=="SPOG"&&c.createIndex(v,v,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(l,E){var u=this;N.each(this.indices,function(r){l[r]=u._genMinIndexKey(l,r)});var e=u.db.transaction([u.dbName],"readwrite");e.oncomplete=function(r){},e.onerror=function(r){E(null,new Error(r.target.statusCode))},e.objectStore(u.dbName).add(l).onsuccess=function(r){E(!0)}},PersistentQuadBackend.prototype.range=function(l,E){var u=this,e=u.db.transaction([u.dbName]).objectStore(u.dbName),r=this._indexForPattern(l),o=this._genMinIndexKey(l,r),s=this._genMaxIndexKey(l,r),c=u.IDBKeyRange.bound(o,s,!1,!1),v=[];(r==="SPOG"?e:e.index(r)).openCursor(c).onsuccess=function(b){var d=b.target.result;d?(v.push(d.value),d.continue()):E(v)}},PersistentQuadBackend.prototype.search=function(l,E){var u=this,e=u.db.transaction([u.dbName]).objectStore(u.dbName),r=this._genMinIndexKey(l,"SPOG"),o=e.get(r);o.onerror=function(s){E(null,new Error(s.target.statusCode))},o.onsuccess=function(s){E(s.target.result!=null)}},PersistentQuadBackend.prototype.delete=function(l,E){var u=this,e=u._genMinIndexKey(l,"SPOG"),r=u.db.transaction([u.dbName],"readwrite").objectStore(u.dbName).delete(e);r.onsuccess=function(){E(!0)},r.onerror=function(o){E(null,new Error(o.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(l,E){var u=this.componentOrders[E];return N.map(u,function(e){return typeof l[e]=="string"||l[e]==null?"0":l[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(l,E){for(var u=this.componentOrders[E],e=[],r=0;r<u.length;r++){var o=l[u[r]];e[r]=typeof o=="string"?"z":o}return N.map(e,function(s){return""+s}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(l){var E=l.indexKey.sort().join("."),u=this.componentOrdersMap[E];if(u==null)throw new Error("Error, cannot find index for indexKey "+E);return u},PersistentQuadBackend.prototype.clear=function(l){var E,u=this;(E=u.db.transaction([u.dbName],"readwrite").objectStore(u.dbName).clear()).onsuccess=function(){l()},E.onerror=function(){l()}},ee.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":156}],147:[function(P,ee,X){var N=P("./quad_index").QuadIndex,l=P("./utils");QuadBackend=function(E,u){this.indexMap={},this.treeOrder=E.treeOrder,this.indices=E.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;l.eachSeries(this.indices,function(r,o){new N({order:e.treeOrder,componentOrder:e.componentOrders[r]},function(s){e.indexMap[r]=s,o()})},function(){u(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(E){for(var u=E.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var r=QuadBackend.allIndices[e],o=QuadBackend.componentOrders[r],s=0;s<o.length&&l.include(u,o[s])!==!1;s++)if(s==u.length-1)return r;return"SPOG"},QuadBackend.prototype.index=function(E,u){var e=this;l.eachSeries(this.indices,function(r,o){e.indexMap[r].insert(E,function(){o()})},function(){u(!0)})},QuadBackend.prototype.range=function(E,u){var e=this._indexForPattern(E),r=this.indexMap[e];r?.range(E,function(o){u(o)})},QuadBackend.prototype.search=function(E,u){var e=this.indexMap.SPOG;e?.search(E,function(r){u(r!=null)})},QuadBackend.prototype.delete=function(E,u){var e=this;l.eachSeries(this.indices,function(r,o){e.indexMap[r].delete(E,function(){o()})},function(){u(!0)})},QuadBackend.prototype.clear=function(E){var u=this;l.eachSeries(this.indices,function(e,r){new N({order:u.treeOrder,componentOrder:u.componentOrders[e]},function(o){u.indexMap[e]=o,r()})},function(){E(!0)})},ee.exports.QuadBackend=QuadBackend},{"./quad_index":148,"./utils":156}],148:[function(P,ee,X){var N=P("./btree").Tree,l=P("./utils"),E=P("./utils");NodeKey=function(u,e){this.subject=u.subject,this.predicate=u.predicate,this.object=u.object,this.graph=u.graph,this.order=e},NodeKey.prototype.comparator=function(u){for(var e=0;e<this.order.length;e++){var r=this.order[e];if(u[r]==null)return 0;if(this[r]<u[r])return-1;if(this[r]>u[r])return 1}return 0},Pattern=function(u){this.subject=u.subject,this.predicate=u.predicate,this.object=u.object,this.graph=u.graph,this.indexKey=[],this.keyComponents={};var e=[],r=[],o=this;l.forEach(["subject","predicate","object","graph"],function(s){typeof o[s]=="string"?(r.push(s),o.keyComponents[s]=null):(e.push(s),o.keyComponents[s]=o[s],o.indexKey.push(s))}),this.order=e.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(u,e){arguments!=0&&(this.componentOrder=u.componentOrder,N.call(this,u.order,function(r){r.comparator=function(o,s){for(var c=0;c<r.componentOrder.length;c++){var v=r.componentOrder[c],b=o[v],d=s[v];if(b<d)return-1;if(b>d)return 1}return 0},r.rangeComparator=function(o,s){for(var c=0;c<r.componentOrder.length;c++){var v=r.componentOrder[c];if(s[v]==null||o[v]==null)return 0;if(o[v]<s[v])return-1;if(o[v]>s[v])return 1}return 0},e(r)}))},QuadIndex.prototype=l.create(N.prototype,{constructor:N}),QuadIndex.prototype.insert=function(u,e){N.prototype.insert.call(this,u,null,function(r){e(r)})},QuadIndex.prototype.search=function(u,e){N.prototype.search.call(this,u,function(r){e(r)},!0)},QuadIndex.prototype.range=function(u,e){this._rangeTraverse(this,this.root,u,e)},QuadIndex.prototype._rangeTraverse=function(u,e,r,o){var s=r.key,c=[],v=[e];E.whilst(function(){return v.length>0},function(b){for(var d=v.shift(),g=0;g<d.numberActives&&u.rangeComparator(d.keys[g].key,s)===-1;)g++;if(d.isLeaf===!0){for(var f=g;f<d.numberActives&&u.rangeComparator(d.keys[f].key,s)===0;)c.push(d.keys[f].key),f++;b()}else u._diskRead(d.children[g],function(O){v.push(O);var I=g;E.whilst(function(){return I<d.numberActives&&u.rangeComparator(d.keys[I].key,s)===0},function(j){c.push(d.keys[I].key),I++,u._diskRead(d.children[I],function(D){v.push(D),j()})},function(){b()})})},function(){o(c)})},ee.exports={QuadIndex,Pattern,NodeKey}},{"./btree":139,"./utils":156}],149:[function(P,ee,X){var N=P("./abstract_query_tree").AbstractQueryTree,l=P("./abstract_query_tree").NonSupportedSparqlFeatureError,E=P("./utils"),u=P("./quad_index"),e=P("./query_plan").QueryPlan,r=P("./query_filters").QueryFilters,o=P("./rdf_model"),s=P("./rdf_loader").RDFLoader,c=P("./graph_callbacks").CallbacksBackend,v=P("./utils"),b=P("./utils");function d(g,f,O){this.name="BindExpressionError",this.bind=f,this.error=O,this.message=g}d.prototype=new Error,d.constructor=d,QueryEngine=function(g){arguments.length!=0&&(this.backend=g.backend,this.lexicon=g.lexicon,this.eventsOnBatchLoad=g.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new N,this.rdfLoader=new s(g.communication),this.callbacksBackend=new c(this),this.customFns=g.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(g){this.customFns=g},QueryEngine.prototype.registerNsInEnvironment=function(g,f){var O=[];g!=null&&g.prefixes!=null&&(O=g.prefixes);var I={};for(var j in this.defaultPrefixes)I[j]=this.defaultPrefixes[j];for(var D=0;D<O.length;D++){var A=O[D];A.token==="prefix"&&(I[A.prefix]=A.local)}f.namespaces=I,g!=null&&g.base&&typeof g.base=="object"?f.base=g.base.value:f.base=null},QueryEngine.prototype.applyModifier=function(g,f){if(g=="DISTINCT"){for(var O={},I=[],j=0;j<f.length;j++){var D=f[j],A="";for(var C in D){var Q=D[C];Q==null?A=A+C+"null":Q.token=="literal"?(Q.value!=null&&(A+=Q.value),Q.lang!=null&&(A+=Q.lang),Q.type!=null&&(A+=Q.type)):A=Q.value?A+C+Q.value:A+C+Q}O[A]==null&&(I.push(D),O[A]=!0)}return I}return f},QueryEngine.prototype.applyLimitOffset=function(g,f,O){return f==null&&g==null?O:(g==null&&(g=0),f=f==null?O.length:g+f,O.slice(g,f))},QueryEngine.prototype.applySingleOrderBy=function(g,f,O,I,j){var D=[],A=this;v.eachSeries(g,function(C,Q){r.collect(C.expression,[f],O,I,A,function(q){D.push(q[0].value),Q()})},function(){j({binding:f,value:D})})},QueryEngine.prototype.applyOrderBy=function(g,f,O,I,j){var D=this,A=[];g!=null&&g.length>0?v.eachSeries(f,function(C,Q){D.applySingleOrderBy(g,C,O,I,function(q){A.push(q),Q()})},function(){A.sort(function(q,H){return D.compareFilteredBindings(q,H,g,I)});for(var C=[],Q=0;Q<A.length;Q++)C.push(A[Q].binding);j(C)}):j(f)},QueryEngine.prototype.compareFilteredBindings=function(g,f,O,I){for(var j=0;;){if(j==g.value.length)return 0;var D,A=O[j].direction;if(g.value[j]!=null||f.value[j]!=null){if(g.value[j]==null)D={value:!1};else if(f.value[j]==null)D={value:!0};else{if(g.value[j].token==="blank"&&f.value[j].token==="blank"){j++;continue}if(g.value[j].token==="blank")D={value:!1};else if(f.value[j].token==="blank")D={value:!0};else if(g.value[j].token==="uri"&&f.value[j].token==="uri"){if(r.runEqualityFunction(g.value[j],f.value[j],[],this,I).value==1){j++;continue}D=r.runTotalGtFunction(g.value[j],f.value[j],[])}else if(g.value[j].token==="uri")D={value:!1};else if(f.value[j].token==="uri")D={value:!0};else if(g.value[j].token==="literal"&&f.value[j].token==="literal"&&g.value[j].type==null&&f.value[j].type==null){if(r.runEqualityFunction(g.value[j],f.value[j],[],this,I).value==1){j++;continue}D=r.runTotalGtFunction(g.value[j],f.value[j],[])}else if(g.value[j].token==="literal"&&g.value[j].type==null)D={value:!1};else if(f.value[j].token==="literal"&&f.value[j].type==null)D={value:!0};else{if(r.runEqualityFunction(g.value[j],f.value[j],[],this,I).value==1){j++;continue}D=r.runTotalGtFunction(g.value[j],f.value[j],[])}}return D.value==1?A==="ASC"?1:-1:A==="ASC"?-1:1}j++}},QueryEngine.prototype.removeDefaultGraphBindings=function(g,f){for(var O=[],I={},j=0;j<f.named.length;j++)I[f.named[j].oid]=!0;for(j=0;j<f.implicit.length;j++)I[f.implicit[j].oid]==null&&O.push(f.implicit[j].oid);var D=[];for(j=0;j<g.length;j++){var A=g[j],C=!1;for(var Q in A){for(var q=0;q<I.length;q++)if(A[Q]===I[q]){C=!0;break}if(C)break}C||D.push(A)}return D},QueryEngine.prototype.aggregateBindings=function(g,f,O,I,j){this.copyDenormalizedBindings(f,I.outCache,function(D){for(var A={},C=0;C<g.length;C++){var Q=r.runAggregator(g[C],D,this,O,I);g[C].alias?A[g[C].alias.value]=Q:A[g[C].value.value]=Q}j(A)})},QueryEngine.prototype.projectBindings=function(g,f,O){if(g[0].kind==="*")return f;for(var I=[],j=0;j<f.length;j++){for(var D=f[j],A={},C=!0,Q=0;Q<g.length;Q++)if(g[Q].token=="variable"&&g[Q].kind!="aliased")A[g[Q].value.value]=D[g[Q].value.value];else if(g[Q].token=="variable"&&g[Q].kind=="aliased"){var q=r.runFilter(g[Q].expression,D,this,O,{blanks:{},outCache:{}});if(r.isEbvError(q)){C=!1;break}A[g[Q].alias.value]=q}C===!0&&I.push(A)}return I},QueryEngine.prototype.resolveNsInEnvironment=function(g,f){return f.namespaces[g]},QueryEngine.prototype.normalizeTerm=function(g,f,O,I){if(g.token==="uri"){var j=E.lexicalFormBaseUri(g,f);j==null?I(null):O?this.lexicon.registerUri(j,I):this.lexicon.resolveUri(j,I)}else if(g.token==="literal"){var D=E.lexicalFormLiteral(g,f);O?this.lexicon.registerLiteral(D,I):this.lexicon.resolveLiteral(D,I)}else if(g.token==="blank"){var A=g.value,C=f.blanks[A];C!=null?I(C):O?this.lexicon.registerBlank(function(Q){f.blanks[A]=Q,I(Q)}):this.lexicon.resolveBlank(function(Q){f.blanks[A]=Q,I(Q)})}else g.token==="var"?I(g.value):I(null)},QueryEngine.prototype.normalizeDatasets=function(g,f,O){var I=this;v.eachSeries(g,function(j,D){j.value===I.lexicon.defaultGraphUri?(j.oid=I.lexicon.defaultGraphOid,D()):I.normalizeTerm(j,f,!1,function(A){A!=null&&(j.oid=A),D()})},function(){O(!0)})},QueryEngine.prototype.normalizeQuad=function(g,f,O,I){var j=null,D=null,A=null,C=null,Q=this,q=!1;v.seq(function(H){if(g.graph==null||g.graph.value===Q.lexicon.defaultGraphUri)C=0,H();else{var B=E.lexicalFormBaseUri(g.graph,f);Q.normalizeTerm(g.graph,f,O,function(Z){Z!=null?(C=Z,O===!0&&g.graph.token!="var"?Q.lexicon.registerGraph(Z,B,function(){H()}):H()):(q=!0,H())})}},function(H){q===!1?Q.normalizeTerm(g.subject,f,O,function(B){B!=null?(j=B,H()):(q=!0,H())}):H()},function(H){q===!1?Q.normalizeTerm(g.predicate,f,O,function(B){B!=null?(D=B,H()):(q=!0,H())}):H()},function(H){q===!1?Q.normalizeTerm(g.object,f,O,function(B){B!=null?(A=B,H()):(q=!0,H())}):H()})(function(){I(q===!0?null:{subject:j,predicate:D,object:A,graph:C})})},QueryEngine.prototype.denormalizeBindingsList=function(g,f,O){var I=this,j=[];v.eachSeries(g,function(D,A){I.denormalizeBindings(D,f,function(C){j.push(C),A()})},function(){O(j)})},QueryEngine.prototype.copyDenormalizedBindings=function(g,f,O){var I=this,j=[];v.eachSeries(g,function(D,A){var C={},Q=b.keys(D);v.eachSeries(Q,function(q,H){var B=D[q];if(B==null)C[q]=null,H();else if(typeof B=="object")C[q]=B,H();else{var Z=f[B];Z!=null?(C[q]=Z,H()):I.lexicon.retrieve(B,function(se){f[B]=se,C[q]=se,H()})}},function(){j.push(C),A()})},function(){O(j)})},QueryEngine.prototype.denormalizeBindings=function(g,f,O){var I=b.keys(g),j=f.outCache,D=this;v.eachSeries(I,function(A,C){var Q=g[A];Q==null?(g[A]=null,C()):typeof Q=="object"?C():j[Q]!=null?(g[A]=j[Q],C()):D.lexicon.retrieve(Q,function(q){g[A]=q,q.token==="blank"&&(f.blanks[q.value]=Q),C()})},function(){O(g)})},QueryEngine.prototype.execute=function(g,f,O,I){g=E.normalizeUnicodeLiterals(g);var j=this.abstractQueryTree.parseQueryString(g);if(j==null)f(!1,"Error parsing query string");else if(j.token==="query"&&j.kind=="update"){this.callbacksBackend.startGraphModification();var D=this;this.executeUpdate(j,function(A,C){D.lexicon.updateAfterWrite&&D.lexicon.updateAfterWrite(),A?(D.callbacksBackend.cancelGraphModification(),f(A,C)):D.callbacksBackend.endGraphModification(function(){f(A,C)})})}else j.token==="query"&&j.kind=="query"&&this.executeQuery(j,f,O,I)},QueryEngine.prototype.executeQuery=function(g,f,O,I){var j=g.prologue,D=g.units,A=this,C={blanks:{},outCache:{}};this.registerNsInEnvironment(j,C);var Q=A.abstractQueryTree.parseExecutableUnit(D[0]);Q.kind==="select"?this.executeSelect(Q,C,O,I,function(q,H){q==null?typeof H=="object"&&H.denorm===!0?f(null,H.bindings):A.denormalizeBindingsList(H,C,function(B){f(null,B)}):f(q)}):Q.kind==="ask"?(Q.projection=[{token:"variable",kind:"*"}],this.executeSelect(Q,C,O,I,function(q,H){q==null?H.length>0?f(null,!0):f(null,!1):f(q)})):Q.kind==="construct"&&(Q.projection=[{token:"variable",kind:"*"}],A=this,this.executeSelect(Q,C,O,I,function(q,H){q==null?A.denormalizeBindingsList(H,C,function(B){if(B!=null){var Z=new o.Graph;Q.template==null&&(Q.template={triplesContext:Q.pattern});for(var se=1,ae=[],ye=0;ye<B.length;ye++){for(var fe=B[ye],z=0;z<ae.length;z++)delete ae[z].valuetmp;for(z=0;z<Q.template.triplesContext.length;z++){for(var U=["subject","predicate","object"],W=Q.template.triplesContext[z],K=0;K<U.length;K++){var Y=U[K];if(W[Y].token==="blank"&&!(W[Y].valuetmp&&W[Y].valuetmp!=null)){var le="_:b"+se;se++,W[Y].valuetmp=le,ae.push(W[Y])}}var re=o.buildRDFResource(W.subject,fe,A,C),ue=(K=o.buildRDFResource(W.predicate,fe,A,C),o.buildRDFResource(W.object,fe,A,C));if(re!=null&&K!=null&&ue!=null){var pe=new o.Triple(re,K,ue);Z.add(pe)}}}f(null,Z)}else f(new Error("Error denormalizing bindings."))}):f(q)}))},QueryEngine.prototype.executeSelect=function(g,f,O,I,j){if(g.kind==="select"||g.kind==="ask"||g.kind==="construct"||g.kind==="modify"){var D=g.projection,A=g.dataset,C=g.modifier,Q=g.limit,q=g.offset,H=g.order,B=this;O==null&&I==null||(A.implicit=O||[],A.named=I||[]),A.implicit!=null&&A.implicit.length===0&&A.named!=null&&A.named.length===0&&A.implicit.push(this.lexicon.defaultGraphUriTerm),B.normalizeDatasets(A.implicit.concat(A.named),f,function(){try{B.executeSelectUnit(D,A,g.pattern,f,function(Z){if(Z!=null){if(g.group!=null&&g.group===""){for(var se=!1,ae=0;ae<g.projection.length;ae++)if(g.projection[ae].expression!=null&&g.projection[ae].expression.expressionType==="aggregate"){se=!0;break}se===!0&&(g.group="singleGroup")}g.group&&g.group!=""?B.checkGroupSemantics(g.group,D)?B.groupSolution(Z,g.group,A,f,function(ye){var fe=[];v.eachSeries(ye,function(z,U){B.aggregateBindings(D,z,A,f,function(W){fe.push(W),U()})},function(){j(null,{bindings:fe,denorm:!0})})}):j(new Error("Incompatible Group and Projection variables")):B.applyOrderBy(H,Z,A,f,function(ye){var fe=B.projectBindings(D,ye,A),z=B.applyModifier(C,fe),U=B.applyLimitOffset(q,Q,z),W=B.removeDefaultGraphBindings(U,A);j(null,W)})}else j(new Error("Error executing SELECT query."))})}catch(Z){j(Z)}})}else j(new Error("Cannot execute "+g.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(g,f,O,I,j){var D=[],A=[],C=!1,Q=this;f==="singleGroup"?j([g]):v.eachSeries(g,function(q,H){var B=!0;v.eachSeries(f,function(Z,se){var ae=null;if(Z.token==="var")ae=Z.value,C==0&&D.push(ae),se();else if(Z.token==="aliased_expression"){if(ae=Z.alias.value,C==0&&D.push(ae),Z.expression.primaryexpression==="var")q[Z.alias.value]=q[Z.expression.value.value];else{var ye=Q.copyDenormalizedBindings([q],I.outCache),fe=r.runFilter(Z.expression,ye[0],Q,O,I);r.isEbvError(fe)?B=!1:(fe.value!=null&&(fe.value=""+fe.value),q[Z.alias.value]=fe)}se()}else Q.copyDenormalizedBindings([q],I.outCache,function(z){var U=r.runFilter(Z,z[0],Q,I);r.isEbvError(U)?B=!1:(q["groupCondition"+env._i]=U,ae="groupCondition"+env._i,C==0&&D.push(ae)),se()})},function(){C==0&&(C=!0),B===!0&&A.push(q),H()})},function(){for(var q={},H={},B=0;B<A.length;B++){for(var Z=A[B],se="",ae=0;ae<D.length;ae++){var ye=Z[D[ae]];se+=typeof ye=="object"?ye.value:ye}q[se]==null?(H[se]=0,q[se]=[Z]):q[se].push(Z)}var fe=[];for(var z in q)fe.push(q[z]);j(fe)})},QueryEngine.prototype.executeSelectUnit=function(g,f,O,I,j){if(O.kind==="BGP")this.executeAndBGP(g,f,O,I,j);else if(O.kind==="UNION")this.executeUNION(g,f,O.value,I,j);else if(O.kind==="JOIN")this.executeJOIN(g,f,O,I,j);else if(O.kind==="LEFT_JOIN")this.executeLEFT_JOIN(g,f,O,I,j);else if(O.kind==="FILTER"){var D=this;this.executeSelectUnit(g,f,O.value,I,function(A){A!=null?r.checkFilters(O,A,!1,f,I,D,j):j([])})}else{if(O.kind!=="EMPTY_PATTERN")throw new l(O.kind);j([])}},QueryEngine.prototype.executeUNION=function(g,f,O,I,j){var D,A,C=O[0],Q=O[1],q=null;if(O.length!=2)throw"SPARQL algebra UNION with more than two components";var H=this;v.seq(function(B){try{H.executeSelectUnit(g,f,C,I,function(Z){D=Z,B()})}catch(Z){q=Z,B()}},function(B){if(q==null)try{H.executeSelectUnit(g,f,Q,I,function(Z){A=Z,B()})}catch(Z){q=Z,B()}else B()})(function(){if(q!=null)j(q);else{var B=e.unionBindings(D,A);H.runBinds(O.binds,B,f,I,function(Z,se){if(Z!=null)throw new d("Error processing bind expressions",O.binds,Z);r.checkFilters(O,se,!1,f,I,H,j)})}})},QueryEngine.prototype.executeAndBGP=function(g,f,O,I,j){var D=this;e.executeAndBGPsDPSize(O.value,f,this,I,function(A){A!=null?D.runBinds(O.binds,A,f,I,function(C,Q){if(C!=null)throw new d("Error processing bind expressions",O.binds,C);r.checkFilters(O,Q,!1,f,I,D,j)}):j(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(g,f,O,I,j){var D=O.lvalue,A=O.rvalue;if(D.kind==="EMPTY_PATTERN")this.executeSelectUnit(g,f,A,I,j);else{var C,Q,q=null,H=null,B=null,Z=this;v.seq(function(se){try{Z.executeSelectUnit(g,f,D,I,function(ae){q=ae,se()})}catch(ae){B=ae,se()}},function(se){if(B!=null)se();else try{Z.executeSelectUnit(g,f,A,I,function(ae){H=ae,se()})}catch(ae){B=ae,se()}})(function(){if(B!=null)j(B);else{var se=e.leftOuterJoinBindings(q,H);Z.runBinds(O.binds,se,f,I,function(ae,ye){if(ae!=null)throw new d("Error processing bind expressions",O.binds,ae);r.checkFilters(O,se,!0,f,I,Z,function(fe){if(q.length>1&&H.length>1){var z=[],U={};for(var W in q[0])U[W]=!0;for(W in H[0])U[W]!=1&&z.push(W);C=[],Q={};for(var K=0;K<fe.length;K++)if(fe[K].__nullify__===!0){for(var Y=0;Y<z.length;Y++)fe[K].bindings[z[Y]]=null;var le=[],re=[];for(var W in fe[K].bindings)fe[K].bindings[W]!=null&&(le.push(W+fe[K].bindings[W]),le.sort(),re.push(le.join("")));if(Q[le.join("")]==null){for(Y=0;Y<re.length;Y++)Q[re[Y]]=!0;C.push(fe[K].bindings)}}else{C.push(fe[K]),le=[],re=[];for(var W in fe[K])le.push(W+fe[K][W]),le.sort(),Q[le.join("")]=!0}j(C)}else j(fe)})})}})}},QueryEngine.prototype.executeJOIN=function(g,f,O,I,j){var D=O.lvalue,A=O.rvalue,C=null,Q=null,q=null,H=this;v.seq(function(B){try{H.executeSelectUnit(g,f,D,I,function(Z){C=Z,B()})}catch(Z){q=Z,B()}},function(B){if(q!=null)B();else try{H.executeSelectUnit(g,f,A,I,function(Z){Q=Z,B()})}catch(Z){q=Z,B()}})(function(){var B=null;if(q!=null)j(q);else if(C.length===0||Q.length===0)j([]);else{var Z={},se=[];for(var ae in C[0])Z[ae]=!1;for(var ae in Q[0])Z[ae]===!1&&se.push(ae);B=se.length==0||H.abstractQueryTree.treeWithUnion(D)||H.abstractQueryTree.treeWithUnion(A)?e.joinBindings(C,Q):e.joinBindings2(se,C,Q),H.runBinds(O.binds,B,f,I,function(ye,fe){if(ye!=null)throw new d("Error processing bind expressions",O.binds,ye);r.checkFilters(O,fe,!1,f,I,H,j)})}})},QueryEngine.prototype.rangeQuery=function(g,f,O){var I=this;I.normalizeQuad(g,f,!1,function(j){j!=null?I.backend.range(new u.Pattern(j),function(D){D==null||D.length==0?O([]):O(D)}):O(null)})},QueryEngine.prototype.executeUpdate=function(g,f){var O=g.prologue,I=g.units,j=this,D={blanks:{},outCache:{}};this.registerNsInEnvironment(O,D);for(var A=0;A<I.length;A++){var C=j.abstractQueryTree.parseExecutableUnit(I[A]);if(C.kind==="insertdata"){var Q=null;v.eachSeries(C.quads,function(H,B){Q===null?j._executeQuadInsert(H,D,function(Z){Z!=null&&(Q=Z),B()}):B()},function(){Q===null?f(null,!0):f(Q)})}else if(C.kind==="deletedata")Q=null,v.eachSeries(C.quads,function(H,B){Q===null?j._executeQuadDelete(H,D,function(Z){Z!=null&&(Q=Z),B()}):B()},function(){Q===null?f(null,!0):f(Q)});else if(C.kind==="modify")this._executeModifyQuery(C,D,f);else if(C.kind==="create")f(!0);else if(C.kind==="load"){var q={uri:E.lexicalFormBaseUri(C.sourceGraph,D)};C.destinyGraph!=null&&(q={uri:E.lexicalFormBaseUri(C.destinyGraph,D)}),j=this,this.rdfLoader.load(C.sourceGraph.value,q,function(H,B){H?f(new Error("error batch loading quads")):j.batchLoad(B,function(Z){Z!==null?f(null,Z):f(new Error("Error batch loading quads"))})})}else if(C.kind==="drop")this._executeClearGraph(C.destinyGraph,D,f);else{if(C.kind!=="clear")throw new Error("not supported execution unit");this._executeClearGraph(C.destinyGraph,D,f)}}},QueryEngine.prototype.batchLoad=function(g,f){var O=0,I={},j=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),v.eachSeries(g,function(D,A){var C={};v.eachSeries(["subject","predicate","object","graph"],function(Q,q){(function(H,B,Z,se){var ae;if(H[B].uri||H[B].token==="uri"){var ye=H[B].uri||H[B].value;j.lexicon.registerUri(ye,function(fe){var z=function(){H[B].uri!=null&&(H[B]={token:"uri",value:H[B].uri},delete H[B].uri),Z[B]=fe,se()};B==="graph"?j.lexicon.registerGraph(fe,ye,function(){z()}):z()})}else H[B].literal||H[B].token==="literal"?j.lexicon.registerLiteral(H[B].literal||H[B].value,function(fe){H[B].literal!=null&&(H[B]=j.lexicon.parseLiteral(H[B].literal),delete H[B].literal),Z[B]=fe,se()}):(ae=I[H[B].blank||H[B].value])==null?j.lexicon.registerBlank(function(fe){I[H[B].blank||H[B].value]=fe,H[B].token==null&&(H[B].token="blank",H[B].value=H[B].blank,delete H[B].blank),Z[B]=fe,se()}):(H[B].token==null&&(H[B].token="blank",H[B].value=H[B].blank,delete H[B].blank),Z[B]=ae,se())})(D,Q,C,q)},function(){var Q=D;D=C;var q=new u.NodeKey(D);j.backend.search(q,function(H){H?A():j.backend.index(q,function(B){B&&(j.eventsOnBatchLoad&&j.callbacksBackend.nextGraphModification(c.added,[Q,D]),O+=1),A()})})})},function(){j.lexicon.updateAfterWrite!=null&&j.lexicon.updateAfterWrite();var D=function(){f(O)};j.eventsOnBatchLoad?j.callbacksBackend.endGraphModification(D()):D()})},QueryEngine.prototype._executeModifyQuery=function(g,f,O){var I=this,j=!0,D=new Error("Error executing modify query"),A=null,C=["subject","predicate","object","graph"];g.insert=g.insert==null?[]:g.insert,g.delete=g.delete==null?[]:g.delete,v.seq(function(Q){var q=[],H=[];if(g.with!=null&&q.push(g.with),g.using!=null){H=[];for(var B=0;B<g.using.length;B++){var Z=g.using[B];Z.kind==="named"?H.push(Z.uri):q.push(Z.uri)}}g.dataset={},g.projection=[{token:"variable",kind:"*"}],I.executeSelect(g,f,q,H,function(se,ae){if(se)return D=se,j=!1,Q();I.denormalizeBindingsList(ae,f,function(ye){ye!=null?A=ye:(D=new Error("Error denormalizing bindings list"),j=!1),Q()})})},function(Q){var q=g.with;if(j){for(var H=[],B=0;B<g.delete.length;B++)for(var Z=g.delete[B],se=0;se<A.length;se++){for(var ae={},ye=A[se],fe=0;fe<C.length;fe++){var z=C[fe];z=="graph"&&Z[z]==null?ae.graph=q:Z[z].token==="var"?ae[z]=ye[Z[z].value]:ae[z]=Z[z]}H.push(ae)}v.eachSeries(H,function(U,W){I._executeQuadDelete(U,f,function(){W()})},function(){Q()})}else Q()},function(Q){var q=g.with;if(j){for(var H=[],B=0;B<g.insert.length;B++)for(var Z=g.insert[B],se=0;se<A.length;se++){for(var ae={},ye=A[se],fe=0;fe<C.length;fe++){var z=C[fe];z=="graph"&&Z[z]==null?ae.graph=q:Z[z].token==="var"?ae[z]=ye[Z[z].value]:ae[z]=Z[z]}H.push(ae)}v.eachSeries(H,function(U,W){I._executeQuadInsert(U,f,function(){W()})},function(){Q()})}else Q()})(function(){O(j?null:D)})},QueryEngine.prototype._executeQuadInsert=function(g,f,O){var I,j=this,D=!1,A=null;v.seq(function(C){j.normalizeQuad(g,f,!0,function(Q){Q!=null?I=Q:(D=!0,A="Error normalizing quad."),C()})},function(C){if(D===!1){var Q=new u.NodeKey(I);j.backend.search(Q,function(q){q===!0?C():j.backend.index(Q,function(){j.callbacksBackend.nextGraphModification(c.added,[g,I]),C()})})}else C()})(function(){D?O(new Error(A)):O(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(g,f,O){var I,j,D,A=this,C=!1;v.seq(function(Q){A.normalizeQuad(g,f,!0,function(q){q!=null?I=q:(C=!0,j="Error normalizing quad."),Q()})},function(Q){C===!1?(D=new u.NodeKey(I),A.backend.delete(D,function(){Q()})):Q()},function(Q){C===!1?A.lexicon.unregister(g,D,function(){A.callbacksBackend.nextGraphModification(c.deleted,[g,I]),Q()}):Q()})(function(){C?O(new Error(j)):O(null,!0)})},QueryEngine.prototype._executeClearGraph=function(g,f,O){var I=this;if(g==="default")this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",O);else if(g==="named")I.lexicon.registeredGraphs(!0,function(D){if(D!=null){var A=!1;v.eachSeries(D,function(C,Q){A?Q():I.execute("DELETE { GRAPH <"+C+"> { ?s ?p ?o } } WHERE { GRAPH <"+C+"> { ?s ?p ?o } }",function(q,H){q?(A=q,Q()):I.lexicon.resolveUri(C,function(B){B!=-1?I.lexicon.knownGraphs.delete(B,function(){Q()}):(A="Cannot find graph "+C+" to clear it",Q())})})},function(){O(!A)})}else O(!1,"Error deleting named graphs")});else if(g==="all")I=this,this.execute("CLEAR DEFAULT",function(D,A){D?O(!1,A):I.execute("CLEAR NAMED",O)});else if(g.token=="uri"){var j=E.lexicalFormBaseUri(g,f);j!=null?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+j+"> { ?s ?p ?o } } WHERE { GRAPH <"+j+"> { ?s ?p ?o } }",function(D){I.callbacksBackend.ongoingModification=!1,O(D)})):O(!1,"wrong graph URI")}else O(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(g,f){if(g==="singleGroup")return!0;for(var O={},I=0;I<g.length;I++){var j=g[I];j.token==="var"?O[j.value]=!0:j.token==="aliased_expression"&&(O[j.alias.value]=!0)}for(I=0;I<f.length;I++){var D=f[I];if(D.kind==="var"){if(O[D.value.value]==null)return!1}else if(D.kind==="aliased"&&D.expression&&D.expression.primaryexpression==="var"&&O[D.expression.value.value]==null)return!1}return!0},QueryEngine.prototype.runBinds=function(g,f,O,I,j){var D=this,A=f;g!=null&&g.length>0?D.copyDenormalizedBindings(f,I.outCache,function(C){for(var Q=0;Q<f.length;Q++)for(var q=0;q<g.length;q++){var H=g[q],B=C[Q],Z=r.runFilter(H.expression,B,D,O,I);r.isEbvError(Z)?j(Z):A[Q][H.as.value]=Z}j(null,f)}):j(null,f)},QueryEngine.prototype.computeCosts=function(g,f,O){for(var I=0;I<g.length;I++)g[I]._cost=this.quadCost(g[I],f);O(g)},QueryEngine.prototype.quadCost=function(g,f){return 1},QueryEngine.prototype.registerDefaultNamespace=function(g,f){this.defaultPrefixes[g]=f},ee.exports={QueryEngine}},{"./abstract_query_tree":138,"./graph_callbacks":140,"./quad_index":148,"./query_filters":150,"./query_plan":151,"./rdf_loader":152,"./rdf_model":153,"./utils":156}],150:[function(P,ee,X){var N=P("./utils"),l=N,E=P("./utils");QueryFilters={};var u="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,r,o,s,c,v,b){var d=[];e.filter&&typeof e.filter!="function"&&(d=e.filter);var g=[];if(d==null||d.length===0||e.length!=null)return b(r);QueryFilters.preprocessExistentialFilters(d,r,v,s,c,function(f){E.eachSeries(f,function(O,I){QueryFilters.run(O.value,r,o,s,c,v,function(j){for(var D=[],A=0;A<j.length;A++){var C=j[A];C.__nullify__!=null?g.push(C):D.push(C)}r=D,I()})},function(){b(r.concat(g))})})},QueryFilters.preprocessExistentialFilters=function(e,r,o,s,c,v){var b=[];E.eachSeries(e,function(d,g){if(d.value.expressionType!=="builtincall"||d.value.builtincall!=="exists"&&d.value.builtincall!=="notexists")if(d.value.expressionType==="conditionalor"||d.value.expressionType==="conditionaland"){var f=l.map(d.value.operands,function(D){return{value:D}});QueryFilters.preprocessExistentialFilters(f,r,o,s,c,function(D){d.value.operands=D.map(function(A){return A.value}),b.push(d),g()})}else d.value.expressionType==="multiplicativeexpression"?(f=l.map(d.value.factors,function(D){return{value:D}}),QueryFilters.preprocessExistentialFilters(f,r,o,s,c,function(D){d.value.factors=D.map(function(A){return A.value}),b.push(d),g()})):d.value.expressionType==="additiveexpression"?(f=l.map(d.value.summands,function(D){return{value:D}}),QueryFilters.preprocessExistentialFilters(f,r,o,s,c,function(D){d.value.summands=D.map(function(A){return A.value}),b.push(d),g()})):d.value.expressionType==="relationalexpression"?(f=[{value:d.value.op1},{value:d.value.op2}],QueryFilters.preprocessExistentialFilters(f,r,o,s,c,function(D){d.value.op1=D[0].value,d.value.op2=D[1].value,b.push(d),g()})):(d.value.expressionType==="irireforfunction"||d.value.expressionType==="custom")&&d.value.args!=null?(f=l.map(d.value.args,function(D){return{value:D}}),QueryFilters.preprocessExistentialFilters(f,r,o,s,c,function(D){d.value.args=D.map(function(A){return A.value}),b.push(d),g()})):(b.push(d),g());else{var O=d.value.builtincall,I=d.value.args,j={};o.copyDenormalizedBindings(r,c.outCache,function(D){E.eachSeries(D,function(A,C){var Q=l.clone(I[0],!0),q=o.abstractQueryTree.parseSelect({pattern:Q},A);q=o.abstractQueryTree.bind(q.pattern,A),o.executeSelectUnit([{kind:"*"}],s,q,c,function(H){var B=null;B=O==="exists"?QueryFilters.ebvBoolean(H.length!==0):QueryFilters.ebvBoolean(H.length===0);var Z=[];for(var se in A)Z.push(JSON.stringify(A[se]));Z=Z.sort().join(""),j[Z]=B,C()})},function(){d.value.origArgs=d.value.args,d.value.args=j,b.push(d),g()})})}},function(){v(b)})},QueryFilters.boundVars=function(e){if(e.expressionType==null)throw"Cannot find bound expressions in a no expression token";var r=e.expressionType;if(r=="relationalexpression"){var o=e.op1,s=e.op2;return QueryFilters.boundVars(o)+QueryFilters.boundVars(s)}if(r=="conditionalor"||r=="conditionaland"){for(var c=[],v=0;v<e.operands;v++)c=c.concat(QueryFilters.boundVars(e.operands[v]));return c}if(r=="builtincall"){if(e.args==null)return[];var b=[];for(v=0;v<e.args.length;v++)b=b.concat(QueryFilters.boundVars(e.args[v]));return b}if(r=="multiplicativeexpression"){var b=QueryFilters.boundVars(e.factor);for(v=0;v<e.factors.length;v++)b=b.concat(QueryFilters.boundVars(e.factors[v].expression));return b}if(r=="additiveexpression"){for(b=QueryFilters.boundVars(e.summand),v=0;v<e.summands.length;v++)b=b.concat(QueryFilters.boundVars(e.summands[v].expression));return b}return r=="regex"?(b=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):r=="unaryexpression"?QueryFilters.boundVars(e.expression):r=="atomic"?e.primaryexpression=="var"?[e.value]:[]:void 0},QueryFilters.run=function(e,r,o,s,c,v,b){v.copyDenormalizedBindings(r,c.outCache,function(d){for(var g=[],f=0;f<r.length;f++){var O=d[f],I=QueryFilters.runFilter(e,O,v,s,c);if(I=QueryFilters.ebv(I),QueryFilters.isEbvError(I)){if(o){var j={__nullify__:!0,bindings:r[f]};g.push(j)}}else I===!0?g.push(r[f]):o&&(j={__nullify__:!0,bindings:r[f]},g.push(j))}b(g)})},QueryFilters.collect=function(e,r,o,s,c,v){c.copyDenormalizedBindings(r,s.outCache,function(b){for(var d=[],g=0;g<b.length;g++){var f=b[g],O=QueryFilters.runFilter(e,f,c,o,s);d.push({binding:r[g],value:O})}return v(d)})},QueryFilters.runDistinct=function(e,r){},QueryFilters.runAggregator=function(e,r,o,s,c){if(r==null||r.length===0)return QueryFilters.ebvError();if(e.token==="variable"&&e.kind=="var")return r[0][e.value.value];if(e.token==="variable"&&e.kind==="aliased"){if(e.expression.expressionType==="atomic"&&e.expression.primaryexpression==="var")return r[0][e.expression.value.value];if(e.expression.expressionType==="aggregate"){if(e.expression.aggregateType==="max"){for(var v=null,b=0;b<r.length;b++){var d=r[b],g=QueryFilters.runFilter(e.expression.expression,d,o,s,c);QueryFilters.isEbvError(g)||(v===null||QueryFilters.runLtFunction(v,g).value===!0)&&(v=g)}return v===null?QueryFilters.ebvError():v}if(e.expression.aggregateType==="min"){var f=null;for(b=0;b<r.length;b++)d=r[b],g=QueryFilters.runFilter(e.expression.expression,d,o,s,c),QueryFilters.isEbvError(g)||(f===null||QueryFilters.runGtFunction(f,g).value===!0)&&(f=g);return f===null?QueryFilters.ebvError():f}if(e.expression.aggregateType==="count"){var O={},I=0;if(e.expression.expression==="*")if(e.expression.distinct!=null&&e.expression.distinct!="")for(b=0;b<r.length;b++)d=r[b],O[A=N.hashTerm(d)]==null&&(O[A]=!0,I++);else I=r.length;else for(b=0;b<r.length;b++)d=r[b],g=QueryFilters.runFilter(e.expression.expression,d,o,s,c),QueryFilters.isEbvError(g)||(e.expression.distinct!=null&&e.expression.distinct!=""?O[A=N.hashTerm(g)]==null&&(O[A]=!0,I++):I++);return{token:"literal",type:u+"integer",value:""+I}}if(e.expression.aggregateType==="avg"){O={};var j={token:"literal",type:u+"integer",value:"0"};for(I=0,b=0;b<r.length;b++)d=r[b],g=QueryFilters.runFilter(e.expression.expression,d,o,s,c),QueryFilters.isEbvError(g)||(e.expression.distinct!=null&&e.expression.distinct!=""?O[A=N.hashTerm(g)]==null&&(O[A]=!0,QueryFilters.isNumeric(g)&&(j=QueryFilters.runSumFunction(j,g),I++)):QueryFilters.isNumeric(g)&&(j=QueryFilters.runSumFunction(j,g),I++));var D=QueryFilters.runDivFunction(j,{token:"literal",type:u+"integer",value:""+I});return D.value=""+D.value,D}if(e.expression.aggregateType==="sum"){for(O={},j={token:"literal",type:u+"integer",value:"0"},b=0;b<r.length;b++){var A;d=r[b],g=QueryFilters.runFilter(e.expression.expression,d,o,s,c),QueryFilters.isEbvError(g)||(e.expression.distinct!=null&&e.expression.distinct!=""?O[A=N.hashTerm(g)]==null&&(O[A]=!0,QueryFilters.isNumeric(g)&&(j=QueryFilters.runSumFunction(j,g))):QueryFilters.isNumeric(g)&&(j=QueryFilters.runSumFunction(j,g)))}return j.value=""+j.value,j}return g=QueryFilters.runFilter(aggregate.expression,r[0],s,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,r,o,s,c){if(e.expressionType!=null){var v=e.expressionType;if(v=="relationalexpression"){var b=QueryFilters.runFilter(e.op1,r,o,s,c),d=QueryFilters.runFilter(e.op2,r,o,s,c);return QueryFilters.runRelationalFilter(e,b,d,r,o,s,c)}if(v=="conditionalor")return QueryFilters.runOrFunction(e,r,o,s,c);if(v=="conditionaland")return QueryFilters.runAndFunction(e,r,o,s,c);if(v=="additiveexpression")return QueryFilters.runAddition(e.summand,e.summands,r,o,s,c);if(v=="builtincall")return QueryFilters.runBuiltInCall(e.builtincall,e.args,r,o,s,c);if(v=="multiplicativeexpression")return QueryFilters.runMultiplication(e.factor,e.factors,r,o,s,c);if(v=="unaryexpression")return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,r,o,s,c);if(v=="irireforfunction")return QueryFilters.runIriRefOrFunction(e.iriref,e.args,r,o,s,c);if(v=="regex")return QueryFilters.runRegex(e.text,e.pattern,e.flags,r,o,s,c);if(v=="custom")return QueryFilters.runBuiltInCall(e.name,e.args,r,o,s,c);if(v=="atomic")return e.primaryexpression=="var"?r[e.value.value]:(typeof e.value!="object"||e.value.type==null||typeof e.value.type!="object"||(e.value.type=N.lexicalFormBaseUri(e.value.type,c)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return e!=null&&!!(e.token&&e.token=="literal"||e.token&&e.token=="uri"||e.token&&e.token=="blank")},QueryFilters.RDFTermEquality=function(e,r,o,s){return e.token==="literal"&&r.token==="literal"?e.lang==r.lang&&e.type==r.type&&e.value==r.value||(e.type!=null&&r.type!=null||QueryFilters.isSimpleLiteral(e)&&r.type!=null||!(!QueryFilters.isSimpleLiteral(r)||e.type==null))&&QueryFilters.ebvError():e.token==="uri"&&r.token==="uri"?N.lexicalFormBaseUri(e,s)==N.lexicalFormBaseUri(r,s):e.token==="blank"&&r.token==="blank"&&e.value==r.value},QueryFilters.isInteger=function(e){return e!=null&&e.token==="literal"&&(e.type==u+"integer"||e.type==u+"decimal"||e.type==u+"double"||e.type==u+"nonPositiveInteger"||e.type==u+"negativeInteger"||e.type==u+"long"||e.type==u+"int"||e.type==u+"short"||e.type==u+"byte"||e.type==u+"nonNegativeInteger"||e.type==u+"unsignedLong"||e.type==u+"unsignedInt"||e.type==u+"unsignedShort"||e.type==u+"unsignedByte"||e.type==u+"positiveInteger")},QueryFilters.isFloat=function(e){return e!=null&&e.token==="literal"&&e.type==u+"float"},QueryFilters.isDecimal=function(e){return e!=null&&e.token==="literal"&&e.type==u+"decimal"},QueryFilters.isDouble=function(e){return e!=null&&e.token==="literal"&&e.type==u+"double"},QueryFilters.isNumeric=function(e){return e!=null&&e.token==="literal"&&(e.type==u+"integer"||e.type==u+"decimal"||e.type==u+"float"||e.type==u+"double"||e.type==u+"nonPositiveInteger"||e.type==u+"negativeInteger"||e.type==u+"long"||e.type==u+"int"||e.type==u+"short"||e.type==u+"byte"||e.type==u+"nonNegativeInteger"||e.type==u+"unsignedLong"||e.type==u+"unsignedInt"||e.type==u+"unsignedShort"||e.type==u+"unsignedByte"||e.type==u+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||e.token!="literal")&&e.type==null&&e.lang==null},QueryFilters.isXsdType=function(e,r){return!(!r||r.token!="literal")&&r.type==u+""+e},QueryFilters.ebv=function(e){if(e==null||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&e.token==="literal"){if(e.type==u+"integer"||e.type==u+"decimal"||e.type==u+"double"||e.type==u+"nonPositiveInteger"||e.type==u+"negativeInteger"||e.type==u+"long"||e.type==u+"int"||e.type==u+"short"||e.type==u+"byte"||e.type==u+"nonNegativeInteger"||e.type==u+"unsignedLong"||e.type==u+"unsignedInt"||e.type==u+"unsignedShort"||e.type==u+"unsignedByte"||e.type==u+"positiveInteger"){var r=parseFloat(e.value);return!isNaN(r)&&parseFloat(e.value)!=0}return e.type===u+"boolean"?e.value==="true"||e.value===!0||e.value==="True":e.type===u+"string"?e.value!="":e.type===u+"dateTime"?new Date(e.value)!=null:QueryFilters.isEbvError(e)?e:e.type==null?e.value!="":QueryFilters.ebvError()}return e.value===!0},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:u+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:u+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return typeof e=="object"&&e!=null&&e.type==="https://github.com/antoniogarrote/js-tools/types#error"},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:e===!0?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,r,o,s,c,v,b){var d=e.operator;if(d==="=")return QueryFilters.runEqualityFunction(r,o,s,c,v,b);if(d==="!="){var g=QueryFilters.runEqualityFunction(r,o,s,c,v,b);return QueryFilters.isEbvError(g)||(g.value=!g.value),g}if(d==="<")return QueryFilters.runLtFunction(r,o,s);if(d===">")return QueryFilters.runGtFunction(r,o,s);if(d==="<=")return QueryFilters.runLtEqFunction(r,o,s);if(d===">=")return QueryFilters.runGtEqFunction(r,o,s);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if(e.token!="literal")throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==u+"integer")return parseInt(e.value);if(e.type==u+"decimal"||e.type==u+"float"||e.type==u+"double"||e.type==u+"nonPositiveInteger")return parseFloat(e.value);if(e.type==u+"negativeInteger"||e.type==u+"long"||e.type==u+"int"||e.type==u+"short"||e.type==u+"byte"||e.type==u+"nonNegativeInteger"||e.type==u+"unsignedLong"||e.type==u+"unsignedInt"||e.type==u+"unsignedShort"||e.type==u+"unsignedByte"||e.type==u+"positiveInteger")return parseInt(e.value);if(e.type!=u+"date"&&e.type!=u+"dateTime")return e.type==u+"boolean"?e.value===!0||e.value==="true"||e.value==="1"||e.value===1||e.value===!0||e.value!==!1&&e.value!=="false"&&e.value!=="0"&&e.value!==0&&e.value!==!1&&void 0:e.type==u+"string"?e.value===null||e.value===void 0?void 0:""+e.value:(e.type,e.value);try{return N.parseISO8601(e.value)}catch{return null}},QueryFilters.runOrFunction=function(e,r,o,s,c){for(var v=null,b=0;b<e.operands.length;b++){var d=QueryFilters.runFilter(e.operands[b],r,o,s,c);QueryFilters.isEbvError(d)==0&&(d=QueryFilters.ebv(d)),v==null?v=d:QueryFilters.isEbvError(d)?v=QueryFilters.isEbvError(v)?QueryFilters.ebvError():v===!0||QueryFilters.ebvError():d===!0?v=!0:QueryFilters.isEbvError(v)&&(v=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(v)},QueryFilters.runAndFunction=function(e,r,o,s,c){for(var v=null,b=0;b<e.operands.length;b++){var d=QueryFilters.runFilter(e.operands[b],r,o,s,c);QueryFilters.isEbvError(d)==0&&(d=QueryFilters.ebv(d)),v==null?v=d:QueryFilters.isEbvError(d)?v=(QueryFilters.isEbvError(v)||v===!0)&&QueryFilters.ebvError():d===!0?QueryFilters.isEbvError(v)&&(v=QueryFilters.ebvError()):v=!1}return QueryFilters.ebvBoolean(v)},QueryFilters.runEqualityFunction=function(e,r,o,s,c,v){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)){var b=QueryFilters.effectiveTypeValue(e),d=QueryFilters.effectiveTypeValue(r);return isNaN(b)||isNaN(d)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,s,v)):QueryFilters.ebvBoolean(b==d)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",r))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var g=N.compareDateComponents(e.value,r.value);return g!=null?g==0?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(r)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,r,s,v)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=N.compareDateComponents(e.value,r.value);return s!=null?s==1?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,r){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",r)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",r)?QueryFilters.runGtFunction(e,r,[]):e.token&&e.token==="uri"&&r.token&&r.token==="uri"?QueryFilters.ebvBoolean(e.value>r.value):e.token&&e.token==="literal"&&r.token&&r.token==="literal"?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+r.value+r.type+r.lang):e.token&&e.token==="blank"&&r.token&&r.token==="blank"||e.value&&r.value?QueryFilters.ebvBoolean(e.value>r.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=N.compareDateComponents(e.value,r.value);return s!=null?s==-1?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=N.compareDateComponents(e.value,r.value);return s!=null?s!=-1?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,r,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(r)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(r)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",r)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",r))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(r));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",r)||QueryFilters.isXsdType("date",r))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",r)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",r))return QueryFilters.ebvFalse();var s=N.compareDateComponents(e.value,r.value);return s!=null?s!=1?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,r,o,s,c,v){var b=QueryFilters.runFilter(e,o,s,c,v);if(QueryFilters.isEbvError(b))return QueryFilters.ebvError();var d=b;if(QueryFilters.isNumeric(b)){for(var g=0;g<r.length;g++){var f=QueryFilters.runFilter(r[g].expression,o,s,c,v);if(!QueryFilters.isNumeric(f))return QueryFilters.ebvFalse();r[g].operator==="+"?d=QueryFilters.runSumFunction(d,f):r[g].operator==="-"&&(d=QueryFilters.runSubFunction(d,f))}return d}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:u+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:u+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:u+"decimal",value:o}:{token:"literal",type:u+"integer",value:o}},QueryFilters.runSubFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:u+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:u+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:u+"decimal",value:o}:{token:"literal",type:u+"integer",value:o}},QueryFilters.runMultiplication=function(e,r,o,s,c,v){var b=QueryFilters.runFilter(e,o,s,c,v);if(QueryFilters.isEbvError(b))return b;var d=b;if(QueryFilters.isNumeric(b)){for(var g=0;g<r.length;g++){var f=QueryFilters.runFilter(r[g].expression,o,s,c,v);if(QueryFilters.isEbvError(f))return b;if(!QueryFilters.isNumeric(f))return QueryFilters.ebvFalse();r[g].operator==="*"?d=QueryFilters.runMulFunction(d,f):r[g].operator==="/"&&(d=QueryFilters.runDivFunction(d,f))}return d}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:u+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:u+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:u+"decimal",value:o}:{token:"literal",type:u+"integer",value:o}},QueryFilters.runDivFunction=function(e,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(r))return QueryFilters.ebvError();var o=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(r);return QueryFilters.isDouble(e)||QueryFilters.isDouble(r)?{token:"literal",type:u+"double",value:o}:QueryFilters.isFloat(e)||QueryFilters.isFloat(r)?{token:"literal",type:u+"float",value:o}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(r)?{token:"literal",type:u+"decimal",value:o}:{token:"literal",type:u+"integer",value:o}},QueryFilters.runBuiltInCall=function(e,r,o,s,c,v){if(e==="notexists"||e==="exists"){var b=[];for(var d in o)b.push(JSON.stringify(o[d]));return r[b=b.sort().join("")]}for(var g=[],f=0;f<r.length;f++)if(r[f].token==="var")g.push(r[f]);else{var O=QueryFilters.runFilter(r[f],o,s,c,v);if(QueryFilters.isEbvError(O))return O;g.push(O)}if(e==="str")return g[0].token==="literal"?{token:"literal",type:null,value:""+g[0].value}:g[0].token==="uri"?{token:"literal",type:null,value:g[0].value}:QueryFilters.ebvFalse();if(e==="lang")return g[0].token==="literal"?g[0].lang!=null?{token:"literal",value:""+g[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if(e==="datatype"){if(g[0].token==="literal"){var I=g[0];return I.type!=null?typeof I.type=="string"?{token:"uri",value:I.type,prefix:null,suffix:null}:I.type:I.lang==null?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if(e==="isliteral")return g[0].token==="literal"?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if(e==="isblank")return g[0].token==="blank"?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if(e==="isuri"||e==="isiri")return g[0].token==="uri"?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if(e==="sameterm"){var j=g[0],D=g[1],A=QueryFilters.RDFTermEquality(j,D,s,v);return QueryFilters.isEbvError(A)&&(A=!1),QueryFilters.ebvBoolean(A)}if(e==="langmatches"){var C=g[0],Q=g[1];return C.token==="literal"&&Q.token==="literal"?Q.value==="*"&&C.value!=""?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(C.value.toLowerCase().indexOf(Q.value.toLowerCase())===0):QueryFilters.ebvError()}if(e==="bound"){var q=g[0].value;return q==null?QueryFilters.ebvError():o[q]!=null?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(s.customFns[e]!=null)return s.customFns[e](QueryFilters,g);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,r,o,s,c,v){var b=QueryFilters.runFilter(r,o,s,c,v);if(QueryFilters.isEbvError(b))return b;if(e==="!"){var d=QueryFilters.ebv(b);return QueryFilters.isEbvError(d)?QueryFilters.ebvFalse():(d=!d,QueryFilters.ebvBoolean(d))}if(e==="+")return QueryFilters.isNumeric(b)?b:QueryFilters.ebvError();if(e==="-"){if(QueryFilters.isNumeric(b)){var g={};for(var f in b)g[f]=b[f];return g.value=-g.value,g}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,r,o,s,c,v,b){if(e==null||(e=QueryFilters.runFilter(e,s,c,v,b),r==null)||(r=QueryFilters.runFilter(r,s,c,v,b),o!=null&&(o=QueryFilters.runFilter(o,s,c,v,b)),r==null||r.token!=="literal"||o!=null&&o.token!=="literal"))return QueryFilters.ebvError();if(r=r.value,o=o==null?null:o.value,e!=null&&e.token=="var"){if(s[e.value]==null)return QueryFilters.ebvError();e=s[e.value]}else{if(e==null||e.token!=="literal"||e.type!=null&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(o==null?new RegExp(r):new RegExp(r,o.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,r,o){return e.value.type==null||typeof e.value.type!="object"||(e.value.type=N.lexicalFormBaseUri(e.value.type,o)),e},QueryFilters.runIriRefOrFunction=function(e,r,o,s,c,v){if(r==null)return e;for(var b=[],d=0;d<r.length;d++)b.push(QueryFilters.runFilter(r[d],o,s,c,v));var g=N.lexicalFormBaseUri(e,v);if(g==u+"integer"||g==u+"decimal"||g==u+"double"||g==u+"nonPositiveInteger"||g==u+"negativeInteger"||g==u+"long"||g==u+"int"||g==u+"short"||g==u+"byte"||g==u+"nonNegativeInteger"||g==u+"unsignedLong"||g==u+"unsignedInt"||g==u+"unsignedShort"||g==u+"unsignedByte"||g==u+"positiveInteger"){if((f=b[0]).token!=="literal")return QueryFilters.ebvError();if((f=QueryFilters.normalizeLiteralDatatype(f,s,v)).type==u+"integer"||f.type==u+"decimal"||f.type==u+"double"||f.type==u+"nonPositiveInteger"||f.type==u+"negativeInteger"||f.type==u+"long"||f.type==u+"int"||f.type==u+"short"||f.type==u+"byte"||f.type==u+"nonNegativeInteger"||f.type==u+"unsignedLong"||f.type==u+"unsignedInt"||f.type==u+"unsignedShort"||f.type==u+"unsignedByte"||f.type==u+"positiveInteger")return f.type=g,f;if(f.type=="http://www.w3.org/2001/XMLSchema#boolean")return QueryFilters.ebv(f)==1?(f.type=g,f.value=1):(f.type=g,f.value=0),f;if(f.type=="http://www.w3.org/2001/XMLSchema#float"||f.type=="http://www.w3.org/2001/XMLSchema#double")return f.type=g,f.value=parseInt(f.value),f;if(f.type!="http://www.w3.org/2001/XMLSchema#string"&&f.type!=null||f.value.split(".").length>2||f.value.split("-").length>2||f.value.split("/").length>2||f.value.split("+").length>2||g==u+"decimal"&&(f.value.indexOf("e")!=-1||f.value.indexOf("E")!=-1)||!(g!=u+"int"&&g!=u+"integer"||f.value.indexOf("e")==-1&&f.value.indexOf("E")==-1&&f.value.indexOf(".")==-1))return QueryFilters.ebvError();try{return f.value=parseInt(parseFloat(f.value)),isNaN(f.value)?QueryFilters.ebvError():(f.type=g,f)}catch{return QueryFilters.ebvError()}}else{if(g==u+"boolean")return(f=b[0]).token==="literal"&&f.type==null?f.value==="true"||f.value==="1"?QueryFilters.ebvTrue():f.value==="false"||f.value==="0"?QueryFilters.ebvFalse():QueryFilters.ebvError():f.token==="literal"?QueryFilters.isEbvError(f)?f:QueryFilters.ebvBoolean(f):QueryFilters.ebvError();if(g==u+"string")return(f=b[0]).token==="literal"?(f=QueryFilters.normalizeLiteralDatatype(f,s,v)).type==u+"integer"||f.type==u+"decimal"||f.type==u+"double"||f.type==u+"nonPositiveInteger"||f.type==u+"negativeInteger"||f.type==u+"long"||f.type==u+"int"||f.type==u+"short"||f.type==u+"byte"||f.type==u+"nonNegativeInteger"||f.type==u+"unsignedLong"||f.type==u+"unsignedInt"||f.type==u+"unsignedShort"||f.type==u+"unsignedByte"||f.type==u+"positiveInteger"||f.type==u+"float"?(f.type=g,f.value=""+f.value,f):f.type==u+"string"?f:f.type==u+"boolean"?(QueryFilters.ebv(f)?(f.type=g,f.value="true"):(f.type=g,f.value="false"),f):f.type==u+"dateTime"||f.type==u+"date"?(f.type=g,typeof f.value!="string"&&(f.value=N.iso8601(f.value)),f):f.type==null?(f.value=""+f.value,f.type=g,f):QueryFilters.ebvError():f.token==="uri"?{token:"literal",value:N.lexicalFormBaseUri(f,v),type:g,lang:null}:QueryFilters.ebvError();if(g==u+"dateTime"||g==u+"date"){if((f=b[0]).type==u+"dateTime"||f.type==u+"date")return f;if(f.type!=u+"string"&&f.type!=null)return QueryFilters.ebvError();try{return f.value=N.iso8601(N.parseISO8601(f.value)),f.type=g,f}catch{return QueryFilters.ebvError()}}else{if(g!=u+"float")return s.customFns[g]!=null?s.customFns[g](QueryFilters,b):QueryFilters.ebvError();var f;if((f=b[0]).token!=="literal")return QueryFilters.ebvError();if((f=QueryFilters.normalizeLiteralDatatype(f,s,v)).type=="http://www.w3.org/2001/XMLSchema#decimal"||f.type=="http://www.w3.org/2001/XMLSchema#int")return f.type=g,f.value=parseFloat(f.value),f;if(f.type=="http://www.w3.org/2001/XMLSchema#boolean")return QueryFilters.ebv(f)==1?(f.type=g,f.value=1):(f.type=g,f.value=0),f;if(f.type=="http://www.w3.org/2001/XMLSchema#float"||f.type=="http://www.w3.org/2001/XMLSchema#double")return f.type=g,f.value=parseFloat(f.value),f;if(f.type=="http://www.w3.org/2001/XMLSchema#string")try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=g,f)}catch{return QueryFilters.ebvError()}else{if(f.type!=null||f.value.split(".").length>2||f.value.split("-").length>2||f.value.split("/").length>2||f.value.split("+").length>2)return QueryFilters.ebvError();try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=g,f)}catch{return QueryFilters.ebvError()}}}}},ee.exports={QueryFilters}},{"./utils":156}],151:[function(P,ee,X){var N=P("./utils"),l=P("./utils"),E={variablesInBGP:function(u){var e=u.variables;if(e)return e;var r=u.value||u;for(var o in e=[],r)r[o]&&r[o].token==="var"?e.push(r[o].value):r[o]&&r[o].token==="blank"&&e.push("blank:"+r[o].value);return u.variables=e,e},connected:function(u,e){for(var r="/"+u.vars.join("/")+"/",o=0;o<e.vars.length;o++)if(r.indexOf("/"+e.vars[o]+"/")!=-1)return!0;return!1}};E.variablesIntersectionBGP=function(u,e){return function(r,o){for(var s={},c=0;c<r.lenght;c++)s[r[c]]=1;for(c=0;c<o.length;c++){var v=s[o[c]]||0;v++,s[o[c]]=v}var b=[];for(var d in s)s[d]==2&&b.push(s[d]);return b}(E.variablesInBGP(u),E.variablesInBGP(e))},E.executeAndBGPsGroups=function(u){for(var e={},r={},o=0,s=function(j,D){for(var A=0;A<j.length;A++){var C="/"+j[A]+"/";if(D.indexOf(C)!=-1)return!0}return!1},c=function(j,D,A,C){var Q=[],q="",H="";for(var B in D)q+=B,Q=Q.concat(e[B]),H+=r[B];H=H+f.join("/")+"/",Q.push(j),A[q]=Q,C[q]=H},v=0;v<u.length;v++){var b=u[v],d={},g={},f=E.variablesInBGP(b),O={};for(var I in r)s(f,r[I])?O[I]=!0:(d[I]=e[I],g[I]=r[I]);N.size(O)===0?(d["g"+o]=[b],g["g"+o]="/"+f.join("/")+"/",o++):c(b,O,d,g),e=d,r=g}return N.values(e)},E.intersectionSize=function(u,e){for(var r=e.i.split("_"),o=0;o<r.length;o++)if(r[o]!=""&&u.i.indexOf("_"+r[o]+"_")!=-1)return 1;return 0},E.createJoinTree=function(u,e){for(var r="/"+u.vars.join("/")+"/",o=u.vars.concat([]),s=[],c=0;c<e.vars.length;c++)r.indexOf("/"+e.vars[c]+"/")!=-1?e.vars[c].indexOf("_:")==0?s.push("blank:"+e.vars[c]):s.push(e.vars[c]):o.push(e.vars[c]);var v=e.i.split("_"),b=u.i.split("_"),d={};for(c=0;c<v.length;c++)v[c]!=""&&(d[v[c]]=!0);for(c=0;c<b.length;c++)b[c]!=""&&(d[b[c]]=!0);var g=N.keys(d);return{left:u,right:e,cost:u.cost+e.cost,i:"_"+g.sort().join("_")+"_",vars:o,join:s}},E.executeBushyTree=function(u,e,r,o,s){u.left==null?E.executeEmptyJoinBGP(u.right,e,r,o,s):u.right==null?E.executeEmptyJoinBGP(u.left,e,r,o,s):E.executeBushyTree(u.left,e,r,o,function(c){c!=null?E.executeBushyTree(u.right,e,r,o,function(v){s(v!=null?E.joinBindings2(u.join,c,v):null)}):s(null)})},E.executeAndBGPsDPSize=function(u,e,r,o,s){var c=E.executeAndBGPsGroups(u),v=[];l.eachSeries(c,function(b,d){r.computeCosts(b,o,function(g){var f={},O={},I={},j=1,D=null,A={};I[1]=[];for(var C=0;C<g.length;C++){var Q=[];for(var q in delete g[C].variables,g[C])q!="_cost"&&(g[C][q].token==="var"||g[C][q].token==="blank")&&Q.push(g[C][q].value);O["_"+C+"_"]={left:g[C],right:null,cost:g[C]._cost,i:"_"+C+"_",vars:Q};var H={left:g[C],right:null,cost:g[C]._cost,i:"_"+C+"_",vars:Q};f["_"+C+"_"]=H,delete g[C]._cost,A["_"+C+"_"]=!0,I[1].push("_"+C+"_"),(D==null||D.cost>H.cost)&&(D=H)}for(var B=2;B<=g.length;B++)for(var Z=1;Z<B;Z++){var se=B-Z,ae=I[""+Z]||[],ye=I[""+se]||[];for(C=0;C<ae.length;C++)for(var fe=0;fe<ye.length;fe++)if(ae[C]!==ye[fe]){var z=O[ae[C]],U=O[ye[fe]];if(E.intersectionSize(z,U)==0&&E.connected(z,U)){j=B;var W=f[z.i],K=f[U.i],Y=E.createJoinTree(W,K);if(!A[Y.i]){A[Y.i]=!0;var le=Y.cost+1;f[Y.i]!=null&&(le=f[Y.i].cost);var re=I[B]||[];re.push(Y.i),O[Y.i]=Y,I[B]=re,le>Y.cost&&(j===B&&(D=Y),f[Y.i]=Y)}}}}v.push(D),d()})},function(){var b=null;l.eachSeries(v,function(d,g){E.executeBushyTree(d,e,r,o,function(f){f?b==null?(b=f,g()):(b=E.crossProductBindings(b,f),g()):g("Error executing bushy tree")})},function(d){d?s(null,d):s(b)})})},E.executeEmptyJoinBGP=function(u,e,r,o,s){return E.executeBGPDatasets(u,e,r,o,s)},E.executeBGPDatasets=function(u,e,r,o,s){var c={};if(u.graph==null){var v=[];l.eachSeries(e.implicit,function(d,g){c[d.oid]==null?(c[d.oid]=!0,u.graph=d,r.rangeQuery(u,o,function(f){f=E.buildBindingsFromRange(f,u),v.push(f),g()})):g()},function(){var d=E.unionManyBindings(v);s(d)})}else if(u.graph.token==="var"){var b=u.graph.value;v=[],l.eachSeries(e.named,function(d,g){c[d.oid]==null?(c[d.oid]=!0,u.graph=d,v!=null?r.rangeQuery(u,o,function(f){if(f!=null){f=E.buildBindingsFromRange(f,u);for(var O=0;O<f.length;O++)f[O][b]=d.oid;v.push(f)}else v=null;g()}):g()):g()},function(){if(v==null)s(null);else{var d=E.unionManyBindings(v);s(d)}})}else r.rangeQuery(u,o,function(d){d!=null?(d=E.buildBindingsFromRange(d,u),s(d)):s(null)})},E.buildBindingsFromRange=function(u,e){E.variablesInBGP(e);var r=e.value||e,o={};for(g in r)r[g]&&r[g].token==="var"?o[g]=r[g].value:r[g]&&r[g].token==="blank"&&(o[g]="blank:"+r[g].value);var s=[];if(u!=null)for(var c=0;c<u.length;c++){var v={},b=u[c],d=!1;for(var g in o){var f=b[g];if(v[o[g]]!=null&&v[o[g]]!==f){d=!0;break}v[o[g]]=f}d||s.push(v)}return s},E.areCompatibleBindings=function(u,e){for(var r in u)if(e[r]!=null&&e[r]!=u[r])return!1;return!0},E.mergeBindings=function(u,e){var r={};for(var o in u)r[o]=u[o];for(var o in e)r[o]=e[o];return r},E.joinBindings2=function(u,e,r){for(var o,s,c,v,b={},d=[],g=0;g<e.length;g++){o=e[g],v=b;for(var f=0;f<u.length;f++)s=o[u[f]],f==u.length-1?((c=v[s]||[]).push(o),v[s]=c):(c=v[s]||{},v[s]=c,v=c)}for(g=0;g<r.length;g++)for(o=r[g],v=b,f=0;f<u.length;f++)if(v[s=o[u[f]]]!=null)if(f==u.length-1)for(var O=0;O<v[s].length;O++)d.push(E.mergeBindings(v[s][O],o));else v=v[s];return d},E.joinBindings=function(u,e){for(var r=[],o=0;o<u.length;o++)for(var s=u[o],c=0;c<e.length;c++){var v=e[c];E.areCompatibleBindings(s,v)&&r.push(E.mergeBindings(s,v))}return r},E.augmentMissingBindings=function(u,e){for(var r in e)u[r]==null&&(u[r]=null);return u},E.leftOuterJoinBindings=function(u,e){for(var r=[],o=0;o<u.length;o++){for(var s=u[o],c=!1,v=0;v<e.length;v++){var b=e[v];E.areCompatibleBindings(s,b)&&(c=!0,r.push(E.mergeBindings(s,b)))}c===!1&&(E.augmentMissingBindings(s,b),r.push(s))}return r},E.crossProductBindings=function(u,e){for(var r=[],o=0;o<u.length;o++)for(var s=u[o],c=0;c<e.length;c++){var v=e[c];r.push(E.mergeBindings(s,v))}return r},E.unionBindings=function(u,e){return u.concat(e)},E.unionManyBindings=function(u){for(var e=[],r=0;r<u.length;r++){var o=u[r];e=E.unionBindings(e,o)}return e},ee.exports={QueryPlan:E}},{"./utils":156}],152:[function(P,ee,X){var N=P("./network_transport").NetworkTransport,l=P("./rvn3_parser").RVN3Parser,E=P("./jsonld_parser").JSONLDParser,u=P("./utils"),e=function(r){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":l.parser,"text/n3":l.parser,"application/ld+json":E.parser,"application/json":E.parser},typeof RDFXMLParser<"u"&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),r!=null)for(var o in r.parsers)this.parsers[o]=r.parsers[o];if(r&&r.precedences!=null)for(var o in this.precedences=r.precedences,r.parsers)u.include(this.precedences,o)||this.precedences.push(o);this.acceptHeaderValue="";for(var s=0;s<this.precedences.length;s++)this.acceptHeaderValue=s!=0?this.acceptHeaderValue+","+this.precedences[s]:this.acceptHeaderValue+this.precedences[s]};e.prototype.registerParser=function(r,o){this.parsers[r]=o,this.precedences.push(r)},e.prototype.unregisterParser=function(r){delete this.parsers[r];for(var o=[],s=0;s<this.precedences.length;s++)this.precedences[s]!=r&&o.push(this.precedences[s]);this.precedences=o},e.prototype.setAcceptHeaderPrecedence=function(r){this.precedences=r},e.prototype.load=function(r,o,s){var c=this;N.load(r,this.acceptHeaderValue,function(v,b){if(v)s(v);else{var d=b.headers["Content-Type"]||b.headers["content-type"],g=b.data;if(d!=null){for(var f in d=d.split(";")[0],c.parsers)if(f.indexOf("/")!=-1){var O=f.split("/");if(O[1]==="*"){if(d.indexOf(O[0])!=-1)return c.tryToParse(c.parsers[f],o,g,{documentURI:r},s)}else{if(d.indexOf(f)!=-1)return c.tryToParse(c.parsers[f],o,g,{documentURI:r},s);if(d.indexOf(O[1])!=-1)return c.tryToParse(c.parsers[f],o,g,{documentURI:r},s)}}else if(d.indexOf(f)!=-1)return c.tryToParse(c.parsers[f],o,g,{documentURI:r},s);s(new Error("Unknown media type : "+d))}else s(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(r,o,s,c){try{var v=this;P("fs").readFile(s.split("file:/")[1],function(b,d){b?c(b):(d=d.toString("utf8"),v.tryToParse(r,o,d,{documentURI:s},c))})}catch(b){c(b)}},e.prototype.tryToParse=function(r,o,s,c,v){try{typeof s=="string"&&(s=u.normalizeUnicodeLiterals(s)),r.parse(s,o,c,v)}catch(b){console.log(b.message),console.log(b.stack),v(b)}},ee.exports={RDFLoader:e}},{"./jsonld_parser":141,"./network_transport":143,"./rvn3_parser":154,"./utils":156,fs:4}],153:[function(P,ee,X){var N=P("./utils"),l=P("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var E={};for(var u in this)N.include(this.interfaceProperties,u)||typeof this[u]=="function"||u==="defaultNs"||u==="interfaceProperties"||(E[u]=this[u]);return E},RDFModel.UrisMap.prototype.get=function(E){if(E.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[E]},RDFModel.UrisMap.prototype.remove=function(E){if(E.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return delete this[E],null},RDFModel.UrisMap.prototype.set=function(E,u){if(E.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[E]=u},RDFModel.UrisMap.prototype.setDefault=function(E){this.defaultNs=E},RDFModel.UrisMap.prototype.addAll=function(E,u){for(var e in E)N.include(this.interfaceProperties,e)||(this[e]!=null?u===!0&&(this[e]=E[e]):this[e]=E[e]);return this},RDFModel.UrisMap.prototype.resolve=function(E){var u=E.split(":"),e=u[0],r=u[1];return e===""?this.defaultNs==null?null:this.defaultNs+r:this[e]!=null?this[e]+r:null},RDFModel.UrisMap.prototype.shrink=function(E){for(var u in this){var e=this[u];if(E.indexOf(e)===0&&e!==""&&u!="defaultNs")return u+":"+E.split(e)[1]}return E},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(E,u){this.prefixes.addAll(E.prefixes,u),this.terms.addAll(E.terms,u)},RDFModel.Profile.prototype.resolve=function(E){return E.indexOf(":")!=-1?this.prefixes.resolve(E):this.terms[E]!=null?this.terms.resolve(E):null},RDFModel.Profile.prototype.setDefaultPrefix=function(E){this.prefixes.setDefault(E)},RDFModel.Profile.prototype.setDefaultVocabulary=function(E){this.terms.setDefault(E)},RDFModel.Profile.prototype.setPrefix=function(E,u){this.prefixes.set(E,u)},RDFModel.Profile.prototype.setTerm=function(E,u){this.terms.set(E,u)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var E=this;for(var u in this.filters={s:function(e){return function(r){return r.subject.equals(e)}},p:function(e){return function(r){return r.predicate.equals(e)}},o:function(e){return function(r){return r.object.equals(e)}},sp:function(e,r){return function(o){return o.subject.equals(e)&&o.predicate.equals(r)}},so:function(e,r){return function(o){return o.subject.equals(e)&&o.object.equals(r)}},po:function(e,r){return function(o){return o.predicate.equals(e)&&o.object.equals(r)}},spo:function(e,r,o){return function(s){return s.subject.equals(e)&&s.predicate.equals(r)&&s.object.equals(o)}},describes:function(e){return function(r){return r.subject.equals(e)||r.object.equals(e)}},type:function(e){var r=E.resolve("rdf:type");return function(o){return o.predicate.equals(r)&&o.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(u,RDFModel.defaultContext[u])},RDFModel.RDFEnvironment.prototype=N.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var E=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,E},RDFModel.RDFEnvironment.prototype.createNamedNode=function(E){var u=this.resolve(E);return u!=null?new RDFModel.NamedNode(u):new RDFModel.NamedNode(E)},RDFModel.RDFEnvironment.prototype.createLiteral=function(E,u,e){return e!=null?new RDFModel.Literal(E,u,e.toString()):new RDFModel.Literal(E,u,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(E,u,e){return new RDFModel.Triple(E,u,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(E){var u=new RDFModel.Graph;if(E!=null)for(var e=0;e<E.length;e++)u.add(E[e]);return u},RDFModel.RDFEnvironment.prototype.createAction=function(E,u){return function(e){return E(e)?u(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(E){if(E===!0)return new RDFModel.RDFEnvironment.Profile;var u=new RDFModel.RDFEnvironment.Profile;return u.importProfile(this),u},RDFModel.RDFEnvironment.prototype.createTermMap=function(E){if(E===!0)return new RDFModel.UrisMap;var u=this.terms.values(),e=new RDFModel.UrisMap;for(var r in u)e[r]=u[r];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(E){if(E===!0)return new RDFModel.UrisMap;var u=this.prefixes.values(),e=new RDFModel.UrisMap;for(var r in u)e[r]=u[r];return e},RDFModel.RDFNode=function(E){this.interfaceName=E,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(E){if(E.interfaceName==null)return this.valueOf()==E;for(var u in this.attributes){var e=this.attributes[u];if(this[e]!=E[e])return!1}return!0},RDFModel.BlankNode=function(E){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+E,this.bnodeId=E},RDFModel.BlankNode.prototype=N.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(E,u,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=E,u!=null?this.language=u:e!=null&&(this.datatype=e)},RDFModel.Literal.prototype=N.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var E='"'+this.nominalValue+'"';return this.language!=null?E=E+"@"+this.language:(this.datatype!=null||this.type)&&(E=E+"^^<"+(this.datatype||this.type)+">"),E},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return l.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(E){RDFModel.RDFNode.call(this,"NamedNode"),E.value!=null?this.nominalValue=E.value:this.nominalValue=E},RDFModel.NamedNode.prototype=N.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(E,u,e){this.subject=E,this.predicate=u,this.object=e},RDFModel.Triple.prototype.equals=function(E){return this.subject.equals(E.subject)&&this.predicate.equals(E.predicate)&&this.object.equals(E.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+` . \r
`},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(E){for(var u=0;u<this.actions.length;u++)E=this.actions[u](E);var e=E.subject.toString()+E.predicate.toString()+E.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(E)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(E,u){if(this.actions.push(E),u==1)for(var e=0;e<this.triples.length;e++)this.triples[e]=E(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(E){for(var u=E.toArray(),e=0;e<u.length;e++)this.add(u[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(E){for(var u=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(E)){var r=E.subject.toString()+E.predicate.toString()+E.object.toString();delete this.duplicates[r],u=e;break}return u!=null&&this.triples.splice(u,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(E){for(var u=0;u<this.triples.length;u++)if(E(this.triples[u],this)===!0)return!0;return!1},RDFModel.Graph.prototype.every=function(E){for(var u=0;u<this.triples.length;u++)if(E(this.triples[u],this)===!1)return!1;return!0},RDFModel.Graph.prototype.filter=function(E){for(var u=new RDFModel.Graph,e=0;e<this.triples.length;e++)E(this.triples[e],this)===!0&&u.add(this.triples[e]);return u},RDFModel.Graph.prototype.forEach=function(E){for(var u=0;u<this.triples.length;u++)E(this.triples[u],this)},RDFModel.Graph.prototype.merge=function(E){for(var u=new RDFModel.Graph,e=0;e<this.triples.length;e++)u.add(this.triples[e]);return u},RDFModel.Graph.prototype.match=function(E,u,e,r){for(var o=new RDFModel.Graph,s=0,c=0;c<this.triples.length;c++){var v=this.triples[c];if((E==null||v.subject.equals(E))&&(u==null||v.predicate.equals(u))&&(e==null||v.object.equals(e))){if(!(r==null||s<r))return o;s++,o.add(v)}}return o},RDFModel.Graph.prototype.removeMatches=function(E,u,e){for(var r=[],o=0;o<this.triples.length;o++){var s=this.triples[o];(E==null||s.subject.equals(E))&&(u==null||s.predicate.equals(u))&&(e==null||s.object.equals(e))&&r.push(s)}for(o=0;o<r.length;o++)this.remove(r[o]);return this},RDFModel.Graph.prototype.toNT=function(){var E="";return this.forEach(function(u){E+=u.toString()}),E},RDFModel.buildRDFResource=function(E,u,e,r){if(E.token==="blank")return RDFModel.buildBlankNode(E,u,e,r);if(E.token==="literal")return RDFModel.buildLiteral(E,u,e,r);if(E.token==="uri")return RDFModel.buildNamedNode(E,u,e,r);if(E.token==="var"){var o=u[E.value];return o!=null?RDFModel.buildRDFResource(o,u,e,r):null}return null},RDFModel.buildBlankNode=function(E,u,e,r){return E.valuetmp!=null&&(E.value=E.valuetmp),E.value.indexOf("_:")===0&&(E.value=E.value.split("_:")[1]),new RDFModel.BlankNode(E.value)},RDFModel.buildLiteral=function(E,u,e,r){return new RDFModel.Literal(E.value,E.lang,E.type)},RDFModel.buildNamedNode=function(E,u,e,r){if(E.value!=null)return new RDFModel.NamedNode(E);if(E.prefix!=null){var o=e.resolveNsInEnvironment(E.prefix,r);return E.value=o+E.suffix,new RDFModel.NamedNode(E)}return new RDFModel.NamedNode(E)},RDFModel.rdf=new RDFModel.RDFEnvironment,ee.exports=RDFModel},{"./query_filters":150,"./utils":156}],154:[function(P,ee,X){var N=P("n3").Parser,l={};function E(u){switch(u[0]){case'"':if(u.indexOf("^^")>0){var e=u.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:u};case"_":return{blank:u.replace("b","")};default:return{token:"uri",value:u,prefix:null,suffix:null}}}l.parser={async:!0,parse:function(u,e,r,o){o||(o=r,r=e,e=null),e&&typeof e=="string"&&(e={token:"uri",value:e,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var s=[];new N(r).parse(u,function(c,v){c?o(c):v?s.push({subject:E(v.subject),predicate:E(v.predicate),object:E(v.object),graph:e}):o(!1,s)})},resetBlankNodeIds:function(){N._resetBlankNodeIds()}},ee.exports={RVN3Parser:l}},{n3:65}],155:[function(P,ee,X){var N=P("./query_engine").QueryEngine,l=P("./quad_backend").QuadBackend,E=P("./persistent_quad_backend").PersistentQuadBackend,u=P("./lexicon").Lexicon,e=P("./persistent_lexicon").PersistentLexicon,r=P("./rdf_model"),o=P("./utils");Store=function(s,c){var v=null,b=null;if(arguments.length==0)b={};else if(arguments.length==1)b={},v=s;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";b=s,v=c}b.treeOrder==null&&(b.treeOrder=15);var d=u,g=l;b.persistent===!0&&(d=e,g=E),this.functionMap={};var f=this;this.customFns={},new d(function(O){var I=function(){new g(b,function(j){var D=function(){b.backend=j,b.lexicon=O,f.engine=new N(b),v(null,f)};b.overwrite?j.clear(D):D()})};b.overwrite===!0?O.clear(I):I()},b.name)},Store.prototype.rdf=r.rdf,Store.prototype.rdf.api=r,Store.prototype.registerCustomFunction=function(s,c){this.customFns[s]=c,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(arguments.length===3)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var s;if(arguments.length===1){s=arguments[0];var c=function(){}}else arguments.length===2&&(s=arguments[0],c=arguments[1]);this.engine.execute(s,c)}},Store.prototype.executeWithEnvironment=function(){var s,c,v;if(arguments.length===3){s=arguments[0];var b=function(){};c=arguments[1],v=arguments[2]}else arguments.length===4&&(s=arguments[0],b=arguments[3],c=arguments[1],v=arguments[2]);c=o.map(c,function(d){return{token:"uri",value:d}}),v=o.map(v,function(d){return{token:"uri",value:d}}),this.engine.execute(s,b,c,v)},Store.prototype.graph=function(){var s=null,c=null;if(arguments.length===1)c=arguments[0]||function(){},s=this.engine.lexicon.defaultGraphUri;else{if(arguments.length!==2)throw"An optional graph URI and a callback function must be provided";c=arguments[1]||function(){},s=arguments[0]}this.rdf.resolve(s)!=null&&(s=this.rdf.resolve(s)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+s+"> { ?s ?p ?o } }",c)},Store.prototype.node=function(){var s=null,c=null,v=null;if(arguments.length===2)v=arguments[0],c=arguments[1]||function(){},s=this.engine.lexicon.defaultGraphUri;else{if(arguments.length!==3)throw"An optional graph URI, node URI and a callback function must be provided";v=arguments[0],s=arguments[1],c=arguments[2]||function(){}}this.rdf.resolve(s)!=null&&(s=this.rdf.resolve(s)),this.rdf.resolve(v)!=null&&(v=this.rdf.resolve(v)),this.engine.execute("CONSTRUCT { <"+v+"> ?p ?o } WHERE { GRAPH <"+s+"> { <"+v+"> ?p ?o } }",c)},Store.prototype.startObservingNode=function(){var s,c,v;arguments.length===2?(s=arguments[0],v=arguments[1],this.engine.callbacksBackend.observeNode(s,v,function(){})):arguments.length===3&&(s=arguments[0],c=arguments[1],v=arguments[2],this.engine.callbacksBackend.observeNode(s,c,v,function(){}))},Store.prototype.stopObservingNode=function(s){this.engine.callbacksBackend.stopObservingNode(s)},Store.prototype.startObservingQuery=function(){var s=arguments[0],c=arguments[1],v=arguments[2];v!=null?this.engine.callbacksBackend.observeQuery(s,c,v):this.engine.callbacksBackend.observeQuery(s,c,function(){})},Store.prototype.stopObservingQuery=function(s){this.engine.callbacksBackend.stopObservingQuery(s)},Store.prototype.subscribe=function(s,c,v,b,d){var g=this,f=function(O,I){var j=[],D={blanks:{},outCache:{}},A=[];o.each(I,function(C){var Q=r.buildRDFResource(C.subject,A,g.engine,D),q=r.buildRDFResource(C.predicate,A,g.engine,D),H=r.buildRDFResource(C.object,A,g.engine,D);Q!=null&&q!=null&&H!=null&&(C=new r.Triple(Q,q,H),j.push(C))}),d(O,j)};this.functionMap[d]=f,this.engine.callbacksBackend.subscribe(s,c,v,b,f,function(){})},Store.prototype.unsubscribe=function(s){var c=this.functionMap[s];this.engine.callbacksBackend.unsubscribe(c),delete this.functionMap[s]},Store.prototype.setPrefix=function(s,c){this.rdf.setPrefix(s,c)},Store.prototype.setDefaultPrefix=function(s){this.rdf.setDefaultPrefix(s)},Store.prototype.insert=function(){var s,c,v;if(arguments.length===1)c=arguments[0],v=function(){};else if(arguments.length===2)c=arguments[0],v=arguments[1]||function(){};else{if(arguments.length!==3)throw"The triples to insert, an optional graph and callback must be provided";c=arguments[0],s=this.rdf.createNamedNode(arguments[1]),v=arguments[2]||function(){}}var b="",d=this;c.forEach(function(g){b=b+d._nodeToQuery(g.subject)+d._nodeToQuery(g.predicate)+d._nodeToQuery(g.object)+"."}),b=s!=null?"INSERT DATA { GRAPH "+this._nodeToQuery(s)+" { "+b+" } }":"INSERT DATA { "+b+" }",this.engine.execute(b,v)},Store.prototype._nodeToQuery=function(s){if(s.interfaceName==="NamedNode"){var c=this.rdf.resolve(s.valueOf());return c!=null?"<"+c+">":"<"+s.valueOf()+">"}return s.toString()},Store.prototype.delete=function(){var s,c,v;if(arguments.length===1)c=arguments[0],v=function(){};else if(arguments.length===2)c=arguments[0],v=arguments[1]||function(){};else{if(arguments.length!==3)throw"The triples to delete, an optional graph and callback must be provided";c=arguments[0],s=this.rdf.createNamedNode(arguments[1]),v=arguments[2]||function(){}}var b="",d=this;c.forEach(function(g){b=b+d._nodeToQuery(g.subject)+d._nodeToQuery(g.predicate)+d._nodeToQuery(g.object)+"."}),b=s!=null?"DELETE DATA { GRAPH "+this._nodeToQuery(s)+" { "+b+" } }":"DELETE DATA { "+b+" }",this.engine.execute(b,v)},Store.prototype.clear=function(){var s;if(arguments.length===0){s=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var c=function(){}}else if(arguments.length===1)s=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),c=arguments[0]||function(){};else{if(arguments.length!==2)throw"The optional graph and a callback must be provided";s=this.rdf.createNamedNode(arguments[0]),c=arguments[1]||function(){}}var v="CLEAR GRAPH "+this._nodeToQuery(s);this.engine.execute(v,c)},Store.prototype.setBatchLoadEvents=function(s){this.engine.eventsOnBatchLoad=s},Store.prototype.registerDefaultNamespace=function(s,c){this.rdf.prefixes.set(s,c),this.engine.registerDefaultNamespace(s,c)},Store.prototype.registerDefaultProfileNamespaces=function(){var s=this.rdf.prefixes.values();for(var c in s)this.registerDefaultNamespace(c,s[c])},Store.prototype.load=function(){var s,c,v,b,d={};if(arguments.length===3)v=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),s=arguments[0],c=arguments[1],b=arguments[2]||function(){};else if(arguments.length===4)s=arguments[0],c=arguments[1],typeof(d=arguments[2])=="string"?(v=this.rdf.createNamedNode(d),d={}):(v=this.rdf.createNamedNode(d.graph||this.engine.lexicon.defaultGraphUri),delete d.graph),b=arguments[3]||function(){};else if(arguments.length===2)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if(s==="remote"){var g="LOAD <"+(c=this.rdf.createNamedNode(c)).valueOf()+"> INTO GRAPH <"+v.valueOf()+">";this.engine.execute(g,b)}else{var f=this,O=this.engine.rdfLoader.parsers[s];if(!O)return b(new Error("Cannot find parser for the provided media type:"+s));var I=[O,{token:"uri",value:v.valueOf()},c,d,function(j,D){j?b(j,D):f.engine.batchLoad(D,function(A){A!=null?b(null,A):b(new Error("Error batch-loading triples."))})}];c&&typeof c=="string"&&c.indexOf("file://")===0?this.engine.rdfLoader.loadFromFile.apply(null,I):this.engine.rdfLoader.tryToParse.apply(null,I)}},Store.prototype.registerParser=function(s,c){this.engine.rdfLoader.registerParser(s,c)},Store.prototype.registeredGraphs=function(s){this.engine.lexicon.registeredGraphs(!0,function(c){var v=o.map(c,function(b){return new r.NamedNode(b)});s(null,v)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(s){NetworkTransport=s},Store.prototype.close=function(s){s==null&&(s=function(){}),this.engine.close?this.engine.close(s):s()},Store.VERSION="0.9.18-alpha.16",Store.yieldFrequency=function(s){o.yieldFrequency(s)},ee.exports.Store=Store,ee.exports.create=function(){return arguments.length==1?new Store(arguments[0]):arguments.length==2?new Store(arguments[0],arguments[1]):new Store},ee.exports.connect=function(){(arguments.length==1?arguments[0]:arguments.length==2?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":142,"./persistent_lexicon":145,"./persistent_quad_backend":146,"./quad_backend":147,"./query_engine":149,"./rdf_model":153,"./utils":156}],156:[function(require,module,exports){(function(process){(function(){var slowNextTick=process!==void 0&&process.nextTick?process.nextTick:typeof window<"u"&&window.setImmediate?window.setImmediate:function(P){setTimeout(P,0)},spin=0,yieldFrequency=100,nextTick=function(P){++spin<yieldFrequency?P():(spin=0,slowNextTick(P))},hashTerm=function(P){try{if(P==null)return"";if(P.token==="uri")return"u"+P.value;if(P.token==="blank")return"b"+P.value;if(P.token==="literal"){var ee="l"+P.value;return ee+=P.type||"",ee+=P.lang||""}}catch{if(typeof P=="object"){var X="";for(p in P)X=X+p+P[p];return X}return P}},lexicalFormBaseUri=function(P,ee){var X=null;if(ee=ee||{},P.value==null){var N=P.prefix,l=P.suffix,E=ee.namespaces[N];X=E!=null?E+l:N+":"+l}else X=P.value;return X===null?null:(X.indexOf(":")==-1&&(X=(ee.base||"")+X),X)};parseISO8601=function(P){return Date.parse(P)},Date.prototype.toISOString||function(){function P(ee){return ee<10?"0"+ee:ee}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+P(this.getUTCMonth()+1)+"-"+P(this.getUTCDate())+"T"+P(this.getUTCHours())+":"+P(this.getUTCMinutes())+":"+P(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(P){return P.toISOString()},compareDateComponents=function(P,ee){var X=parseISO8601(P),N=parseISO8601(ee);return X==N?0:X<N?-1:1},lexicalFormLiteral=function(P,ee){var X=P.value,N=P.lang,l=P.type,E=null;if(X!=null&&l!=null&&typeof l!="string"){var u=l.value;if(u==null){var e=l.prefix,r=l.suffix,o=ee.namespaces[e];P.type=o+r,u=o+r}E=u.indexOf("hexBinary")!=-1?'"'+P.value.toLowerCase()+'"^^<'+u+">":'"'+P.value+'"^^<'+u+">"}else E=N==null&&l==null?'"'+X+'"':l==null?'"'+X+'"@'+N:l.indexOf("hexBinary")!=-1?'"'+P.value.toLowerCase()+'"^^<'+l+">":'"'+P.value+'"^^<'+l+">";return E},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)dups[escapedUnicode[i]]==null&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(P){if(typeof window>"u"&&process!==void 0&&process.browser===!1){var ee=_dereq_("sqlite3"),X=_dereq_("indexeddb-js"),N=new ee.Database(":memory:"),l=X.makeScope("sqlite3",N);P.indexedDB=l.indexedDB,P.IDBKeyRange=l.IDBKeyRange}else{var E;(E=typeof window>"u"?self:window).indexedDB=E.indexedDB||E.mozIndexedDB||E.webkitIndexedDB||E.msIndexedDB,E.IDBKeyRange=E.IDBKeyRange||E.webkitIDBKeyRange||E.msIDBKeyRange,E.indexedDB?(P.indexedDB=E.indexedDB,P.IDBKeyRange=E.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function P(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return P()+P()+"-"+P()+"-"+P()+"-"+P()+"-"+P()+P()+P()},hashTerm=function(P){try{if(P==null)return"";if(P.token==="uri")return"u"+P.value;if(P.token==="blank")return"b"+P.value;if(P.token==="literal"){var ee="l"+P.value;return ee+=P.type||"",ee+=P.lang||""}}catch{if(typeof P=="object"){var X="";for(p in P)X=X+p+P[p];return X}return P}};var reject=function(P,ee){for(var X=[],N=0;N<P.length;N++)ee(P[N])&&X.push(P[N]);return X},include=function(P,ee){for(var X=0;X<P.length;X++)if(P[X]===ee)return!0;return!1},each=function(P,ee){if(P.forEach)P.forEach(ee);else for(var X=0;X<P.length;X++)ee(P[X])},map=function(P,ee){if(P.map)return P.map(ee);for(var X=[],N=0;N<P.length;N++)X[N]=ee(P[N]);return X},keys=function(P){var ee=[];for(var X in P)ee.push(X);return ee},values=function(P){var ee=[];for(var X in P)ee.push(P[X]);return ee},size=function(P){if(P.length)return P.length;var ee=0;for(var X in P)ee++;return ee};clone=function(P){return JSON.parse(JSON.stringify(P))};var isObject=function(P){var ee=typeof P;return ee=="function"||P&&ee=="object"||!1},create=function(){function P(){}return function(ee){if(isObject(ee)){P.prototype=ee;var X=new P;P.prototype=null}return X||void 0}}(),whilst=function(P,ee,X){P()?ee(function(N){if(N)return X(N);whilst(P,ee,X)}):X()},eachSeries=function(P,ee,X){if(X=X||function(){},!P.length)return X();var N=0,l=function(){ee(P[N],function(E){E?(X(E),X=function(){}):(N+=1)>=P.length?X():nextTick(l)})};l()},eachParallel=function(P,ee,X){if(X=X||function(){},!P.length)return X();for(var N=!1,l=0,E=function(e){if(e)throw N=!0,new Error(e);N||++l===P.length&&X()},u=0;u<P.length;u++)(function(e,r,o,s){nextTick(function(){try{s(e[r],function(){o()})}catch(c){o(c)}})})(P,u,E,ee)},reduce=function(P,ee,X,N){eachSeries(P,function(l,E){X(ee,l,function(u,e){ee=e,E(u)})},function(l){N(l,ee)})},seq=function(){var P=arguments;return function(){var ee=this,X=Array.prototype.slice.call(arguments),N=X.pop();reduce(P,X,function(l,E,u){E.apply(ee,l.concat([function(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1);u(e,r)}]))},function(l,E){N.apply(ee,[l].concat(E))})}},isWorker=function(){return(process===void 0||process.browser===!0)&&typeof window>"u"};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(P){yieldFrequency=P}}}).call(this)}).call(this,require("_process"))},{_process:75}]},{},[155])(155)});function dateConverter(P){const ee=17214255e-1,X={GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}},N=["So","Mo","Di","Mi","Do","Fr","Sa"],l={GREGORIAN:["ZERO","Jan","Feb","M\xE4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function E(d,g){return d-g*Math.floor(d/g)}function u(d){return d=Number(d),E(Math.floor(d+1.5),7)}function e(d){return d=parseInt(d),d%4==0&&!(d%100==0&&d%400!=0)}function r(d,g,f){return ee-1+365*(d-1)+Math.floor((d-1)/4)+-Math.floor((d-1)/100)+Math.floor((d-1)/400)+Math.floor((367*g-362)/12+(g<=2?0:e(d)?-1:-2)+f)}function o(d){let g,f,O,I,j,D,A,C,Q,q,H,B,Z,se;return g=Math.floor(d-.5)+.5,f=g-ee,O=Math.floor(f/146097),I=E(f,146097),j=Math.floor(I/36524),D=E(I,36524),A=Math.floor(D/1461),C=E(D,1461),Q=Math.floor(C/365),q=O*400+j*100+A*4+Q,j==4||Q==4||q++,H=g-r(q,1,1),B=g<r(q,3,1)?0:e(q)?1:2,Z=Math.floor(((H+B)*12+373)/367),se=g-r(q,Z,1)+1,q<=0&&q--,new Array(q,Z,se)}function s(d,g){d=parseInt(d);const f={};let O;switch(g){case"GREGORIAN":case"gregorian":{O=o(d);break}case"JULIAN":case"julian":{O=S.jd_to_julian(d);break}case"JEWISH":case"jewish":{O=S.jd_to_hebrew(d);break}case"FRENCH":case"french":{O=S.jd_to_french_revolutionary(d);break}}return f.year=O[0],f.month=O[1],f.day=O[2],f.weekday=u(d),f}const c=s(P.dateval1,P.calendar),v=s(P.dateval2,P.calendar);let b="";if(P.dateprecision1==P.dateprecision2)switch(P.dateprecision1){case"DAY":{c.year===v.year&&c.month===v.month&&c.day===v.day?b="["+N[c.weekday]+"] "+c.day+". "+l[P.calendar][c.month]+" "+c.year:b="["+N[c.weekday]+"] "+c.day+". "+l[P.calendar][c.month]+" "+c.year+" \u2013 ["+N[v.weekday]+"] "+v.day+". "+l[P.calendar][v.month]+" "+v.year;break}case"MONTH":{c.year===v.year&&c.month===v.month?b=l[P.calendar][c.month]+" "+c.year:b=l[P.calendar][c.month]+" "+c.year+" \u2013 "+l[P.calendar][v.month]+" "+v.year;break}case"YEAR":{c.year===v.year?b=c.year:b=c.year+"\u2013"+v.year;break}}else{switch(P.dateprecision1){case"DAY":{b="["+N[c.weekday]+"] "+c.day+". "+l[P.calendar][c.month]+" "+c.year;break}case"MONTH":{b=l[P.calendar][c.month]+" "+c.year;break}case"YEAR":{b=c.year;break}}switch(b+=" \u2013 ",P.dateprecision2){case"DAY":{b+="["+N[v.weekday]+"] "+v.day+". "+l[P.calendar][v.month]+" "+v.year;break}case"MONTH":{b+=l[P.calendar][v.month]+" "+v.year;break}case"YEAR":{b+=v.year;break}}}return b+=" ("+X[P.calendar].short+")",b}function htmlConverter(P,ee){let X="",N,l,E,u,e,r,o,s,c,v;const b={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},d={};d.settings={utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}};const g={};for(let O in d.settings.matching)g[d.settings.matching[O]]=O;const f=Object.keys(P);f.sort(function(O,I){return b[g[O]]-b[g[I]]}),N=[];for(let O in f){r=f[O];for(o in P[r])E=P[r][o].start,N[E]===void 0&&(N[E]=[]),N[E].push({propname:r,proptype:"start"}),N[E][N[E].length-1].propname=="_link"?(N[E][N[E].length-1].href=P[r][o].href,P[r][o].resid!==void 0&&(N[E][N[E].length-1].resid=P[r][o].resid)):N[E][N[E].length-1].propname=="style"&&(N[E][N[E].length-1].css=P[r][o].css),E=P[r][o].end,N[E]===void 0&&(N[E]=[]),N[E].push({propname:r,proptype:"end"})}for(l=[],s=0;s<=ee.length;s++){if(N[s]!==void 0){for(e=[],v=[],c=N[s].length-1;c>=0;c--)if(N[s][c].proptype=="end"&&N[s][c].propname!="linebreak"){for(;(u=l.pop())!==void 0&&(X+="</"+g[u]+">",u!=N[s][c].propname);)e.push(u);for(;(u=e.pop())!==void 0;)l.push(u),X+="<"+g[u]+">"}for(c in N[s])if(N[s][c].proptype=="start")if(N[s][c].propname=="linebreak")X+="<br/>";else if(N[s][c].propname=="_link"){l.push(N[s][c].propname);let O=N[s][c].href;O===void 0&&N[s][c].resid!==void 0&&(O="https://www.salsah.org/api/resources/"+N[s][c].resid),X+="<"+g[N[s][c].propname]+' href="'+O,N[s][c].resid!==void 0?X+='" class="salsah-link">':X+='">'}else N[s][c].propname=="style"?(l.push(N[s][c].propname),X+="<"+g[N[s][c].propname]+' style="'+N[s][c].css+'">'):(l.push(N[s][c].propname),X+="<"+g[N[s][c].propname]+">")}s<ee.length&&(X+=ee.charAt(s))}return X=X.replace(/\n/g,"<br/>"),X=X.replace(/\r/g,""),X}
