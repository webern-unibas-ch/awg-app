import{J as g,a as k,b as ct,f as Ut,j as N,l as S,n as Zt,r as gt,ra as Qt,t as qt,v as b,w as I}from"./chunk-DRJFGTZM.js";var G=class G{};G.OPUS={route:"/op",short:"op.",full:"Opus"},G.MNR={route:"/m",short:"M",full:"Moldenhauer-Nr."},G.MNR_PLUS={route:"/m_plus",short:"M*",full:"Moldenhauer-Nr. (AWG-ID)"};var ut=G,H=class H{};H.WORK_EDITION={route:"work-edition",short:"WE",full:"Werkedition"},H.TEXT_EDITION={route:"text-edition",short:"TE",full:"Textedition"},H.SKETCH_EDITION={route:"sketch-edition",short:"SE",full:"Skizzenedition"};var te=H,p=class p{};p.EDITION={route:"/edition",short:"AWG",full:"Anton Webern Gesamtausgabe"},p.PREFACE={route:"preface",short:"Vorwort",full:"Vorwort / Preface"},p.ROWTABLES={route:"row-tables",short:"Reihentabellen",full:"Reihentabellen"},p.COMPLEX={route:"/complex",short:"Editionskomplex",full:"Editionskomplex"},p.SERIES={route:"series",short:"Serien",full:"Editions\xFCbersicht"},p.SERIES_1={route:"1",short:"I",full:"Serie I (Werke mit Opuszahlen)"},p.SERIES_2={route:"2",short:"II",full:"Serie II (Nachgelassene Kompositionen und Fragmente)"},p.SERIES_3={route:"3",short:"III",full:"Serie III (Bearbeitungen von Werken anderer Komponisten)"},p.SECTION={route:"/section/",short:"Abteilung",full:"Abteilungs\xFCbersicht"},p.SECTION_1={route:"1",short:"1",full:"Abteilung 1 (Orchestermusik)"},p.SECTION_2={route:"2",short:"2",full:"Abteilung 2 (Kammer- und Klaviermusik)"},p.SECTION_2A={route:"2a",short:"2a",full:"Abteilung 2a (Kammer- und Klaviermusik: Klaviermusik)"},p.SECTION_2B={route:"2b",short:"2b",full:"Abteilung 2b (Kammer- und Klaviermusik: Kammermusik)"},p.SECTION_3={route:"3",short:"3",full:"Abteilung 3 (Chormusik)"},p.SECTION_4={route:"4",short:"4",full:"Abteilung 4 (Vokalmusik mit Ensemblebegleitung)"},p.SECTION_5={route:"5",short:"5",full:"Abteilung 5 (Klavierlieder)"},p.SERIES_3_SECTION_5={route:"5",short:"5",full:"Abteilung 5 (Klavierausz\xFCge)"},p.EDITION_GRAPH={route:"graph",short:"Graph",full:"Graph"},p.EDITION_INTRO={route:"intro",short:"Einleitung",full:"Einleitung"},p.EDITION_SHEETS={route:"sheets",short:"Edierte Notentexte",full:"Edierte Notentexte"},p.EDITION_REPORT={route:"report",short:"Kritischer Bericht",full:"Kritischer Bericht"};var f=p;var J=class{};var xt=class{};var $=class{constructor(t,i,n){if(!t?.catalogueType||!t?.catalogueNumber)return;let r="/",s="&nbsp;";this.titleStatement=ct(k({},t),{catalogueType:this._mapCatalogueType(t.catalogueType)}),this.respStatement=i??new xt,this.pubStatement={series:this._mapPubStatement("SERIES_",n?.series),section:this._mapPubStatement("SECTION_",n?.section)},this.complexId=new J,this.complexId.route=this.titleStatement.catalogueType.route,this.complexId.route+=this.titleStatement.catalogueNumber.replace(/\//g,"_"),this.complexId.short=`${this.titleStatement.catalogueType.short}${s}${this.titleStatement.catalogueNumber}`,this.complexId.full=`${this.titleStatement.title} ${this.complexId.short}`;let o=`${f.EDITION.route}${f.COMPLEX.route}`;this.baseRoute=`${o}${this.complexId.route}${r}`}_mapCatalogueType(t){return ut[t.toUpperCase()]}_mapPubStatement(t,i){return f[`${t}${i?.toUpperCase()}`]}};var m={BASE_ROUTE:"assets/data/edition",FILES:{complexesFile:"edition-complexes.json",folioConvoluteFile:"folio-convolute.json",graphFile:"graph.json",introFile:"intro.json",prefaceFile:"preface.json",rowTablesFile:"row-tables.json",sourceListFile:"source-list.json",sourceDescriptionListFile:"source-description.json",sourceEvaluationListFile:"source-evaluation.json",svgSheetsFile:"svg-sheets.json",textcriticsFile:"textcritics.json"}};var ze={FIRM_JE_NO_2_LIN_12:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_2_LIN_12_B:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12_b.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_2_LIN_12_C:{route:"assets/img/edition/firm-signs/je/no2_lin12/firm_je_no2_lin12_c.png",short:"[JE] | No. 2 | 12 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 2 | 12 linig."},FIRM_JE_NO_3_LIN_14:{route:"assets/img/edition/firm-signs/je/no3_lin14/firm_je_no3_lin14.png",short:"[JE] | No. 3 | 14 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 3 | 14 linig."},FIRM_JE_NO_5_LIN_18_B:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_b.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_5_LIN_18_C:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_c.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_5_LIN_18_D:{route:"assets/img/edition/firm-signs/je/no5_lin18/firm_je_no5_lin18_d.png",short:"[JE] | No. 5 | 18 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 5 | 18 linig."},FIRM_JE_NO_6_LIN_20:{route:"assets/img/edition/firm-signs/je/no6_lin20/firm_je_no6_lin20.png",short:"[JE] | No. 6 | 20 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 6 | 20 linig."},FIRM_JE_NO_7_LIN_22:{route:"assets/img/edition/firm-signs/je/no7_lin22/firm_je_no7_lin22.png",short:"[JE] | No. 7 | 22 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 7 | 22 linig."},FIRM_JE_NO_9_LIN_28:{route:"assets/img/edition/firm-signs/je/no9_lin28/firm_je_no9_lin28.png",short:"[JE] | No. 9 | 28 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 9 | 28 linig."},FIRM_JE_NO_15_LIN_16:{route:"assets/img/edition/firm-signs/je/no15_lin16/firm_je_no15_lin16.png",short:"[JE] | No. 15 | 16 linig.",full:"J. E. & Co. [diagonal ansteigend auf schildf\xF6rmiger Papierrolle, rechts von einem L\xF6wen gehalten, links und unten Blattgirlande] | Protokoll. Schutzmarke | No. 15 | 16 linig."}};var We={DOUBLE_FLAT:{alt:"[bb]",hex:"\u{1D12B}"},DOUBLE_SHARP:{alt:"[x]",hex:"\u{1D12A}"},FLAT:{alt:"[b]",hex:"\u266D"},NATURAL:{alt:"[a]",hex:"\u266E"},SHARP:{alt:"[#]",hex:"\u266F"},FORTE:{alt:"[f]",hex:"\u{1D191}"},FORTISSIMO:{alt:"[ff]",hex:"\u{1D191}\u{1D191}"},FORTISSIMO3:{alt:"[fff]",hex:"\u{1D191}\u{1D191}\u{1D191}"},MEZZOFORTE:{alt:"[mf]",hex:"\u{1D190}\u{1D191}"},MEZZOPIANO:{alt:"[mp]",hex:"\u{1D190}\u{1D18F}"},PEDAL:{alt:"[ped]",hex:"\u{1D1AE}"},PIANISSIMO:{alt:"[pp]",hex:"\u{1D18F}\u{1D18F}"},PIANISSIMO3:{alt:"[ppp]",hex:"\u{1D18F}\u{1D18F}\u{1D18F}"},PIANO:{alt:"[p]",hex:"\u{1D18F}"}};var Ue={GRAPH_IMAGE_OP25:{route:"assets/img/edition/series/1/section/5/op25/graph_op25_1.png",short:"Statischer Graph op. 25/I",full:"Statischer Graph der Skizzen von Opus 25/I."}};var L,Et=(L=class{constructor(t){this.http=t,this._assetPath=""}getEditionGraphData(t){return this._assetPath=this._setAssetPathForEditionComplex(t),this._getGraphData().pipe(b(new j),I(1))}getEditionIntroData(t){return this._assetPath=this._setAssetPathForEditionComplex(t),this._getIntroData().pipe(b(new K),I(1))}getEditionPrefaceData(){return this._assetPath=m.BASE_ROUTE,this._getPrefaceData().pipe(b(new z),I(1))}getEditionReportData(t){this._assetPath=this._setAssetPathForEditionComplex(t);let i=this._getSourceListData(),n=this._getSourceDescriptionListData(),r=this._getSourceEvaluationListData(),s=this._getTextcriticsListData();return gt([i,n,r,s]).pipe(b([new Z,new W,new U,new D]),I(1))}getEditionRowTablesData(){return this._assetPath=m.BASE_ROUTE,this._getRowTablesData().pipe(b(new V),I(1))}getEditionSheetsData(t){this._assetPath=this._setAssetPathForEditionComplex(t);let i=this._getFolioConvoluteData(),n=this._getSvgSheetsData(),r=this._getTextcriticsListData();return gt([i,n,r]).pipe(b([new X,new Y,new D]),I(1))}_setAssetPathForEditionComplex(t){let i="/",n=i+f.SERIES.route+i+t.pubStatement.series.route+f.SECTION.route+t.pubStatement.section.route+t.complexId.route;return m.BASE_ROUTE+n}_getFolioConvoluteData(){let t=m.FILES.folioConvoluteFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getGraphData(){let t=m.FILES.graphFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getIntroData(){let t=m.FILES.introFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getPrefaceData(){let t=m.FILES.prefaceFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getRowTablesData(){let t=m.FILES.rowTablesFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getSourceListData(){let t=m.FILES.sourceListFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getSourceDescriptionListData(){let t=m.FILES.sourceDescriptionListFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getSourceEvaluationListData(){let t=m.FILES.sourceEvaluationListFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getSvgSheetsData(){let t=m.FILES.svgSheetsFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getTextcriticsListData(){let t=m.FILES.textcriticsFile,i=`${this._assetPath}/${t}`;return this._getJsonData(i)}_getJsonData(t){return this.http.get(t).pipe(qt(this._handleError("_getJsonData",[])))}_handleError(t,i){return n=>(this._logError(`${t} failed: ${n.message}`),Zt(i))}_logError(t){console.error(t)}},L.ctorParameters=()=>[{type:Qt}],L);Et=S([g({providedIn:"root"})],Et);var ee={editionOutline:[{series:"1",sections:[{section:"1",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"2",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"3",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"4",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"5",complexTypes:{opus:[{complex:"OP3",disabled:!1},{complex:"OP4",disabled:!1},{complex:"OP12",disabled:!1},{complex:"OP23",disabled:!1},{complex:"OP25",disabled:!1}],mnr:[{complex:"M133",disabled:!0},{complex:"M134",disabled:!0},{complex:"M135",disabled:!0},{complex:"M136",disabled:!0},{complex:"M137",disabled:!0},{complex:"M138",disabled:!0},{complex:"M139",disabled:!0},{complex:"M140",disabled:!0},{complex:"M141",disabled:!0},{complex:"M142",disabled:!0},{complex:"M143",disabled:!1},{complex:"M144",disabled:!1},{complex:"M145",disabled:!1},{complex:"M146",disabled:!1},{complex:"M213",disabled:!0},{complex:"M212",disabled:!0},{complex:"M216",disabled:!0},{complex:"M217",disabled:!0}]},disabled:!1}]},{series:"2",sections:[{section:"1",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"2A",complexTypes:{opus:[],mnr:[{complex:"M22",disabled:!1},{complex:"M30",disabled:!1},{complex:"M31",disabled:!1},{complex:"M34",disabled:!1},{complex:"M35_42",disabled:!1},{complex:"M36",disabled:!1},{complex:"M37",disabled:!1},{complex:"M38",disabled:!1}]},disabled:!1},{section:"2B",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"3",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"4",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"5",complexTypes:{opus:[],mnr:[]},disabled:!0}]},{series:"3",sections:[{section:"1",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"2",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"3",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"4",complexTypes:{opus:[],mnr:[]},disabled:!0},{section:"5",complexTypes:{opus:[],mnr:[]},disabled:!0}]}]};var y,T,wt=(T=class{static initializeEditionOutline(){let t=y._fetchEditionOutlineData();y.setEditionOutline(t.outline)}static getEditionOutline(){return y._editionOutline}static getEditionSeriesById(t){return y.getEditionOutline().find(i=>i.series.route===t)}static getEditionSectionById(t,i){return y.getEditionSeriesById(t).sections.find(r=>r.section.route===i)}static setEditionOutline(t){y._editionOutline=t}static _fetchEditionOutlineData(){let t=ee;return new q(t.editionOutline)}},y=T,T._editionOutline=[],T);wt=y=S([g({providedIn:"root"})],wt);var yt=class{findTextcritics(t,i){return!t||!i?new O:t.find(r=>r.id===i.id)||new O}getCurrentEditionType(t,i){let r=t?.content?.[0]?.partial,s=r?t.id+r:t.id;return Object.keys(i).find(a=>this._findSvgSheetIndexById(i[a],s)>=0)}getNextSheetId(t,i,n){let r=i?.content?.[0]?.partial,s=i.id+(r||""),o=this._findSvgSheetIndexById(n,i.id);return r?this._findNextSheetIdForPartialSheet(t,n,o,s,r):this._findNextSheetIdForNonPartialSheet(t,n,o,s)}getTextcriticalCommentsForOverlays(t,i){return!t||!i?[]:t.map(n=>ct(k({},n),{blockComments:n.blockComments.filter(s=>i.some(o=>s.svgGroupId===o.id))})).filter(n=>n.blockComments.length>0)}selectConvolute(t,i,n){if(!t||!i||!n)return;let s=this.getCurrentEditionType(n,i)==="sketchEditions"?n.content[0].convolute:"";return this._findConvoluteById(t,s)}selectSvgSheetById(t,i){if(!t||!i)return new P;let n={workEditions:this._findSvgSheetIndexById(t.workEditions,i),textEditions:this._findSvgSheetIndexById(t.textEditions,i),sketchEditions:this._findSvgSheetIndexById(t.sketchEditions,i)};for(let[r,s]of Object.entries(n)){if(s<0)continue;return this._getSheetWithPartialContentById(t[r],s,i)}return new P}_findConvoluteById(t,i){return t.find(r=>r.convoluteId===i)}_findNextSheetIdForPartialSheet(t,i,n,r,s){let o=i[n],l=o.content.findIndex(c=>c.partial===s)+t;return l>=0&&l<o.content?.length?o.id+o.content[l].partial:this._findNextSheetIdForNonPartialSheet(t,i,n,r)}_findNextSheetIdForNonPartialSheet(t,i,n,r){let s=n+t;if(s>=0&&s<i.length){let o=i[s],a=t>0?0:o.content.length-1;return o.id+(o.content[a]?.partial||"")}else return r}_findSvgSheetIndexById(t,i){return t.findIndex(n=>{let r=n.id;if(n.content.length>1){let s=this._findSvgSheetPartialIndexById(n,i);s>=0&&(r+=n.content[s].partial)}return r===i})}_findSvgSheetPartialIndexById(t,i){return t.content.findIndex(n=>t.id+n.partial===i)}_getSheetWithPartialContentById(t,i,n){let r=k({},t[i]),s=this._findSvgSheetPartialIndexById(r,n);return s>=0&&(r.content=[r.content[s]]),r}};yt=S([g({providedIn:"root"})],yt);function Qe(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function ie(e,t){return fetch(e,t).then(Qe)}function bt(e){return(t,i)=>ie(t,i).then(n=>new DOMParser().parseFromString(n,e))}var ti=bt("application/xml"),ei=bt("text/html"),It=bt("image/svg+xml");var ht="http://www.w3.org/1999/xhtml",Tt={svg:"http://www.w3.org/2000/svg",xhtml:ht,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),Tt.hasOwnProperty(t)?{space:Tt[t],local:e}:e}function ni(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===ht&&t.documentElement.namespaceURI===ht?t.createElement(e):t.createElementNS(i,e)}}function ri(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pt(e){var t=Q(e);return(t.local?ri:ni)(t)}function si(){}function tt(e){return e==null?si:function(){return this.querySelector(e)}}function ne(e){typeof e!="function"&&(e=tt(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],o=s.length,a=n[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new h(n,this._parents)}function et(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oi(){return[]}function Mt(e){return e==null?oi:function(){return this.querySelectorAll(e)}}function ai(e){return function(){return et(e.apply(this,arguments))}}function re(e){typeof e=="function"?e=ai(e):e=Mt(e);for(var t=this._groups,i=t.length,n=[],r=[],s=0;s<i;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(n.push(e.call(l,l.__data__,c,o)),r.push(l));return new h(n,r)}function vt(e){return function(){return this.matches(e)}}function mt(e){return function(t){return t.matches(e)}}var li=Array.prototype.find;function ci(e){return function(){return li.call(this.children,e)}}function ui(){return this.firstElementChild}function se(e){return this.select(e==null?ui:ci(typeof e=="function"?e:mt(e)))}var hi=Array.prototype.filter;function pi(){return Array.from(this.children)}function mi(e){return function(){return hi.call(this.children,e)}}function oe(e){return this.selectAll(e==null?pi:mi(typeof e=="function"?e:mt(e)))}function ae(e){typeof e!="function"&&(e=vt(e));for(var t=this._groups,i=t.length,n=new Array(i),r=0;r<i;++r)for(var s=t[r],o=s.length,a=n[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new h(n,this._parents)}function dt(e){return new Array(e.length)}function le(){return new h(this._enter||this._groups.map(dt),this._parents)}function it(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}it.prototype={constructor:it,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ce(e){return function(){return e}}function di(e,t,i,n,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],n[o]=a):i[o]=new it(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function fi(e,t,i,n,r,s,o){var a,l,c=new Map,u=t.length,d=s.length,E=new Array(u),_;for(a=0;a<u;++a)(l=t[a])&&(E[a]=_=o.call(l,l.__data__,a,t)+"",c.has(_)?r[a]=l:c.set(_,l));for(a=0;a<d;++a)_=o.call(e,s[a],a,s)+"",(l=c.get(_))?(n[a]=l,l.__data__=s[a],c.delete(_)):i[a]=new it(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(E[a])===l&&(r[a]=l)}function _i(e){return e.__data__}function ue(e,t){if(!arguments.length)return Array.from(this,_i);var i=t?fi:di,n=this._parents,r=this._groups;typeof e!="function"&&(e=ce(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=n[c],d=r[c],E=d.length,_=Si(e.call(u,u&&u.__data__,c,n)),w=_.length,jt=a[c]=new Array(w),Kt=o[c]=new Array(w),Ke=l[c]=new Array(E);i(u,d,jt,Kt,Ke,_,t);for(var B=0,lt=0,zt,Wt;B<w;++B)if(zt=jt[B]){for(B>=lt&&(lt=B+1);!(Wt=Kt[lt])&&++lt<w;);zt._next=Wt||null}}return o=new h(o,n),o._enter=a,o._exit=l,o}function Si(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function he(){return new h(this._exit||this._groups.map(dt),this._parents)}function pe(e,t,i){var n=this.enter(),r=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),i==null?s.remove():i(s),n&&r?n.merge(r).order():r}function me(e){for(var t=e.selection?e.selection():e,i=this._groups,n=t._groups,r=i.length,s=n.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=i[l],u=n[l],d=c.length,E=a[l]=new Array(d),_,w=0;w<d;++w)(_=c[w]||u[w])&&(E[w]=_);for(;l<r;++l)a[l]=i[l];return new h(a,this._parents)}function de(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var n=e[t],r=n.length-1,s=n[r],o;--r>=0;)(o=n[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function fe(e){e||(e=gi);function t(d,E){return d&&E?e(d.__data__,E.__data__):!d-!E}for(var i=this._groups,n=i.length,r=new Array(n),s=0;s<n;++s){for(var o=i[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new h(r,this._parents).order()}function gi(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Se(){return Array.from(this)}function ge(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null}function xe(){let e=0;for(let t of this)++e;return e}function Ee(){return!this.node()}function we(e){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var r=t[i],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function xi(e){return function(){this.removeAttribute(e)}}function Ei(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wi(e,t){return function(){this.setAttribute(e,t)}}function yi(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bi(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function Ii(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function ye(e,t){var i=Q(e);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((t==null?i.local?Ei:xi:typeof t=="function"?i.local?Ii:bi:i.local?yi:wi)(i,t))}function ft(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ti(e){return function(){this.style.removeProperty(e)}}function Mi(e,t,i){return function(){this.style.setProperty(e,t,i)}}function vi(e,t,i){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,i)}}function be(e,t,i){return arguments.length>1?this.each((t==null?Ti:typeof t=="function"?vi:Mi)(e,t,i??"")):Ie(this.node(),e)}function Ie(e,t){return e.style.getPropertyValue(t)||ft(e).getComputedStyle(e,null).getPropertyValue(t)}function Ai(e){return function(){delete this[e]}}function Ri(e,t){return function(){this[e]=t}}function Ni(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function Te(e,t){return arguments.length>1?this.each((t==null?Ai:typeof t=="function"?Ni:Ri)(e,t)):this.node()[e]}function Me(e){return e.trim().split(/^|\s+/)}function At(e){return e.classList||new ve(e)}function ve(e){this._node=e,this._names=Me(e.getAttribute("class")||"")}ve.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ae(e,t){for(var i=At(e),n=-1,r=t.length;++n<r;)i.add(t[n])}function Re(e,t){for(var i=At(e),n=-1,r=t.length;++n<r;)i.remove(t[n])}function Li(e){return function(){Ae(this,e)}}function Di(e){return function(){Re(this,e)}}function Pi(e,t){return function(){(t.apply(this,arguments)?Ae:Re)(this,e)}}function Ne(e,t){var i=Me(e+"");if(arguments.length<2){for(var n=At(this.node()),r=-1,s=i.length;++r<s;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof t=="function"?Pi:t?Li:Di)(i,t))}function Oi(){this.textContent=""}function Fi(e){return function(){this.textContent=e}}function Ci(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Le(e){return arguments.length?this.each(e==null?Oi:(typeof e=="function"?Ci:Fi)(e)):this.node().textContent}function Bi(){this.innerHTML=""}function ki(e){return function(){this.innerHTML=e}}function Gi(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function De(e){return arguments.length?this.each(e==null?Bi:(typeof e=="function"?Gi:ki)(e)):this.node().innerHTML}function Hi(){this.nextSibling&&this.parentNode.appendChild(this)}function Pe(){return this.each(Hi)}function Ji(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oe(){return this.each(Ji)}function Fe(e){var t=typeof e=="function"?e:pt(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $i(){return null}function Ce(e,t){var i=typeof e=="function"?e:pt(e),n=t==null?$i:typeof t=="function"?t:tt(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function Vi(){var e=this.parentNode;e&&e.removeChild(this)}function Be(){return this.each(Vi)}function Yi(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xi(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ke(e){return this.select(e?Xi:Yi)}function Ge(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ji(e){return function(t){e.call(this,t,this.__data__)}}function Ki(e){return e.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}})}function zi(e){return function(){var t=this.__on;if(t){for(var i=0,n=-1,r=t.length,s;i<r;++i)s=t[i],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function Wi(e,t,i){return function(){var n=this.__on,r,s=ji(t);if(n){for(var o=0,a=n.length;o<a;++o)if((r=n[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=i),r.value=t;return}}this.addEventListener(e.type,s,i),r={type:e.type,name:e.name,value:t,listener:s,options:i},n?n.push(r):this.__on=[r]}}function He(e,t,i){var n=Ki(e+""),r,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=n[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?Wi:zi,r=0;r<s;++r)this.each(a(n[r],t,i));return this}function Je(e,t,i){var n=ft(e),r=n.CustomEvent;typeof r=="function"?r=new r(t,i):(r=n.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ui(e,t){return function(){return Je(this,e,t)}}function Zi(e,t){return function(){return Je(this,e,t.apply(this,arguments))}}function $e(e,t){return this.each((typeof t=="function"?Zi:Ui)(e,t))}function*Ve(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],r=0,s=n.length,o;r<s;++r)(o=n[r])&&(yield o)}var nt=[null];function h(e,t){this._groups=e,this._parents=t}function Ye(){return new h([[document.documentElement]],nt)}function qi(){return this}h.prototype=Ye.prototype={constructor:h,select:ne,selectAll:re,selectChild:se,selectChildren:oe,filter:ae,data:ue,enter:le,exit:he,join:pe,merge:me,selection:qi,order:de,sort:fe,call:_e,nodes:Se,node:ge,size:xe,empty:Ee,each:we,attr:ye,style:be,property:Te,classed:Ne,text:Le,html:De,raise:Pe,lower:Oe,append:Fe,insert:Ce,remove:Be,clone:ke,datum:Ge,on:He,dispatch:$e,[Symbol.iterator]:Ve};var Qi=Ye;function rt(e){return typeof e=="string"?new h([[document.querySelector(e)]],[document.documentElement]):new h([[e]],nt)}function Xe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tn(e,t){if(e=Xe(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function en(e){return typeof e=="string"?new h([document.querySelectorAll(e)],[document.documentElement]):new h([et(e)],nt)}var Rt=class{constructor(){this.overlayFillColor="orange",this.overlayHoverFillColor="tomato",this.overlayTransparentFillColor="transparent",this.overlaySelectionFillColor="green",this.linkBoxFillColor="#dddddd",this.linkBoxHoverFillColor="#eeeeee",this._overlayBoxesOpacity=.3,this._overlayBoxAdditionalSpace=5.5,this._overlayBoxCornerRadius=2,this._suppliedClasses=new Map,this._suppliedClassesLabelLookup=new Map([["foliation","Blattangabe"],["staffN","Systemangabe"],["measureN","Taktzahlen"],["clef","Schl\xFCssel"],["clef_key","Schl\xFCssel mit Tonart"],["key","Tonart"],["accid","Akzidenzien"],["hyphen","Silbentrennung"]])}createSvg(t,i,n){return Ut(this,null,function*(){if(!t||!i||!n)return;let s=(yield this._fetchSvgFile(t)).getElementsByTagName("svg")[0],o=this._getViewBox(s);for(;s.firstChild;)n.appendChild(s.firstChild);return i.appendChild(n),rt(i).attr("width",o.svgWidth).attr("height",o.svgHeight).attr("viewBox",o.viewBox).attr("preserveAspectRatio","xMidYMid meet").attr("version","1.1").attr("xmlns","https://www.w3.org/2000/svg").attr("xlink","https://www.w3.org/1999/xlink")})}createOverlayGroup(t,i,n,r){if(!t||!i)return;let s=this.getD3SelectionById(t,i);return s.append("g").attr("class",`${r}-overlay-group`),s.select(`g.${r}-overlay-group`).append("rect").attr("width",n.width+this._overlayBoxAdditionalSpace*2).attr("height",n.height+this._overlayBoxAdditionalSpace*2).attr("x",n.x-this._overlayBoxAdditionalSpace).attr("y",n.y-this._overlayBoxAdditionalSpace).attr("rx",this._overlayBoxCornerRadius).attr("fill",this.overlayFillColor).attr("opacity",this._overlayBoxesOpacity).attr("class",`${r}-overlay-group-box`)}fillD3SelectionWithColor(t,i){!t||!i||t.attr("fill",i)}getContainerDimensions(t){if(!t)return{width:void 0,height:void 0};let i=t.nativeElement.clientWidth,n=t.nativeElement.clientHeight;return{width:i,height:n}}getD3SelectionById(t,i){if(!(!t||!i))return t.select("#"+i)}getGroupsBySelector(t,i){if(t)return t.selectAll("g."+i)}getOverlayGroupRectSelection(t,i,n){return!t||!i||!n?void 0:this.getD3SelectionById(t,i).select(`rect.${n}-overlay-group-box`)}getSuppliedClasses(t){return t?(this._suppliedClasses=new Map,this.getGroupsBySelector(t,"supplied").each((n,r,s)=>{let a=rt(s[r]).attr("class").split(" "),l=a[a.indexOf("supplied")+1];if(l){let c=this._suppliedClassesLabelLookup.get(l)||l;this._suppliedClasses.has(c)||this._suppliedClasses.set(c,!0)}}),this._suppliedClasses):void 0}toggleSuppliedClassOpacity(t,i,n){if(!t)return;let r=Array.from(this._suppliedClassesLabelLookup.entries()).find(([l,c])=>c===i)?.[0]||i,s=r?`supplied.${r}`:"supplied",o=this.getGroupsBySelector(t,s),a=n?0:1;o.style("opacity",a)}updateTkkOverlayColor(t,i,n){let r=this._getTkkOverlayColor(t,n);this.fillD3SelectionWithColor(i,r)}_fetchSvgFile(t){return It(t)}_getTkkOverlayColor(t,i){return t?i===F.transparent?this.overlayTransparentFillColor:t.isSelected?this.overlaySelectionFillColor:i===F.hover?this.overlayHoverFillColor:this.overlayFillColor:this.overlayFillColor}_getViewBox(t){let n=rt(t).attr("viewBox").split(" "),r=+n[2],s=+n[3];return new st(r,s)}};Rt=S([g({providedIn:"root"})],Rt);var Nt=class{constructor(){this._bufferSize=1,this._isPrefaceViewSubject=new N(this._bufferSize),this._isPrefaceViewStream$=this._isPrefaceViewSubject.asObservable(),this._isRowTableViewSubject=new N(this._bufferSize),this._isRowTableViewStream$=this._isRowTableViewSubject.asObservable(),this._selectedEditionComplexSubject=new N(this._bufferSize),this._selectedEditionComplexStream$=this._selectedEditionComplexSubject.asObservable(),this._selectedEditionSeriesSubject=new N(this._bufferSize),this._selectedEditionSeriesStream$=this._selectedEditionSeriesSubject.asObservable(),this._selectedEditionSectionSubject=new N(this._bufferSize),this._selectedEditionSectionStream$=this._selectedEditionSectionSubject.asObservable()}getSelectedEditionComplex(){return this._selectedEditionComplexStream$}updateSelectedEditionComplex(t){this._selectedEditionComplexSubject.next(t)}clearSelectedEditionComplex(){this._selectedEditionComplexSubject.next(null)}getSelectedEditionSeries(){return this._selectedEditionSeriesStream$}updateSelectedEditionSeries(t){this._selectedEditionSeriesSubject.next(t)}clearSelectedEditionSeries(){this._selectedEditionSeriesSubject.next(null)}getSelectedEditionSection(){return this._selectedEditionSectionStream$}updateSelectedEditionSection(t){this._selectedEditionSectionSubject.next(t)}clearSelectedEditionSection(){this._selectedEditionSectionSubject.next(null)}getIsPrefaceView(){return this._isPrefaceViewStream$}updateIsPrefaceView(t){this._isPrefaceViewSubject.next(t)}clearIsPrefaceView(){this._isPrefaceViewSubject.next(null)}getIsRowTableView(){return this._isRowTableViewStream$}updateIsRowTableView(t){this._isRowTableViewSubject.next(t)}clearIsRowTableView(){this._isRowTableViewSubject.next(null)}};Nt=S([g({providedIn:"root"})],Nt);var q=class{constructor(t){this._mapSeries=({series:i,sections:n})=>({series:f["SERIES_"+i],sections:n.map(s=>this._mapSection(s,i))}),this._mapSection=({section:i,complexTypes:n,disabled:r},s)=>({section:s==="3"&&i==="5"?f.SERIES_3_SECTION_5:f["SECTION_"+i],complexTypes:{opus:this._mapComplexItems(n.opus),mnr:this._mapComplexItems(n.mnr)},disabled:r}),this._mapComplexItems=i=>i.map(({complex:n,disabled:r})=>({complex:ot.getEditionComplexById(n),disabled:r})),t&&(this.outline=t.map(this._mapSeries))}};var V=class{};var at;(function(e){e.measure="Takt",e.system="System",e.tka="Anmerkung"})(at||(at={}));var F;(function(e){e.hover="hover",e.fill="fill",e.transparent="transparent"})(F||(F={}));var Lt=class{constructor(t,i,n){this.type=t,this.id=i,this.typeKey=this._getEnumKeyFromValue(t),this.isSelected=n||!1}_getEnumKeyFromValue(t){return Object.keys(at).find(n=>at[n]===t)}};var P=class{},Y=class{};function v(e,t){if(!Number.isNaN(e))return+(Math.round(+(e+"e"+t))+"e-"+t)}var x=class{constructor(t,i){this.x=t,this.y=i}},_t=class{constructor(t,i){this.START_POINT=t,this.END_POINT=i}},Dt=class{constructor(t,i,n){let{UPPER_LEFT_VERTEX:r,LOWER_RIGHT_VERTEX:s}=t;this.CENTERED_X_POSITION=(r.x+s.x)/2;let o=n?-i:i;this.CENTERED_Y_POSITION=(r.y+s.y)/2-o}},Pt=class{constructor(t,i){this.SEGMENT_LABEL_ARRAY=[t,i?` ${i}`:""],this.SEGMENT_LABEL=this.SEGMENT_LABEL_ARRAY.join(" "),this.SEGMENT_LABEL_OFFSET=i?5:0}},Ot=class{constructor(t,i,n,r){this.systems=i,this.sectionPartition=n,this.segmentOffsetCorrection=r;let{startX:s,startY:o,endX:a,endY:l}=this._calculateVertices(t);this.UPPER_LEFT_VERTEX=new x(s,o),this.UPPER_RIGHT_VERTEX=new x(a,o),this.LOWER_RIGHT_VERTEX=new x(a,l),this.LOWER_LEFT_VERTEX=new x(s,l),this.VERTICES_AS_STRING=this._getSegmentVerticesAsString()}_calculateVertices(t){let i=this._calculateX(t,!0),n=this._calculateX(t,!1),r=this._calculateY(t,!0),s=this._calculateY(t,!1);return{startX:i,startY:r,endX:n,endY:s}}_calculateX(t,i){let n=v(this.systems.SYSTEMS_DIMENSIONS.SYSTEMS_WIDTH/this.sectionPartition,2),r=t.position&&t.position<=this.sectionPartition?t.position-1:0,s=this.systems.SYSTEMS_DIMENSIONS.START_X,o=this.segmentOffsetCorrection/2,a=s+r*n+o,l=i?0:n-this.segmentOffsetCorrection;return v(a+l,2)}_calculateY(t,i){let n=i?t.startSystem-1:t.endSystem-1,r=this.systems.SYSTEMS_LINES.SYSTEMS_ARRAYS[n],s=0;switch(t.relativeToSystem){case"below":s=20;break;case"above":s=-20;break;default:s=0}let o=i?r.at(0).START_POINT.y:r.at(-1).END_POINT.y,a=this.segmentOffsetCorrection*(i?-1:1)+s;return v(o+a,2)}_getSegmentVerticesAsString(){return[this.UPPER_LEFT_VERTEX,this.UPPER_RIGHT_VERTEX,this.LOWER_RIGHT_VERTEX,this.LOWER_LEFT_VERTEX,this.UPPER_LEFT_VERTEX].map(i=>`${i.x} ${i.y}`).join(" ")}},Ft=class{constructor(t,i,n){this.systems=i,this.segmentOffsetCorrection=n,this.sectionPartition=t.sectionPartition??1,this._getContentSections(t)}_getContentSections(t){if(!t.sections){console.error("No sections array in content",t);return}if(t.sections.length>this.sectionPartition){console.error("Sections array is bigger than sectionPartition");return}if(this.systems.NUMBER_OF_SYSTEMS===0){console.error("No systems in folio");return}t.sections.forEach((i,n)=>{this._setProperties(t,i)})}_setProperties(t,i){let{complexId:n,sheetId:r,selectable:s=!0,reversed:o=!1,linkTo:a="",sigle:l,sigleAddendum:c}=t;this.section=i;let u=new Pt(l,c);this.vertices=new Ot(i,this.systems,this.sectionPartition,this.segmentOffsetCorrection);let d=new Dt(this.vertices,u.SEGMENT_LABEL_OFFSET,o);Object.assign(this,{complexId:n,sheetId:r,sigle:l,sigleAddendum:c,selectable:s,reversed:o,linkTo:a,segmentLabelArray:u.SEGMENT_LABEL_ARRAY,segmentLabel:u.SEGMENT_LABEL,centeredXPosition:d.CENTERED_X_POSITION,centeredYPosition:d.CENTERED_Y_POSITION})}},Ct=class{constructor({initialOffsetX:t,initialOffsetY:i,formatX:n,formatY:r,factor:s},o){this.FOLIO_ID=o,this.SHEET_WIDTH=n*s,this.SHEET_HEIGHT=r*s,this.OFFSET=new x(t,i),this.UPPER_LEFT_CORNER=this.OFFSET,this.LOWER_RIGHT_CORNER=new x(this.SHEET_WIDTH,this.SHEET_HEIGHT)}},M=class M{constructor(t){this.sheet=t,this.UPPER_MARGIN=this._calculateSheetMargin(this.sheet.SHEET_HEIGHT,M.VERTICAL_MARGIN_FACTOR),this.LOWER_MARGIN=this.UPPER_MARGIN,this.LEFT_MARGIN=this._calculateSheetMargin(this.sheet.SHEET_WIDTH,M.HORIZONTAL_MARGIN_FACTOR),this.RIGHT_MARGIN=this._calculateSheetMargin(this.sheet.SHEET_WIDTH,M.HORIZONTAL_MARGIN_FACTOR/2),this.HORIZONTAL_MARGINS=this.LEFT_MARGIN+this.RIGHT_MARGIN,this.VERTICAL_MARGINS=this.UPPER_MARGIN+this.LOWER_MARGIN}_calculateSheetMargin(t,i){return v(t*i,2)}};M.HORIZONTAL_MARGIN_FACTOR=1/6,M.VERTICAL_MARGIN_FACTOR=.05;var Bt=M,kt=class{constructor(t,i){this.sheet=t,this.systemsMargins=i;let{SHEET_WIDTH:n,SHEET_HEIGHT:r,UPPER_LEFT_CORNER:s}=this.sheet,{HORIZONTAL_MARGINS:o,VERTICAL_MARGINS:a,LEFT_MARGIN:l,UPPER_MARGIN:c}=this.systemsMargins;this.SYSTEMS_WIDTH=n-o,this.SYSTEMS_HEIGHT=r-a,this.START_X=s.x+l,this.START_Y=s.y+c,this.END_X=this.START_X+this.SYSTEMS_WIDTH,this.END_Y=this.START_Y+this.SYSTEMS_HEIGHT}},Gt=class{constructor(t,i){this.yArray=t,this.systemsDimensions=i,this._calculateSystemLine=n=>{let{START_X:r,END_X:s}=this.systemsDimensions;return new _t(new x(r,n),new x(s,n))},this.SYSTEMS_ARRAYS=this._calculateSystemsArrays()}_calculateSystemsArrays(){return this.yArray.map(t=>t.map(this._calculateSystemLine))}},C=class C{constructor(t,i,n,r){this.yArray=t,this.systemsMargins=i,this.systemsDimensions=n,this.zoomFactor=r,this.SYSTEMS_LABELS_ARRAY=this._calculateSystemsLabelArray()}_calculateSystemsLabelArray(){let t=v(this.systemsDimensions.START_X-this.systemsMargins.LEFT_MARGIN*C.LABEL_START_X_OFFSET_FACTOR,2),i=v(C.LABEL_START_Y_OFFSET_FACTOR/this.zoomFactor,2);return this.yArray.map(n=>{let r=n[0]-i;return new x(t,r)})}};C.LABEL_START_X_OFFSET_FACTOR=.6,C.LABEL_START_Y_OFFSET_FACTOR=3;var Ht=C,Jt=class{constructor(t,i,n){this.lineSpaceFactor=1.5,this.NUMBER_OF_SYSTEMS=i?parseInt(i,10):0,this.ZOOM_FACTOR=n,this.SYSTEMS_MARGINS=new Bt(t),this.SYSTEMS_DIMENSIONS=new kt(t,this.SYSTEMS_MARGINS);let r=this._calculateSystemYArray();this.SYSTEMS_LINES=new Gt(r,this.SYSTEMS_DIMENSIONS),this.SYSTEMS_LABELS=new Ht(r,this.SYSTEMS_MARGINS,this.SYSTEMS_DIMENSIONS,this.ZOOM_FACTOR)}_calculateSystemYArray(){let t=this.SYSTEMS_DIMENSIONS.SYSTEMS_HEIGHT/this.NUMBER_OF_SYSTEMS;return Array.from({length:this.NUMBER_OF_SYSTEMS},(n,r)=>{let s=v(this.SYSTEMS_DIMENSIONS.START_Y+r*t,2);return this._calculateSystemLineArray(s)})}_calculateSystemLineArray(t){return Array.from({length:5},(n,r)=>t+r*this.lineSpaceFactor*this.ZOOM_FACTOR)}},$t=class{constructor(t,i,n=0){this.SHEET=new Ct(t,i.folioId),this.SYSTEMS=new Jt(this.SHEET,i.systems,t.factor),this.CONTENT_SEGMENTS=i.content.map(r=>new Ft(r,this.SYSTEMS,n))}};var Vt=class{constructor(t){this.folioId=t.FOLIO_ID,this.upperLeftCorner=t.UPPER_LEFT_CORNER,this.lowerRightCorner=t.LOWER_RIGHT_CORNER}},Yt=class{constructor(t){this.systemsLabelPositions=t.SYSTEMS_LABELS.SYSTEMS_LABELS_ARRAY,this.systemsLines=t.SYSTEMS_LINES.SYSTEMS_ARRAYS}},St=class{constructor(t){this.complexId=t.complexId,this.sheetId=t.sheetId,this.linkTo=t.linkTo,this.selectable=t.selectable,this.reversed=t.reversed,this.segmentVertices=t.vertices?.VERTICES_AS_STRING,this.segmentLabelArray=t.segmentLabelArray,this.segmentLabel=t.segmentLabel,this.centeredXPosition=t.centeredXPosition,this.centeredYPosition=t.centeredYPosition}},Xt=class{constructor(t){this.sheet=new Vt(t.SHEET),this.systems=new Yt(t.SYSTEMS),this.contentSegments=t.CONTENT_SEGMENTS.map(i=>new St(i))}};var X=class{};var j=class{};var K=class{};var z=class{};var W=class{};var U=class{};var Z=class{};var O=class{},D=class{};var st=class{constructor(t,i){this.svgWidth="100%",this.svgHeight="100%",this.viewBox="0 0 "+t+" "+i}};var je={editionComplexes:[{M22:{titleStatement:{title:"Studienkomposition f\xFCr Klavier/Streichquartett",catalogueType:"MNR",catalogueNumber:"22"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"21. M\xE4rz 2024"},pubStatement:{series:"2",section:"2a"}}},{M30:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"30"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"19. Januar 2024"},pubStatement:{series:"2",section:"2a"}}},{M31:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"31"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"19. Januar 2024"},pubStatement:{series:"2",section:"2a"}}},{M34:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"34"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Mai 2023"},pubStatement:{series:"2",section:"2a"}}},{M35_42:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"35/42"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"8. Februar 2024"},pubStatement:{series:"2",section:"2a"}}},{M36:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"36"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"14. August 2024"},pubStatement:{series:"2",section:"2a"}}},{M37:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"37"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"19. Januar 2024"},pubStatement:{series:"2",section:"2a"}}},{M38:{titleStatement:{title:"Studienkomposition f\xFCr Klavier",catalogueType:"MNR",catalogueNumber:"38"},respStatement:{editors:[{name:"Michael Matter",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"15. August 2024"},pubStatement:{series:"2",section:"2a"}}},{M133:{titleStatement:{title:"\u201EDies ist ein Lied\u201C",catalogueType:"MNR",catalogueNumber:"133"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M134:{titleStatement:{title:"\u201EIm Windesweben\u201C",catalogueType:"MNR",catalogueNumber:"134"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M135:{titleStatement:{title:"\u201EAn Bachesranft\u201C",catalogueType:"MNR",catalogueNumber:"135"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M136:{titleStatement:{title:"\u201EIm Morgentaun\u201C",catalogueType:"MNR",catalogueNumber:"136"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M137:{titleStatement:{title:"\u201EKahl reckt der Baum\u201C",catalogueType:"MNR",catalogueNumber:"137"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M138:{titleStatement:{title:"<em>Eingang</em> (\u201EWelt der Gestalten\u201C)",catalogueType:"MNR",catalogueNumber:"138"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M139:{titleStatement:{title:"\u201ENoch zwingt mich Treue\u201C",catalogueType:"MNR",catalogueNumber:"139"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M140:{titleStatement:{title:"\u201EJa Heil und Dank dir\u201C",catalogueType:"MNR",catalogueNumber:"140"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id=3"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M141:{titleStatement:{title:"\u201ESo ich traurig bin\u201C",catalogueType:"MNR",catalogueNumber:"141"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M142:{titleStatement:{title:"\u201EIhr tratet zu dem Herde\u201C",catalogueType:"MNR",catalogueNumber:"142"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M143:{titleStatement:{title:"\u201EErwachen aus dem tiefsten Traumesscho\xDFe\u201C",catalogueType:"MNR",catalogueNumber:"143"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M144:{titleStatement:{title:"<em>Kunfttag I</em> (\u201EDem bist du Kind\u201C)",catalogueType:"MNR",catalogueNumber:"144"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M145:{titleStatement:{title:"<em>Trauer I</em> (\u201ESo wart bis ich dies dir noch k\xFCnde\u201C)",catalogueType:"MNR",catalogueNumber:"145"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M146:{titleStatement:{title:"\u201EDas lockere Saatgefilde\u201C",catalogueType:"MNR",catalogueNumber:"146"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{M212:{titleStatement:{title:"\u201EDer Tag ist vergangen\u201C",catalogueType:"MNR",catalogueNumber:"212"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{M213:{titleStatement:{title:"\u201ESchien mir\u2019s, als ich sah die Sonne\u201C",catalogueType:"MNR",catalogueNumber:"213"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{M216:{titleStatement:{title:"Gleich und Gleich (\u201EEin Blumengl\xF6ckchen\u201C)",catalogueType:"MNR",catalogueNumber:"216"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{M217:{titleStatement:{title:"Die geheimnisvolle Fl\xF6te (\u201EAn einem Abend\u201C)",catalogueType:"MNR",catalogueNumber:"217"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"---"},pubStatement:{series:"1",section:"5"}}},{OP3:{titleStatement:{title:"<em>F\xFCnf Lieder aus</em> Der siebente Ring <em>von Stefan George</em>",catalogueType:"OPUS",catalogueNumber:"3"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{OP4:{titleStatement:{title:"<em>F\xFCnf Lieder nach Gedichten von Stefan George</em>",catalogueType:"OPUS",catalogueNumber:"4"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Juni 2024"},pubStatement:{series:"1",section:"5"}}},{OP12:{titleStatement:{title:"<em>Vier Lieder</em>",catalogueType:"OPUS",catalogueNumber:"12"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"9. April 2024"},pubStatement:{series:"1",section:"5"}}},{OP19:{titleStatement:{title:"<em>Zwei Lieder f\xFCr gemischten Chor und Ensemble</em>",catalogueType:"OPUS",catalogueNumber:"19"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"3"}}},{OP22:{titleStatement:{title:"Quartett f\xFCr Geige, Klarinette, Tenorsaxophon und Klavier",catalogueType:"OPUS",catalogueNumber:"22"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"2"}}},{OP23:{titleStatement:{title:"<em>Drei Ges\xE4nge aus</em> Viae Inviae <em>von Hildegard Jone</em>",catalogueType:"OPUS",catalogueNumber:"23"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"17. April 2024"},pubStatement:{series:"1",section:"5"}}},{OP24:{titleStatement:{title:"<em>Konzert f\xFCr neun Instrumente</em>",catalogueType:"OPUS",catalogueNumber:"24"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"1"}}},{OP25:{titleStatement:{title:"<em>Drei Lieder nach Gedichten von Hildegard Jone</em>",catalogueType:"OPUS",catalogueNumber:"25"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"17. April 2024"},pubStatement:{series:"1",section:"5"}}},{OP27:{titleStatement:{title:"Variationen f\xFCr Klavier",catalogueType:"OPUS",catalogueNumber:"27"},respStatement:{editors:[{name:"Thomas Ahrend",homepage:"https://www.anton-webern.ch/index.php?id"}],lastModified:"6. Mai 2023"},pubStatement:{series:"1",section:"2"}}}]};var A,R,ot=(R=class{static initializeEditionComplexesList(){let t=A._fetchEditionComplexesData();A.setEditionComplexesList(t)}static getEditionComplexById(t){return A._editionComplexesList[t.toUpperCase()]}static getEditionComplexesList(){return A._editionComplexesList}static setEditionComplexesList(t){A._editionComplexesList=t}static _fetchEditionComplexesData(){let t=je,i={};return t.editionComplexes.forEach(n=>{Object.entries(n).forEach(([r,s])=>{i[r]=new $(s.titleStatement,s.respStatement,s.pubStatement)})}),i}},A=R,R._editionComplexesList={},R);ot=A=S([g({providedIn:"root"})],ot);export{te as a,f as b,at as c,F as d,Lt as e,$t as f,Xt as g,st as h,ot as i,ze as j,We as k,Ue as l,Et as m,wt as n,yt as o,Q as p,tt as q,Mt as r,vt as s,Ie as t,Qi as u,rt as v,tn as w,en as x,Rt as y,Nt as z};
